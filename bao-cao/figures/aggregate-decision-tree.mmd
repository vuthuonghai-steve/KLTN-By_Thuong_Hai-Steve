flowchart TD
    Start([Entity t·ª´ ER Diagram]) --> Q1{Nhi·ªÅu Collection<br/>FK tr·ªè v√†o entity?}

    Q1 -->|C√≥| Root
    Q1 -->|Kh√¥ng| Q2{Entity c√≥<br/>Timestamps ri√™ng?}

    Q2 -->|C√≥| Root
    Q2 -->|Kh√¥ng| Q3{Query entity<br/>n√†y ƒë·ªôc l·∫≠p?}

    Q3 -->|C√≥| Root
    Q3 -->|Kh√¥ng| Q4{Size c√≥ th·ªÉ<br/>v∆∞·ª£t gi·ªõi h·∫°n?}

    Q4 -->|C√≥| Root
    Q4 -->|Kh√¥ng| Embed

    Root[‚úÖ AGGREGATE ROOT<br/>Payload Collection ƒë·ªôc l·∫≠p]
    Embed[üì¶ EMBEDDED DOC<br/>Nh√∫ng v√†o parent]

    style Root fill:#e8f5e9,stroke:#2e7d32,stroke-width:2px
    style Embed fill:#fff3e0,stroke:#ef6c00,stroke-width:2px
