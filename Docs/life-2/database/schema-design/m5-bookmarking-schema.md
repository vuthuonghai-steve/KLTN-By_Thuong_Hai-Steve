# Bookmarking - Schema Design

> Data Architect Schema cho PayloadCMS/MongoDB từ Contract `Docs/life-2/diagrams/class-diagrams/m5-bookmarking/class-m5-bookmarking.yaml`.

## 1. Module Overview
- **Mã hệ thống**: `M5`
- **Mô tả ngắn**: Quản lý bộ sưu tập và dấu trang cá nhân của user. 

## 2. Database Design (Collections)

### 2.1 Collection: `bookmarkCollections`
- **Type**: `Aggregate Root (Reference)`
- **Reason**: Aggregate độc lập với user, giúp lưu trữ cây thư mục collection cá nhân. Một collection default sẽ được sinh ra (isDefault = true).
- **Fields List**:
| Field Name | Type | Index? | Mô tả / Range |
|------------|------|--------|---------------|
| `ownerId`  | `relationship` | `true` | Tham chiếu tới users |
| `name`     | `text` | `true` | Tên của collection |
| `isDefault`| `checkbox` | `false`| Mặc định là 'Tất cả' |
| `createdAt`| `date` | `true` | |
| `updatedAt`| `date` | `false`| |

### 2.2 Collection: `bookmarks`
- **Type**: `Aggregate Root (Reference)`
- **Reason**: 1 collection có thể chứa hàng chục nghìn bài bookmarks, việc embed array vào user hay collection đều rủi ro vượt 16MB. Tạo collection `bookmarks` Reference tới `posts`, `users`, `bookmark-collections` để scale vô hạn.
- **Fields List**:
| Field Name | Type | Index? | Mô tả / Range |
|------------|------|--------|---------------|
| `userId`     | `relationship` | `true` | |
| `postId`     | `relationship` | `true` | |
| `collectionId`| `relationship` | `true` | Nằm trong mục nào |
| `savedAt`    | `date` | `true` | Ngày save, dùng sort |

---
*Generated by schema-design-analyst AI Agent.*
