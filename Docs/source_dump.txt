# ==================================================
# Path: /home/steve/Documents/KLTN/Docs
# Detected tech: Unknown
# ==================================================

## DIRECTORY STRUCTURE
```
Docs/
‚îú‚îÄ‚îÄ diagram/
‚îÇ   ‚îú‚îÄ‚îÄ activity-diagram-research.md
‚îÇ   ‚îú‚îÄ‚îÄ class-diagram-research.md
‚îÇ   ‚îú‚îÄ‚îÄ object-diagram-research.md
‚îÇ   ‚îú‚îÄ‚îÄ sequence-diagram-research.md
‚îÇ   ‚îú‚îÄ‚îÄ use-case-diagram-research.md
‚îÇ   ‚îî‚îÄ‚îÄ y-tuong.md
‚îú‚îÄ‚îÄ life-1/
‚îÇ   ‚îú‚îÄ‚îÄ 01-vision/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FR/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ feature-map-and-priority.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ requirements-srs.md
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ product-vision.md
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user-personas.md
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user-stories.md
‚îÇ   ‚îú‚îÄ‚îÄ 02-decisions/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ technical-decisions.md
‚îÇ   ‚îú‚îÄ‚îÄ 03-research/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ news-feed-algorithm.md
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ sse-nextjs.md
‚îÇ   ‚îú‚îÄ‚îÄ arhitacture-V2.md
‚îÇ   ‚îú‚îÄ‚îÄ artkitacture.md
‚îÇ   ‚îî‚îÄ‚îÄ lifecycle-checklist-and-folder-structure.md
‚îú‚îÄ‚îÄ life-2/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api-design.md
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ api-spec.md
‚îÇ   ‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ diagrams/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UseCase/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ use-case-diagram.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ use-case-m1-auth-profile.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ use-case-m2-content-engine.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ use-case-m3-discovery-feed.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ use-case-m4-engagement-connections.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ use-case-m5-bookmarking.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ use-case-m6-notifications-moderation.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ use-case-overview.md
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ activity-diagrams/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m1-a1-registration.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m1-a2-login.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m1-a3-verification.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m1-a4-recovery.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m1-a5-onboarding.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m1-auth-profile-summary.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m2-a1-editor-pipeline.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m2-a2-media-handler.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m2-a3-post-integrity.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m2-a4-visibility.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m2-content-engine-summary.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m3-a1-feed-assembler.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m3-a2-search-engine.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m3-a3-discovery-recommendation.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m3-discovery-feed-summary.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m4-a1-friendship-handshake.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m4-a2-engagement-logic.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m4-a3-connection-privacy.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m4-engagement-connections-summary.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m5-a1-bookmark-persistence.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m5-a2-collection-orchestrator.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m5-bookmarking-summary.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m6-a1-sse-dispatcher.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m6-a2-report-pipeline.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m6-a3-enforcement-action.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ m6-notifications-moderation-summary.md
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ research/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sequence-diagrams/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ detailed-m1-auth.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ detailed-m2-content.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ detailed-m3-discovery.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ detailed-m4-engagement.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ detailed-m5-bookmarking.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ detailed-m6-safety.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ global-flows.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ sequence-diagram.md
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ class-diagram.md
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ er-diagram.md
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ flow-diagram.md
‚îÇ   ‚îú‚îÄ‚îÄ specs/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.md
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m1-auth-profile-spec.md
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m2-content-engine-spec.md
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m3-discovery-feed-spec.md
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m4-engagement-spec.md
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m5-bookmarking-spec.md
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ m6-notifications-moderation-spec.md
‚îÇ   ‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ wireframes/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ .gitkeep
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m1-auth-profile.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m2-content-engine.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m3-discovery-feed.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m4-engagement.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ m5-bookmarking.md
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ m6-notifications-moderation.md
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ui-frame-design.md
‚îÇ   ‚îú‚îÄ‚îÄ README.md
‚îÇ   ‚îî‚îÄ‚îÄ index.md
‚îú‚îÄ‚îÄ life-3/
‚îÇ   ‚îú‚îÄ‚îÄ ai-prompt-refs/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ .gitkeep
‚îÇ   ‚îú‚îÄ‚îÄ architecture/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ folder-structure.md
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tech-choices.md
‚îÇ   ‚îú‚îÄ‚îÄ setup/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ deployment-guide.md
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ env-setup.md
‚îÇ   ‚îú‚îÄ‚îÄ sprint-logs/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ .gitkeep
‚îÇ   ‚îî‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ life-4/
‚îÇ   ‚îú‚îÄ‚îÄ archive/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ decisions-log.md
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ lessons-learned.md
‚îÇ   ‚îú‚îÄ‚îÄ release/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ deployment-checklist.md
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ release-notes.md
‚îÇ   ‚îú‚îÄ‚îÄ verification/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ spec-coverage.md
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ test-report.md
‚îÇ   ‚îî‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ check.list.md
‚îú‚îÄ‚îÄ skill-sync-runbook.md
‚îî‚îÄ‚îÄ temp.md
```

## FILE CONTENTS

### skill-sync-runbook.md
```md
# Skill Sync Runbook

## Scope

Runbook dong bo cho 2 skill:
- `skill-architect`
- `skill-builder`

## Canonical Mapping

- `skill-architect`: canonical source la `.agent/skills/skill-architect`
- `skill-builder`: canonical source la `.codex/skills/skill-builder`

## One-way Sync Commands

### 1) skill-architect (`.agent` -> `.codex`)

```bash
rsync -av .agent/skills/skill-architect/ .codex/skills/skill-architect/
```

### 2) skill-builder (`.codex` -> `.agent`)

```bash
rsync -av .codex/skills/skill-builder/ .agent/skills/skill-builder/
```

## Parity Verification (Mandatory)

Sau khi sync, bat buoc kiem tra parity:

```bash
diff -qr .codex/skills/skill-architect .agent/skills/skill-architect
diff -qr .codex/skills/skill-builder .agent/skills/skill-builder
```

Ket qua hop le:
- Khong co output khac biet.

## Builder Validation Commands

### Non-strict (compatibility check)

```bash
python3 .codex/skills/skill-builder/scripts/validate_skill.py \
  .codex/skills/skill-builder \
  --design .skill-context/skill-builder/design.md
```

### Strict context coverage (gate)

```bash
python3 .codex/skills/skill-builder/scripts/validate_skill.py \
  .codex/skills/skill-builder \
  --design .skill-context/skill-builder/design.md \
  --strict-context
```

## Notes

- Uu tien tai lieu tieng Viet trong metadata/mo ta khi co conflict wording.
- Luon ghi ket qua sync + validation vao `.skill-context/{skill-name}/build-log.md`.

```

### temp.md
```md
ƒê·ªÉ thuy·∫øt ph·ª•c gi·∫£ng vi√™n h∆∞·ªõng d·∫´n trong bu·ªïi t·ªëi mai, b·∫°n c·∫ßn th·ªÉ hi·ªán m√¨nh l√† m·ªôt ng∆∞·ªùi c√≥ **t∆∞ duy h·ªá th·ªëng** v√† **nƒÉng l·ª±c th·ª±c thi** c·ª±c k·ª≥ m·∫°nh b√©n. Gi·∫£ng vi√™n th∆∞·ªùng lo l·∫Øng nh·∫•t hai ƒëi·ªÅu: *T√≠nh h√†n l√¢m (khoa h·ªçc)* v√†  *Kh·∫£ nƒÉng ho√†n th√†nh (ti·∫øn ƒë·ªô)* .

D·ª±a tr√™n tinh th·∫ßn qu·∫ª **Thi√™n H·ªèa ƒê·ªìng Nh√¢n** (s·ª± ƒë·ªìng thu·∫≠n gi·ªØa ng∆∞·ªùi h∆∞·ªõng d·∫´n v√† ng∆∞·ªùi th·ª±c hi·ªán), ƒë√¢y l√† chi·∫øn l∆∞·ª£c "t·∫•n c√¥ng" gi√∫p b·∫°n nh·∫≠n ƒë∆∞·ª£c c√°i g·∫≠t ƒë·∫ßu:

### 1. Thay ƒë·ªïi c√°ch ƒë·∫∑t t√™n ƒë·ªÅ t√†i (T·∫°o s·ª± chuy√™n nghi·ªáp)

Thay v√¨ n√≥i "·ª®ng d·ª•ng AI ph√°t tri·ªÉn m·∫°ng x√£ h·ªôi", h√£y s·ª≠ d·ª•ng t√™n g·ªçi k·ªπ thu·∫≠t v√† c·ª• th·ªÉ h∆°n:

* **T√™n ƒë·ªÅ t√†i g·ª£i √Ω** : *"Nghi√™n c·ª©u v√† x√¢y d·ª±ng Agentic Workflow t·ªëi ∆∞u h√≥a v√≤ng ƒë·ªùi ph√°t tri·ªÉn ·ª©ng d·ª•ng (SDLC) m·∫°ng x√£ h·ªôi hi·ªán ƒë·∫°i."*
* **T·∫°i sao?** : N√≥ cho th·∫•y b·∫°n kh√¥ng ch·ªâ "d√πng ChatGPT ƒë·ªÉ vi·∫øt code", m√† b·∫°n ƒëang x√¢y d·ª±ng m·ªôt **h·ªá th·ªëng c√°c ƒë·∫∑c k·ªπ (Agent Skills)** c√≥ kh·∫£ nƒÉng t·ª± v·∫≠n h√†nh v√† ph·ªëi h·ª£p.

### 2. C·∫•u tr√∫c n·ªôi dung thuy·∫øt ph·ª•c (M√¥ h√¨nh 3 ch∆∞∆°ng)

**B∆∞·ªõc 1: ƒê·∫∑t v·∫•n ƒë·ªÅ (N√™u b·∫≠t xu h∆∞·ªõng 2026)**

* "Th∆∞a th·∫ßy/c√¥, hi·ªán nay AI kh√¥ng c√≤n l√† c√¥ng c·ª• h·ªó tr·ª£ g√µ code ƒë∆°n thu·∫ßn. Xu h∆∞·ªõng c·ªßa nƒÉm 2026 l√† **Agentic AI** - c√°c t√°c t·ª≠ c√≥ kh·∫£ nƒÉng suy nghƒ© v√† th·ª±c hi·ªán c√°c b∆∞·ªõc ph·ª©c t·∫°p. Em mu·ªën nghi√™n c·ª©u c√°ch AI tham gia v√†o vai tr√≤ **Ki·∫øn tr√∫c s∆∞** v√† **L·∫≠p tr√¨nh vi√™n** trong m·ªôt d·ª± √°n th·ª±c t·∫ø."

**B∆∞·ªõc 2: Gi·∫£i ph√°p th·ª±c thi (T√≠nh kh·∫£ thi cao)** B·∫°n h√£y tr√¨nh b√†y 3 "Module Agent" m√† b·∫°n s·∫Ω x√¢y d·ª±ng:

* **Design Agent** : Chuy·ªÉn √Ω t∆∞·ªüng th√†nh S∆° ƒë·ªì lu·ªìng (Markdown/Mermaid) v√† Wireframe.
* **Backend Agent** : T·ª± ƒë·ªông ph√¢n t√≠ch Database schema v√† sinh API (S·ª≠ d·ª•ng c√°c c√¥ng c·ª• nh∆∞ PayloadCMS m√† b·∫°n ƒëang d√πng ho·∫∑c c√°c Framework hi·ªán ƒë·∫°i).
* **Integration Agent** : H·ªó tr·ª£ t√≠ch h·ª£p API v√†o Frontend.
* *Nh·∫•n m·∫°nh* : "Em kh√¥ng l√†m th·ªß c√¥ng, em x√¢y d·ª±ng **Skill/Workflow** ƒë·ªÉ AI l√†m. ƒêi·ªÅu n√†y gi√∫p tƒÉng t·ªëc ƒë·ªô ph√°t tri·ªÉn l√™n g·∫•p 5-10 l·∫ßn, ƒë·∫£m b·∫£o k·ªãp h·∫°n 23/02."

**B∆∞·ªõc 3: Cam k·∫øt ti·∫øn ƒë·ªô (Gi·∫£i t·ªèa lo l·∫Øng v·ªÅ th·ªùi gian)**

* ƒê∆∞a ra m·ªôt l·ªô tr√¨nh (Timeline) c·ª±c k·ª≥ chi ti·∫øt (n√™n in ra ho·∫∑c slide):
  * **04/02 - 10/02** : Ho√†n thi·ªán Core Agent Skills.
  * **11/02 - 18/02** : Build s·∫£n ph·∫©m M·∫°ng x√£ h·ªôi demo t·ª´ ch√≠nh c√°c Skill ƒë√≥.
  * **19/02 - 23/02** : ƒê√≥ng g√≥i b√°o c√°o.

### 3. B√≠ thu·∫≠t t·ª´ "Kinh D·ªãch" d√†nh cho bu·ªïi g·∫∑p mai:

* **S√°t c√°nh c√πng Gi·∫£ng vi√™n (ƒê·ªìng Nh√¢n)** : ƒê·ª´ng tr√¨nh b√†y nh∆∞ m·ªôt ng∆∞·ªùi ƒëi xin ph√©p. H√£y tr√¨nh b√†y nh∆∞ m·ªôt c·ªông s·ª± ƒëang ƒë·ªÅ xu·∫•t m·ªôt h∆∞·ªõng nghi√™n c·ª©u m·ªõi m·∫ª cho khoa. H√£y h·ªèi: "Em mu·ªën qua kho√° lu·∫≠n n√†y ƒë√≥ng g√≥p m·ªôt quy tr√¨nh ph√°t tri·ªÉn m·ªõi, Th·∫ßy/C√¥ th·∫•y ƒëi·ªÉm n√†o c·∫ßn em t·ªëi ∆∞u th√™m kh√¥ng?"
* **S·ª≠ d·ª•ng "Th·ªßy" v√† "Kim"** :
* **Kim (S·∫Øc b√©n)** : Tr√¨nh b√†y ng·∫Øn g·ªçn, s√∫c t√≠ch, ƒëi th·∫≥ng v√†o Tech-stack (Next.js, AI Agents, PayloadCMS).
* **Th·ªßy (Linh ho·∫°t)** : N·∫øu gi·∫£ng vi√™n ch√™ ƒë·ªÅ t√†i qu√° r·ªông, h√£y s·∫µn s√†ng "co" l·∫°i: "Em s·∫Ω t·∫≠p trung v√†o vi·ªác **t·ª± ƒë·ªông h√≥a lu·ªìng API v√† k·∫øt n·ªëi Frontend** - ƒë√¢y l√† ph·∫ßn th√°ch th·ª©c nh·∫•t c·ªßa m·ªôt m·∫°ng x√£ h·ªôi".

### 4. Chu·∫©n b·ªã "V≈© kh√≠" mang theo:

1. **M·ªôt s∆° ƒë·ªì Mermaid** (ƒë√£ v·∫Ω s·∫µn b·∫±ng Markdown) cho th·∫•y lu·ªìng ph√°t tri·ªÉn m·∫°ng x√£ h·ªôi c·ªßa b·∫°n.
2. **M·ªôt b·∫£n demo nh·ªè** : show cho th·∫ßy th·∫•y m·ªôt v√≠ d·ª• "Prompt to Code" ho·∫∑c "Prompt to API" m√† b·∫°n ƒë√£ th·ª≠ nghi·ªám th√†nh c√¥ng.

 **L∆∞u √Ω quan tr·ªçng** : NƒÉm 2026 l√† nƒÉm **B√≠nh Ng·ªç** (H·ªèa), bu·ªïi t·ªëi c≈©ng mang t√≠nh H·ªèa. B·∫°n c·∫ßn tr√¨nh b√†y v·ªõi s·ª± **nhi·ªát huy·∫øt (H·ªèa)** nh∆∞ng n·ªôi dung ph·∫£i  **ch·∫Øc ch·∫Øn (Kim)** .

Ch√∫c b·∫°n c√≥ bu·ªïi thuy·∫øt ph·ª•c th√†nh c√¥ng r·ª±c r·ª°! B·∫°n c√≥ c·∫ßn m√¨nh h·ªó tr·ª£ vi·∫øt m·ªôt ƒëo·∫°n "Script" ng·∫Øn ƒë·ªÉ b·∫°n t·∫≠p n√≥i tr∆∞·ªõc khi g·∫∑p gi·∫£ng vi√™n kh√¥ng?

```

### check.list.md
```md
# üìã Plan Checklist ‚Äî Website M·∫°ng X√£ H·ªôi Chia S·∫ª Ki·∫øn Th·ª©c

> **File:** `Docs/check.list.md`
> **Ngu·ªìn:** `Docs/life-1/lifecycle-checklist-and-folder-structure.md`, `Docs/life-1/01-vision/product-vision.md`
> **M·ª•c ƒë√≠ch:** Gi√∫p b·∫°n bi·∫øt ƒëang ·ªü giai ƒëo·∫°n n√†o, ƒëang l√†m g√¨ v√† c·∫ßn l√†m g√¨ ti·∫øp theo.

---

## 1. Giai ƒëo·∫°n hi·ªán t·∫°i

**C√°ch x√°c ƒë·ªãnh:** ƒê·ªëi chi·∫øu tr·∫°ng th√°i file trong `Docs/life-1` ‚Üí `Docs/life-4` v·ªõi b·∫£ng d∆∞·ªõi.

| Giai ƒëo·∫°n      | ƒêi·ªÅu ki·ªán (ƒë√£ c√≥ ƒë·ªß t√†i li·ªáu then ch·ªët)                                                                  |
| ---------------- | ------------------------------------------------------------------------------------------------------------------- |
| **Life-1** | `01-vision/`, `02-decisions/`, `03-research/` ‚Äî vision, personas, stories, requirements, technical decisions |
| **Life-2** | `diagrams/`, `database/`, `ui/`, `api/`, `specs/` ‚Äî s∆° ƒë·ªì, schema, wireframe, API spec                |
| **Life-3** | `setup/`, `architecture/` ‚Äî env, deployment, folder-structure, ƒëang code theo `life-2/specs/`               |
| **Life-4** | `verification/`, `release/`, `archive/` ‚Äî spec coverage, test report, release notes                          |

**Ghi v√†o ƒë√¢y (c·∫≠p nh·∫≠t khi chuy·ªÉn phase):**

- **Giai ƒëo·∫°n hi·ªán t·∫°i:** _Life-2_ (ƒê√£ ho√†n th√†nh ph·∫ßn l·ªõn Specs, Wireframes v√† Sequence Diagrams ch√≠nh).
- **Ng√†y c·∫≠p nh·∫≠t:** _2026-02-18_

---

## 2. ƒêang l√†m

**ƒêang l√†m:** _Ho√†n thi·ªán n·ªët Spec/Wireframe cho c√°c module Engagement (M4) v√† Notifications (M6). R√† so√°t v√† fix l·ªói tr√¨nh b√†y t√†i li·ªáu._

---

## 3. C·∫ßn l√†m ti·∫øp

**C·∫ßn l√†m ti·∫øp:** _1) Ho√†n thi·ªán Spec & Wireframe cho Module M4, M6. 2) C·∫≠p nh·∫≠t S∆° ƒë·ªì Lu·ªìng (Flow Diagram) t·ªïng qu√°t. 3) Chu·∫©n b·ªã b∆∞·ªõc sang Giai ƒëo·∫°n 3: Tri·ªÉn khai (Ph√°t tri·ªÉn theo Spec)._

---

## 4. Checklist theo giai ƒëo·∫°n

M·ªçi m·ª•c map v·ªõi t√†i li·ªáu trong `Docs/` theo `lifecycle-checklist-and-folder-structure.md`.

---

### Life-1 ‚Äî ƒê·ªãnh h∆∞·ªõng

*Th∆∞ m·ª•c: `Docs/life-1/`*

- [X] **1.1** Nghi√™n c·ª©u & Ph√¢n t√≠ch (b·ªè qua n·∫øu demo)
- [X] **1.2** X√°c ƒë·ªãnh ng∆∞·ªùi d√πng m·ª•c ti√™u
  - [X] T·∫°o 2‚Äì3 User Personas ‚Üí `Docs/life-1/01-vision/user-personas.md`
  - [X] X√°c ƒë·ªãnh pain points (c√≥ th·ªÉ g·ªôp trong user-personas ho·∫∑c product-vision)
- [X] **1.3** X√¢y d·ª±ng User Stories (Focus MVP)
  - [X] Epic 1‚Äì10 (Auth, Profile, Posts, Feed, Bookmarking, Search, ‚Ä¶) ‚Üí `Docs/life-1/01-vision/user-stories.md`
- [X] **1.4** Nghi√™n c·ª©u k·ªπ thu·∫≠t
  - [X] News Feed Ranking Algorithm ‚Üí `Docs/life-1/03-research/news-feed-algorithm.md`
  - [X] SSE v·ªõi Next.js ‚Üí `Docs/life-1/03-research/sse-nextjs.md`
  - [X] MongoDB Atlas Search ‚Üí `Docs/life-1/03-research/mongodb-search.md`
- [X] **1.5** ƒê·∫∑c t·∫£ y√™u c·∫ßu chi ti·∫øt
  - [X] Functional + Non-functional Requirements ‚Üí `Docs/life-1/01-vision/requirements-srs.md`
  - [X] Database Schema s∆° b·ªô (c√≥ th·ªÉ trong requirements ho·∫∑c artkitacture)
  - [X] API Endpoints specification (s∆° b·ªô)
  - [X] T·∫ßm nh√¨n, USP, target market ‚Üí `Docs/life-1/01-vision/product-vision.md`
- [X] **1.6** Quy·∫øt ƒë·ªãnh k·ªπ thu·∫≠t ‚Üí `Docs/life-1/02-decisions/technical-decisions.md`

---

### Life-2 ‚Äî Ph√¢n t√≠ch & Thi·∫øt k·∫ø

*Th∆∞ m·ª•c: `Docs/life-2/` ‚Äî **Ch·ªâ [x] khi t√†i li·ªáu c√≥ n·ªôi dung ƒë·∫ßy ƒë·ªß, kh√¥ng ch·ªâ khung/placeholder.***

- [X] **2.1** S∆° ƒë·ªì quan h·ªá th·ª±c th·ªÉ (ER) ‚Üí `Docs/life-2/diagrams/er-diagram.md`
- [X] **2.2** S∆° ƒë·ªì Use Case ‚Üí `Docs/life-2/diagrams/use-case-diagram.md`
- [X] **2.3** S∆° ƒë·ªì tu·∫ßn t·ª± (Sequence) ‚Üí `Docs/life-2/diagrams/sequence-diagram.md` (ƒê√£ c√≥ M1, M2, M3, M5)
- [ ] **2.4** S∆° ƒë·ªì lu·ªìng (Flow) ‚Üí `Docs/life-2/diagrams/flow-diagram.md`
- [ ] **2.5** S∆° ƒë·ªì l·ªõp (Class) ‚Üí `Docs/life-2/diagrams/class-diagram.md` (G·ªôp trong database/schema-design.md)
- [ ] **2.6** Thi·∫øt k·∫ø Database chi ti·∫øt ‚Üí `Docs/life-2/database/schema-design.md`
- [ ] **2.7** Thi·∫øt k·∫ø khung giao di·ªán UI
  - [ ] Wireframe t·ª´ng m√†n h√¨nh (M1, M2, M3, M5) ‚Üí `Docs/life-2/ui/wireframes/`
  - [ ] T·ªïng h·ª£p frame layout ‚Üí `Docs/life-2/ui/ui-frame-design.md`
- [ ] **2.8** Thi·∫øt k·∫ø API
  - [ ] REST/GraphQL endpoints ‚Üí `Docs/life-2/api/api-spec.md`
  - [ ] Request/Response, auth ‚Üí `Docs/life-2/api/api-design.md`
- [ ] **2.9** Spec chi ti·∫øt ph·ª•c v·ª• AI code generation ‚Üí `Docs/life-2/specs/`
  - [ ] m1-auth-profile-spec.md, m2-content-engine-spec.md, m3-discovery-feed-spec.md, m5-bookmarking-spec.md

---

### Life-3 ‚Äî Tri·ªÉn khai

*Th∆∞ m·ª•c: `Docs/life-3/`*

- [ ] **3.1** Setup m√¥i tr∆∞·ªùng (t√†i li·ªáu)
  - [ ] Init Next.js + Payload
  - [ ] Configure MongoDB Atlas
  - [ ] Setup Vercel project
  - [ ] TypeScript, ESLint, Prettier
  - [ ] Bi·∫øn m√¥i tr∆∞·ªùng, secrets ‚Üí `Docs/life-3/setup/env-setup.md`
  - [ ] H∆∞·ªõng d·∫´n deploy ‚Üí `Docs/life-3/setup/deployment-guide.md`
- [ ] **3.2** X√¢y d·ª±ng ki·∫øn tr√∫c d·ª± √°n (t√†i li·ªáu)
  - [ ] C·∫•u tr√∫c th∆∞ m·ª•c theo template Next.js ‚Üí `Docs/life-3/architecture/folder-structure.md`
  - [ ] App Router, layouts, route groups (khi code)
- [ ] **3.3** X√°c ƒë·ªãnh th∆∞ vi·ªán & dependencies (t√†i li·ªáu)
  - [ ] package.json, lockfile
  - [ ] Shadcn UI, Tailwind, ‚Ä¶ ‚Üí `Docs/life-3/architecture/tech-choices.md`
- [ ] **3.4** X√¢y d·ª±ng theo spec
  - [ ] Tham chi·∫øu `Docs/life-2/specs/`
  - [ ] AI agent ƒë·ªçc spec ‚Üí t·∫°o sinh code
  - [ ] (T√πy ch·ªçn) Prompt tham chi·∫øu ‚Üí `Docs/life-3/ai-prompt-refs/`
- [ ] **3.5** Test ‚áÑ AI agent
  - [ ] Unit tests, integration tests
  - [ ] AI h·ªó tr·ª£ vi·∫øt test, debug
- [ ] (T√πy ch·ªçn) Ghi ch√∫ sprint ‚Üí `Docs/life-3/sprint-logs/`

---

### Life-4 ‚Äî Verify

*Th∆∞ m·ª•c: `Docs/life-4/`*

- [ ] **4.1** ƒê·ªëi chi·∫øu v·ªõi spec (file ƒë√£ c√≥, n·ªôi dung ch∆∞a ƒëi·ªÅn)
  - [ ] T·∫•t c·∫£ requirements ƒë√£ implement?
  - [ ] Database schema kh·ªõp thi·∫øt k·∫ø?
  - [ ] Ghi nh·∫≠n ‚Üí `Docs/life-4/verification/spec-coverage.md`
- [ ] **4.2** Ki·ªÉm th·ª≠ ch·ª©c nƒÉng (file ƒë√£ c√≥, ch∆∞a ch·∫°y test)
  - [ ] E2E, smoke tests
  - [ ] Performance benchmarks
  - [ ] B√°o c√°o ‚Üí `Docs/life-4/verification/test-report.md`
- [ ] **4.3** T√†i li·ªáu v·∫≠n h√†nh (file ƒë√£ c√≥)
  - [ ] README, h∆∞·ªõng d·∫´n deploy
  - [ ] Runbook (n·∫øu c·∫ßn)
  - [ ] Release notes ‚Üí `Docs/life-4/release/release-notes.md`
  - [ ] Deployment checklist ‚Üí `Docs/life-4/release/deployment-checklist.md`
- [ ] **4.4** Sign-off & Archive (file ƒë√£ c√≥)
  - [ ] Lessons learned ‚Üí `Docs/life-4/archive/lessons-learned.md`
  - [ ] L·ªãch s·ª≠ quy·∫øt ƒë·ªãnh ‚Üí `Docs/life-4/archive/decisions-log.md`

---

## üìå Ghi ch√∫ nhanh

- **Ti√™u ch√≠ ƒë√°nh d·∫•u [x]:** Ch·ªâ khi t√†i li·ªáu **c√≥ n·ªôi dung ƒë·∫ßy ƒë·ªß t√≠nh nƒÉng**, kh√¥ng ch·ªâ file t·ªìn t·∫°i hay khung/placeholder. R√† so√°t b·∫±ng c√°ch ƒë·ªçc n·ªôi dung th·ª±c t·∫ø trong Docs.
- **MVP Scope** (theo product-vision): Auth, Profile, Posts (text+image+link), News Feed (ranking), Interactions (like/comment/share), Bookmarking (collections), Search, Notifications (SSE), Moderation (report), Privacy & Connections.
- **Spec-driven flow:** `Docs/life-2/specs/*.md` ‚Üí AI ƒë·ªçc ‚Üí sinh code ‚Üí `src/` ‚Üí Test ‚áÑ Fix.
- C·∫≠p nh·∫≠t **Giai ƒëo·∫°n hi·ªán t·∫°i**, **ƒêang l√†m**, **C·∫ßn l√†m ti·∫øp** m·ªói khi chuy·ªÉn task ho·∫∑c chuy·ªÉn phase.

---

---

## üìå K·∫øt qu·∫£ r√† so√°t (docs-driven)

*R√† so√°t b·∫±ng c√°ch **ƒë·ªçc n·ªôi dung th·ª±c t·∫ø** trong `Docs/`, kh√¥ng ch·ªâ "file t·ªìn t·∫°i". Ch·ªâ ƒë√°nh [x] khi t√†i li·ªáu c√≥ n·ªôi dung ƒë·∫ßy ƒë·ªß t√≠nh nƒÉng, kh√¥ng ch·ªâ khung/placeholder/null. C·∫≠p nh·∫≠t: 2026-02-01.*

| Giai ƒëo·∫°n      | ƒê√£ xong (n·ªôi dung ƒë·ªß)                                            | Ch∆∞a / ch·ªâ khung s∆∞·ªùn                                                                                                                                                           |
| ---------------- | --------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Life-1** | 1.2, 1.3, 1.5, 1.6; 1.4 ch·ªâ c√≥ news-feed-algorithm                  | 1.4:`sse-nextjs.md`, `mongodb-search.md`; 1.7: competitor-analysis (t√πy ch·ªçn)                                                                                                 |
| **Life-2** | *(kh√¥ng m·ª•c n√†o)*                                                | To√†n b·ªô 2.1‚Äì2.9: file c√≥ nh∆∞ng**ch·ªâ khung s∆∞·ªùn** ‚Äî diagrams c√≥ comment "Th√™m/C·∫≠p nh·∫≠t", schema ch·ªâ users+posts, wireframes tr·ªëng, api t·ªïng quan, specs tr·ªëng |
| **Life-3** | 3.1‚Äì3.3 (t√†i li·ªáu setup, architecture, tech-choices c√≥ n·ªôi dung) | 3.1 th·ª±c t·∫ø: init project, MongoDB, Vercel; 3.4, 3.5 khi c√≥ specs                                                                                                                |
| **Life-4** | File verification, release, archive ƒë√£ t·∫°o                         | N·ªôi dung ƒë·ªëi chi·∫øu spec, test, release ƒëi·ªÅn khi tri·ªÉn khai xong                                                                                                              |

*C·∫≠p nh·∫≠t: 2026-02-01*

```

### life-3/README.md
```md
# Giai ƒëo·∫°n 3 ‚Äî Tri·ªÉn khai

- **setup/** ‚Äî Env, deployment guide
- **architecture/** ‚Äî Folder structure, tech choices
- **sprint-logs/** ‚Äî Ghi ch√∫ sprint
- **ai-prompt-refs/** ‚Äî Prompt tham chi·∫øu cho AI agent

```

### life-3/setup/deployment-guide.md
```md
# Deployment Guide

> **M·ª•c ƒë√≠ch:** H∆∞·ªõng d·∫´n deploy l√™n Vercel  
> **Stack:** Next.js + Payload + MongoDB Atlas + Vercel  

---

## Prerequisites

- Vercel account
- MongoDB Atlas cluster
- GitHub repo connected

## Steps

1. **MongoDB Atlas:** T·∫°o cluster, whitelist IP, l·∫•y connection string
2. **Vercel:** Import project t·ª´ GitHub
3. **Environment variables:** Th√™m MONGODB_URI, PAYLOAD_SECRET, etc.
4. **Deploy:** Push to main ‚Üí auto deploy

## Post-deploy

- Verify admin panel: `/admin`
- Test API endpoints

```

### life-3/setup/env-setup.md
```md
# Environment Setup

> **M·ª•c ƒë√≠ch:** Bi·∫øn m√¥i tr∆∞·ªùng, secrets, h∆∞·ªõng d·∫´n config  
> **L∆∞u √Ω:** Kh√¥ng commit .env v√†o Git  

---

## Required Environment Variables

| Variable           | M√¥ t·∫£                    | Example                    |
|--------------------|--------------------------|----------------------------|
| `MONGODB_URI`      | MongoDB connection string| `mongodb+srv://...`        |
| `PAYLOAD_SECRET`   | Payload CMS secret       | random string              |
| `NEXT_PUBLIC_SERVER_URL` | Base URL app       | `http://localhost:3000`    |
| `VERCEL_BLOB_*`    | Vercel Blob (n·∫øu d√πng)   | t·ª´ Vercel dashboard        |

## Setup steps

1. Copy `.env.example` ‚Üí `.env`
2. ƒêi·ªÅn c√°c gi√° tr·ªã
3. Verify v·ªõi `npm run dev`

```

### life-3/architecture/folder-structure.md
```md
# Folder Structure

> **M·ª•c ƒë√≠ch:** C·∫•u tr√∫c th∆∞ m·ª•c d·ª± √°n th·ª±c t·∫ø  
> **Stack:** Next.js 15 App Router + Payload CMS  

---

## Expected Structure

```
src/
‚îú‚îÄ‚îÄ app/                    # Next.js App Router
‚îÇ   ‚îú‚îÄ‚îÄ (frontend)/         # Public pages
‚îÇ   ‚îú‚îÄ‚îÄ (payload)/          # Payload admin
‚îÇ   ‚îî‚îÄ‚îÄ api/                # API routes
‚îú‚îÄ‚îÄ components/             # React components
‚îú‚îÄ‚îÄ collections/            # Payload collections
‚îú‚îÄ‚îÄ lib/                    # Utilities
‚îî‚îÄ‚îÄ ...
```

## Key folders

- `collections/` - Payload Users, Posts, Comments, etc.
- `app/(frontend)/` - Feed, profile, post detail pages
- `components/ui/` - Shadcn components

```

### life-3/architecture/tech-choices.md
```md
# Tech Choices

> **M·ª•c ƒë√≠ch:** L√Ω do ch·ªçn th∆∞ vi·ªán, stack  
> **Tham chi·∫øu:** technical-decisions.md  

---

## Stack Summary

| Layer    | Choice           | Rationale                    |
|----------|------------------|------------------------------|
| Frontend | Next.js 15 + React 19 | App Router, RSC, Vercel integration |
| CMS      | Payload 3.x      | Headless, MongoDB, Auth built-in |
| Database | MongoDB Atlas    | Document model, Atlas Search |
| Styling  | Tailwind + Shadcn| Rapid UI, accessible components |
| Storage  | Vercel Blob      | Simple, no S3 setup          |
| Realtime | SSE              | Simpler than WebSocket       |

## Alternatives considered

- **Payload vs Strapi:** Payload native TypeScript, MongoDB
- **Vercel Blob vs Cloudinary:** Vercel ƒë∆°n gi·∫£n cho demo

```

### life-4/README.md
```md
# Giai ƒëo·∫°n 4 ‚Äî Verify

- **verification/** ‚Äî Spec coverage, test report
- **release/** ‚Äî Release notes, deployment checklist
- **archive/** ‚Äî Lessons learned, decisions log

```

### life-4/verification/test-report.md
```md
# Test Report

> **M·ª•c ƒë√≠ch:** K·∫øt qu·∫£ ki·ªÉm th·ª≠, E2E, performance  
> **Format:** Markdown  

---

## Test Summary

| Category      | Pass | Fail | Skip |
|---------------|------|------|------|
| Unit tests    |      |      |      |
| Integration   |      |      |      |
| E2E           |      |      |      |

## Critical Paths Tested

- [ ] Auth flow (login, register)
- [ ] Post creation
- [ ] Feed load
- [ ] Bookmark save

## Performance

- Page load: ___ ms (target < 3s)
- Search: ___ ms (target < 500ms)

```

### life-4/verification/spec-coverage.md
```md
# Spec Coverage

> **M·ª•c ƒë√≠ch:** ƒê·ªëi chi·∫øu spec vs implementation  
> **Tham chi·∫øu:** Docs/life-2/specs/  

---

## Checklist

- [ ] T·∫•t c·∫£ requirements t·ª´ requirements-srs.md ƒë√£ implement
- [ ] Database schema kh·ªõp schema-design.md
- [ ] API endpoints kh·ªõp api-design.md
- [ ] UI screens kh·ªõp wireframes

## Gaps / Discrepancies

<!-- Ghi l·∫°i b·∫•t k·ª≥ mismatch n√†o -->

```

### life-4/release/deployment-checklist.md
```md
# Deployment Checklist

> **M·ª•c ƒë√≠ch:** Checklist tr∆∞·ªõc khi deploy  
> **Tham chi·∫øu:** setup/deployment-guide.md  

---

## Pre-deploy

- [ ] Environment variables ƒë√£ config tr√™n Vercel
- [ ] MongoDB Atlas IP whitelist (0.0.0.0/0 cho Vercel)
- [ ] Build th√†nh c√¥ng locally: `npm run build`
- [ ] Kh√¥ng c√≥ l·ªói TypeScript/ESLint

## Post-deploy

- [ ] Admin panel accessible: `/admin`
- [ ] API health check
- [ ] Smoke test: login, create post, view feed

```

### life-4/release/release-notes.md
```md
# Release Notes

> **M·ª•c ƒë√≠ch:** Ghi ch√∫ phi√™n b·∫£n, features m·ªõi, breaking changes  
> **Format:** Keep a changelog  

---

## [Unreleased]

### Added
- MVP features list
- (ƒëi·ªÅn khi release)

### Changed
- (ƒëi·ªÅn khi c√≥ thay ƒë·ªïi)

### Fixed
- (ƒëi·ªÅn khi c√≥ fix)

```

### life-4/archive/decisions-log.md
```md
# Decisions Log

> **M·ª•c ƒë√≠ch:** L·ªãch s·ª≠ quy·∫øt ƒë·ªãnh quan tr·ªçng  
> **Format:** ADR-style (Context, Decision, Consequences)  

---

## Decision 1: [T√™n quy·∫øt ƒë·ªãnh]

**Date:** YYYY-MM-DD  
**Context:** (t√¨nh hu·ªëng)  
**Decision:** (quy·∫øt ƒë·ªãnh ƒë√£ ch·ªçn)  
**Consequences:** (t√°c ƒë·ªông)

---

<!-- Th√™m c√°c quy·∫øt ƒë·ªãnh quan tr·ªçng khi c√≥ -->

```

### life-4/archive/lessons-learned.md
```md
# Lessons Learned

> **M·ª•c ƒë√≠ch:** Ghi ch√∫ kinh nghi·ªám, nh·ªØng g√¨ l√†m t·ªët/ch∆∞a t·ªët  
> **C·∫≠p nh·∫≠t:** Khi k·∫øt th√∫c sprint/d·ª± √°n  

---

## What went well

<!-- ƒêi·ªÅu g√¨ hi·ªáu qu·∫£ -->

## What could improve

<!-- ƒêi·ªÅu c·∫ßn c·∫£i thi·ªán -->

## Recommendations for next project

<!-- ƒê·ªÅ xu·∫•t cho d·ª± √°n ti·∫øp theo -->

```

### life-2/README.md
```md
# Giai ƒëo·∫°n 2 ‚Äî Ph√¢n t√≠ch & Thi·∫øt k·∫ø

L∆∞u tr·ªØ s∆° ƒë·ªì thi·∫øt k·∫ø v√† spec ph·ª•c v·ª• AI code generation.

- **diagrams/** ‚Äî ER, UseCase, Sequence, Flow, Class
- **database/** ‚Äî Schema, migrations
- **ui/** ‚Äî Wireframes, UI frame
- **api/** ‚Äî API spec, design
- **specs/** ‚Äî Spec chi ti·∫øt cho t·ª´ng t√≠nh nƒÉng

```

### life-2/index.md
```md
# Giai ƒëo·∫°n 2 ‚Äî Design Navigation Hub

> M·ª•c ti√™u: t√†i li·ªáu ƒëi·ªÅu h∆∞·ªõng ƒë·ªÉ AI/Developer ƒëi t·ª´ `Docs/life-1` sang thi·∫øt k·∫ø chi ti·∫øt ·ªü `Docs/life-2` v·ªõi traceability r√µ r√†ng.

---

## 1) C√°ch tra c·ª©u t·ª´ Life 1 sang Life 2

| Khi c·∫ßn l√†m ·ªü Life 2 | ƒê·ªçc ngu·ªìn n√†o ·ªü Life 1 | K·∫øt qu·∫£ c·∫ßn t·∫°o/c·∫≠p nh·∫≠t ·ªü Life 2 |
|---|---|---|
| X√°c ƒë·ªãnh bi√™n h·ªá th·ªëng, actor, use case | `01-vision/FR/feature-map-and-priority.md`, `01-vision/FR/requirements-srs.md`, `01-vision/user-stories.md` | `diagrams/UseCase/use-case-diagram.md` |
| Chu·∫©n h√≥a domain model (entity, quan h·ªá, cardinality) | `01-vision/FR/requirements-srs.md`, `artkitacture.md`, `arhitacture-V2.md` | `diagrams/er-diagram.md`, `database/schema-design.md` |
| Thi·∫øt k·∫ø lu·ªìng x·ª≠ l√Ω nghi·ªáp v·ª• | `01-vision/user-stories.md`, `01-vision/FR/feature-map-and-priority.md` | `diagrams/flow-diagram.md`, `diagrams/sequence-diagram.md` |
| Ch·ªët contract API v√† lu·ªìng auth | `02-decisions/technical-decisions.md`, `01-vision/FR/requirements-srs.md` | `api/api-spec.md`, `api/api-design.md` |
| Thi·∫øt k·∫ø wireframe theo module ∆∞u ti√™n | `01-vision/FR/feature-map-and-priority.md`, `lifecycle-checklist-and-folder-structure.md` | `ui/ui-frame-design.md`, `ui/wireframes/*` |
| X√°c ƒë·ªãnh r√†ng bu·ªôc k·ªπ thu·∫≠t h·ªá th·ªëng | `02-decisions/technical-decisions.md`, `arhitacture-V2.md` | T·∫•t c·∫£ artifacts c√≥ section "Constraints/Assumptions" |

---

## 2) Phase 2 Vision (ƒë·ªãnh h∆∞·ªõng th·ª±c thi thi·∫øt k·∫ø)

### 2.1 Th·ª© t·ª± ∆∞u ti√™n thi·∫øt k·∫ø

1. **Wave 1 - Foundation Domain (M1, M2)**
   - Auth/Profile v√† Post domain ph·∫£i ch·ªët tr∆∞·ªõc ƒë·ªÉ l√†m tr·ª•c d·ªØ li·ªáu cho c√°c module c√≤n l·∫°i.
2. **Wave 2 - Discovery & Engagement (M3, M4, M5)**
   - Ho√†n thi·ªán lu·ªìng Feed, Search, Interactions, Bookmarking d·ª±a tr√™n domain ƒë√£ ·ªïn ƒë·ªãnh.
3. **Wave 3 - Realtime & Moderation (M6)**
   - Ch·ªët SSE notification v√† moderation workflow sau khi lu·ªìng t∆∞∆°ng t√°c ƒë√£ r√µ.

### 2.2 R·ªßi ro k·ªπ thu·∫≠t tr·ªçng y·∫øu c·∫ßn kh√≥a trong t√†i li·ªáu thi·∫øt k·∫ø

| R·ªßi ro | ·∫¢nh h∆∞·ªüng | C√°ch ki·ªÉm so√°t ·ªü Life 2 | Artifact ch√≠nh |
|---|---|---|---|
| Ranking feed ch∆∞a c√≥ tham s·ªë chu·∫©n | Feed thi·∫øu ·ªïn ƒë·ªãnh, kh√≥ tuning | M√¥ t·∫£ c√¥ng th·ª©c + d·ªØ li·ªáu ƒë·∫ßu v√†o/ƒë·∫ßu ra trong flow/sequence | `diagrams/flow-diagram.md`, `diagrams/sequence-diagram.md` |
| SSE realtime v√† tr·∫°ng th√°i ƒë√£ ƒë·ªçc | D·ªÖ sai l·ªách tr·∫°ng th√°i th√¥ng b√°o | ƒê·ªãnh nghƒ©a r√µ lifecycle notification + idempotency | `diagrams/sequence-diagram.md`, `api/api-design.md` |
| Search relevance/latency | Ch·∫•t l∆∞·ª£ng t√¨m ki·∫øm th·∫•p, response ch·∫≠m | ƒê·∫∑c t·∫£ ch·ªâ m·ª•c v√† truy v·∫•n autocomplete/full-text | `database/schema-design.md`, `api/api-spec.md` |
| Access control theo vai tr√≤ | R√≤ r·ªâ d·ªØ li·ªáu ho·∫∑c thao t√°c tr√°i quy·ªÅn | Map actor-role-action v√†o use case + API contract | `diagrams/UseCase/use-case-diagram.md`, `api/api-design.md` |

---

## 3) Mapping Table: Requirements -> Design Artifacts

| Requirement | Module t·ª´ feature map | Design artifacts b·∫Øt bu·ªôc |
|---|---|---|
| FR-1 Authentication | M1.1 | `diagrams/UseCase/use-case-diagram.md`, `diagrams/sequence-diagram.md`, `api/api-spec.md` |
| FR-2 Profile | M1.2 | `diagrams/UseCase/use-case-diagram.md`, `database/schema-design.md`, `ui/ui-frame-design.md` |
| FR-3 Posts | M2.1, M2.2 | `diagrams/UseCase/use-case-diagram.md`, `diagrams/flow-diagram.md`, `database/schema-design.md`, `api/api-spec.md` |
| FR-4 News Feed | M3.1 | `diagrams/sequence-diagram.md`, `diagrams/flow-diagram.md`, `api/api-design.md` |
| FR-5 Interactions | M4.1 | `diagrams/UseCase/use-case-diagram.md`, `diagrams/sequence-diagram.md`, `database/schema-design.md` |
| FR-6 Bookmarking | M5.1, M5.2 | `diagrams/UseCase/use-case-diagram.md`, `database/schema-design.md`, `api/api-spec.md` |
| FR-7 Search | M3.2 | `diagrams/UseCase/use-case-diagram.md`, `api/api-spec.md`, `database/schema-design.md` |
| FR-8 Notifications | M6.1 | `diagrams/UseCase/use-case-diagram.md`, `diagrams/sequence-diagram.md`, `api/api-design.md` |
| FR-9 Moderation | M6.2 | `diagrams/UseCase/use-case-diagram.md`, `diagrams/flow-diagram.md`, `api/api-design.md` |
| FR-10 Privacy & Connections | M4.2 | `diagrams/UseCase/use-case-diagram.md`, `database/schema-design.md`, `api/api-spec.md` |

---

## 4) Nguy√™n t·∫Øc traceability cho AI ·ªü giai ƒëo·∫°n sau

1. M·ªói use case/API/schema field ph·∫£i ch·ªâ ra ƒë∆∞·ª£c FR t∆∞∆°ng ·ª©ng (√≠t nh·∫•t FR-id).
2. Kh√¥ng ƒë∆∞a ch·ª©c nƒÉng m·ªõi n·∫øu ch∆∞a c√≥ d·∫•u v·∫øt trong `feature-map-and-priority.md` ho·∫∑c ch∆∞a ƒë∆∞·ª£c ghi nh·∫≠n th√†nh change request.
3. V·ªõi c√°c quy·∫øt ƒë·ªãnh ki·∫øn tr√∫c (SSE, Atlas Search, stack), lu√¥n ∆∞u ti√™n `02-decisions/technical-decisions.md` khi c√≥ m√¢u thu·∫´n t√†i li·ªáu.
4. Khi thi·∫øt k·∫ø DB/API, t√°ch r√µ ph·∫°m vi MVP v√† ph·∫ßn m·ªü r·ªông ƒë·ªÉ tr√°nh lan scope.

```

### life-2/diagrams/class-diagram.md
```md
# Class Diagram

> **M·ª•c ƒë√≠ch:** C·∫•u tr√∫c OOP (n·∫øu c·∫ßn)  
> **Format:** Mermaid classDiagram  
> **Ghi ch√∫:** Optional - Payload CMS d√πng Collections, c√≥ th·ªÉ b·ªè qua ho·∫∑c map sang interface/types  

---

```mermaid
classDiagram
    class User {
        +ObjectId id
        +string email
        +string name
        +string avatar
        +string bio
        +create()
        +update()
    }
    
    class Post {
        +ObjectId id
        +ObjectId authorId
        +string content
        +array media
        +array tags
        +create()
        +update()
        +delete()
    }
    
    User "1" --> "*" Post : creates
```

```

### life-2/diagrams/flow-diagram.md
```md
# Flow Diagrams

> **M·ª•c ƒë√≠ch:** M√¥ t·∫£ business logic, decision points  
> **Format:** Mermaid flowchart  

---

## News Feed Ranking Flow

```mermaid
flowchart TD
    A[Trigger: User request Feed] --> B[Load user connections]
    B --> C[Calculate ranking score]
    C --> D{Score = engagement / age_weight}
    D --> E[Sort by score DESC]
    E --> F[Paginate]
    F --> G[Return results]
```

## Post Creation Flow

```mermaid
flowchart TD
    A[User submits post] --> B{Valid content?}
    B -->|No| C[Return validation error]
    B -->|Yes| D[Upload media if any]
    D --> E[Save to DB]
    E --> F[Return 201]
```


## Bookmark Save Flow

```mermaid
flowchart TD
    A[User clicks Save] --> B[Choose Collection]
    B --> C{Exists?}
    C -->|No| D[Create Collection]
    D --> E[Add Post ID to Collection.items]
    C -->|Yes| E
    E --> F[Update DB using $push]
    F --> G[Show success message]
```

## Notification Trigger Flow (Event-Driven)

```mermaid
flowchart TD
    A[Action: Like/Comment/Follow] --> B[Server handles logic]
    B --> C[Save Notification to DB]
    C --> D{Recipient Online?}
    D -->|Yes| E[Dispatch event to SSE Stream]
    D -->|No| F[Keep as Unread in DB]
    E --> G[Client UI dynamic update]
```

---
*Ghi ch√∫: C√°c lu·ªìng x·ª≠ l√Ω tr√™n ƒë·∫£m b·∫£o t√≠nh nh·∫•t qu√°n gi·ªØa UI v√† Data th√¥ng qua c∆° ch·∫ø t·ªëi ∆∞u NoSQL.* ü•∞

```

### life-2/diagrams/er-diagram.md
```md
# ERD - Business to Physical Schema

> Muc tieu: dung duoc ngay cho thiet ke collection Payload/MongoDB, khong chi dung de minh hoa.
> Pham vi: M1 -> M6 (Auth/Profile, Content, Discovery, Engagement, Bookmarking, Notification/Moderation).

---

## 1) ERD Tong Quan

```mermaid
erDiagram
    USERS ||--o{ POSTS : authors
    USERS ||--o{ COMMENTS : writes
    USERS ||--o{ LIKES : reacts
    USERS ||--o{ SHARES : shares
    USERS ||--o{ CONNECTIONS : follows
    USERS ||--o{ BLOCKS : blocks

    POSTS ||--o{ COMMENTS : has
    POSTS ||--o{ LIKES : has
    POSTS ||--o{ SHARES : has

    POSTS ||--o{ POST_TAGS : tagged
    TAGS ||--o{ POST_TAGS : maps

    POSTS ||--o{ POST_MEDIA : attaches
    MEDIA ||--o{ POST_MEDIA : maps

    USERS ||--o{ BOOKMARK_COLLECTIONS : owns
    BOOKMARK_COLLECTIONS ||--o{ BOOKMARKS : contains
    POSTS ||--o{ BOOKMARKS : saved_in

    USERS ||--o{ NOTIFICATIONS : receives
    USERS ||--o{ REPORTS : reports
    REPORTS ||--o{ AUDIT_LOGS : audited_by
```

## 2) ERD Co Thuoc Tinh Cot Loi

```mermaid
erDiagram
    USERS {
      objectId id PK
      string email UK
      string username UK
      string password_hash
      boolean verified
      string role
      string status
      string profile_visibility
      int follower_count
      int following_count
      datetime created_at
      datetime updated_at
    }

    POSTS {
      objectId id PK
      objectId author_id FK
      string title
      text content
      string status
      string visibility
      float ranking_score
      int likes_count
      int comments_count
      int shares_count
      datetime published_at
      datetime created_at
      datetime updated_at
    }

    COMMENTS {
      objectId id PK
      objectId post_id FK
      objectId author_id FK
      objectId parent_comment_id FK
      text content
      string status
      datetime created_at
      datetime updated_at
    }

    LIKES {
      objectId id PK
      objectId post_id FK
      objectId user_id FK
      datetime created_at
    }

    CONNECTIONS {
      objectId id PK
      objectId follower_id FK
      objectId following_id FK
      string status
      datetime created_at
    }

    BOOKMARK_COLLECTIONS {
      objectId id PK
      objectId owner_id FK
      string name
      boolean is_default
      datetime created_at
      datetime updated_at
    }

    BOOKMARKS {
      objectId id PK
      objectId user_id FK
      objectId post_id FK
      objectId collection_id FK
      datetime saved_at
    }

    NOTIFICATIONS {
      objectId id PK
      objectId recipient_id FK
      objectId actor_id FK
      string type
      string entity_type
      objectId entity_id
      boolean is_read
      datetime read_at
      datetime created_at
    }

    REPORTS {
      objectId id PK
      objectId reporter_id FK
      string target_type
      objectId target_id
      string reason
      string status
      objectId resolved_by FK
      datetime resolved_at
      datetime created_at
    }

    AUDIT_LOGS {
      objectId id PK
      objectId report_id FK
      objectId admin_id FK
      string action
      string reason
      datetime created_at
    }

    USERS ||--o{ POSTS : authors
    USERS ||--o{ COMMENTS : writes
    USERS ||--o{ LIKES : reacts
    USERS ||--o{ CONNECTIONS : follows
    POSTS ||--o{ COMMENTS : has
    POSTS ||--o{ LIKES : has
    USERS ||--o{ BOOKMARK_COLLECTIONS : owns
    BOOKMARK_COLLECTIONS ||--o{ BOOKMARKS : contains
    POSTS ||--o{ BOOKMARKS : saved_in
    USERS ||--o{ NOTIFICATIONS : receives
    USERS ||--o{ REPORTS : reports
    REPORTS ||--o{ AUDIT_LOGS : audited_by
```

## 3) Entity Dictionary (Chi Tiet De Implement)

### `users`
| Field | Type | Required | Constraint | Note |
|---|---|---|---|---|
| id | ObjectId | yes | PK | Payload `id` |
| email | string | yes | UK, index | auth/login |
| username | string | yes | UK, index | profile public |
| password_hash | string | yes | - | bcrypt |
| verified | boolean | yes | default `false` | M1 verify email |
| role | enum | yes | `member/admin` | RBAC |
| status | enum | yes | `active/inactive/banned` | moderation |
| profile_visibility | enum | yes | `public/followers/private` | privacy |
| follower_count | int | yes | default `0` | denormalized |
| following_count | int | yes | default `0` | denormalized |
| created_at | datetime | yes | index | - |
| updated_at | datetime | yes | - | - |

### `posts`
| Field | Type | Required | Constraint | Note |
|---|---|---|---|---|
| id | ObjectId | yes | PK | - |
| author_id | ObjectId | yes | FK -> users.id, index | owner |
| title | string | no | index text | optional |
| content | text | yes | text index | search |
| status | enum | yes | `draft/published/banned/archived`, index | moderation |
| visibility | enum | yes | `public/friends/private`, index | M2-A4 |
| ranking_score | float | no | index desc | feed ranking |
| likes_count | int | yes | default `0` | denormalized |
| comments_count | int | yes | default `0` | denormalized |
| shares_count | int | yes | default `0` | denormalized |
| published_at | datetime | no | index | - |
| created_at | datetime | yes | index | feed sort |
| updated_at | datetime | yes | - | - |

### `comments`
| Field | Type | Required | Constraint | Note |
|---|---|---|---|---|
| id | ObjectId | yes | PK | - |
| post_id | ObjectId | yes | FK -> posts.id, index | target post |
| author_id | ObjectId | yes | FK -> users.id, index | writer |
| parent_comment_id | ObjectId | no | FK -> comments.id, index | nested reply |
| content | text | yes | - | - |
| status | enum | yes | `visible/hidden/deleted`, index | moderation |
| created_at | datetime | yes | index | - |
| updated_at | datetime | yes | - | - |

### `likes`
| Field | Type | Required | Constraint | Note |
|---|---|---|---|---|
| id | ObjectId | yes | PK | - |
| post_id | ObjectId | yes | FK -> posts.id | - |
| user_id | ObjectId | yes | FK -> users.id | - |
| created_at | datetime | yes | - | - |

Unique key de tranh like lap: `(post_id, user_id)`.

### `connections`
| Field | Type | Required | Constraint | Note |
|---|---|---|---|---|
| id | ObjectId | yes | PK | - |
| follower_id | ObjectId | yes | FK -> users.id | actor |
| following_id | ObjectId | yes | FK -> users.id | target |
| status | enum | yes | `active` | future-proof |
| created_at | datetime | yes | - | - |

Unique key: `(follower_id, following_id)`.

### `bookmark_collections`
| Field | Type | Required | Constraint | Note |
|---|---|---|---|---|
| id | ObjectId | yes | PK | - |
| owner_id | ObjectId | yes | FK -> users.id, index | owner |
| name | string | yes | index | folder name |
| is_default | boolean | yes | default `false` | "Tat ca" |
| created_at | datetime | yes | - | - |
| updated_at | datetime | yes | - | - |

### `bookmarks`
| Field | Type | Required | Constraint | Note |
|---|---|---|---|---|
| id | ObjectId | yes | PK | - |
| user_id | ObjectId | yes | FK -> users.id | owner |
| post_id | ObjectId | yes | FK -> posts.id | saved post |
| collection_id | ObjectId | yes | FK -> bookmark_collections.id | folder |
| saved_at | datetime | yes | index | sort |

Unique key de tranh save trung: `(user_id, post_id)`.

### `notifications`
| Field | Type | Required | Constraint | Note |
|---|---|---|---|---|
| id | ObjectId | yes | PK | - |
| recipient_id | ObjectId | yes | FK -> users.id, index | inbox owner |
| actor_id | ObjectId | no | FK -> users.id | source user |
| type | enum | yes | `like/comment/follow/report_update/system`, index | M6 |
| entity_type | enum | yes | `post/comment/user/report` | polymorphic |
| entity_id | ObjectId | no | index | target entity |
| is_read | boolean | yes | default `false`, index | badge |
| read_at | datetime | no | - | mark read |
| created_at | datetime | yes | index | sort desc |

### `reports`
| Field | Type | Required | Constraint | Note |
|---|---|---|---|---|
| id | ObjectId | yes | PK | - |
| reporter_id | ObjectId | yes | FK -> users.id, index | who reports |
| target_type | enum | yes | `post/comment/user`, index | polymorphic |
| target_id | ObjectId | yes | index | reported object |
| reason | string | yes | - | violation type |
| status | enum | yes | `pending/resolved/dismissed`, index | moderation queue |
| resolved_by | ObjectId | no | FK -> users.id | admin |
| resolved_at | datetime | no | - | - |
| created_at | datetime | yes | index | queue ordering |

### `audit_logs`
| Field | Type | Required | Constraint | Note |
|---|---|---|---|---|
| id | ObjectId | yes | PK | - |
| report_id | ObjectId | yes | FK -> reports.id, index | trace report |
| admin_id | ObjectId | yes | FK -> users.id, index | moderator |
| action | enum | yes | `hide_post/ban_user/dismiss_report/warn_user` | enforcement |
| reason | string | yes | - | audit detail |
| created_at | datetime | yes | index | chronology |

---

## 4) Ghi Chu Kien Truc

1. ERD tren la **business schema** de phan tich/trace requirement.
2. Khi toi uu read cho M5, co the chuyen `bookmarks` thanh embedded array trong `bookmark_collections`.
3. Feed ranking dung denormalized counters + `ranking_score` (cap nhat boi hook/service).
4. Soft-delete uu tien qua `status`, tranh hard-delete voi post/comment/user.

```

### life-2/diagrams/sequence-diagrams/detailed-m4-engagement.md
```md
# Sequence Diagram: M4 - Engagement & Connections

> **Module:** Engagement
> **M·ª•c ti√™u:** M√¥ t·∫£ qu√° tr√¨nh t∆∞∆°ng t√°c (Like/Comment) v√† Follow ng∆∞·ªùi d√πng.

---

## ‚ù§Ô∏è 1. K·ªãch b·∫£n: T∆∞∆°ng t√°c b√†i vi·∫øt (Like/Comment)

```mermaid
sequenceDiagram
    actor Member
    participant UI as PostCard
    participant Service as EngagementService
    participant Payload
    participant DB as MongoDB

    Member->>UI: Click "Like"
    UI->>Service: toggleLike(postId)
    activate Service
    Service->>Payload: payload.update({ id: postId, data: { stats: { likes: +1 } } })
    activate Payload
    Payload->>DB: updateOne
    DB-->>Payload: doc
    deactivate Payload
    Service-->>UI: liked: true
    deactivate Service
    UI-->>Member: C·∫≠p nh·∫≠t icon tr√°i tim (H·ªìng)
```

---

## ü§ù 2. K·ªãch b·∫£n: Theo d√µi ng∆∞·ªùi d√πng (Follow)

```mermaid
sequenceDiagram
    actor Follower
    participant UI as ProfilePage
    participant Service as ConnectionService
    participant Payload
    participant DB as MongoDB

    Follower->>UI: Nh·∫•n "Follow" @steve
    UI->>Service: followUser(targetId)
    activate Service

    Service->>Payload: payload.create({ collection: 'follows', data: { follower, following } })
    activate Payload
    Payload->>DB: insertOne
    DB-->>Payload: doc
    deactivate Payload

    Service-->>UI: following: true
    deactivate Service
    UI-->>Follower: ƒê·ªïi tr·∫°ng th√°i n√∫t th√†nh "Following"
```

---
*Fidelity Note: C√°c h√†nh ƒë·ªông Engagement (Like/Comment) s·∫Ω ƒë·ªìng th·ªùi trigger SSE Notification t·ªõi Author c·ªßa b√†i vi·∫øt.* ü•∞

```

### life-2/diagrams/sequence-diagrams/global-flows.md
```md
# Global Architecture Flows

> **M·ª•c ti√™u:** M√¥ t·∫£ c√°c lu·ªìng t∆∞∆°ng t√°c c·∫•p cao gi·ªØa c√°c th√†nh ph·∫ßn ki·∫øn tr√∫c ch√≠nh trong h·ªá th·ªëng NeoSocial (Next.js 15 + Payload CMS 3.x).

---

## üîê 1. Identity & Authorization Pipeline (Lu·ªìng ƒë·ªãnh danh)

S∆° ƒë·ªì n√†y m√¥ t·∫£ c√°ch h·ªá th·ªëng x·ª≠ l√Ω t·ª´ khi ng∆∞·ªùi d√πng ch∆∞a ƒëƒÉng nh·∫≠p ƒë·∫øn khi ƒë∆∞·ª£c c·∫•p quy·ªÅn truy c·∫≠p v√†o c√°c t√†i nguy√™n b·∫£o m·∫≠t.

```mermaid
sequenceDiagram
    actor User
    participant UI as Next.js 15 (Client/Server)
    participant Service as AuthService
    participant Payload as Payload CMS (Local API)
    participant DB as MongoDB Atlas

    User->>UI: Truy c·∫≠p trang y√™u c·∫ßu Auth
    UI->>UI: Ki·ªÉm tra Session/Cookie
    alt No Session
        UI-->>User: Hi·ªÉn th·ªã Login Page
        User->>UI: Submit Credentials (Email/OAuth)
        UI->>Service: login(credentials)
        activate Service
        Service->>Payload: payload.login({ collection: 'users', data })
        activate Payload
        Payload->>DB: findOne({ email })
        DB-->>Payload: UserRecord
        Payload-->>Service: { user, token }
        deactivate Payload
        Service->>Service: setSessionCookie(token)
        Service-->>UI: { success: true }
        deactivate Service
        UI-->>User: ƒêi·ªÅu h∆∞·ªõng t·ªõi Dashboard
    else Has Session
        UI-->>User: Render Protected Content
    end
```

---

## üìù 2. Content Lifecycle (Lu·ªìng v√≤ng ƒë·ªùi n·ªôi dung)

M√¥ t·∫£ qu√° tr√¨nh t·ª´ khi ng∆∞·ªùi d√πng t·∫°o b√†i vi·∫øt ƒë·∫øn khi b√†i vi·∫øt ƒë∆∞·ª£c x·ª≠ l√Ω v√† s·∫µn s√†ng ƒë·ªÉ ph√¢n ph·ªëi.

```mermaid
sequenceDiagram
    actor User
    participant Editor as Rich-text Editor (UI)
    participant PostService
    participant Payload as Payload CMS
    participant DB as MongoDB Atlas
    participant SSE as SSE Dispatcher

    User->>Editor: Nh·∫≠p n·ªôi dung + Upload Media
    Editor->>PostService: createPost(postData)
    activate PostService
    PostService->>PostService: validate & sanitize(data)
    
    PostService->>Payload: payload.create({ collection: 'posts', data })
    activate Payload
    Note over Payload: Ch·∫°y beforeChange hooks (tagging, integrity)
    Payload->>DB: insertOne(postDoc)
    DB-->>Payload: insertedDoc
    Note over Payload: Ch·∫°y afterChange hooks
    Payload-->>PostService: CreatedPost
    deactivate Payload

    PostService-->>Editor: { success: true, post }
    deactivate PostService
    Editor-->>User: Hi·ªÉn th·ªã tr·∫°ng th√°i th√†nh c√¥ng

    opt Ph√¢n ph·ªëi Real-time
        PostService-->>SSE: pushNotificationToFollowers(newPost)
        SSE-->>User: [SSE Event] New post from friend
    end
```

---

## üì° 3. Real-time Engagement Loop (Lu·ªìng t∆∞∆°ng t√°c real-time)

M√¥ t·∫£ c∆° ch·∫ø Server-Sent Events (SSE) ƒë·ªÉ ƒë·∫©y th√¥ng b√°o v√† c·∫≠p nh·∫≠t feed m√† kh√¥ng c·∫ßn t·∫£i l·∫°i trang.

```mermaid
sequenceDiagram
    actor User
    participant Client as EventSource (UI)
    participant API as SSE Route Handler
    participant DB as MongoDB Change Stream
    participant Service as NotifyService

    User->>Client: M·ªü App (Init Connection)
    Client->>API: GET /api/v1/notifications/sse
    activate API
    API-->>Client: Connection Established (200 OK, stream)
    
    Note over DB: C√≥ t∆∞∆°ng t√°c m·ªõi (Like/Comment)
    DB->>Service: trigger(changeEvent)
    Service->>Service: Identify targets
    Service->>API: broadcast(payload)
    API-->>Client: data: { type: 'NOTIFICATION', body: '...' }
    Client->>User: Hi·ªÉn th·ªã Toast/Badge c·∫≠p nh·∫≠t
    deactivate API
```

---
*Fidelity Note: C√°c s∆° ƒë·ªì n√†y tu√¢n th·ªß ki·∫øn tr√∫c Local API c·ªßa Payload 3.x v√† c∆° ch·∫ø SSE ƒë∆∞·ª£c th·ªëng nh·∫•t trong arhitacture-V2.md.*

```

### life-2/diagrams/sequence-diagrams/detailed-m2-content.md
```md
# Sequence Diagram: M2 - Content Engine

> **Module:** Core Value
> **M·ª•c ti√™u:** M√¥ t·∫£ chi ti·∫øt qu√° tr√¨nh s√°ng t·∫°o v√† qu·∫£n l√Ω n·ªôi dung b√†i vi·∫øt.

---

## ‚úçÔ∏è 1. K·ªãch b·∫£n: So·∫°n th·∫£o v√† Xu·∫•t b·∫£n b√†i vi·∫øt (M2-A1 & A3)

M√¥ t·∫£ lu·ªìng t·ª´ khi ng∆∞·ªùi d√πng vi·∫øt b√†i ƒë·∫øn khi h·ªá th·ªëng b√≥c t√°ch tag v√† ki·ªÉm tra t√≠nh to√†n v·∫πn.

```mermaid
sequenceDiagram
    actor User
    participant UI as EditorPage
    participant Service as PostService
    participant Payload
    participant DB

    User->>UI: Nh·∫≠p vƒÉn b·∫£n (Lexical) + Hashtag (#tech)
    User->>UI: Nh·∫•n "ƒêƒÉng b√†i"
    UI->>Service: publishPost(content, metadata)
    activate Service
    
    Service->>Service: sanitizeHTML(content)
    Service->>Service: extractHashtags(content)
    Note right of Service: Logic b√≥c t√°ch #tag t·ª± ƒë·ªông
    
    Service->>Payload: payload.create({ collection: 'posts', data })
    activate Payload
    
    Note over Payload: Trigger beforeChange Hook
    Payload->>Payload: Validate integrity & link tags
    
    Payload->>DB: insertOne(post)
    DB-->>Payload: doc
    
    Note over Payload: Trigger afterChange Hook
    Payload-->>Service: createdPost
    deactivate Payload
    
    Service-->>UI: { success: true, post }
    deactivate Service
    UI-->>User: Hi·ªÉn th·ªã b√†i vi·∫øt m·ªõi tr√™n Feed
```

---

## üñºÔ∏è 2. K·ªãch b·∫£n: X·ª≠ l√Ω Media ƒë√≠nh k√®m (M2-A2)

M√¥ t·∫£ lu·ªìng t·∫£i ·∫£nh l√™n server c·ª•c b·ªô (Local Storage).

```mermaid
sequenceDiagram
    actor User
    participant UI as EditorPage
    participant API as UploadRoute
    participant Payload
    participant Disk as Local Storage

    User->>UI: Ch·ªçn ·∫£nh/video ƒë·ªÉ upload
    UI->>API: POST /api/v1/upload (Form Data)
    activate API
    
    API->>Payload: payload.create({ collection: 'media', file })
    activate Payload
    
    Payload->>Payload: Generate thumbnails (n·∫øu l√† ·∫£nh)
    Payload->>Disk: Write file to /public/media/...
    Disk-->>Payload: status: Written
    
    Payload-->>API: { id: mediaId, url: '...' }
    deactivate Payload
    
    API-->>UI: { success: true, mediaId, url }
    deactivate API
    UI-->>User: Hi·ªÉn th·ªã preview trong editor
```

---

## üîí 3. K·ªãch b·∫£n: Th·ª±c thi quy·ªÅn ri√™ng t∆∞ (M2-A4)

M√¥ t·∫£ c√°ch h·ªá th·ªëng √°p d·ª•ng Access Control khi ng∆∞·ªùi kh√°c xem b√†i vi·∫øt.

```mermaid
sequenceDiagram
    actor Viewer
    participant UI as PostDetail
    participant Payload
    participant Access as AccessControl Logic
    participant DB

    Viewer->>UI: Truy c·∫≠p link b√†i vi·∫øt /posts/[id]
    UI->>Payload: payload.findByID({ collection: 'posts', id })
    activate Payload
    
    Payload->>Access: checkReadAccess(viewer, postDoc)
    activate Access
    
    alt Post is Public
        Access-->>Payload: Allow
    else Post is Friends Only
        Access->>DB: checkFriendship(viewerId, authorId)
        DB-->>Access: isFriend: true/false
        Access-->>Payload: Allow if true, else Deny
    else Post is Private
        Access-->>Payload: Deny unless viewer == author
    end
    deactivate Access
    
    alt Allowed
        Payload-->>UI: Post document
        UI-->>Viewer: Hi·ªÉn th·ªã n·ªôi dung
    else Denied
        Payload-->>UI: 403 Forbidden
        UI-->>Viewer: Hi·ªÉn th·ªã "N·ªôi dung kh√¥ng kh·∫£ d·ª•ng"
    end
    deactivate Payload
```

---

## üóëÔ∏è 4. K·ªãch b·∫£n: C·∫≠p nh·∫≠t v√† X√≥a b√†i vi·∫øt (M2-A1)

M√¥ t·∫£ lu·ªìng ng∆∞·ªùi d√πng s·ª≠a ƒë·ªïi ho·∫∑c lo·∫°i b·ªè n·ªôi dung ƒë√£ ƒëƒÉng.

```mermaid
sequenceDiagram
    actor Owner
    participant UI as PostDetail/Edit
    participant Service as PostService
    participant Payload
    participant DB

    alt C·∫≠p nh·∫≠t b√†i vi·∫øt
        Owner->>UI: Thay ƒë·ªïi n·ªôi dung & nh·∫•n "L∆∞u"
        UI->>Service: updatePost(id, data)
        activate Service
        Service->>Payload: payload.update({ collection: 'posts', id })
        activate Payload
        Payload->>DB: updateOne(id)
        DB-->>Payload: updatedDoc
        Payload-->>Service: doc
        deactivate Payload
        Service-->>UI: { success: true }
        deactivate Service
        UI-->>Owner: Hi·ªÉn th·ªã th√¥ng b√°o c·∫≠p nh·∫≠t th√†nh c√¥ng
    else X√≥a b√†i vi·∫øt
        Owner->>UI: Nh·∫•n "X√≥a b√†i" & X√°c nh·∫≠n
        UI->>Service: deletePost(id)
        activate Service
        Service->>Payload: payload.delete({ collection: 'posts', id })
        activate Payload
        Payload->>DB: deleteOne(id)
        DB-->>Payload: deletedDoc
        Payload-->>Service: success
        deactivate Payload
        Service-->>UI: { success: true }
        deactivate Service
        UI-->>Owner: Chuy·ªÉn h∆∞·ªõng v·ªÅ trang c√° nh√¢n/Feed
    end
```

---
*Ghi ch√∫ t·ª´ T√≠t d·ªÖ th∆∞∆°ng: T·∫•t c·∫£ c√°c thao t√°c c·∫≠p nh·∫≠t v√† x√≥a ƒë·ªÅu ƒë∆∞·ª£c Payload Access Control ki·ªÉm tra quy·ªÅn s·ªü h·ªØu (Owner) nghi√™m ng·∫∑t tr∆∞·ªõc khi th·ª±c thi.* ü•∞

```

### life-2/diagrams/sequence-diagrams/detailed-m5-bookmarking.md
```md
# Sequence Diagram: M5 - Social Bookmarking

> **Module:** Social Bookmarking
> **M·ª•c ti√™u:** M√¥ t·∫£ qu√° tr√¨nh l∆∞u b√†i vi·∫øt v√†o b·ªô s∆∞u t·∫≠p c√° nh√¢n.

---

## üíæ 1. K·ªãch b·∫£n: L∆∞u b√†i vi·∫øt v√†o Collection

M√¥ t·∫£ lu·ªìng t·ª´ khi ng∆∞·ªùi d√πng b·∫•m Save ƒë·∫øn khi b√†i vi·∫øt ƒë∆∞·ª£c nh√∫ng (Embedded) v√†o document Collection.

```mermaid
sequenceDiagram
    actor Member
    participant UI as PostCard/SaveModal
    participant Service as BookmarkService
    participant Payload
    participant DB as MongoDB

    Member->>UI: Nh·∫•n bi·ªÉu t∆∞·ª£ng "Save"
    UI-->>Member: Hi·ªÉn th·ªã SaveModal (Ch·ªçn collection)
    Member->>UI: Ch·ªçn "Next.js Learning"
    
    UI->>Service: saveToCollection(postId, collectionId)
    activate Service

    Service->>Payload: payload.update({ id: collectionId, data: { $push: { bookmarks: { post: postId } } } })
    activate Payload
    
    Payload->>DB: MongoDB $push operation
    DB-->>Payload: updatedDoc
    
    deactivate Payload
    Service-->>UI: Success
    deactivate Service
    UI-->>Member: Hi·ªÉn th·ªã th√¥ng b√°o "ƒê√£ l∆∞u v√†o b·ªô s∆∞u t·∫≠p"
```

---

## üìÇ 2. K·ªãch b·∫£n: Xem danh s√°ch b√†i vi·∫øt trong Collection

M√¥ t·∫£ lu·ªìng truy v·∫•n v√† Populate d·ªØ li·ªáu b√†i vi·∫øt t·ª´ m·∫£ng nh√∫ng.

```mermaid
sequenceDiagram
    actor Member
    participant UI as CollectionDetail
    participant Service as BookmarkService
    participant Payload
    participant DB as MongoDB

    Member->>UI: M·ªü b·ªô s∆∞u t·∫≠p "Next.js Learning"
    UI->>Service: getCollectionDetail(collectionId)
    activate Service

    Service->>Payload: payload.findByID({ id: collectionId, depth: 2 })
    activate Payload
    Note over Payload: Populate posts from embedded IDs
    
    Payload->>DB: MongoDB findByID with population
    DB-->>Payload: fullCollectionDoc
    
    deactivate Payload
    Service-->>UI: CollectionDTO (with Posts)
    deactivate Service
    UI-->>Member: Render danh s√°ch b√†i vi·∫øt ƒë√£ l∆∞u
```

---
*Fidelity Note: S·ª≠ d·ª•ng chi·∫øn l∆∞·ª£c Embedded Bookmarks gi√∫p gi·∫£m s·ªë l∆∞·ª£ng collection c·∫ßn qu·∫£n l√Ω v√† t·ªëi ∆∞u t·ªëc ƒë·ªô ƒë·ªçc c·ªßa Member.* ü•∞

```

### life-2/diagrams/sequence-diagrams/detailed-m1-auth.md
```md
# Sequence Diagram: M1 - Auth & Profile

> **Module:** Identity Foundation
> **M·ª•c ti√™u:** M√¥ t·∫£ chi ti·∫øt c√°c k·ªãch b·∫£n x√°c th·ª±c v√† qu·∫£n l√Ω ƒë·ªãnh danh ng∆∞·ªùi d√πng.

---

## üìã 1. K·ªãch b·∫£n: ƒêƒÉng k√Ω t√†i kho·∫£n (M1-A1)

```mermaid
sequenceDiagram
    actor User
    participant RegisterPage
    participant AuthService
    participant Mailer
    participant Payload
    participant DB

    User->>RegisterPage: ƒêi·ªÅn Form (Email, Password)
    RegisterPage->>AuthService: register(data)
    activate AuthService
    AuthService->>Payload: payload.find({ collection: 'users', email })
    Payload-->>AuthService: { docs: [] } (Check unique)
    
    alt Email ƒë√£ t·ªìn t·∫°i
        AuthService-->>RegisterPage: { error: 'Email already exists' }
        RegisterPage-->>User: Hi·ªÉn th·ªã l·ªói tr√πng email
    else Email ch∆∞a t·ªìn t·∫°i
        AuthService->>Payload: payload.create({ collection: 'users', data, status: 'pending' })
        activate Payload
        Payload->>DB: insertUser
        DB-->>Payload: userObj
        Payload-->>AuthService: userObj
        deactivate Payload
        
        AuthService->>Mailer: sendVerificationEmail(email, token)
        activate Mailer
        Mailer-->>AuthService: { success: true }
        deactivate Mailer
        
        AuthService-->>RegisterPage: { success: true }
        deactivate AuthService
        RegisterPage-->>User: Y√™u c·∫ßu ki·ªÉm tra email
    end
```

---

## üîê 2. K·ªãch b·∫£n: ƒêƒÉng nh·∫≠p n·ªôi b·ªô (M1-A2)

```mermaid
sequenceDiagram
    actor User
    participant LoginPage
    participant AuthService
    participant Payload
    participant DB

    User->>LoginPage: Nh·∫≠p Email + Password
    LoginPage->>AuthService: login(email, password)
    activate AuthService
    
    AuthService->>Payload: payload.login({ collection: 'users', data })
    activate Payload
    Payload->>DB: find & verify hash
    
    alt Th√¥ng tin sai
        DB-->>Payload: null
        Payload-->>AuthService: AuthError
        AuthService-->>LoginPage: { success: false, message: 'Sai th√¥ng tin' }
        LoginPage-->>User: Hi·ªÉn th·ªã th√¥ng b√°o l·ªói
    else T√†i kho·∫£n ch∆∞a verify
        DB-->>Payload: user { verified: false }
        Payload-->>AuthService: AuthError
        AuthService-->>LoginPage: { success: false, code: 'UNVERIFIED' }
        LoginPage-->>User: Y√™u c·∫ßu verify email tr∆∞·ªõc
    else Th√†nh c√¥ng
        DB-->>Payload: userRecord
        Payload-->>AuthService: { user, token }
        deactivate Payload
        AuthService->>AuthService: setSessionCookie(token)
        AuthService-->>LoginPage: { success: true }
        LoginPage-->>User: Chuy·ªÉn h∆∞·ªõng t·ªõi Home
    end
    deactivate AuthService
```

---

## üìß 3. K·ªãch b·∫£n: X√°c th·ª±c Email (M1-A3)

```mermaid
sequenceDiagram
    actor User
    participant Mail as H·ªôp th∆∞ c√° nh√¢n
    participant UI as VerifyPage (Next.js)
    participant AuthService
    participant Payload

    User->>Mail: Click link x√°c th·ª±c (token)
    Mail->>UI: Truy c·∫≠p /verify-email?token=...
    UI->>AuthService: verifyToken(token)
    activate AuthService
    AuthService->>Payload: payload.update({ collection: 'users', where: { token }, data: { verified: true } })
    activate Payload
    
    alt Token h·ª£p l·ªá
        Payload-->>AuthService: updatedUser
        AuthService-->>UI: { success: true }
        UI-->>User: Th√¥ng b√°o x√°c th·ª±c th√†nh c√¥ng, m·ªùi Login
    else Token h·∫øt h·∫°n/sai
        Payload-->>AuthService: Error
        AuthService-->>UI: { success: false }
        deactivate Payload
        UI-->>User: Th√¥ng b√°o link kh√¥ng h·ª£p l·ªá, m·ªùi g·ª≠i l·∫°i mail
    end
    deactivate AuthService
```

---

## üõ†Ô∏è 4. K·ªãch b·∫£n: Onboarding Setup (M1-A5)

```mermaid
sequenceDiagram
    actor User
    participant Page as OnboardingPage
    participant Service as ProfileService
    participant Payload

    User->>Page: C·∫≠p nh·∫≠t Avatar, Bio, Interests
    Page->>Service: setupProfile(userId, profileData)
    activate Service
    
    alt C√≥ t·∫£i ·∫£nh Avatar
        Service->>Payload: payload.create({ collection: 'media', file })
        Payload-->>Service: { id: mediaId, url: '...' }
    end
    
    Service->>Payload: payload.update({ collection: 'users', id: userId, data: profileData })
    activate Payload
    Payload-->>Service: updatedUser
    deactivate Payload
    
    Service-->>Page: { success: true }
    deactivate Service
    Page-->>User: Ch√†o m·ª´ng t·ªõi c·ªông ƒë·ªìng NeoSocial!
```

---
*Ghi ch√∫ t·ª´ T√≠t d·ªÖ th∆∞∆°ng: Lu·ªìng Auth n√†y ƒë·∫£m b·∫£o t√≠nh b·∫£o m·∫≠t cao v√† tr·∫£i nghi·ªám ng∆∞·ªùi d√πng m∆∞·ª£t m√† ngay t·ª´ b∆∞·ªõc ƒë·∫ßu ti√™n.* ü•∞

```

### life-2/diagrams/sequence-diagrams/detailed-m6-safety.md
```md
# Sequence Diagram: M6 - Safety & Notifications

> **Module:** Safety & Notifications
> **M·ª•c ti√™u:** M√¥ t·∫£ qu√° tr√¨nh g·ª≠i th√¥ng b√°o th·ªùi gian th·ª±c v√† b√°o c√°o vi ph·∫°m.

---

## üîî 1. K·ªãch b·∫£n: Lu·ªìng ph√°t th√¥ng b√°o (SSE Dispatcher)

M√¥ t·∫£ c√°ch h·ªá th·ªëng t·ª± ƒë·ªông g·ª≠i th√¥ng b√°o khi c√≥ s·ª± ki·ªán m·ªõi.

```mermaid
sequenceDiagram
    participant System as Hook/Service
    participant Payload
    participant SSE as SSE Broker
    participant Client as Browser UI

    System->>Payload: payload.create({ collection: 'notifications' })
    activate Payload
    Payload-->>System: notificationDoc
    deactivate Payload

    System->>SSE: broadcast(recipientId, notificationDoc)
    activate SSE
    SSE-->>Client: Message Event (SSE Stream)
    deactivate SSE
    
    Client-->>Client: Hi·ªÉn th·ªã Toast & Red Dot
```

---

## üö© 2. K·ªãch b·∫£n: B√°o c√°o b√†i vi·∫øt vi ph·∫°m (Report)

```mermaid
sequenceDiagram
    actor Reporter
    participant UI as ReportModal
    participant Service as SafetyService
    participant Payload
    participant Admin as AdminPanel

    Reporter->>UI: Ch·ªçn l√Ω do & Nh·∫•n "G·ª≠i b√°o c√°o"
    UI->>Service: createReport(postId, reason)
    activate Service

    Service->>Payload: payload.create({ collection: 'reports', data })
    activate Payload
    Payload-->>Service: reportId
    deactivate Payload

    Service-->>UI: Success
    deactivate Service
    UI-->>Reporter: C·∫£m ∆°n s·ª± ƒë√≥ng g√≥p c·ªßa b·∫°n!

    Note over Payload, Admin: Admin duy·ªát b√°o c√°o trong Dashboard
    Admin->>Payload: updateReportStatus(reportId, 'resolved')
```

---
*Fidelity Note: H·ªá th·ªëng SSE ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªÉ ch·ªãu t·∫£i nh·∫π (Lightweight) v√† h·ªó tr·ª£ Reconnection t·ª± ƒë·ªông tr√™n Client.* ü•∞

```

### life-2/diagrams/sequence-diagrams/detailed-m3-discovery.md
```md
# Sequence Diagram: M3 - Discovery & Feed

> **Module:** Distribution
> **M·ª•c ti√™u:** M√¥ t·∫£ lu·ªìng t·ªïng h·ª£p d·ªØ li·ªáu, t√¨m ki·∫øm v√† thu·∫≠t to√°n x·∫øp h·∫°ng b√†i vi·∫øt.

---

## üèóÔ∏è 1. K·ªãch b·∫£n: T·ªïng h·ª£p News Feed (M3-A1)

M√¥ t·∫£ lu·ªìng t√≠nh to√°n ƒëi·ªÉm s·ªë (Ranking) d·ª±a tr√™n Time-decay v√† Engagement ƒë·ªÉ hi·ªÉn th·ªã cho ng∆∞·ªùi d√πng.

```mermaid
sequenceDiagram
    actor User
    participant Page as FeedPage
    participant Service as FeedService
    participant Payload
    participant DB as MongoDB (Agg Pipeline)

    User->>Page: M·ªü trang ch·ªß
    Page->>Service: getHomeFeed(userId, page)
    activate Service
    
    Service->>Payload: payload.find({ collection: 'follows', follower: userId })
    Payload-->>Service: friendIds[]
    
    Service->>DB: aggregatePosts(friendIds, algorithmParams)
    activate DB
    Note right of DB: Logic: (Likes + Comments*2) / (Age + 1)^1.5
    DB->>DB: Sort by engagement score & createdAt
    DB-->>Service: sortedPosts[]
    deactivate DB
    
    Service-->>Page: FeedDTO[]
    deactivate Service
    Page-->>User: Render b√†i vi·∫øt theo th·ª© t·ª± "Hot"
```

---

## üîç 2. K·ªãch b·∫£n: Truy v·∫•n Search Engine (M3-A2)

M√¥ t·∫£ lu·ªìng s·ª≠ d·ª•ng MongoDB Atlas Search ƒë·ªÉ t√¨m ki·∫øm Full-text.

```mermaid
sequenceDiagram
    actor User
    participant UI as SearchBar
    participant Service as SearchService
    participant Atlas as MongoDB Atlas Search
    participant Payload

    User->>UI: Nh·∫≠p t·ª´ kh√≥a "Next.js 15"
    UI->>UI: Throttling / Debounce
    UI->>Service: search(query, type: 'posts')
    activate Service
    
    Service->>Atlas: $search { text: { query, path: ['title', 'content'] } }
    activate Atlas
    Atlas-->>Service: matchedResults (scored)
    deactivate Atlas
    
    Service->>Payload: payload.find({ id__in: ids })
    Payload-->>Service: posts[]
    
    Service-->>UI: ResultList
    deactivate Service
    UI-->>User: Hi·ªÉn th·ªã k·∫øt qu·∫£ t√¨m ki·∫øm v·ªõi Highlighting
```

---

## üí° 3. K·ªãch b·∫£n: G·ª£i √Ω b√†i vi·∫øt Hot (Discovery - M3-A3)

M√¥ t·∫£ lu·ªìng hi·ªÉn th·ªã n·ªôi dung cho ng∆∞·ªùi d√πng m·ªõi ho·∫∑c kh√°m ph√° n·ªôi dung ngo√†i danh s√°ch b·∫°n b√®.

```mermaid
sequenceDiagram
    actor Guest
    participant Page as DiscoveryPage
    participant Service as RecommendService
    participant Payload
    participant Cache as Redis (Optional)

    Guest->>Page: M·ªü tab "Kh√°m ph√°"
    Page->>Service: getGlobalTrending()
    activate Service
    
    Service->>Cache: get('trending_posts')
    alt Cache Hit
        Cache-->>Service: trendingIds[]
    else Cache Miss
        Service->>Payload: payload.find({ sort: '-engagementScore', limit: 20 })
        Payload-->>Service: posts[]
        Service->>Cache: set('trending_posts', posts, ttl: 1h)
    end
    
    Service-->>Page: TrendingDTO[]
    deactivate Service
    Page-->>Guest: Render c√°c b√†i vi·∫øt ƒëang viral
```

---

## üîç 2. K·ªãch b·∫£n: T√¨m ki·∫øm n·ªôi dung (Atlas Search Flow)

M√¥ t·∫£ qu√° tr√¨nh ng∆∞·ªùi d√πng t√¨m ki·∫øm b√†i vi·∫øt ho·∫∑c ng∆∞·ªùi d√πng th√¥ng qua h·ªá th·ªëng Atlas Search.

```mermaid
sequenceDiagram
    actor Viewer
    participant UI as SearchBar/Results
    participant API as SearchAPI
    participant Atlas as Atlas Search Index
    participant DB as MongoDB

    Viewer->>UI: Nh·∫≠p t·ª´ kh√≥a "NoSQL"
    UI->>API: GET /api/v1/search?q=NoSQL
    activate API

    API->>Atlas: $search Aggregation Pipeline
    activate Atlas
    Atlas-->>API: Match Results (IDs & Score)
    deactivate Atlas

    API->>DB: Fetch full documents by IDs
    DB-->>API: Posts/Users Docs
    
    API-->>UI: SearchResultsDTO[]
    deactivate API
    UI-->>Viewer: Hi·ªÉn th·ªã k·∫øt qu·∫£ (c√≥ Highlighting)
```

---
*Fidelity Note: Thu·∫≠t to√°n Ranking ƒë∆∞·ª£c t√≠ch h·ª£p tr·ª±c ti·∫øp v√†o Aggregation Pipeline c·ªßa MongoDB ƒë·ªÉ ƒë·∫£m b·∫£o hi·ªáu nƒÉng t·ªëi ∆∞u cho MVP.* ü•∞

```

### life-2/diagrams/sequence-diagrams/sequence-diagram.md
```md
# Sequence Diagrams

> **M·ª•c ƒë√≠ch:** M√¥ t·∫£ flow chi ti·∫øt cho t·ª´ng use case  
> **Format:** Mermaid sequenceDiagram  
> **Ghi ch√∫:** C√≥ th·ªÉ t√°ch th√†nh nhi·ªÅu file trong th∆∞ m·ª•c n√†y (auth-flow.md, post-creation.md, feed-load.md)  

---

## Authentication Flow

```mermaid
sequenceDiagram
    participant C as Client
    participant API as API
    participant Auth as Auth Service
    participant DB as Database
    
    C->>API: POST /api/auth/login
    API->>Auth: validate credentials
    Auth->>DB: find user
    DB-->>Auth: user
    Auth-->>API: token
    API-->>C: 200 + JWT
```

## Post Creation Flow

```mermaid
sequenceDiagram
    participant C as Client
    participant API as API
    participant DB as Database
    
    C->>API: POST /api/posts
    API->>API: validate auth
    API->>DB: insert post
    DB-->>API: post
    API-->>C: 201 + post
```

<!-- Th√™m: News Feed Load, Bookmark Save -->

```

### life-2/diagrams/sequence-diagrams/index.md
```md
# Sequence Diagrams - Index & Navigation

> **Persona:** Senior UML Architect (T√≠t d·ªÖ th∆∞∆°ng)
> **M·ª•c ti√™u:** Cung c·∫•p l·ªô tr√¨nh chi ti·∫øt v·ªÅ c√°c lu·ªìng t∆∞∆°ng t√°c trong h·ªá th·ªëng, t·ª´ t·ªïng quan ƒë·∫øn chi ti·∫øt k·ªπ thu·∫≠t cho t·ª´ng Module (M1-M6).

---

## üó∫Ô∏è I. Danh m·ª•c s∆° ƒë·ªì (Diagram Catalog)

### 1. Lu·ªìng kh√°i qu√°t (Global Flows)

Nh·∫•n m·∫°nh s·ª± t∆∞∆°ng t√°c gi·ªØa c√°c Actor v√† c√°c th√†nh ph·∫ßn ki·∫øn tr√∫c l·ªõn (UI, Service, Payload, DB).

- [X] [**Global Architecture Flows**](./global-flows.md) - T·ªïng quan c√°ch c√°c th√†nh ph·∫ßn "n√≥i chuy·ªán" v·ªõi nhau.

### 2. Chi ti·∫øt theo Module (Detailed Sub-Flows)

Ph√¢n r√£ s√¢u v√†o logic x·ª≠ l√Ω c·ªßa t·ª´ng ch·ª©c nƒÉng c·ª• th·ªÉ d·ª±a tr√™n Spec v√† Activity Diagrams.

| Module | T√™n file t√†i li·ªáu | C√°c lu·ªìng tr·ªçng t√¢m | Tr·∫°ng th√°i |
|:---:|---|---|:---:|
| **M1** | [Auth & Profile](./detailed-m1-auth.md) | Login, Register, OAuth, Recovery, Onboarding | [X] |
| **M2** | [Content Engine](./detailed-m2-content.md) | Editor Pipeline, Media Upload, Visibility | [X] |
| **M3** | [Discovery & Feed](./detailed-m3-discovery.md) | Feed Ranking, Search Engine, Recommendation | [X] |
| **M4** | [Engagement](./detailed-m4-engagement.md) | Follow Handshake, Like/Comment Logic | [X] |
| **M5** | [Bookmarking](./detailed-m5-bookmarking.md) | Collection Orchestrator, Folder Management | [X] |
| **M6** | [Safety](./detailed-m6-safety.md) | SSE Dispatcher, Report & Moderation | [X] |

---

## üèóÔ∏è II. Quy ∆∞·ªõc thi·∫øt k·∫ø (Design Conventions)

ƒê·ªÉ ƒë·∫£m b·∫£o t√≠nh nh·∫•t qu√°n, c√°c s∆° ƒë·ªì tu√¢n th·ªß c√°c quy t·∫Øc sau:

1. **Lifelines (Th√†nh ph·∫ßn h·ªá th·ªëng):**
   - `actor User`: Ng∆∞·ªùi d√πng ƒë·∫ßu cu·ªëi.
   - `participant UI`: Component React / Next.js Page.
   - `participant Service`: L·ªõp x·ª≠ l√Ω nghi·ªáp v·ª• (Domain Logic).
   - `participant Payload`: Payload Local API (`getPayload`).
   - `participant DB`: MongoDB Atlas.
   - `participant SSE`: Server-Sent Events broker.

2. **Message Styles:**
   - `->>`: G·ªçi ƒë·ªìng b·ªô (Synchronous).
   - `-->>`: Tr·∫£ v·ªÅ (Return) ho·∫∑c g·ªçi b·∫•t ƒë·ªìng b·ªô (Async).
   - `activate/deactivate`: Bi·ªÉu di·ªÖn th·ªùi gian x·ª≠ l√Ω.

3. **Logic Fragments:**
   - `alt`: X·ª≠ l√Ω If/Else (v√≠ d·ª•: Success/Fail).
   - `loop`: V√≤ng l·∫∑p (v√≠ d·ª•: duy·ªát danh s√°ch b√†i vi·∫øt).
   - `opt`: H√†nh ƒë·ªông t√πy ch·ªçn (v√≠ d·ª•: g·ª≠i th√¥ng b√°o).

---

## üîó III. T√†i li·ªáu tham chi·∫øu (Traceability)

- **Ki·∫øn tr√∫c t·ªïng th·ªÉ:** `Docs/life-1/arhitacture-V2.md`
- **Use Cases:** `Docs/life-2/diagrams/UseCase/index.md`
- **Activity Diagrams:** `Docs/life-2/diagrams/activity-diagrams/index.md`

---

*Ghi ch√∫ t·ª´ T√≠t d·ªÖ th∆∞∆°ng: M·ªói s∆° ƒë·ªì ƒë·ªÅu ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªÉ chu·∫©n b·ªã cho giai ƒëo·∫°n 3 (Tri·ªÉn khai), gi√∫p y√™u th∆∞∆°ng d·ªÖ d√†ng theo d√µi logic khi code nh√©!* ü•∞

```

### life-2/diagrams/UseCase/use-case-diagram.md
```md
# Use Case Diagram ‚Äî Content-centric SNS (Legacy)

> [!CAUTION]
> **T√ÄI LI·ªÜU N√ÄY ƒê√É ƒê∆Ø·ª¢C PH√ÇN T√ÅCH (DECOMPOSED).**
> C·∫•u tr√∫c ƒë∆°n kh·ªëi (monolithic) trong file n√†y hi·ªán ƒëang ƒë∆∞·ª£c duy tr√¨ cho m·ª•c ƒë√≠ch tham chi·∫øu l·ªãch s·ª≠ nh∆∞ng kh√¥ng c√≤n l√† ngu·ªìn t√†i li·ªáu ch√≠nh th·ª©c cho thi·∫øt k·∫ø chi ti·∫øt.

Vui l√≤ng tham kh·∫£o c·∫•u tr√∫c t√†i li·ªáu Use Case m·ªõi t·∫°i:

## üó∫Ô∏è [UseCase Documentation Hub](./index.md)

C·∫•u tr√∫c m·ªõi bao g·ªìm:
1. **[UseCase Overview](./use-case-overview.md)**: T·ªïng quan h·ªá th·ªëng, Actors v√† System Boundary.
2. **Module BREAKDOWN**:
   - [M1: Auth & Profile](./use-case-m1-auth-profile.md)
   - [M2: Content Engine](./use-case-m2-content-engine.md)
   - [M3: Discovery & Feed](./use-case-m3-discovery-feed.md)
   - [M4: Engagement & Connections](./use-case-m4-engagement-connections.md)
   - [M5: Bookmarking](./use-case-m5-bookmarking.md)
   - [M6: Notifications & Moderation](./use-case-m6-notifications-moderation.md)

---
*L·ªãch s·ª≠: File n√†y ƒë∆∞·ª£c ph√¢n t√°ch v√†o Sprint hi·ªán t·∫°i ƒë·ªÉ c·∫£i thi·ªán kh·∫£ nƒÉng ƒë·ªçc v√† b·∫£o tr√¨ (Change: decompose-usecase-diagrams).*

```

### life-2/diagrams/UseCase/use-case-m5-bookmarking.md
```md
# Use Case M5: Bookmarking

> [!IMPORTANT]
> **Start here:** N·∫øu b·∫°n ch∆∞a xem b·∫£n t·ªïng qu√°t h·ªá th·ªëng, h√£y tham kh·∫£o [UseCase Overview](./use-case-overview.md).

## 1) Ph√¢n v√πng ch·ª©c nƒÉng (Domain Context)
Module M5 cho ph√©p ng∆∞·ªùi d√πng l∆∞u tr·ªØ c√°c b√†i vi·∫øt y√™u th√≠ch v√† t·ªï ch·ª©c ch√∫ng v√†o c√°c b·ªô s∆∞u t·∫≠p (Collections) c√° nh√¢n ƒë·ªÉ xem l·∫°i sau n√†y.

## 2) Traceability Table

| UC | Use Case | Module | FR |
|---|---|---|---|
| UC19 | L∆∞u/B·ªè l∆∞u b√†i vi·∫øt | M5.1 | FR-6 |
| UC20 | Qu·∫£n l√Ω collection bookmark | M5.2 | FR-6 |

## 3) Use Case Diagram

```mermaid
flowchart LR
    Member["üë§ Member"]

    subgraph M5["M5: Bookmarking"]
        UC19((UC19: L∆∞u/B·ªè l∆∞u b√†i vi·∫øt))
        UC20((UC20: Qu·∫£n l√Ω collection bookmark))
    end

    Member --> UC19
    Member --> UC20
```

## 4) Cross-module Dependencies
- **M2**: ƒê·ªëi t∆∞·ª£ng ƒë∆∞·ª£c l∆∞u (UC19) lu√¥n l√† b√†i vi·∫øt thu·ªôc Module M2.
- **M3**: Ng∆∞·ªùi d√πng th∆∞·ªùng th·ª±c hi·ªán h√†nh ƒë·ªông l∆∞u b√†i ngay khi ƒëang xem b√†i tr√™n News Feed. (Tham chi·∫øu: [M3 Feed](./use-case-m3-discovery-feed.md))

```

### life-2/diagrams/UseCase/use-case-overview.md
```md
# Use Case System Overview

> **M·ª•c ti√™u:** Cung c·∫•p c√°i nh√¨n to√†n c·∫£nh v·ªÅ ranh gi·ªõi h·ªá th·ªëng (System Boundary), c√°c t√°c nh√¢n (Actors) v√† c√°c nh√≥m ch·ª©c nƒÉng ch√≠nh. T√†i li·ªáu n√†y gi√∫p hi·ªÉu r√µ "Ai" l√†m ƒë∆∞·ª£c "G√¨" ·ªü m·ª©c ƒë·ªô vƒ© m√¥.

## 1) System Boundary: Content-centric SNS

H·ªá th·ªëng t·∫≠p trung v√†o vi·ªác qu·∫£n l√Ω n·ªôi dung, t∆∞∆°ng t√°c x√£ h·ªôi v√† ph√¢n ph·ªëi d·ªØ li·ªáu d·ª±a tr√™n s·ªü th√≠ch ng∆∞·ªùi d√πng. To√†n b·ªô c√°c ch·ª©c nƒÉng ƒë∆∞·ª£c ph√¢n v√πng th√†nh 6 module t·ª´ M1 ƒë·∫øn M6.

## 2) Actor Identification

| Actor | Lo·∫°i | Vai tr√≤ nghi·ªáp v·ª• | Truy v·∫øt |
|---|---|---|---|
| Guest | Primary | Ng∆∞·ªùi ch∆∞a x√°c th·ª±c, ch·ªâ thao t√°c ƒëƒÉng k√Ω/ƒëƒÉng nh·∫≠p | FR-1 (M1.1) |
| Member | Primary | Ng∆∞·ªùi d√πng ƒë√£ x√°c th·ª±c, s·ª≠ d·ª•ng c√°c ch·ª©c nƒÉng c·ªët l√µi M1-M6 | FR-2..FR-10 |
| Admin | Primary (k·∫ø th·ª´a Member) | X·ª≠ l√Ω ki·ªÉm duy·ªát v√† duy·ªát b√°o c√°o | FR-9 (M6.2.3) |
| External Services | Secondary (actor t·ªïng qu√°t) | Nh√≥m h·ªá th·ªëng t√≠ch h·ª£p b√™n ngo√†i | Technical Decisions |
| OAuth Provider | Secondary (k·∫ø th·ª´a External Services) | X√°c th·ª±c OAuth cho ƒëƒÉng nh·∫≠p social | FR-1 (M1.1.2) |
| Atlas Search Service | Secondary (k·∫ø th·ª´a External Services) | Cung c·∫•p full-text search + autocomplete | FR-7 (M3.2) |

### Actor Generalization
- `Admin` k·∫ø th·ª´a to√†n b·ªô quy·ªÅn c·ªßa `Member`.
- `OAuth Provider` v√† `Atlas Search Service` k·∫ø th·ª´a t·ª´ `External Services`.

## 3) High-level Module Overview Diagram

Diagram n√†y ch·ªâ t·∫≠p trung v√†o s·ª± t∆∞∆°ng t√°c gi·ªØa Actor v√† c√°c nh√≥m ch·ª©c nƒÉng ch√≠nh (Modules), kh√¥ng ƒëi s√¢u v√†o t·ª´ng Use Case nh·ªè.

```mermaid
flowchart LR
    Guest["üë§ Guest"]
    Member["üë§ Member"]
    Admin["üõ°Ô∏è Admin"]
    OAuth["‚òÅÔ∏è OAuth Provider"]
    SearchSvc["üñ•Ô∏è Atlas Search Service"]

    Admin -- "|> K·∫ø th·ª´a" --> Member

    subgraph SystemBoundary ["Content-centric SNS"]
        M1[M1: Auth & Profile]
        M2[M2: Content Engine]
        M3[M3: Discovery & Feed]
        M4[M4: Engagement & Connections]
        M5[M5: Bookmarking]
        M6[M6: Notifications & Moderation]
    end

    Guest --> M1
    Member --> M1
    Member --> M2
    Member --> M3
    Member --> M4
    Member --> M5
    Member --> M6
    
    Admin --> M6
    
    OAuth --> M1
    SearchSvc --> M3
```

## 4) Drill-down Navigation

ƒê·ªÉ xem chi ti·∫øt t·ª´ng Use Case trong t·ª´ng module, h√£y ch·ªçn li√™n k·∫øt t∆∞∆°ng ·ª©ng:

1. [M1: Auth & Profile](./use-case-m1-auth-profile.md)
2. [M2: Content Engine](./use-case-m2-content-engine.md)
3. [M3: Discovery & Feed](./use-case-m3-discovery-feed.md)
4. [M4: Engagement & Connections](./use-case-m4-engagement-connections.md)
5. [M5: Bookmarking](./use-case-m5-bookmarking.md)
6. [M6: Notifications & Moderation](./use-case-m6-notifications-moderation.md)

---
*L∆∞u √Ω: M·ªçi chi ti·∫øt v·ªÅ quan h·ªá <<include>>, <<extend>> ƒë∆∞·ª£c m√¥ t·∫£ t·∫°i t√†i li·ªáu chi ti·∫øt t·ª´ng module.*

```

### life-2/diagrams/UseCase/use-case-m1-auth-profile.md
```md
# Use Case M1: Auth & Profile

> [!IMPORTANT]
> **Start here:** N·∫øu b·∫°n ch∆∞a xem b·∫£n t·ªïng qu√°t h·ªá th·ªëng, h√£y tham kh·∫£o [UseCase Overview](./use-case-overview.md).

## 1) Ph√¢n v√πng ch·ª©c nƒÉng (Domain Context)
Module M1 qu·∫£n l√Ω danh t√≠nh ng∆∞·ªùi d√πng (Guest/Member) v√† h·ªì s∆° c√° nh√¢n. ƒê√¢y l√† c·ª≠a ng√µ ƒë·∫ßu ti√™n c·ªßa h·ªá th·ªëng (Auth) v√† n∆°i th·ªÉ hi·ªán di·ªán m·∫°o ng∆∞·ªùi d√πng (Profile).

## 2) Traceability Table

| UC | Use Case | Module | FR |
|---|---|---|---|
| UC01 | ƒêƒÉng k√Ω t√†i kho·∫£n | M1.1 | FR-1 |
| UC02 | ƒêƒÉng nh·∫≠p Email/Password | M1.1 | FR-1 |
| UC03 | ƒêƒÉng nh·∫≠p OAuth | M1.1 | FR-1 |
| UC04 | ƒêƒÉng xu·∫•t | M1.1 | FR-1 |
| UC05 | Qu√™n/ƒë·∫∑t l·∫°i m·∫≠t kh·∫©u | M1.1 | FR-1 |
| UC06 | Qu·∫£n l√Ω h·ªì s∆° c√° nh√¢n | M1.2 | FR-2 |
| UC07 | Xem h·ªì s∆° c√¥ng khai | M1.2 | FR-2 |

## 3) Use Case Diagram
```mermaid
flowchart LR
    Guest["üë§ Guest"]
    Member["üë§ Member"]
    OAuth["‚òÅÔ∏è OAuth Provider"]

    subgraph M1["M1: Auth & Profile"]
        UC01((UC01: ƒêƒÉng k√Ω t√†i kho·∫£n))
        UC02((UC02: ƒêƒÉng nh·∫≠p Email/Password))
        UC03((UC03: ƒêƒÉng nh·∫≠p OAuth))
        UC04((UC04: ƒêƒÉng xu·∫•t))
        UC05((UC05: Qu√™n/ƒë·∫∑t l·∫°i m·∫≠t kh·∫©u))
        UC06((UC06: Qu·∫£n l√Ω h·ªì s∆° c√° nh√¢n))
        UC07((UC07: Xem h·ªì s∆° c√¥ng khai))
        UCI01((X√°c th·ª±c th√¥ng tin ƒëƒÉng nh·∫≠p))
    end

    Guest --> UC01
    Guest --> UC02
    Guest --> UC03
    Guest --> UC05

    Member --> UC02
    Member --> UC04
    Member --> UC06
    Member --> UC07

    OAuth --> UC03

    UC02 -.->|&lt;&lt;include&gt;&gt;| UCI01
    UC05 -.->|&lt;&lt;extend&gt;&gt;| UC02
    UC03 -.->|&lt;&lt;extend&gt;&gt;| UC02
```

## 4) Cross-module Dependencies
- **M6**: Khi ƒëƒÉng k√Ω th√†nh c√¥ng (UC01), h·ªá th·ªëng c√≥ th·ªÉ g·ª≠i th√¥ng b√°o ch√†o m·ª´ng qua Module M6. (Tham chi·∫øu: [M6 Notifications](./use-case-m6-notifications-moderation.md))
- **M3**: H·ªì s∆° c√¥ng khai (UC07) l√† ƒë√≠ch ƒë·∫øn khi ng∆∞·ªùi d√πng click v√†o t√°c gi·∫£ b√†i vi·∫øt t·ª´ News Feed. (Tham chi·∫øu: [M3 Feed](./use-case-m3-discovery-feed.md))

```

### life-2/diagrams/UseCase/use-case-m2-content-engine.md
```md
# Use Case M2: Content Engine

> [!IMPORTANT]
> **Start here:** N·∫øu b·∫°n ch∆∞a xem b·∫£n t·ªïng qu√°t h·ªá th·ªëng, h√£y tham kh·∫£o [UseCase Overview](./use-case-overview.md).

## 1) Ph√¢n v√πng ch·ª©c nƒÉng (Domain Context)
Module M2 t·∫≠p trung v√†o v√≤ng ƒë·ªùi c·ªßa n·ªôi dung (b√†i vi·∫øt), t·ª´ khi kh·ªüi t·∫°o, ki·ªÉm tra t√≠nh h·ª£p l·ªá, thi·∫øt l·∫≠p quy·ªÅn ri√™ng t∆∞ cho ƒë·∫øn khi ch·ªânh s·ª≠a ho·∫∑c x√≥a b·ªè.

## 2) Traceability Table

| UC | Use Case | Module | FR |
|---|---|---|---|
| UC08 | T·∫°o b√†i vi·∫øt | M2.1 | FR-3 |
| UC09 | Ch·ªânh s·ª≠a/x√≥a b√†i vi·∫øt | M2.2 | FR-3 |
| UC10 | Thi·∫øt l·∫≠p quy·ªÅn ri√™ng t∆∞ b√†i vi·∫øt | M2.2 | FR-3 |

## 3) Use Case Diagram

```mermaid
flowchart LR
    Member["üë§ Member"]

    subgraph M2["M2: Content Engine"]
        UC08((UC08: T·∫°o b√†i vi·∫øt))
        UC09((UC09: Ch·ªânh s·ª≠a/x√≥a b√†i vi·∫øt))
        UC10((UC10: Thi·∫øt l·∫≠p quy·ªÅn ri√™ng t∆∞ b√†i vi·∫øt))
        UCI02((Ki·ªÉm tra quy·ªÅn t·∫°o n·ªôi dung))
        UCI03((Ki·ªÉm tra h·ª£p l·ªá n·ªôi dung))
    end

    Member --> UC08
    Member --> UC09
    Member --> UC10

    UC08 -.->|&lt;&lt;include&gt;&gt;| UCI02
    UC08 -.->|&lt;&lt;include&gt;&gt;| UCI03
```

## 4) Cross-module Dependencies
- **M1**: Vi·ªác t·∫°o b√†i vi·∫øt (UC08) y√™u c·∫ßu tr·∫°ng th√°i t√†i kho·∫£n `Member` ƒë√£ ƒë∆∞·ª£c x√°c th·ª±c (Auth).
- **M3**: B√†i vi·∫øt sau khi t·∫°o s·∫Ω ƒë∆∞·ª£c ph√¢n ph·ªëi v√†o News Feed c·ªßa ng∆∞·ªùi theo d√µi (Followers). (Tham chi·∫øu: [M3 Feed](./use-case-m3-discovery-feed.md))
- **M4**: B√†i vi·∫øt l√† ƒë·ªëi t∆∞·ª£ng ƒë·ªÉ ng∆∞·ªùi d√πng kh√°c Like, Comment. (Tham chi·∫øu: [M4 Engagement](./use-case-m4-engagement-connections.md))

```

### life-2/diagrams/UseCase/use-case-m6-notifications-moderation.md
```md
# Use Case M6: Notifications & Moderation

> [!IMPORTANT]
> **Start here:** N·∫øu b·∫°n ch∆∞a xem b·∫£n t·ªïng qu√°t h·ªá th·ªëng, h√£y tham kh·∫£o [UseCase Overview](./use-case-overview.md).

## 1) Ph√¢n v√πng ch·ª©c nƒÉng (Domain Context)
Module M6 x·ª≠ l√Ω h·ªá th·ªëng th√¥ng b√°o th·ªùi gian th·ª±c gi√∫p duy tr√¨ t∆∞∆°ng t√°c ng∆∞·ªùi d√πng v√† h·ªá th·ªëng ki·ªÉm duy·ªát (Moderation) ƒë·ªÉ ƒë·∫£m b·∫£o ch·∫•t l∆∞·ª£ng n·ªôi dung v√† an to√†n c·ªông ƒë·ªìng.

## 2) Traceability Table

| UC | Use Case | Module | FR |
|---|---|---|---|
| UC21 | Nh·∫≠n th√¥ng b√°o realtime | M6.1 | FR-8 |
| UC22 | ƒê√°nh d·∫•u th√¥ng b√°o ƒë√£ ƒë·ªçc | M6.1 | FR-8 |
| UC23 | B√°o c√°o n·ªôi dung vi ph·∫°m | M6.2 | FR-9 |
| UC24 | Duy·ªát b√°o c√°o v√† x·ª≠ l√Ω | M6.2 | FR-9 |

## 3) Use Case Diagram

```mermaid
flowchart LR
    Member["üë§ Member"]
    Admin["üõ°Ô∏è Admin"]

    subgraph M6["M6: Notifications & Moderation"]
        UC21((UC21: Nh·∫≠n th√¥ng b√°o realtime))
        UC22((UC22: ƒê√°nh d·∫•u th√¥ng b√°o ƒë√£ ƒë·ªçc))
        UC23((UC23: B√°o c√°o n·ªôi dung vi ph·∫°m))
        UC24((UC24: Duy·ªát b√°o c√°o v√† x·ª≠ l√Ω))
        UCI05((√Åp d·ª•ng quy·∫øt ƒë·ªãnh ki·ªÉm duy·ªát))
    end

    Member --> UC21
    Member --> UC22
    Member --> UC23

    Admin --> UC24

    UC24 -.->|&lt;&lt;include&gt;&gt;| UCI05
```

## 4) Cross-module Dependencies
- **M3 & M2**: B√°o c√°o n·ªôi dung (UC23) th∆∞·ªùng ph√°t sinh khi ng∆∞·ªùi d√πng ƒëang l∆∞·ªõt Feed (M3) v√† nh√¨n th·∫•y b√†i vi·∫øt (M2) kh√¥ng ph√π h·ª£p.
- **M4**: C√°c h√†nh ƒë·ªông nh∆∞ Like/Comment/Follow t·ª´ Module M4 ch√≠nh l√† ngu·ªìn ph√°t (trigger) t·∫°o ra th√¥ng b√°o (UC21). (Tham chi·∫øu: [M4 Engagement](./use-case-m4-engagement-connections.md))
- **M1**: Admin (UC24) c√≥ th·ªÉ th·ª±c hi·ªán kh√≥a t√†i kho·∫£n (Profile status) thu·ªôc Module M1 d·ª±a tr√™n k·∫øt qu·∫£ ki·ªÉm duy·ªát.

```

### life-2/diagrams/UseCase/use-case-m3-discovery-feed.md
```md
# Use Case M3: Discovery & Feed

> [!IMPORTANT]
> **Start here:** N·∫øu b·∫°n ch∆∞a xem b·∫£n t·ªïng qu√°t h·ªá th·ªëng, h√£y tham kh·∫£o [UseCase Overview](./use-case-overview.md).

## 1) Ph√¢n v√πng ch·ª©c nƒÉng (Domain Context)
Module M3 ch·ªãu tr√°ch nhi·ªám hi·ªÉn th·ªã n·ªôi dung cho ng∆∞·ªùi d√πng th√¥ng qua News Feed v√† cung c·∫•p c√¥ng c·ª• t√¨m ki·∫øm m·∫°nh m·∫Ω (Discovery) ƒë·ªÉ kh√°m ph√° n·ªôi dung, ng∆∞·ªùi d√πng ho·∫∑c th·∫ª bƒÉm (tag).

## 2) Traceability Table

| UC | Use Case | Module | FR |
|---|---|---|---|
| UC11 | Xem news feed | M3.1 | FR-4 |
| UC12 | T√¨m ki·∫øm n·ªôi dung/ng∆∞·ªùi d√πng/tag | M3.2 | FR-7 |
| UC13 | T·ª± ƒë·ªông g·ª£i √Ω t·ª´ kh√≥a (autocomplete) | M3.2 | FR-7 |

## 3) Use Case Diagram

```mermaid
flowchart LR
    Member["üë§ Member"]
    SearchSvc["üñ•Ô∏è Atlas Search Service"]
    
    subgraph M3["M3: Discovery & Feed"]
        UC11((UC11: Xem news feed))
        UC12((UC12: T√¨m ki·∫øm n·ªôi dung/ng∆∞·ªùi d√πng/tag))
        UC13((UC13: T·ª± ƒë·ªông g·ª£i √Ω t·ª´ kh√≥a))
    end
    
    Member --> UC11
    Member --> UC12
    SearchSvc -.-> UC12
    SearchSvc -.-> UC13
    UC13 -.->|&lt;&lt;extend&gt;&gt;| UC12 
```

## 4) Cross-module Dependencies
- **M2**: News Feed (UC11) hi·ªÉn th·ªã c√°c b√†i vi·∫øt ƒë∆∞·ª£c t·∫°o ra t·ª´ Module M2.
- **M4**: T·ª´ News Feed, ng∆∞·ªùi d√πng c√≥ th·ªÉ th·ª±c hi·ªán Like/Comment b√†i tr·ª±c ti·∫øp. (Tham chi·∫øu: [M4 Engagement](./use-case-m4-engagement-connections.md))
- **M6**: Trong qu√° tr√¨nh l∆∞·ªõt Feed (UC11), ng∆∞·ªùi d√πng c√≥ th·ªÉ b√°o c√°o vi ph·∫°m (UC23). (Tham chi·∫øu: [M6 Notifications & Moderation](./use-case-m6-notifications-moderation.md))

```

### life-2/diagrams/UseCase/use-case-m4-engagement-connections.md
```md
# Use Case M4: Engagement & Connections

> [!IMPORTANT]
> **Start here:** N·∫øu b·∫°n ch∆∞a xem b·∫£n t·ªïng qu√°t h·ªá th·ªëng, h√£y tham kh·∫£o [UseCase Overview](./use-case-overview.md).

## 1) Ph√¢n v√πng ch·ª©c nƒÉng (Domain Context)
Module M4 x·ª≠ l√Ω c√°c t∆∞∆°ng t√°c x√£ h·ªôi gi·ªØa c√°c th√†nh vi√™n (Engagement) v√† qu·∫£n l√Ω m·ªëi quan h·ªá/k·∫øt n·ªëi x√£ h·ªôi (Connections).

## 2) Traceability Table

| UC | Use Case | Module | FR |
|---|---|---|---|
| UC14 | Like/Unlike b√†i vi·∫øt | M4.1 | FR-5 |
| UC15 | B√¨nh lu·∫≠n v√† ph·∫£n h·ªìi l·ªìng nhau | M4.1 | FR-5 |
| UC16 | Chia s·∫ª b√†i vi·∫øt | M4.1 | FR-5 |
| UC17 | Follow/Unfollow th√†nh vi√™n | M4.2 | FR-10 |
| UC18 | Ch·∫∑n th√†nh vi√™n | M4.2 | FR-10 |

## 3) Use Case Diagram

```mermaid
flowchart LR
    Member["üë§ Member"]

    subgraph M4["M4: Engagement & Connections"]
        UC14((UC14: Like/Unlike b√†i vi·∫øt))
        UC15((UC15: B√¨nh lu·∫≠n v√† ph·∫£n h·ªìi l·ªìng nhau))
        UC16((UC16: Chia s·∫ª b√†i vi·∫øt))
        UC17((UC17: Follow/Unfollow th√†nh vi√™n))
        UC18((UC18: Ch·∫∑n th√†nh vi√™n))
        UCI04((Ki·ªÉm tra ch√≠nh s√°ch ri√™ng t∆∞/k·∫øt n·ªëi))
    end

    Member --> UC14
    Member --> UC15
    Member --> UC16
    Member --> UC17
    Member --> UC18

    UC17 -.->|&lt;&lt;include&gt;&gt;| UCI04
```

## 4) Cross-module Dependencies
- **M2**: C√°c h√†nh ƒë·ªông Like/Comment/Share (UC14, UC15, UC16) t√°c ƒë·ªông l√™n th·ª±c th·ªÉ b√†i vi·∫øt c·ªßa Module M2.
- **M3**: H√†nh ƒë·ªông Follow (UC17) s·∫Ω l√†m thay ƒë·ªïi thu·∫≠t to√°n x·∫øp h·∫°ng n·ªôi dung tr√™n News Feed c·ªßa ng∆∞·ªùi d√πng. (Tham chi·∫øu: [M3 Feed](./use-case-m3-discovery-feed.md))
- **M6**: M·ªói h√†nh ƒë·ªông Engagement c√≥ th·ªÉ k√≠ch ho·∫°t m·ªôt th√¥ng b√°o realtime (Push Notification). (Tham chi·∫øu: [M6 Notifications](./use-case-m6-notifications-moderation.md))

```

### life-2/diagrams/UseCase/index.md
```md
# Use Case Documentation Hub

> **M·ª•c ti√™u:** Cung c·∫•p b·∫£n ƒë·ªì ƒëi·ªÅu h∆∞·ªõng cho h·ªá th·ªëng ph√¢n t√≠ch Use Case c·ªßa d·ª± √°n. T√†i li·ªáu ƒë∆∞·ª£c c·∫•u tr√∫c theo 2 c·∫•p: T·ªïng quan h·ªá th·ªëng v√† Chi ti·∫øt t·ª´ng Module (M1-M6).

## 1) L·ªô tr√¨nh ƒë·ªçc (Reading Paths)

### L·ªô tr√¨nh 1: T·ªïng quan h·ªá th·ªëng (Overview-first)
D√†nh cho ng∆∞·ªùi m·ªõi ti·∫øp c·∫≠n ho·∫∑c c·∫ßn c√°i nh√¨n to√†n c·∫£nh v·ªÅ ranh gi·ªõi h·ªá th·ªëng, c√°c Actor ch√≠nh v√† c√°c nh√≥m nƒÉng l·ª±c c·ªët l√µi.
- [ ] [**UseCase Overview**](./use-case-overview.md)

### L·ªô tr√¨nh 2: Chi ti·∫øt theo Module (Module-first)
D√†nh cho Developer ho·∫∑c Reviewer c·∫ßn ƒëi s√¢u v√†o logic nghi·ªáp v·ª• c·ªßa t·ª´ng ph√¢n v√πng ch·ª©c nƒÉng.
- **M1: Auth & Profile** -> [use-case-m1-auth-profile.md](./use-case-m1-auth-profile.md)
- **M2: Content Engine** -> [use-case-m2-content-engine.md](./use-case-m2-content-engine.md)
- **M3: Discovery & Feed** -> [use-case-m3-discovery-feed.md](./use-case-m3-discovery-feed.md)
- **M4: Engagement & Connections** -> [use-case-m4-engagement-connections.md](./use-case-m4-engagement-connections.md)
- **M5: Bookmarking** -> [use-case-m5-bookmarking.md](./use-case-m5-bookmarking.md)
- **M6: Notifications & Moderation** -> [use-case-m6-notifications-moderation.md](./use-case-m6-notifications-moderation.md)

## 2) B·∫£n ƒë·ªì truy v·∫øt (Traceability Map)

| Module | Ch·ª©c nƒÉng (FR) | T√†i li·ªáu Use Case |
|---|---|---|
| **M1** | Identity (FR-1), Profile (FR-2) | [M1: Auth & Profile](./use-case-m1-auth-profile.md) |
| **M2** | Content Creation (FR-3) | [M2: Content Engine](./use-case-m2-content-engine.md) |
| **M3** | Feed (FR-4), Discovery (FR-7) | [M3: Discovery & Feed](./use-case-m3-discovery-feed.md) |
| **M4** | Engagement (FR-5), Connections (FR-10) | [M4: Engagement & Connections](./use-case-m4-engagement-connections.md) |
| **M5** | Bookmark (FR-6) | [M5: Bookmarking](./use-case-m5-bookmarking.md) |
| **M6** | Notification (FR-8), Moderation (FR-9) | [M6: Notifications & Moderation](./use-case-m6-notifications-moderation.md) |

---
*L∆∞u √Ω: M·ªçi thay ƒë·ªïi v·ªÅ Use Case c·∫ßn ƒë∆∞·ª£c c·∫≠p nh·∫≠t ƒë·ªìng b·ªô v·ªõi danh s√°ch Requirements t·∫°i `Docs/life-1/01-vision/FR/`.*

```

### life-2/diagrams/activity-diagrams/m6-a2-report-pipeline.md
```md
# M6-A2: Content Report Pipeline - Detailed Design

> **Persona:** Senior System Architect (T√≠t d·ªÖ th∆∞∆°ng)
> **M·ª•c ti√™u:** M√¥ t·∫£ lu·ªìng ti·∫øp nh·∫≠n b√°o c√°o t·ª´ ng∆∞·ªùi d√πng v·ªÅ c√°c n·ªôi dung vi ph·∫°m, ƒë·∫£m b·∫£o quy tr√¨nh x·ª≠ l√Ω minh b·∫°ch v√† c√¥ng b·∫±ng.
> **Ki·∫øn tr√∫c:** **MVC** (View - Controller/Service - Model).

---

## 1. S∆° ƒë·ªì Activity Diagram (Mermaid)

```mermaid
flowchart TD
    subgraph User["üë§ Ng∆∞·ªùi d√πng (Member)"]
        A1["Ph√°t hi·ªán n·ªôi dung nh·∫°y c·∫£m / vi ph·∫°m"]
        A2["Ch·ªçn 'B√°o c√°o b√†i vi·∫øt'"]
        A3["Ch·ªçn l√Ω do (Spam, Qu·∫•y r·ªëi...) & M√¥ t·∫£"]
        A10["Nh·∫≠n th√¥ng b√°o: 'ƒê√£ ti·∫øp nh·∫≠n b√°o c√°o'"]
    end

    subgraph View["üñ•Ô∏è Frontend (View)"]
        B1["Hi·ªÉn th·ªã Form B√°o c√°o"]
        B2["G·ª≠i Request POST /api/moderation/reports"]
        B3["·∫®n b√†i vi·∫øt t·∫°m th·ªùi kh·ªèi View c·ªßa User ƒë√≥"]
    end

    subgraph ControllerService["‚öôÔ∏è Backend (Controller/Service)"]
        C1["Ti·∫øp nh·∫≠n th√¥ng tin b√°o c√°o"]
        C2["Ki·ªÉm tra t√≠nh h·ª£p l·ªá c·ªßa PostID/UserID"]
        C3["ƒê·ªãnh danh m·ª©c ƒë·ªô nghi√™m tr·ªçng"]
        C4["T·∫°o b·∫£n ghi Report trong h√†ng ch·ªù"]
        C5["G·ª≠i x√°c nh·∫≠n cho ng∆∞·ªùi b√°o c√°o"]
    end

    subgraph Model["üóÑÔ∏è Database (Model)"]
        D1["(Collection: Reports - status: pending)"]
        D2["(Collection: AuditLogs)"]
    end

    %% Connections
    A1 --> A2
    A2 --> B1
    B1 --> A3
    A3 --> B2
    B2 --> B3
    B2 --> C1
    C1 --> C2
    C2 -- "L·ªói" --> B2
    C2 -- "H·ª£p l·ªá" --> C3
    C3 --> C4
    C4 <--> D1
    C4 --> D2
    C4 --> C5
    C5 --> A10

    %% Styling
    style User fill:#fff5f8,stroke:#ff8caf
    style View fill:#e8f4fd,stroke:#2196f3
    style ControllerService fill:#f9f9f9,stroke:#333
    style Model fill:#fffde7,stroke:#fbc02d
```

---

## 2. Gi·∫£i th√≠ch lu·ªìng ho·∫°t ƒë·ªông (Flow Explanation)

| B∆∞·ªõc | Th√†nh ph·∫ßn | M√¥ t·∫£ chi ti·∫øt |
|:---:|---|---|
| **L·ªçc nhanh** | **View** | Ngay khi b√°o c√°o th√†nh c√¥ng, Frontend ch·ªß ƒë·ªông ·∫©n b√†i vi·∫øt ƒë√≥ ƒëi (Local hide) ƒë·ªÉ b·∫£o v·ªá tr·∫£i nghi·ªám c·ªßa ng∆∞·ªùi d√πng ngay l·∫≠p t·ª©c. |
| **Ph√¢n lo·∫°i** | **Controller/Service** | Backend kh√¥ng ch·ªâ l∆∞u b√°o c√°o m√† c√≤n ph·∫£i ph√¢n lo·∫°i m·ª©c ƒë·ªô ∆∞u ti√™n d·ª±a tr√™n l√Ω do (V√≠ d·ª•: 'N·ªôi dung nguy hi·ªÉm' s·∫Ω c√≥ m·ª©c ∆∞u ti√™n cao h∆°n 'Spam'). |
| **H√†ng ch·ªù** | **Model** | B√°o c√°o ƒë∆∞·ª£c l∆∞u v√†o collection `reports` v·ªõi tr·∫°ng th√°i ban ƒë·∫ßu l√† `pending`, ch·ªù Admin v√†o x·ª≠ l√Ω ·ªü Phase M6-A3. |
| **V·∫øt t√≠ch** | **Model** | M·ªçi b√°o c√°o ƒë·ªÅu ƒë∆∞·ª£c ghi l·∫°i trong `AuditLogs` ƒë·ªÉ tr√°nh t√¨nh tr·∫°ng Admin ho·∫∑c User x√≥a d·∫•u v·∫øt b√°o c√°o. |

---

## 3. Ph√¢n t√≠ch r·ªßi ro (Risk Audit)

| ID | R·ªßi ro | Gi·∫£i th√≠ch | Gi·∫£i ph√°p |
|:---:|---|---|---|
| **RP-01** | **Mass Reporting** | M·ªôt nh√≥m ng∆∞·ªùi d√πng c√πng l√∫c b√°o c√°o 1 b√†i vi·∫øt ƒë·ªÉ t√¨m c√°ch g·ª° b√†i ƒë√≥. | Controller ki·ªÉm tra s·ªë l∆∞·ª£ng b√°o c√°o t·ª´ c√πng m·ªôt d·∫£i IP ho·∫∑c c√πng m·ªôt nh√≥m User trong th·ªùi gian ng·∫Øn ƒë·ªÉ c·∫£nh b√°o s·ª± t·∫•n c√¥ng. |
| **RP-02** | **Reporting Spam** | User g·ª≠i h√†ng lo·∫°t b√°o c√°o v√¥ cƒÉn c·ª© ƒë·ªÉ g√¢y nhi·ªÖu Admin. | √Åp d·ª•ng gi·ªõi h·∫°n s·ªë l∆∞·ª£ng b√°o c√°o (Quota) tr√™n m·ªói t√†i kho·∫£n trong ng√†y. T√†i kho·∫£n b√°o c√°o sai nhi·ªÅu l·∫ßn s·∫Ω b·ªã gi·∫£m ƒë·ªô tin c·∫≠y. |
| **RP-03** | **Deleted Target** | N·ªôi dung b·ªã b√°o c√°o b·ªã User x√≥a tr∆∞·ªõc khi Admin k·ªãp xem. | Backend s·∫Ω l∆∞u l·∫°i m·ªôt b·∫£n Snapshot (ch·ª•p l·∫°i n·ªôi dung) t·∫°i th·ªùi ƒëi·ªÉm b√°o c√°o ƒë·ªÉ ph·ª•c v·ª• c√¥ng t√°c ƒë·ªëi so√°t sau n√†y. |

---
*T√†i li·ªáu ƒë∆∞·ª£c c·∫≠p nh·∫≠t d·ª±a tr√™n ti·∫øp c·∫≠n **MVC & Local-First** b·ªüi **T√≠t d·ªÖ th∆∞∆°ng**.*

```

### life-2/diagrams/activity-diagrams/m1-a2-login.md
```md
# M1-A2: Internal Login Protocol - Detailed Design

> **Persona:** Senior System Architect (T√≠t d·ªÖ th∆∞∆°ng)
> **M·ª•c ti√™u:** Quy tr√¨nh x√°c th·ª±c th√¥ng tin ƒëƒÉng nh·∫≠p, c·∫•p ph√°t JWT v√† qu·∫£n l√Ω phi√™n l√†m vi·ªác.
> **Ki·∫øn tr√∫c:** B-U-E (Boundary-UseCase-Entity).

---

## 1. S∆° ƒë·ªì Activity Diagram (Mermaid)

```mermaid
flowchart TD
    %% Swimlanes
    subgraph User["üë§ Ng∆∞·ªùi d√πng (Member)"]
        A1["Nh·∫≠p Email & Password"]
        A2["Nh·∫•p n√∫t ƒêƒÉng nh·∫≠p"]
        A10["ƒê√£ ƒëƒÉng nh·∫≠p th√†nh c√¥ng"]
    end

    subgraph Boundary["üñ•Ô∏è Giao di·ªán (Frontend)"]
        B1["G·ª≠i Request POST /api/users/login"]
        B2{"M√£ tr·∫£ v·ªÅ (Status)?"}
        B3["Hi·ªÉn th·ªã l·ªói: Sai th√¥ng tin / T√†i kho·∫£n ch∆∞a k√≠ch ho·∫°t"]
        B4["L∆∞u JWT v√†o LocalStorage / Cookie"]
        B5["ƒêi·ªÅu h∆∞·ªõng v√†o Dashboard"]
    end

    subgraph UseCase["‚öôÔ∏è X·ª≠ l√Ω nghi·ªáp v·ª• (Backend)"]
        C1["Nh·∫≠n y√™u c·∫ßu Login"]
        C2["T√¨m ki·∫øm User theo Email"]
        C3{"User t·ªìn t·∫°i?"}
        C4["Ki·ªÉm tra password (BCrypt compare)"]
        C5{"Ki·ªÉm tra _verified == true?"}
        C6["T·∫°o JWT access token"]
        C7["Ghi log ƒëƒÉng nh·∫≠p (Th·ªùi gian, IP)"]
        C8["Tr·∫£ v·ªÅ JWT + User Info"]
    end

    subgraph Entity["üóÑÔ∏è D·ªØ li·ªáu (Database)"]
        D1[(Collection: Users)]
    end

    %% Connections
    A1 --> A2
    A2 --> B1
    B1 --> C1
    
    C1 --> C2
    C2 <--> D1
    C2 --> C3
    
    C3 -- "Kh√¥ng" --> C8
    C3 -- "C√≥" --> C4
    
    C4 -- "Sai" --> C8
    C4 -- "ƒê√∫ng" --> C5
    
    C5 -- "Ch∆∞a" --> C8
    C5 -- "R·ªìi" --> C6
    
    C6 --> C7
    C7 --> C8
    
    C8 --> B2
    
    B2 -- "401/403 (L·ªói)" --> B3
    B2 -- "200 (Th√†nh c√¥ng)" --> B4
    
    B3 --> A1
    B4 --> B5
    B5 --> A10

    %% Styling
    style User fill:#fff5f8,stroke:#ff8caf
    style Boundary fill:#e8f4fd,stroke:#2196f3
    style UseCase fill:#f9f9f9,stroke:#333
```

---

## 2. Gi·∫£i th√≠ch lu·ªìng ho·∫°t ƒë·ªông (Flow Explanation)

| B∆∞·ªõc | Th√†nh ph·∫ßn | M√¥ t·∫£ chi ti·∫øt |
|:---:|---|---|
| **B·∫£o m·∫≠t** | **UseCase** | H·ªá th·ªëng s·ª≠ d·ª•ng BCrypt ƒë·ªÉ so s√°nh hash c·ªßa Password, tuy·ªát ƒë·ªëi kh√¥ng l∆∞u password d·∫°ng text th√¥. |
| **ƒêi·ªÅu ki·ªán** | **UseCase** | Ngay c·∫£ khi ƒë√∫ng password, n·∫øu `_verified` l√† `false`, h·ªá th·ªëng s·∫Ω t·ª´ ch·ªëi truy c·∫≠p (G·∫Øn k·∫øt v·ªõi M1-A3). |
| **C·∫•p quy·ªÅn** | **UseCase** | JWT ƒë∆∞·ª£c sinh ra ch·ª©a th√¥ng tin `userId` v√† `role`, ƒë∆∞·ª£c k√Ω b·∫±ng `PAYLOAD_SECRET`. |
| **L∆∞u tr·ªØ** | **Boundary** | Token ƒë∆∞·ª£c l∆∞u t·∫°i Client ƒë·ªÉ s·ª≠ d·ª•ng cho c√°c request ti·∫øp theo (Header Authorization). |

---

## 3. Ph·∫£n bi·ªán r·ªßi ro (Risk Audit)

| ID | R·ªßi ro | Gi·∫£i th√≠ch | Gi·∫£i ph√°p |
|:---:|---|---|---|
| **LG-01** | **Brute Force** | Hacker th·ª≠ m·∫≠t kh·∫©u li√™n t·ª•c. | Kh√≥a t√†i kho·∫£n sau 5 l·∫ßn nh·∫≠p sai ho·∫∑c y√™u c·∫ßu Captcha. |
| **LG-02** | **Token Theft** | JWT b·ªã ƒë√°nh c·∫Øp qua XSS. | S·ª≠ d·ª•ng `HttpOnly Cookie` ƒë·ªÉ l∆∞u Token thay v√¨ LocalStorage. |
| **LG-03** | **Account Hijacking** | ƒêƒÉng nh·∫≠p tr√™n thi·∫øt b·ªã l·∫°. | G·ª≠i email th√¥ng b√°o "Ph√°t hi·ªán ƒëƒÉng nh·∫≠p l·∫°" (Module M6). |

---
*T√†i li·ªáu ƒë∆∞·ª£c thi·∫øt k·∫ø b·ªüi **T√≠t d·ªÖ th∆∞∆°ng**.*

```

### life-2/diagrams/activity-diagrams/m6-notifications-moderation-summary.md
```md
# Module M6: Notifications & Moderation - General Activity Diagrams (Level 1)

> **Persona:** Senior System Architect (T√≠t d·ªÖ th∆∞∆°ng)
> **Ph·∫°m vi:** Qu·∫£n l√Ω h·ªá th·ªëng th√¥ng b√°o th·ªùi gian th·ª±c v√† quy tr√¨nh ki·ªÉm duy·ªát n·ªôi dung an to√†n.
> **Ki·∫øn tr√∫c:** **MVC** (View - Controller/Service - Model) & **Local-First**.

---

## 1. S∆° ƒë·ªì ho·∫°t ƒë·ªông t·ªïng qu√°t (High-Level Flow)

S∆° ƒë·ªì n√†y m√¥ t·∫£ hai tr·ª• c·ªôt c·ªßa Module M6: Lu·ªìng ph·∫£n h·ªìi t∆∞∆°ng t√°c (Notification) v√† Lu·ªìng b·∫£o v·ªá c·ªông ƒë·ªìng (Moderation).

```mermaid
flowchart TD
    %% Nodes
    Start(["S·ª± ki·ªán ph√°t sinh / Ph√°t hi·ªán vi ph·∫°m"])
    
    A1{"Lo·∫°i s·ª± ki·ªán?"}
    
    %% Notification Branch
    B1["M6-A1: ƒêi·ªÅu ph·ªëi th√¥ng b√°o<br/>(SSE Event Dispatcher)"]
    B2["Hi·ªÉn th·ªã th√¥ng b√°o th·ªùi gian th·ª±c"]
    
    %% Moderation Branch
    C1["M6-A2: Quy tr√¨nh b√°o c√°o<br/>(Content Report Pipeline)"]
    C2["M6-A3: Th·ª±c thi quy·∫øt ƒë·ªãnh<br/>(Enforcement Action)"]
    
    End(["C·∫≠p nh·∫≠t tr·∫°ng th√°i h·ªá th·ªëng"])

    %% Flow
    Start --> A1
    A1 -- "T∆∞∆°ng t√°c (Like/Follow)" --> B1
    B1 --> B2
    B2 --> End
    
    A1 -- "B√°o c√°o vi ph·∫°m" --> C1
    C1 --> C2
    C2 --> End

    %% Styling
    style Start fill:#fff5f8,stroke:#ff8caf
    style End fill:#fff5f8,stroke:#ff8caf
    style B1 fill:#e8f4fd,stroke:#2196f3
    style C1 fill:#e8f4fd,stroke:#2196f3
    style C2 fill:#e8f4fd,stroke:#2196f3
```

---

## 2. Gi·∫£i th√≠ch c√°c giai ƒëo·∫°n ch√≠nh (Stages Explanation)

| Giai ƒëo·∫°n | Vai tr√≤ | Tr√°ch nhi·ªám ch√≠nh |
|:---:|---|---|
| **Real-time Event** | `M6-A1` | L·∫Øng nghe c√°c thay ƒë·ªïi trong Database (Internal Events) v√† ƒë·∫©y th√¥ng b√°o xu·ªëng Client th√¥ng qua lu·ªìng SSE g·ª≠i ƒëi. |
| **Audit Filing** | `M6-A2` | Quy tr√¨nh ti·∫øp nh·∫≠n khi·∫øu n·∫°i t·ª´ ng∆∞·ªùi d√πng, g·∫Øn th·∫ª lo·∫°i vi ph·∫°m v√† ƒë∆∞a v√†o h√†ng ch·ªù (Queue) ki·ªÉm duy·ªát. |
| **Resolution** | `M6-A3` | Ph√¢n v√πng d√†nh cho Admin ƒë·ªÉ ƒë∆∞a ra quy·∫øt ƒë·ªãnh: B·ªè qua, C·∫£nh c√°o, G·ª° b√†i ho·∫∑c Kh√≥a t√†i kho·∫£n. |

---

## 3. Th√†nh ph·∫ßn H·∫° t·∫ßng (Local Technical Stack)

Module M6 tu√¢n th·ªß tri·∫øt l√Ω **MVC** & **Local-First** b·∫±ng c√°ch kh√¥ng s·ª≠ d·ª•ng Firebase hay Push Service b√™n th·ª© 3:

1.  **Local SSE (Server-Sent Events)**: S·ª≠ d·ª•ng lu·ªìng d·ªØ li·ªáu m·ªôt chi·ªÅu t·ª´ Server t·ªõi Client qua k·∫øt n·ªëi HTTP duy tr√¨, kh√¥ng c·∫ßn Socket.io hay Cloud Messaging.
2.  **Internal Event Bus**: S·ª≠ d·ª•ng EventEmitter ho·∫∑c Hook tr·ª±c ti·∫øp c·ªßa PayloadCMS ƒë·ªÉ k√≠ch ho·∫°t th√¥ng b√°o ngay sau khi Model thay ƒë·ªïi.
3.  **Local Enforcement**: C√°c h√†nh ƒë·ªông kh√≥a/x√≥a ƒë∆∞·ª£c th·ª±c hi·ªán tr·ª±c ti·∫øp tr√™n Model c·ª•c b·ªô v√† l∆∞u v·∫øt v√†o `audits` collection ƒë·ªÉ ƒë·∫£m b·∫£o t√≠nh minh b·∫°ch.

---
*T√†i li·ªáu ƒë∆∞·ª£c thi·∫øt k·∫ø theo ti·∫øp c·∫≠n **MVC & Local-First** b·ªüi **T√≠t d·ªÖ th∆∞∆°ng**.*

```

### life-2/diagrams/activity-diagrams/m1-auth-profile-summary.md
```md
# Module M1: Auth & Profile - General Activity Diagrams (Level 1)

> **Persona:** Senior System Architect (T√≠t d·ªÖ th∆∞∆°ng)
> **Ph·∫°m vi:** T·ªïng quan c√°c lu·ªìng ho·∫°t ƒë·ªông ch√≠nh c·ªßa Module Danh t√≠nh & H·ªì s∆°.
> **Ki·∫øn tr√∫c:** Tu√¢n th·ªß Boundary-UseCase-Entity (B-U-E).

---

## 1. S∆° ƒë·ªì ho·∫°t ƒë·ªông t·ªïng qu√°t (High-Level Flow)

S∆° ƒë·ªì n√†y m√¥ t·∫£ v√≤ng ƒë·ªùi c·ªßa m·ªôt t√†i kho·∫£n t·ª´ l√∫c ƒëƒÉng k√Ω cho ƒë·∫øn khi ho√†n thi·ªán h·ªì s∆°.

```mermaid
flowchart TD
    %% Nodes
    Start([B·∫Øt ƒë·∫ßu])
    Register["M1-A1: ƒêƒÉng k√Ω t√†i kho·∫£n"]
    Verify{"ƒê√£ x√°c th·ª±c Email?"}
    VerifyFlow["M1-A3: Lu·ªìng x√°c th·ª±c Email"]
    Login["M1-A2: ƒêƒÉng nh·∫≠p h·ªá th·ªëng"]
    CheckProfile{"ƒê√£ setup Profile?"}
    Onboarding["M1-A5: Thi·∫øt l·∫≠p h·ªì s∆° l·∫ßn ƒë·∫ßu"]
    Dashboard([Truy c·∫≠p Dashboard])
    Recovery["M1-A4: Kh√¥i ph·ª•c m·∫≠t kh·∫©u"]

    %% Flow
    Start --> Register
    Register --> Verify
    Verify -- "Ch∆∞a (false)" --> VerifyFlow
    VerifyFlow --> Login
    Verify -- "R·ªìi (true)" --> Login
    Login --> CheckProfile
    CheckProfile -- "Ch∆∞a" --> Onboarding
    Onboarding --> Dashboard
    CheckProfile -- "R·ªìi" --> Dashboard
    
    %% Alternative
    Login -- "Qu√™n m·∫≠t kh·∫©u" --> Recovery
    Recovery --> Login
```

---

## 2. Gi·∫£i th√≠ch c√°c giai ƒëo·∫°n ch√≠nh

| Giai ƒëo·∫°n | M√¥ t·∫£ nghi·ªáp v·ª• | Th√†nh ph·∫ßn tham gia |
|:---:|---|---|
| **Identity Creation** | Kh·ªüi t·∫°o t√†i kho·∫£n trong Database nh∆∞ng ·ªü tr·∫°ng th√°i "Ch·ªù x√°c th·ª±c". | Users Collection, Mailer |
| **Trust Verification** | Ki·ªÉm ch·ª©ng quy·ªÅn s·ªü h·ªØu Email th√¥ng qua m√£/link b√≠ m·∫≠t. | SMTP Server, Token Service |
| **Session Control** | C·∫•p quy·ªÅn truy c·∫≠p h·ªá th·ªëng th√¥ng qua JWT (JSON Web Token). | Payload Auth Plugin |
| **Personalization** | Ho√†n thi·ªán di·ªán m·∫°o ng∆∞·ªùi d√πng tr∆∞·ªõc khi tham gia c·ªông ƒë·ªìng. | Media Storage, Users Collection |

---

## 3. Qu·∫£n l√Ω tr·∫°ng th√°i (State Transitions)

H·ªá th·ªëng qu·∫£n l√Ω ng∆∞·ªùi d√πng qua c√°c tr·∫°ng th√°i logic sau:

1.  **Pending**: User ƒë√£ ƒëƒÉng k√Ω nh∆∞ng ch∆∞a click link email.
2.  **Active**: ƒê√£ x√°c th·ª±c, c√≥ th·ªÉ ƒëƒÉng b√†i v√† t∆∞∆°ng t√°c.
3.  **Recovery**: ƒêang trong qu√° tr√¨nh ƒë·ªïi m·∫≠t kh·∫©u sau khi y√™u c·∫ßu reset.
4.  **Banned**: Tr·∫°ng th√°i do Module M6 ki·ªÉm so√°t (vi ph·∫°m quy ƒë·ªãnh).

---
*T√†i li·ªáu ƒë∆∞·ª£c thi·∫øt k·∫ø b·ªüi **T√≠t d·ªÖ th∆∞∆°ng** d√†nh cho **y√™u th∆∞∆°ng**. Ti·∫øp theo, ch√∫ng m√¨nh s·∫Ω ƒëi s√¢u v√†o chi ti·∫øt t·ª´ng s∆° ƒë·ªì con nh√©!*

```

### life-2/diagrams/activity-diagrams/m1-a1-registration.md
```md
# M1-A1: User Registration Flow (Email) - Detailed Design

> **Persona:** Senior System Architect (T√≠t d·ªÖ th∆∞∆°ng)
> **M·ª•c ti√™u:** M√¥ t·∫£ lu·ªìng ƒëƒÉng k√Ω t√†i kho·∫£n qua Email, ƒë·∫£m b·∫£o an to√†n d·ªØ li·ªáu v√† tr·∫£i nghi·ªám ng∆∞·ªùi d√πng.
> **M·ª©c ƒë·ªô:** C·∫•p ƒë·ªô 2 (Chi ti·∫øt)

---

## 1. S∆° ƒë·ªì Activity Diagram (Mermaid)

```mermaid
flowchart TD
    %% Swimlanes Definition
    subgraph User["üë§ Ng∆∞·ªùi d√πng (Guest)"]
        A1["Nh·∫≠p th√¥ng tin ƒëƒÉng k√Ω"]
        A2["Nh·∫•p n√∫t ƒêƒÉng k√Ω"]
        A11["Nh·∫≠n th√¥ng b√°o: Ki·ªÉm tra Email"]
    end

    subgraph Boundary["üñ•Ô∏è Giao di·ªán (Frontend)"]
        B1["Client-side Validation:<br/>Email format, Strength pass"]
        B2{H·ª£p l·ªá?}
        B3["Hi·ªÉn th·ªã l·ªói Validation"]
        B9["G·ª≠i Request POST /api/users"]
        B12["ƒêi·ªÅu h∆∞·ªõng sang trang Ch·ªù x√°c nh·∫≠n"]
    end

    subgraph UseCase["‚öôÔ∏è X·ª≠ l√Ω nghi·ªáp v·ª• (Backend)"]
        C1["Nh·∫≠n y√™u c·∫ßu ƒëƒÉng k√Ω"]
        C2["Sanitize Input"]
        C3{"Email ƒë√£ t·ªìn t·∫°i?"}
        C4["T·∫°o t√†i kho·∫£n m·ªõi<br/>_verified: false"]
        C5["T·∫°o Activation Token<br/>(H·∫°n 24h)"]
        C6["X√¢y d·ª±ng th∆∞ x√°c th·ª±c"]
        C10["Tr·∫£ v·ªÅ Success Response"]
    end

    subgraph Entity["üóÑÔ∏è D·ªØ li·ªáu (Database)"]
        D1["(Collection: Users)"]
    end

    subgraph External["üìß D·ªãch v·ª• ngo√†i (Mailer)"]
        E1["G·ª≠i Email k√®m Link x√°c th·ª±c"]
    end

    %% Connections
    A1 --> A2
    A2 --> B1
    B1 --> B2
    B2 -- "Kh√¥ng" --> B3
    B3 --> A1
    B2 -- "C√≥" --> B9
    
    B9 --> C1
    C1 --> C2
    C2 --> C3
    
    C3 -- "C√≥" --> C10
    C3 -- "Kh√¥ng" --> C4
    
    C4 <--> D1
    C4 --> C5
    C5 --> C6
    C6 --> E1
    E1 -.-> A11
    
    C6 --> C10
    C10 --> B12
    B12 --> A11

    %% Styling
    style User fill:#fff5f8,stroke:#ff8caf
    style Boundary fill:#e8f4fd,stroke:#2196f3
    style UseCase fill:#f9f9f9,stroke:#333
    style External fill:#fffde7,stroke:#fbc02d
```

---

## 2. Ch√∫ gi·∫£i lu·ªìng ho·∫°t ƒë·ªông (Flow Explanation)

| B∆∞·ªõc | Th√†nh ph·∫ßn | M√¥ t·∫£ chi ti·∫øt |
|:---:|---|---|
| **1** | **User** | Ng∆∞·ªùi d√πng nh·∫≠p: `Email`, `Password`, `Confirm Password`. |
| **2** | **Boundary** | Ki·ªÉm tra logic c∆° b·∫£n (M·∫≠t kh·∫©u ƒë·ªß m·∫°nh, Email ƒë√∫ng ƒë·ªãnh d·∫°ng) ƒë·ªÉ gi·∫£m t·∫£i cho server. |
| **3** | **UseCase** | Nh·∫≠n d·ªØ li·ªáu. N·∫øu Email ƒë√£ t·ªìn t·∫°i, h·ªá th·ªëng v·∫´n tr·∫£ v·ªÅ "Th√†nh c√¥ng" ƒë·ªÉ tr√°nh **User Enumeration Attack** (T·∫•n c√¥ng d√≤ t√¨m email). |
| **4** | **Entity** | L∆∞u b·∫£n ghi User m·ªõi v·ªõi c·ªù `_verified = false`. |
| **5** | **External** | SMTP Mailer ƒë·∫©y th∆∞ ch·ª©a `activationToken` t·ªõi inbox c·ªßa c·ªßa ng∆∞·ªùi d√πng. |

---

## 3. Ph√¢n t√≠ch r·ªßi ro & Ph·∫£n bi·ªán (Risk Audit)

| ID | Lo·∫°i r·ªßi ro | M√¥ t·∫£ | Gi·∫£i ph√°p ƒë·ªÅ xu·∫•t |
|:---:|---|---|---|
| **SM-01** | **Spam Registration** | Bot ƒëƒÉng k√Ω h√†ng lo·∫°t g√¢y tr√†n Database. | √Åp d·ª•ng Rate Limiting tr√™n IP v√† y√™u c·∫ßu x√°c th·ª±c Email tr∆∞·ªõc khi cho ph√©p ho·∫°t ƒë·ªông. |
| **SM-02** | **Data Leak** | Tr·∫£ v·ªÅ l·ªói "Email ƒë√£ t·ªìn t·∫°i" gi√∫p hacker bi·∫øt email n√†o ƒë√£ ƒëƒÉng k√Ω. | Lu√¥n tr·∫£ v·ªÅ th√¥ng b√°o chung: "N·∫øu email h·ª£p l·ªá, ch√∫ng t√¥i ƒë√£ g·ª≠i th∆∞ x√°c th·ª±c". |
| **SM-03** | **Mail Failure** | Email kh√¥ng ƒë·∫øn ƒë∆∞·ª£c ng∆∞·ªùi d√πng (v√†o Spam ho·∫∑c l·ªói SMTP). | Cho ph√©p ng∆∞·ªùi d√πng nh·∫•n "G·ª≠i l·∫°i email x√°c th·ª±c" sau m·ªói 60 gi√¢y. |

---

## 4. Quy t·∫Øc Clean Architecture (B-U-E) √°p d·ª•ng

- **Boundary**: Kh√¥ng ch·ª©a logic t·∫°o Token hay Encode m·∫≠t kh·∫©u. Ch·ªâ l√†m nhi·ªám v·ª• hi·ªÉn th·ªã v√† g·ª≠i Data.
- **UseCase**: L√† n∆°i duy nh·∫•t bi·∫øt c√°ch x√¢y d·ª±ng m·ªôt "Activation Link" v√† ph·ªëi h·ª£p gi·ªØa DB v√† Mailer.
- **Entity**: ƒê·∫£m b·∫£o c·∫•u tr√∫c d·ªØ li·ªáu `users` lu√¥n nh·∫•t qu√°n, kh√¥ng quan t√¢m ƒë·∫øn vi·ªác email ƒë∆∞·ª£c g·ª≠i b·∫±ng c√¥ng c·ª• g√¨.

---
*T√†i li·ªáu ƒë∆∞·ª£c t·∫°o b·ªüi **T√≠t d·ªÖ th∆∞∆°ng** - Senior System Architect.*

```

### life-2/diagrams/activity-diagrams/m5-bookmarking-summary.md
```md
# Module M5: Bookmarking - General Activity Diagrams (Level 1)

> **Persona:** Senior System Architect (T√≠t d·ªÖ th∆∞∆°ng)
> **Ph·∫°m vi:** Qu·∫£n l√Ω vi·ªác l∆∞u tr·ªØ v√† t·ªï ch·ª©c c√°c b√†i vi·∫øt y√™u th√≠ch (Knowledge Management).
> **Ki·∫øn tr√∫c:** **MVC** (View - Controller/Service - Model) & **Local-First**.

---

## 1. S∆° ƒë·ªì ho·∫°t ƒë·ªông t·ªïng qu√°t (High-Level Flow)

S∆° ƒë·ªì n√†y m√¥ t·∫£ c√°ch ng∆∞·ªùi d√πng l∆∞u tr·ªØ n·ªôi dung v√† s·∫Øp x·∫øp ch√∫ng v√†o c√°c th∆∞ m·ª•c c√° nh√¢n.

```mermaid
flowchart TD
    %% Nodes
    Start(["Xem b√†i vi·∫øt (Feed/Discovery)"])
    
    A1{"Ng∆∞·ªùi d√πng mu·ªën l√†m g√¨?"}
    
    %% Bookmark Branch
    B1["M5-A1: L∆∞u b√†i vi·∫øt<br/>(Bookmark Persistence)"]
    B2["L∆∞u v√†o th∆∞ m·ª•c m·∫∑c ƒë·ªãnh (T·∫•t c·∫£)"]
    
    %% Collection Branch
    C1["M5-A2: T·ªï ch·ª©c th∆∞ m·ª•c<br/>(Collection Orchestrator)"]
    C2["Di chuy·ªÉn b√†i vi·∫øt v√†o Collection ri√™ng"]
    
    End(["Truy c·∫≠p kho l∆∞u tr·ªØ c√° nh√¢n"])

    %% Flow
    Start --> A1
    A1 -- "L∆∞u nhanh" --> B1
    B1 --> B2
    B2 --> End
    
    A1 -- "Qu·∫£n l√Ω th∆∞ m·ª•c" --> C1
    C1 --> C2
    C2 --> End

    %% Styling
    style Start fill:#fff5f8,stroke:#ff8caf
    style End fill:#fff5f8,stroke:#ff8caf
    style B1 fill:#e8f4fd,stroke:#2196f3
    style C1 fill:#e8f4fd,stroke:#2196f3
```

---

## 2. Gi·∫£i th√≠ch c√°c giai ƒëo·∫°n ch√≠nh (Stages Explanation)

| Giai ƒëo·∫°n | Vai tr√≤ | Tr√°ch nhi·ªám ch√≠nh |
|:---:|---|---|
| **Persistence** | `M5-A1` | X·ª≠ l√Ω vi·ªác b·∫≠t/t·∫Øt (Toggle) tr·∫°ng th√°i l∆∞u c·ªßa b√†i vi·∫øt. M·∫∑c ƒë·ªãnh m·ªçi b√†i vi·∫øt l∆∞u s·∫Ω n·∫±m trong folder "T·∫•t c·∫£". |
| **Orchestration** | `M5-A2` | Cho ph√©p ng∆∞·ªùi d√πng t·∫°o, s·ª≠a, x√≥a c√°c b·ªô s∆∞u t·∫≠p (Collections) v√† ph√¢n lo·∫°i b√†i vi·∫øt ƒë√£ l∆∞u v√†o ƒë√≥. |

---

## 3. Th√†nh ph·∫ßn H·∫° t·∫ßng (Local Technical Stack)

H·ªá th·ªëng tu√¢n th·ªß tri·∫øt l√Ω **MVC** v√† x·ª≠ l√Ω **Local** ho√†n to√†n:

1.  **Local Storage Reference**: Khi ng∆∞·ªùi d√πng xem b√†i vi·∫øt, View ki·ªÉm tra xem b√†i vi·∫øt ƒë√£ ƒë∆∞·ª£c Bookmark ch∆∞a th√¥ng qua m·ªôt b·∫£n ƒë·ªì ID c·ª•c b·ªô ƒë·ªÉ hi·ªÉn th·ªã icon üîñ ch√≠nh x√°c.
2.  **Model Mapping**: S·ª≠ d·ª•ng collection `bookmarks` ƒë·ªÉ l∆∞u li√™n k·∫øt gi·ªØa `userId`, `postId` v√† `collectionId`. Kh√¥ng c·∫ßn h·ªá th·ªëng qu·∫£n l√Ω file b√™n ngo√†i.
3.  **Atomic Updates**: C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng b√†i vi·∫øt trong m·ªói b·ªô s∆∞u t·∫≠p b·∫±ng c√°c to√°n t·ª≠ nguy√™n t·ª≠ c·ªßa MongoDB ƒë·ªÉ ƒë·∫£m b·∫£o t√≠nh ch√≠nh x√°c khi ng∆∞·ªùi d√πng thao t√°c nhanh.

---
*T√†i li·ªáu ƒë∆∞·ª£c thi·∫øt k·∫ø theo ti·∫øp c·∫≠n **MVC & Local-First** b·ªüi **T√≠t d·ªÖ th∆∞∆°ng**.*

```

### life-2/diagrams/activity-diagrams/m3-a2-search-engine.md
```md
# M3-A2: Search Engine Query - Detailed Design

> **Persona:** Senior System Architect (T√≠t d·ªÖ th∆∞∆°ng)
> **M·ª•c ti√™u:** M√¥ t·∫£ lu·ªìng t√¨m ki·∫øm ƒëa m·ª•c ti√™u (Post, User, Tag) s·ª≠ d·ª•ng s·ª©c m·∫°nh n·ªôi t·∫°i c·ªßa Database (Local Search).
> **Ki·∫øn tr√∫c:** **MVC** (View - Controller/Service - Model).

---

## 1. S∆° ƒë·ªì Activity Diagram (Mermaid)

```mermaid
flowchart TD
    subgraph User["üë§ Ng∆∞·ªùi d√πng (Member)"]
        A1["Nh·∫≠p t·ª´ kh√≥a t√¨m ki·∫øm"]
        A2["Ch·ªçn tab ph√¢n lo·∫°i<br/>(T·∫•t c·∫£ / Ng∆∞·ªùi d√πng / B√†i vi·∫øt)"]
        A10["Xem k·∫øt qu·∫£ t√¨m ki·∫øm"]
    end

    subgraph View["üñ•Ô∏è Frontend (View)"]
        B1["G·ª≠i Request GET /api/search?q=...&type=..."]
        B2["Hi·ªÉn th·ªã g·ª£i √Ω nhanh<br/>(Local Autocomplete)"]
        B3["Render danh s√°ch k·∫øt qu·∫£ theo Tab"]
    end

    subgraph ControllerService["‚öôÔ∏è Backend (Controller/Service)"]
        C1["Ti·∫øp nh·∫≠n t·ª´ kh√≥a v√† lo·∫°i t√¨m ki·∫øm"]
        C2["Sanitize & Escape Query String"]
        C3["X√¢y duy·ªát truy v·∫•n Regex<br/>(Case-insensitive, Unicode)"]
        C4["Truy v·∫•n ƒëa Collection (Users, Posts, Tags)"]
        C5["X·∫øp h·∫°ng k·∫øt qu·∫£ theo ƒë·ªô kh·ªõp"]
        C6["ƒê√≥ng g√≥i k·∫øt qu·∫£ t√¨m ki·∫øm"]
    end

    subgraph Model["üóÑÔ∏è Database (Model)"]
        D1["(Collection: Users - Index: name/username)"]
        D2["(Collection: Posts - Index: content)"]
        D3["(Collection: Tags - Index: slug)"]
    end

    %% Connections
    A1 --> B2
    B2 --> C1
    A1 --> B1
    A2 --> B1
    B1 --> C1
    C1 --> C2
    C2 --> C3
    C3 --> C4
    C4 <--> D1
    C4 <--> D2
    C4 <--> D3
    C4 --> C5
    C5 --> C6
    C6 --> B3
    B3 --> A10

    %% Styling
    style User fill:#fff5f8,stroke:#ff8caf
    style View fill:#e8f4fd,stroke:#2196f3
    style ControllerService fill:#f9f9f9,stroke:#333
    style Model fill:#fffde7,stroke:#fbc02d
```

---

## 2. Gi·∫£i th√≠ch lu·ªìng ho·∫°t ƒë·ªông (Flow Explanation)

| B∆∞·ªõc | Th√†nh ph·∫ßn | M√¥ t·∫£ chi ti·∫øt |
|:---:|---|---|
| **Autocomplete** | **View** | Frontend ch·ªß ƒë·ªông k√≠ch ho·∫°t API t√¨m ki·∫øm khi ng∆∞·ªùi d√πng b·∫Øt ƒë·∫ßu g√µ ƒë·ªÉ tƒÉng t√≠nh t∆∞∆°ng t√°c. |
| **T√¨m ki·∫øm N·ªôi t·∫°i** | **Controller/Service** | Thay v√¨ Atlas Search, h·ªá th·ªëng s·ª≠ d·ª•ng **Regex** k·∫øt h·ª£p v·ªõi **Case-insensitive** ƒë·ªÉ t√¨m ki·∫øm linh ho·∫°t tr√™n c√°c tr∆∞·ªùng vƒÉn b·∫£n. |
| **Ph√¢n lo·∫°i** | **Controller/Service** | Logic Backend t·ª± ƒë·ªông ph√¢n lu·ªìng truy v·∫•n v√†o ƒë√∫ng c√°c Collections (Users, Posts, Tags) d·ª±a tr√™n tham s·ªë `type`. |
| **T·ªëi ∆∞u h√≥a** | **Model** | ƒê·∫£m b·∫£o c√°c tr∆∞·ªùng ti√™u ƒë·ªÅ v√† t√™n ng∆∞·ªùi d√πng ƒë∆∞·ª£c **Indexing** ƒë·ªÉ lu·ªìng Regex kh√¥ng g√¢y n·∫∑ng t·∫£i cho Database. |

---

## 3. Ph√¢n t√≠ch r·ªßi ro (Risk Audit)

| ID | R·ªßi ro | Gi·∫£i th√≠ch | Gi·∫£i ph√°p |
|:---:|---|---|---|
| **SE-01** | **Query Injection** | Ng∆∞·ªùi d√πng nh·∫≠p c√°c k√Ω t·ª± Regex ƒë·∫∑c bi·ªát ƒë·ªÉ ph√° ho·∫°i c√¢u query. | Backend th·ª±c hi·ªán **Escape** (tho√°t chu·ªói) t·∫•t c·∫£ c√°c k√Ω t·ª± ƒë·∫∑c bi·ªát tr∆∞·ªõc khi ƒë∆∞a v√†o Regex engine. |
| **SE-02** | **Privacy Breach** | T√¨m b√†i vi·∫øt ri√™ng t∆∞ ho·∫∑c c·ªßa ng∆∞·ªùi d√πng b·ªã c·∫•m. | Model lu√¥n l·ªìng ƒëi·ªÅu ki·ªán l·ªçc `status: 'active'` v√† `visibility: 'public'` v√†o m·ªçi c√¢u truy v·∫•n. |
| **SE-03** | **Regex Performance** | C√¢u truy v·∫•n Regex qu√° ph·ª©c t·∫°p g√¢y t·ªën t√†i nguy√™n CPU. | Gi·ªõi h·∫°n ƒë·ªô d√†i t·ª´ kh√≥a t√¨m ki·∫øm (min 3 k√Ω t·ª±) v√† s·ª≠ d·ª•ng `$and` ƒë·ªÉ gi·∫£m b·ªõt t·∫≠p d·ªØ li·ªáu tr∆∞·ªõc khi ch·∫°y Regex. |

---
*T√†i li·ªáu ƒë∆∞·ª£c c·∫≠p nh·∫≠t b·ªüi **T√≠t d·ªÖ th∆∞∆°ng** - Ti·∫øp c·∫≠n **MVC & Local-First**.*

```

### life-2/diagrams/activity-diagrams/m2-a4-visibility.md
```md
# M2-A4: Visibility Enforcement - Detailed Design

> **Persona:** Senior System Architect (T√≠t d·ªÖ th∆∞∆°ng)
> **M·ª•c ti√™u:** Qu·∫£n l√Ω quy·ªÅn ri√™ng t∆∞ c·ªßa b√†i vi·∫øt, ƒë·∫£m b·∫£o ch·ªâ nh·ªØng ƒë·ªëi t∆∞·ª£ng ƒë∆∞·ª£c ph√©p m·ªõi c√≥ th·ªÉ ti·∫øp c·∫≠n n·ªôi dung.
> **Ki·∫øn tr√∫c:** B-U-E (Boundary-UseCase-Entity).

---

## 1. S∆° ƒë·ªì Activity Diagram (Mermaid)

```mermaid
flowchart TD
    subgraph User["üë§ Ng∆∞·ªùi d√πng (Member)"]
        A1["Ch·ªçn ƒë·ªëi t∆∞·ª£ng xem b√†i vi·∫øt"]
        A2["Nh·∫•p 'C·∫≠p nh·∫≠t Quy·ªÅn'"]
        A10["Th·∫•y bi·ªÉu t∆∞·ª£ng Quy·ªÅn (üîí/üåê)"]
    end

    subgraph Boundary["üñ•Ô∏è Giao di·ªán (Frontend)"]
        B1["Hi·ªÉn th·ªã Dropdown:<br/>Public, Friends, Private"]
        B2["G·ª≠i Request PATCH /api/posts/{id}/visibility"]
    end

    subgraph UseCase["‚öôÔ∏è X·ª≠ l√Ω nghi·ªáp v·ª• (Backend)"]
        C1["Ti·∫øp nh·∫≠n Payload Visibility"]
        C2{"Lo·∫°i quy·ªÅn?"}
        C3["Thanh l·ªçc danh s√°ch B·∫°n b√®"]
        C4["G√°n c·ªù 'is_private' ho·∫∑c 'visibility_level'"]
        C5["C·∫≠p nh·∫≠t ACL (Access Control List) cho b√†i vi·∫øt"]
    end

    subgraph Entity["üóÑÔ∏è D·ªØ li·ªáu (Database)"]
        D1["(Collection: Posts)"]
        D2["(Collection: Connections/Friends)"]
    end

    %% Connections
    A1 --> B1
    B1 --> A2
    A2 --> B2
    B2 --> C1
    C1 --> C2
    C2 -- "Friends Only" --> C3
    C3 <--> D2
    C3 --> C4
    C2 -- "Public/Private" --> C4
    C4 --> C5
    C5 <--> D1
    C5 --> A10

    %% Styling
    style User fill:#fff5f8,stroke:#ff8caf
    style Boundary fill:#e8f4fd,stroke:#2196f3
    style UseCase fill:#f9f9f9,stroke:#333
```

---

## 2. Gi·∫£i th√≠ch lu·ªìng ho·∫°t ƒë·ªông (Flow Explanation)

| B∆∞·ªõc | Th√†nh ph·∫ßn | M√¥ t·∫£ chi ti·∫øt |
|:---:|---|---|
| **L·ª±a ch·ªçn** | **User** | Ng∆∞·ªùi d√πng quy·∫øt ƒë·ªãnh ph·∫°m vi lan t·ªèa c·ªßa ki·∫øn th·ª©c. |
| **Ph√¢n lo·∫°i** | **UseCase** | C√≥ 3 m·ª©c c∆° b·∫£n: **Public** (Ai c≈©ng th·∫•y), **Friends** (Ch·ªâ b·∫°n b√® th·∫•y), **Private** (Ch·ªâ m√¨nh t√¥i). |
| **Ki·ªÉm tra ch√©o** | **UseCase** | V·ªõi t√πy ch·ªçn 'Friends', h·ªá th·ªëng ph·∫£i truy v·∫•n collection `connections` ƒë·ªÉ x√°c ƒë·ªãnh danh s√°ch UID h·ª£p l·ªá. |
| **Th·ª±c thi** | **Entity** | Khi m·ªôt ng∆∞·ªùi d√πng kh√°c truy v·∫•n News Feed, DB s·∫Ω th·ª±c hi·ªán Filter d·ª±a tr√™n thu·ªôc t√≠nh n√†y (G·∫Øn k·∫øt v·ªõi M3). |

---

## 3. Ph√¢n t√≠ch r·ªßi ro (Risk Audit)

| ID | R·ªßi ro | Gi·∫£i th√≠ch | Gi·∫£i ph√°p |
|:---:|---|---|---|
| **VE-01** | **Privacy Leak** | B√†i vi·∫øt 'Private' nh∆∞ng v·∫´n hi·ªán trong k·∫øt qu·∫£ t√¨m ki·∫øm (Search). | T√≠ch h·ª£p Check Visibility v√†o pipeline Search v√† Indexing. |
| **VE-02** | **Relationship Latency** | H·ªßy k·∫øt b·∫°n nh∆∞ng v·∫´n th·∫•y b√†i vi·∫øt 'Friends Only' do cache. | Invalidate cache ngay khi c√≥ s·ª± thay ƒë·ªïi trong tr·∫°ng th√°i quan h·ªá (Connection change). |
| **VE-03** | **Unintended Access** | Truy c·∫≠p tr·ª±c ti·∫øp qua Direct Link c·ªßa b√†i vi·∫øt Private. | UseCase ki·ªÉm tra quy·ªÅn s·ªü h·ªØu v√† quan h·ªá ngay t·∫°i layer Fetching b·∫±ng Middleware. |

---
*T√†i li·ªáu ƒë∆∞·ª£c bi√™n so·∫°n b·ªüi **T√≠t d·ªÖ th∆∞∆°ng**.*

```

### life-2/diagrams/activity-diagrams/m1-a3-verification.md
```md
# M1-A3: Email Verification Handshake - Detailed Design

> **Persona:** Senior System Architect (T√≠t d·ªÖ th∆∞∆°ng)
> **M·ª•c ti√™u:** M√¥ t·∫£ quy tr√¨nh k√≠ch ho·∫°t t√†i kho·∫£n khi ng∆∞·ªùi d√πng click v√†o link chuy·ªÉn t·ªõi t·ª´ Email.
> **Ki·∫øn tr√∫c:** B-U-E (Boundary-UseCase-Entity).

---

## 1. S∆° ƒë·ªì Activity Diagram (Mermaid)

```mermaid
flowchart TD
    %% Swimlanes
    subgraph User["üë§ Ng∆∞·ªùi d√πng (Member)"]
        A1["M·ªü Email x√°c th·ª±c"]
        A2["Nh·∫•p v√†o Link k√≠ch ho·∫°t"]
        A10["Nh·∫≠n th√¥ng b√°o: Th√†nh c√¥ng / Th·∫•t b·∫°i"]
    end

    subgraph Boundary["üñ•Ô∏è Giao di·ªán (Frontend)"]
        B1["Nh·∫≠n y√™u c·∫ßu qua URL<br/>/verify?token=..."]
        B2["Hi·ªÉn th·ªã tr·∫°ng th√°i Loading"]
        B3["C·∫≠p nh·∫≠t UI: Ch√∫c m·ª´ng th√†nh vi√™n m·ªõi"]
        B4["Hi·ªÉn th·ªã l·ªói: Link h·∫øt h·∫°n / Kh√¥ng h·ª£p l·ªá"]
    end

    subgraph UseCase["‚öôÔ∏è X·ª≠ l√Ω nghi·ªáp v·ª• (Backend)"]
        C1["H·ª©ng Request GET /api/users/verify"]
        C2{"Ki·ªÉm tra t√≠nh h·ª£p l·ªá c·ªßa Token"}
        C3["T√¨m User t∆∞∆°ng ·ª©ng v·ªõi Token"]
        C4{"User t√¨m th·∫•y?"}
        C5["C·∫≠p nh·∫≠t tr·∫°ng th√°i:<br/>_verified = true"]
        C6["H·ªßy Token ƒë√£ d√πng"]
        C7["T·∫°o Log k√≠ch ho·∫°t th√†nh c√¥ng"]
    end

    subgraph Entity["üóÑÔ∏è D·ªØ li·ªáu (Database)"]
        D1[(Collection: Users)]
    end

    %% Connections
    A1 --> A2
    A2 --> B1
    B1 --> C1
    C1 --> C2
    
    C2 -- "Kh√¥ng h·ª£p l·ªá / H·∫øt h·∫°n" --> B4
    C2 -- "H·ª£p l·ªá" --> C3
    
    C3 --> C4
    C4 -- "Kh√¥ng th·∫•y" --> B4
    C4 -- "Th·∫•y" --> C5
    
    C5 <--> D1
    C5 --> C6
    C6 --> C7
    C7 --> B3
    
    B3 --> A10
    B4 --> A10

    %% Styling
    style User fill:#fff5f8,stroke:#ff8caf
    style Boundary fill:#e8f4fd,stroke:#2196f3
    style UseCase fill:#f9f9f9,stroke:#333
```

---

## 2. Gi·∫£i th√≠ch lu·ªìng ho·∫°t ƒë·ªông (Flow Explanation)

| B∆∞·ªõc | Th√†nh ph·∫ßn | M√¥ t·∫£ chi ti·∫øt |
|:---:|---|---|
| **Kh·ªüi ƒë·∫ßu** | **User** | H√†nh ƒë·ªông n√†y di·ªÖn ra b√™n ngo√†i ·ª©ng d·ª•ng (trong Client Email c·ªßa User). |
| **Ti·∫øp nh·∫≠n** | **Boundary** | Frontend b·∫Øt ƒë∆∞·ª£c `token` t·ª´ Query Parameter trong URL v√† g·ª≠i xu·ªëng Backend ƒë·ªÉ th·∫©m ƒë·ªãnh. |
| **Th·∫©m ƒë·ªãnh** | **UseCase** | Backend ki·ªÉm tra s·ª± t·ªìn t·∫°i c·ªßa Token trong DB v√† xem n√≥ c√≥ c√≤n h·∫°n (24h) kh√¥ng. |
| **K√≠ch ho·∫°t** | **Entity** | Sau khi x√°c th·ª±c, tr∆∞·ªùng `_verified` ƒë∆∞·ª£c chuy·ªÉn sang `true`, ch√≠nh th·ª©c bi·∫øn Guest th√†nh Member c√≥ ƒë·∫ßy ƒë·ªß quy·ªÅn l·ª£i. |
| **D·ªçn d·∫πp** | **UseCase** | Token x√°c th·ª±c n√™n ƒë∆∞·ª£c x√≥a ho·∫∑c v√¥ hi·ªáu h√≥a ngay ƒë·ªÉ tr√°nh t√°i s·ª≠ d·ª•ng (Replay Attack). |

---

## 3. Ph·∫£n bi·ªán r·ªßi ro (Risk Audit)

| ID | R·ªßi ro | Gi·∫£i th√≠ch | Gi·∫£i ph√°p |
|:---:|---|---|---|
| **VR-01** | **Token Expiry** | Ng∆∞·ªùi d√πng click v√†o link sau v√†i ng√†y. | H·ªá th·ªëng b√°o l·ªói v√† cung c·∫•p n√∫t "G·ª≠i l·∫°i link m·ªõi". |
| **VR-02** | **Replay Attack** | Link b·ªã click nhi·ªÅu l·∫ßn b·ªüi hacker ho·∫∑c bot scan mail. | Token ch·ªâ ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë√∫ng 1 l·∫ßn. L·∫ßn 2 s·∫Ω b√°o l·ªói. |
| **VR-03** | **Logic Gap** | User ƒë√£ verified r·ªìi nh∆∞ng v·∫´n click link c≈©. | Tr·∫£ v·ªÅ tr·∫°ng th√°i "T√†i kho·∫£n ƒë√£ ƒë∆∞·ª£c x√°c th·ª±c t·ª´ tr∆∞·ªõc" thay v√¨ b√°o l·ªói Token kh√¥ng h·ª£p l·ªá. |

---
*T√†i li·ªáu ƒë∆∞·ª£c bi√™n so·∫°n b·ªüi **T√≠t d·ªÖ th∆∞∆°ng**.*

```

### life-2/diagrams/activity-diagrams/m2-content-engine-summary.md
```md
# Module M2: Content Engine - General Activity Diagrams (Level 1)

> **Persona:** Senior System Architect (T√≠t d·ªÖ th∆∞∆°ng)
> **Ph·∫°m vi:** M√¥ t·∫£ v√≤ng ƒë·ªùi c·ªßa n√¥i dung (Post) t·ª´ l√∫c kh·ªüi t·∫°o ƒë·∫øn khi xu·∫•t b·∫£n.
> **Ki·∫øn tr√∫c:** Tu√¢n th·ªß Boundary-UseCase-Entity (B-U-E).

---

## 1. S∆° ƒë·ªì ho·∫°t ƒë·ªông t·ªïng qu√°t (High-Level Flow)

S∆° ƒë·ªì n√†y m√¥ t·∫£ c√°ch m·ªôt "√Ω t∆∞·ªüng" c·ªßa ng∆∞·ªùi d√πng tr·ªü th√†nh m·ªôt b√†i vi·∫øt ho√†n ch·ªânh tr√™n h·ªá th·ªëng.

```mermaid
flowchart TD
    %% Nodes
    Start(["B·∫Øt ƒë·∫ßu so·∫°n th·∫£o"])
    
    A1["M2-A1: So·∫°n th·∫£o n·ªôi dung<br/>(Rich-text Editor Pipeline)"]
    
    A2{"C√≥ ƒë√≠nh k√®m Media?"}
    
    A3["M2-A2: X·ª≠ l√Ω ƒë√≠nh k√®m<br/>(Media Attachment Handler)"]
    
    A4["M2-A3: Ki·ªÉm tra t√≠nh h·ª£p l·ªá<br/>(Post Integrity & Tagging)"]
    
    A5{"H·ª£p l·ªá?"}
    
    A6["M2-A4: C·∫•u h√¨nh hi·ªÉn th·ªã<br/>(Visibility Enforcement)"]
    
    End(["Xu·∫•t b·∫£n b√†i vi·∫øt"])
    
    Error["Th√¥ng b√°o l·ªói & Y√™u c·∫ßu s·ª≠a"]

    %% Flow
    Start --> A1
    A1 --> A2
    A2 -- "C√≥" --> A3
    A2 -- "Kh√¥ng" --> A4
    A3 --> A4
    A4 --> A5
    A5 -- "C√≥" --> A6
    A5 -- "Kh√¥ng" --> Error
    Error --> A1
    A6 --> End

    %% Styling
    style Start fill:#fff5f8,stroke:#ff8caf
    style End fill:#fff5f8,stroke:#ff8caf
    style A1 fill:#e8f4fd,stroke:#2196f3
    style A3 fill:#e8f4fd,stroke:#2196f3
    style A4 fill:#f9f9f9,stroke:#333
    style A6 fill:#f9f9f9,stroke:#333
```

---

## 2. Gi·∫£i th√≠ch c√°c giai ƒëo·∫°n ch√≠nh (Stages Explanation)

| Giai ƒëo·∫°n | Vai tr√≤ | Tr√°ch nhi·ªám ch√≠nh |
|:---:|---|---|
| **Composition** | `M2-A1` | Cung c·∫•p giao di·ªán so·∫°n th·∫£o (Lexical/TipTap), x·ª≠ l√Ω ƒë·ªãnh d·∫°ng vƒÉn b·∫£n n√¢ng cao. |
| **Materialization** | `M2-A2` | Ti·∫øp nh·∫≠n file (·∫£nh/video), n√©n, t·ªëi ∆∞u h√≥a v√† tr·∫£ v·ªÅ ƒë·ªãnh danh (ID) ƒë·ªÉ g·∫Øn v√†o b√†i vi·∫øt. |
| **Integrity Audit** | `M2-A3` | Ph√¢n t√≠ch n·ªôi dung ƒë·ªÉ b√≥c t√°ch Hashtag, ki·ªÉm tra spam ho·∫∑c t·ª´ c·∫•m (Sanity check). |
| **Access Policy** | `M2-A4` | X√°c ƒë·ªãnh ai c√≥ th·ªÉ xem b√†i vi·∫øt (C√¥ng khai, B·∫°n b√®, ho·∫∑c Ch·ªâ m√¨nh t√¥i). |

---

## 3. Tr·∫°ng th√°i c·ªßa n·ªôi dung (Content Lifecycle States)

1.  **Draft**: B√†i vi·∫øt ƒëang so·∫°n th·∫£o, ch·ªâ l∆∞u t·∫°m ·ªü Client ho·∫∑c LocalStorage.
2.  **Pending**: ƒê√£ g·ª≠i l√™n Server nh∆∞ng ƒëang ch·ªù x·ª≠ l√Ω ƒë√≠nh k√®m ho·∫∑c ki·ªÉm duy·ªát t·ª± ƒë·ªông.
3.  **Published**: ƒê√£ xu·∫•t b·∫£n th√†nh c√¥ng, hi·ªÉn th·ªã tr√™n News Feed.
4.  **Archived**: B√†i vi·∫øt ƒë√£ b·ªã ·∫©n ho·∫∑c g·ª° b·ªè (nh∆∞ng v·∫´n c√≤n trong database ƒë·ªÉ log).

---
*T√†i li·ªáu ƒë∆∞·ª£c thi·∫øt k·∫ø b·ªüi **T√≠t d·ªÖ th∆∞∆°ng** d√†nh cho **y√™u th∆∞∆°ng**. Ch√∫ng m√¨nh s·∫Ω b·∫Øt ƒë·∫ßu ƒëi v√†o chi ti·∫øt t·ª´ng s∆° ƒë·ªì con nh√©!*

```

### life-2/diagrams/activity-diagrams/m5-a2-collection-orchestrator.md
```md
# M5-A2: Collection Orchestrator - Detailed Design

> **Persona:** Senior System Architect (T√≠t d·ªÖ th∆∞∆°ng)
> **M·ª•c ti√™u:** M√¥ t·∫£ lu·ªìng qu·∫£n l√Ω v√† ph√¢n lo·∫°i b√†i vi·∫øt v√†o c√°c b·ªô s∆∞u t·∫≠p (Collections) t√πy ch·ªânh.
> **Ki·∫øn tr√∫c:** **MVC** (View - Controller/Service - Model).

---

## 1. S∆° ƒë·ªì Activity Diagram (Mermaid)

```mermaid
flowchart TD
    subgraph User["üë§ Ng∆∞·ªùi d√πng (Member)"]
        A1["Truy c·∫≠p m√†n h√¨nh B·ªô s∆∞u t·∫≠p"]
        A2["T·∫°o th∆∞ m·ª•c m·ªõi (VD: H·ªçc t·∫≠p)"]
        A3["Ch·ªçn b√†i vi·∫øt & 'Di chuy·ªÉn v√†o th∆∞ m·ª•c'"]
        A10["Th·∫•y b√†i vi·∫øt ƒë√£ n·∫±m trong m·ª•c m·ªõi"]
    end

    subgraph View["üñ•Ô∏è Frontend (View)"]
        B1["Hi·ªÉn th·ªã danh s√°ch th∆∞ m·ª•c"]
        B2["M·ªü Modal ch·ªçn th∆∞ m·ª•c ƒë√≠ch"]
        B3["G·ª≠i Request PATCH /api/bookmarks/move"]
    end

    subgraph ControllerService["‚öôÔ∏è Backend (Controller/Service)"]
        C1["Ti·∫øp nh·∫≠n y√™u c·∫ßu di chuy·ªÉn"]
        C2{"Th∆∞ m·ª•c ƒë√≠ch t·ªìn t·∫°i?"}
        C3["C·∫≠p nh·∫≠t collectionId cho Bookmark record"]
        C4["C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng b√†i vi·∫øt trong m·ªói m·ª•c"]
        C5["Tr·∫£ v·ªÅ danh s√°ch Bookmark ƒë√£ c·∫≠p nh·∫≠t"]
    end

    subgraph Model["üóÑÔ∏è Database (Model)"]
        D1["(Collection: Bookmarks)"]
        D2["(Collection: BookmarkCollections)"]
    end

    %% Connections
    A1 --> B1
    A2 --> C1
    A3 --> B2
    B2 --> B3
    B3 --> C1
    C1 --> C2
    C2 -- "C√≥" --> C3
    C3 <--> D1
    C3 --> C4
    C4 <--> D2
    C4 --> C5
    C5 --> B1
    B1 --> A10

    %% Styling
    style User fill:#fff5f8,stroke:#ff8caf
    style View fill:#e8f4fd,stroke:#2196f3
    style ControllerService fill:#f9f9f9,stroke:#333
    style Model fill:#fffde7,stroke:#fbc02d
```

---

## 2. Gi·∫£i th√≠ch lu·ªìng ho·∫°t ƒë·ªông (Flow Explanation)

| B∆∞·ªõc | Th√†nh ph·∫ßn | M√¥ t·∫£ chi ti·∫øt |
|:---:|---|---|
| **Kh·ªüi t·∫°o** | **User** | Ng∆∞·ªùi d√πng c√≥ th·ªÉ c√° nh√¢n h√≥a kho tri th·ª©c b·∫±ng c√°ch t·∫°o ra c√°c th∆∞ m·ª•c c√≥ t√™n ri√™ng. |
| **Ph√¢n lo·∫°i** | **View** | Cung c·∫•p giao di·ªán k√©o-th·∫£ (Drag & Drop) ho·∫∑c menu "Di chuy·ªÉn" ƒë·ªÉ thay ƒë·ªïi th∆∞ m·ª•c ƒë√≠ch cho b√†i vi·∫øt ƒë√£ l∆∞u. |
| **G·∫Øn k·∫øt l·∫°i** | **Controller/Service** | Thay v√¨ x√≥a v√† t·∫°o m·ªõi, h·ªá th·ªëng ch·ªâ c·∫≠p nh·∫≠t tr∆∞·ªùng `collectionId` c·ªßa b·∫£n ghi Bookmark hi·ªán t·∫°i ƒë·ªÉ gi·ªØ nguy√™n metadata. |
| **Th∆∞ m·ª•c h·ªá th·ªëng** | **Model** | Th∆∞ m·ª•c "T·∫•t c·∫£" l√† th∆∞ m·ª•c h·ªá th·ªëng kh√¥ng th·ªÉ x√≥a, ƒë√≥ng vai tr√≤ l√† n∆°i l∆∞u tr·ªØ m·∫∑c ƒë·ªãnh. |

---

## 3. Ph√¢n t√≠ch r·ªßi ro (Risk Audit)

| ID | R·ªßi ro | Gi·∫£i th√≠ch | Gi·∫£i ph√°p |
|:---:|---|---|---|
| **CO-01** | **Collection Deletion** | X√≥a b·ªô s∆∞u t·∫≠p ƒëang ch·ª©a h√†ng trƒÉm b√†i vi·∫øt. | **Controller** s·∫Ω g√°n l·∫°i to√†n b·ªô b√†i vi·∫øt trong th∆∞ m·ª•c b·ªã x√≥a v·ªÅ l·∫°i th∆∞ m·ª•c "T·∫•t c·∫£" (Default) thay v√¨ x√≥a h·∫≥n bookmark. |
| **CO-02** | **Duplicate Name** | T·∫°o nhi·ªÅu th∆∞ m·ª•c tr√πng t√™n. | S·ª≠ d·ª•ng logic ki·ªÉm tra `slug` ho·∫∑c t√™n duy nh·∫•t cho m·ªói `userId` trong Model. |
| **CO-03** | **Unauthorized Move** | Di chuy·ªÉn b√†i vi·∫øt v√†o m·ªôt th∆∞ m·ª•c kh√¥ng thu·ªôc s·ªü h·ªØu c·ªßa m√¨nh. | Controller b·∫Øt bu·ªôc ki·ªÉm tra `ownerId` c·ªßa `collectionId` tr∆∞·ªõc khi th·ª±c hi·ªán c·∫≠p nh·∫≠t. |

---
*T√†i li·ªáu ƒë∆∞·ª£c c·∫≠p nh·∫≠t d·ª±a tr√™n ti·∫øp c·∫≠n **MVC & Local-First** b·ªüi **T√≠t d·ªÖ th∆∞∆°ng**.*

```

### life-2/diagrams/activity-diagrams/m6-a3-enforcement-action.md
```md
# M6-A3: Enforcement Action - Detailed Design

> **Persona:** Senior System Architect (T√≠t d·ªÖ th∆∞∆°ng)
> **M·ª•c ti√™u:** M√¥ t·∫£ lu·ªìng x·ª≠ l√Ω v√† th·ª±c thi quy·∫øt ƒë·ªãnh ki·ªÉm duy·ªát t·ª´ ph√≠a Qu·∫£n tr·ªã vi√™n (Admin), b·∫£o v·ªá s·ª± trong s·∫°ch c·ªßa c·ªông ƒë·ªìng.
> **Ki·∫øn tr√∫c:** **MVC** (View - Controller/Service - Model).

---

## 1. S∆° ƒë·ªì Activity Diagram (Mermaid)

```mermaid
flowchart TD
    subgraph Admin_User["üõ°Ô∏è Qu·∫£n tr·ªã vi√™n (Admin)"]
        A1["Truy c·∫≠p h√†ng ch·ªù ki·ªÉm duy·ªát (Moderation Queue)"]
        A2["Xem chi ti·∫øt n·ªôi dung b·ªã b√°o c√°o"]
        A3["Ra quy·∫øt ƒë·ªãnh: Ph√™ duy·ªát / B√°c b·ªè"]
        A10["Th·∫•y tr·∫°ng th√°i: ƒê√£ x·ª≠ l√Ω"]
    end

    subgraph View["üñ•Ô∏è Dashboard (View)"]
        B1["Hi·ªÉn th·ªã danh s√°ch Reports (status: pending)"]
        B2["M·ªü giao di·ªán Action: Delete Post / Ban User / Dismiss"]
        B3["G·ª≠i Request PATCH /api/moderation/resolve"]
    end

    subgraph ControllerService["‚öôÔ∏è Backend (Controller/Service)"]
        C1["Ti·∫øp nh·∫≠n quy·∫øt ƒë·ªãnh t·ª´ Admin"]
        C2{"Lo·∫°i quy·∫øt ƒë·ªãnh?"}
        C3["Th·ª±c thi: X√≥a/·∫®n b√†i vi·∫øt<br/>(Update status: 'banned')"]
        C4["Th·ª±c thi: Kh√≥a t√†i kho·∫£n User<br/>(Update status: 'inactive')"]
        C5["Th·ª±c thi: B√°c b·ªè b√°o c√°o<br/>(Update status: 'dismissed')"]
        C6["G·ª≠i th√¥ng b√°o k·∫øt qu·∫£ cho c√°c b√™n li√™n quan"]
    end

    subgraph Model["üóÑÔ∏è Database (Model)"]
        D1["(Collection: Reports)"]
        D2["(Collection: Posts)"]
        D3["(Collection: Users)"]
        D4["(Collection: AuditLogs)"]
    end

    %% Connections
    A1 --> B1
    B1 --> A2
    A2 --> B2
    B2 --> A3
    A3 --> B3
    B3 --> C1
    C1 --> C2
    C2 -- "Vi ph·∫°m POST" --> C3
    C3 <--> D2
    C2 -- "Vi ph·∫°m USER" --> C4
    C4 <--> D3
    C2 -- "V√¥ t·ªôi" --> C5
    C3 --> C6
    C4 --> C6
    C5 --> C6
    C6 <--> D1
    C6 <--> D4
    C6 --> A10

    %% Styling
    style Admin_User fill:#fffde7,stroke:#fbc02d
    style View fill:#e8f4fd,stroke:#2196f3
    style ControllerService fill:#f9f9f9,stroke:#333
    style Model fill:#fffde7,stroke:#fbc02d
```

---

## 2. Gi·∫£i th√≠ch lu·ªìng ho·∫°t ƒë·ªông (Flow Explanation)

| B∆∞·ªõc | Th√†nh ph·∫ßn | M√¥ t·∫£ chi ti·∫øt |
|:---:|---|---|
| **C√¥ng t√¢m** | **Admin** | Admin c√≥ c√°i nh√¨n kh√°ch quan v·ªÅ b√°o c√°o, c√≥ th·ªÉ ƒë·ªëi so√°t n·ªôi dung g·ªëc (Snapshot) v√† l√Ω do b√°o c√°o. |
| **Ph√¢n v√πng** | **Controller/Service** | T√πy m·ª©c ƒë·ªô vi ph·∫°m, h·ªá th·ªëng h·ªó tr·ª£ 3 m·ª©c x·ª≠ l√Ω: Nh·∫Øc nh·ªü (Dismiss), X·ª≠ l√Ω n·ªôi dung (Ban Post) ho·∫∑c X·ª≠ l√Ω ch·ªß th·ªÉ (Ban User). |
| **X√°c l·∫≠p quy·ªÅn** | **Controller/Service** | Ki·ªÉm duy·ªát l√† h√†nh ƒë·ªông nh·∫°y c·∫£m, ch·ªâ nh·ªØng User c√≥ Role `Admin` m·ªõi ƒë∆∞·ª£c ph√©p truy c·∫≠p v√†o Controller n√†y. |
| **L∆∞u v·∫øt** | **Model** | M·ªçi quy·∫øt ƒë·ªãnh ki·ªÉm duy·ªát b·∫Øt bu·ªôc ph·∫£i ghi l·∫°i `adminId`, `reason` v√† `timestamp` v√†o `AuditLogs` ƒë·ªÉ qu·∫£n l√Ω c·∫•p cao c√≥ th·ªÉ ki·ªÉm tra ch√©o (Auditing). |

---

## 3. Ph√¢n t√≠ch r·ªßi ro (Risk Audit)

| ID | R·ªßi ro | Gi·∫£i th√≠ch | Gi·∫£i ph√°p |
|:---:|---|---|---|
| **EA-01** | **Abuse of Power** | Admin l·∫°m quy·ªÅn ƒë·ªÉ x√≥a b√†i ho·∫∑c kh√≥a t√†i kho·∫£n c√° nh√¢n. | M·ªçi quy·∫øt ƒë·ªãnh ƒë·ªÅu ƒë∆∞·ª£c l∆∞u log kh√¥ng th·ªÉ x√≥a. H·ªá th·ªëng c·∫ßn c∆° ch·∫ø Reviewer cho c√°c quy·∫øt ƒë·ªãnh kh√≥a vƒ©nh vi·ªÖn t√†i kho·∫£n. |
| **EA-02** | **Accidental Deletion** | Admin b·∫•m nh·∫ßm n√∫t x√≥a b√†i. | S·ª≠ d·ª•ng **Soft Delete** (Ch·ªâ ƒë·ªïi status, kh√¥ng x√≥a database ngay l·∫≠p t·ª©c) ƒë·ªÉ c√≥ th·ªÉ kh√¥i ph·ª•c trong v√≤ng 30 ng√†y. |
| **EA-03** | **Retaliation** | Ng∆∞·ªùi b·ªã kh√≥a t√†i kho·∫£n t√¨m c√°ch tr·∫£ ƒë≈©a h·ªá th·ªëng. | Khi kh√≥a t√†i kho·∫£n, h·ªá th·ªëng t·ª± ƒë·ªông ƒëƒÉng xu·∫•t User kh·ªèi m·ªçi thi·∫øt b·ªã v√† v√¥ hi·ªáu h√≥a Token ngay l·∫≠p t·ª©c. |

---
*T√†i li·ªáu ƒë∆∞·ª£c c·∫≠p nh·∫≠t d·ª±a tr√™n ti·∫øp c·∫≠n **MVC & Local-First** b·ªüi **T√≠t d·ªÖ th∆∞∆°ng**.*

```

### life-2/diagrams/activity-diagrams/m2-a2-media-handler.md
```md
# M2-A2: Media Attachment Handler - Detailed Design

> **Persona:** Senior System Architect (T√≠t d·ªÖ th∆∞∆°ng)
> **M·ª•c ti√™u:** M√¥ t·∫£ lu·ªìng t·∫£i l√™n v√† x·ª≠ l√Ω t·ªáp tin ƒëa ph∆∞∆°ng ti·ªán (·∫£nh/video), ƒë·∫£m b·∫£o t·ªëi ∆∞u dung l∆∞·ª£ng v√† t√≠nh to√†n v·∫πn c·ªßa d·ªØ li·ªáu.
> **Ki·∫øn tr√∫c:** B-U-E (Boundary-UseCase-Entity).

---

## 1. S∆° ƒë·ªì Activity Diagram (Mermaid)

```mermaid
flowchart TD
    subgraph User["üë§ Ng∆∞·ªùi d√πng (Member)"]
        A1["Ch·ªçn ·∫£nh/video t·ª´ thi·∫øt b·ªã"]
        A2["Xem b·∫£n xem tr∆∞·ªõc (Preview)"]
        A3["Nh·∫•p 'T·∫£i l√™n'"]
        A10["Th·∫•y ·∫£nh ƒë√£ hi·ªán trong b√†i vi·∫øt"]
    end

    subgraph Boundary["üñ•Ô∏è Giao di·ªán (Frontend)"]
        B1["Ki·ªÉm tra Client-side:<br/>Dung l∆∞·ª£ng < 5MB, ƒê·ªãnh d·∫°ng cho ph√©p"]
        B2["Hi·ªÉn th·ªã thanh ti·∫øn tr√¨nh (Progress Bar)"]
        B3["G·ª≠i Multipart Request t·ªõi /api/media"]
        B4["Nh·∫≠n tr·∫£ v·ªÅ ID c·ªßa Media"]
    end

    subgraph UseCase["‚öôÔ∏è X·ª≠ l√Ω nghi·ªáp v·ª• (Backend)"]
        C1["Ti·∫øp nh·∫≠n Multipart Stream"]
        C2["Ki·ªÉm tra MIME Type th·ª±c t·∫ø"]
        C3["Th·ª±c hi·ªán Resize & N√©n ·∫£nh<br/>(D√πng th∆∞ vi·ªán Sharp)"]
        C4["L∆∞u t·ªáp v√†o th∆∞ m·ª•c /public/media"]
        C5["T·∫°o b·∫£n ghi Media trong DB"]
        C6["Tr·∫£ v·ªÅ JSON Doc v·ªõi Media ID"]
    end

    subgraph Entity["üóÑÔ∏è D·ªØ li·ªáu (Database)"]
        D1["(Collection: Media)"]
        D2["(Collection: Posts - field mediaIds)"]
    end

    subgraph External["üìÇ L∆∞u tr·ªØ (File System)"]
        E1["/public/media/{hash-name}.webp"]
    end

    %% Connections
    A1 --> B1
    B1 -- "Kh√¥ng h·ª£p l·ªá" --> A1
    B1 -- "H·ª£p l·ªá" --> A2
    A2 --> A3
    A3 --> B2
    B2 --> B3
    B3 --> C1
    C1 --> C2
    C2 -- "Tr√°i ph√©p" --> B3
    C2 -- "H·ª£p l·ªá" --> C3
    C3 --> C4
    C4 <--> E1
    C4 --> C5
    C5 <--> D1
    C5 --> C6
    C6 --> B4
    B4 --> D2
    D2 --> A10

    %% Styling
    style User fill:#fff5f8,stroke:#ff8caf
    style Boundary fill:#e8f4fd,stroke:#2196f3
    style UseCase fill:#f9f9f9,stroke:#333
    style External fill:#fffde7,stroke:#fbc02d
```

---

## 2. Gi·∫£i th√≠ch lu·ªìng ho·∫°t ƒë·ªông (Flow Explanation)

| B∆∞·ªõc | Th√†nh ph·∫ßn | M√¥ t·∫£ chi ti·∫øt |
|:---:|---|---|
| **Ki·ªÉm tra ƒë·∫ßu** | **Boundary** | Client ch·∫∑n ngay c√°c file qu√° n·∫∑ng ho·∫∑c sai ƒë·ªãnh d·∫°ng ƒë·ªÉ ti·∫øt ki·ªám bƒÉng th√¥ng Server. |
| **X·ª≠ l√Ω ·∫£nh** | **UseCase** | Backend s·ª≠ d·ª•ng `Sharp` ƒë·ªÉ chuy·ªÉn ƒë·ªïi ·∫£nh sang ƒë·ªãnh d·∫°ng `.webp` (t·ªëi ∆∞u nh·∫•t cho web) v√† resize v·ªÅ c√°c k√≠ch th∆∞·ªõc chu·∫©n. |
| **L∆∞u tr·ªØ** | **External** | T·ªáp tin th·ª±c t·∫ø ƒë∆∞·ª£c l∆∞u v√†o h·ªá th·ªëng file c·ª•c b·ªô (Local Storage). T√™n t·ªáp ƒë∆∞·ª£c hash (SHA-256) d·ª±a tr√™n n·ªôi dung ƒë·ªÉ tr√°nh tr√πng l·∫∑p. |
| **Li√™n k·∫øt** | **Entity** | Sau khi c√≥ Media ID, Boundary s·∫Ω th·ª±c hi·ªán g·∫Øn ID n√†y v√†o danh s√°ch `attachments` c·ªßa b√†i vi·∫øt ƒëang so·∫°n th·∫£o. |

---

## 3. Ph√¢n t√≠ch r·ªßi ro (Risk Audit)

| ID | R·ªßi ro | Gi·∫£i th√≠ch | Gi·∫£i ph√°p |
|:---:|---|---|---|
| **MA-01** | **Storage Exhaustion** | Upload qu√° nhi·ªÅu file r√°c g√¢y ƒë·∫ßy ·ªï c·ª©ng. | √Åp d·ª•ng Quote gi·ªõi h·∫°n dung l∆∞·ª£ng tr√™n m·ªói User v√† t·ª± ƒë·ªông d·ªçn d·∫πp c√°c Media kh√¥ng ƒë∆∞·ª£c g·∫Øn v√†o b√†i vi·∫øt n√†o sau 24h. |
| **MA-02** | **Malware Upload** | Hacker upload file th·ª±c thi gi·∫£ d·∫°ng ·∫£nh. | Ki·ªÉm tra Magic Numbers c·ªßa file thay v√¨ ch·ªâ tin v√†o ƒëu√¥i m·ªü r·ªông (Extension). |
| **MA-03** | **Sensitive Data** | ·∫¢nh ch·ª©a t·ªça ƒë·ªô GPS ho·∫∑c th√¥ng tin c√° nh√¢n trong EXIF. | Backend t·ª± ƒë·ªông x√≥a s·∫°ch GPS data v√† EXIF metadata khi x·ª≠ l√Ω ·∫£nh. |

---
*T√†i li·ªáu ƒë∆∞·ª£c bi√™n so·∫°n b·ªüi **T√≠t d·ªÖ th∆∞∆°ng**.*

```

### life-2/diagrams/activity-diagrams/m3-a1-feed-assembler.md
```md
# M3-A1: News Feed Assembler - Detailed Design

> **Persona:** Senior System Architect (T√≠t d·ªÖ th∆∞∆°ng)
> **M·ª•c ti√™u:** M√¥ t·∫£ lu·ªìng t·ªïng h·ª£p b√†i vi·∫øt t·ª´ nhi·ªÅu ngu·ªìn ƒë·ªÉ hi·ªÉn th·ªã l√™n d√≤ng th·ªùi gian c·ªßa ng∆∞·ªùi d√πng.
> **Ki·∫øn tr√∫c:** B-U-E (Boundary-UseCase-Entity).

---

## 1. S∆° ƒë·ªì Activity Diagram (Mermaid)

```mermaid
flowchart TD
    subgraph User["üë§ Ng∆∞·ªùi d√πng (Member)"]
        A1["Truy c·∫≠p News Feed"]
        A2["Cu·ªôn trang (Infinite Scroll)"]
        A10["Xem danh s√°ch b√†i vi·∫øt m·ªõi nh·∫•t"]
    end

    subgraph Boundary["üñ•Ô∏è Giao di·ªán (Frontend)"]
        B1["G·ª≠i Request GET /api/posts/feed?page=1"]
        B2["Hi·ªÉn th·ªã Skeleton Loading"]
        B3["Render danh s√°ch b√†i vi·∫øt"]
        B4["B·∫Øt s·ª± ki·ªán cu·ªôn trang ƒë·ªÉ Load More"]
    end

    subgraph UseCase["‚öôÔ∏è X·ª≠ l√Ω nghi·ªáp v·ª• (Backend)"]
        C1["Nh·∫≠n Request l·∫•y Feed"]
        C2["L·∫•y danh s√°ch Following IDs c·ªßa User"]
        C3["X√¢y d·ª±ng Query: (Followings OR Public) AND Active"]
        C4["Th·ª±c hi·ªán Ph√¢n trang (Pagination)"]
        C5["Populate d·ªØ li·ªáu: Author, Media, Tags"]
        C6["Tr·∫£ v·ªÅ Paginated Response"]
    end

    subgraph Entity["üóÑÔ∏è D·ªØ li·ªáu (Database)"]
        D1["(Collection: Posts)"]
        D2["(Collection: Connections)"]
    end

    %% Connections
    A1 --> B1
    B1 --> B2
    B1 --> C1
    C1 --> C2
    C2 <--> D2
    C2 --> C3
    C3 --> C4
    C4 <--> D1
    C4 --> C5
    C5 <--> D1
    C5 --> C6
    C6 --> B3
    B3 --> A10
    A10 --> A2
    A2 --> B4
    B4 --> B1

    %% Styling
    style User fill:#fff5f8,stroke:#ff8caf
    style Boundary fill:#e8f4fd,stroke:#2196f3
    style UseCase fill:#f9f9f9,stroke:#333
    style Entity fill:#fffde7,stroke:#fbc02d
```

---

## 2. Gi·∫£i th√≠ch lu·ªìng ho·∫°t ƒë·ªông (Flow Explanation)

| B∆∞·ªõc | Th√†nh ph·∫ßn | M√¥ t·∫£ chi ti·∫øt |
|:---:|---|---|
| **ƒêi·ªÅu ki·ªán l·ªçc** | **UseCase** | H·ªá th·ªëng ∆∞u ti√™n b√†i vi·∫øt t·ª´ nh·ªØng ng∆∞·ªùi m√† User ƒëang `Following`. B√†i vi·∫øt ph·∫£i ·ªü tr·∫°ng th√°i `published` v√† `visibility` l√† `public` ho·∫∑c `friends`. |
| **T·ªëi ∆∞u h√≥a** | **Boundary** | S·ª≠ d·ª•ng **Infinite Scroll** ƒë·ªÉ gi·∫£m t·∫£i dung l∆∞·ª£ng truy·ªÅn t·∫£i, ch·ªâ t·∫£i 10-20 b√†i m·ªói l·∫ßn cu·ªôn. |
| **Li√™n k·∫øt d·ªØ li·ªáu** | **UseCase** | Vi·ªác **Populate** (Join) d·ªØ li·ªáu t√°c gi·∫£ v√† h√¨nh ·∫£nh gi√∫p Frontend hi·ªÉn th·ªã ƒë·∫ßy ƒë·ªß th√¥ng tin m√† kh√¥ng c·∫ßn g·ªçi th√™m API. |
| **Ph√¢n trang** | **Entity** | S·ª≠ d·ª•ng `skip` v√† `limit` c·ªßa MongoDB ƒë·ªÉ qu·∫£n l√Ω ph√¢n trang ch√≠nh x√°c. |

---

## 3. Ph√¢n t√≠ch r·ªßi ro (Risk Audit)

| ID | R·ªßi ro | Gi·∫£i th√≠ch | Gi·∫£i ph√°p |
|:---:|---|---|---|
| **FA-01** | **Performance Degradation** | User theo d√µi qu√° nhi·ªÅu ng∆∞·ªùi khi·∫øn query ch·∫≠m. | S·ª≠ d·ª•ng **Indexing** tr√™n c√°c tr∆∞·ªùng `author`, `createdAt` v√† `visibility`. |
| **FA-02** | **Duplicate Content** | B√†i vi·∫øt b·ªã l·∫∑p l·∫°i khi cu·ªôn trang do c√≥ b√†i m·ªõi ƒë∆∞·ª£c ƒëƒÉng. | S·ª≠ d·ª•ng ph√¢n trang d·ª±a tr√™n **Cursor** (t√πy v√†o `createdAt`) thay v√¨ trang s·ªë (offset). |
| **FA-03** | **Stale Data** | Th√¥ng tin t√°c gi·∫£ ho·∫∑c s·ªë Like b·ªã c≈©. | S·ª≠ d·ª•ng **React Query / SWR** ·ªü Frontend ƒë·ªÉ t·ª± ƒë·ªông l√†m m·ªõi d·ªØ li·ªáu sau m·ªôt kho·∫£ng th·ªùi gian. |

---
*T√†i li·ªáu ƒë∆∞·ª£c bi√™n so·∫°n b·ªüi **T√≠t d·ªÖ th∆∞∆°ng**.*

```

### life-2/diagrams/activity-diagrams/m2-a3-post-integrity.md
```md
# M2-A3: Post Integrity & Tagging - Detailed Design

> **Persona:** Senior System Architect (T√≠t d·ªÖ th∆∞∆°ng)
> **M·ª•c ti√™u:** Ki·ªÉm so√°t ch·∫•t l∆∞·ª£ng n·ªôi dung b√†i vi·∫øt, t·ª± ƒë·ªông ph√¢n lo·∫°i th√¥ng qua Hashtag v√† ƒë·∫£m b·∫£o t√≠nh nh·∫•t qu√°n c·ªßa d·ªØ li·ªáu tr∆∞·ªõc khi xu·∫•t b·∫£n.
> **Ki·∫øn tr√∫c:** B-U-E (Boundary-UseCase-Entity).

---

## 1. S∆° ƒë·ªì Activity Diagram (Mermaid)

```mermaid
flowchart TD
    subgraph User["üë§ Ng∆∞·ªùi d√πng (Member)"]
        A1["Ho√†n t·∫•t n·ªôi dung & Nh·∫•p 'ƒêƒÉng'"]
        A2["Nh·∫≠n k·∫øt qu·∫£: Th√†nh c√¥ng / Th·∫•t b·∫°i"]
    end

    subgraph Boundary["üñ•Ô∏è Giao di·ªán (Frontend)"]
        B1["G·ª≠i Request POST /api/posts/publish"]
        B2["Hi·ªÉn th·ªã th√¥ng b√°o Validation l·ªói"]
        B3["ƒêi·ªÅu h∆∞·ªõng sang News Feed"]
    end

    subgraph UseCase["‚öôÔ∏è X·ª≠ l√Ω nghi·ªáp v·ª• (Backend)"]
        C1["Ti·∫øp nh·∫≠n d·ªØ li·ªáu xu·∫•t b·∫£n"]
        C2{"N·ªôi dung tr·ªëng?"}
        C3["B√≥c t√°ch #Hashtag b·∫±ng Regex"]
        C4["Ki·ªÉm tra t·ª´ c·∫•m<br/>(Sanity Check)"]
        C5["ƒê·ªìng b·ªô h√≥a Tags trong DB"]
        C6["X√°c l·∫≠p li√™n k·∫øt Post <-> Tags"]
        C7["ƒê·ªïi tr·∫°ng th√°i b√†i vi·∫øt: 'published'"]
    end

    subgraph Entity["üóÑÔ∏è D·ªØ li·ªáu (Database)"]
        D1["(Collection: Posts)"]
        D2["(Collection: Tags)"]
    end

    %% Connections
    A1 --> B1
    B1 --> C1
    C1 --> C2
    C2 -- "Tr·ªëng" --> B2
    C2 -- "H·ª£p l·ªá" --> C3
    C3 --> C4
    C4 -- "Vi ph·∫°m" --> B2
    C4 -- "S·∫°ch" --> C5
    C5 <--> D2
    C5 --> C6
    C6 --> C7
    C7 <--> D1
    C7 --> B3
    B3 --> A2
    B2 --> A1

    %% Styling
    style User fill:#fff5f8,stroke:#ff8caf
    style Boundary fill:#e8f4fd,stroke:#2196f3
    style UseCase fill:#f9f9f9,stroke:#333
```

---

## 2. Gi·∫£i th√≠ch lu·ªìng ho·∫°t ƒë·ªông (Flow Explanation)

| B∆∞·ªõc | Th√†nh ph·∫ßn | M√¥ t·∫£ chi ti·∫øt |
|:---:|---|---|
| **K√≠ch ho·∫°t** | **Boundary** | G·ª≠i to√†n b·ªô d·ªØ li·ªáu b√†i vi·∫øt (VƒÉn b·∫£n, Media IDs, Metadata) l√™n Server ƒë·ªÉ th·∫©m ƒë·ªãnh l·∫ßn cu·ªëi. |
| **B√≥c t√°ch** | **UseCase** | H·ªá th·ªëng t·ª± ƒë·ªông qu√©t n·ªôi dung ƒë·ªÉ t√¨m c√°c k√Ω t·ª± b·∫Øt ƒë·∫ßu b·∫±ng `#`. V√≠ d·ª•: `#kienthuc` s·∫Ω ƒë∆∞·ª£c b√≥c t√°ch l√†m Metadata. |
| **Ph√¢n lo·∫°i** | **Entity** | N·∫øu Hashtag ch∆∞a t·ªìn t·∫°i trong h·ªá th·ªëng, UseCase s·∫Ω y√™u c·∫ßu Entity t·∫°o b·∫£n ghi m·ªõi trong collection `tags`. |
| **Cam k·∫øt** | **UseCase** | Ch·ªâ khi v∆∞·ª£t qua kh√¢u ki·ªÉm tra t·ª´ c·∫•m (Profanity filter), tr·∫°ng th√°i b√†i vi·∫øt m·ªõi ƒë∆∞·ª£c chuy·ªÉn t·ª´ `draft` sang `published`. |

---

## 3. Ph√¢n t√≠ch r·ªßi ro (Risk Audit)

| ID | R·ªßi ro | Gi·∫£i th√≠ch | Gi·∫£i ph√°p |
|:---:|---|---|---|
| **PI-01** | **Tag Flooding** | User g·∫Øn h√†ng trƒÉm hashtag v√†o b√†i vi·∫øt ƒë·ªÉ spam. | Gi·ªõi h·∫°n s·ªë l∆∞·ª£ng hashtag t·ªëi ƒëa tr√™n m·ªói b√†i vi·∫øt (v√≠ d·ª•: max 10 tags). |
| **PI-02** | **Bypass Filter** | Ng∆∞·ªùi d√πng vi·∫øt l√°ch ƒë·ªÉ n√© b·ªô l·ªçc t·ª´ c·∫•m (VD: d√πng d.·∫•.u c.·∫•.m). | S·ª≠ d·ª•ng thu·∫≠t to√°n Fuzzy Match ho·∫∑c NLP ƒë∆°n gi·∫£n ƒë·ªÉ nh·∫≠n di·ªán bi·∫øn th·ªÉ c·ªßa t·ª´ c·∫•m. |
| **PI-03** | **Dead Links** | G·∫Øn tag v√†o b√†i vi·∫øt nh∆∞ng tag ƒë√≥ sau n√†y b·ªã x√≥a. | S·ª≠ d·ª•ng li√™n k·∫øt quan h·ªá (Relationship) v√† t·ª± ƒë·ªông x√≥a ID tag kh·ªèi Post khi Tag b·ªã x√≥a (Cascade deletion). |

---
*T√†i li·ªáu ƒë∆∞·ª£c bi√™n so·∫°n b·ªüi **T√≠t d·ªÖ th∆∞∆°ng**.*

```

### life-2/diagrams/activity-diagrams/m1-a5-onboarding.md
```md
# M1-A5: Profile Onboarding Setup - Detailed Design

> **Persona:** Senior System Architect (T√≠t d·ªÖ th∆∞∆°ng)
> **M·ª•c ti√™u:** Lu·ªìng thi·∫øt l·∫≠p th√¥ng tin c∆° b·∫£n ngay sau khi ng∆∞·ªùi d√πng ƒëƒÉng nh·∫≠p l·∫ßn ƒë·∫ßu ti√™n.
> **Ki·∫øn tr√∫c:** B-U-E (Boundary-UseCase-Entity).

---

## 1. S∆° ƒë·ªì Activity Diagram (Mermaid)

```mermaid
flowchart TD
    %% Swimlanes
    subgraph User["üë§ Ng∆∞·ªùi d√πng (Member)"]
        A1["ƒêƒÉng nh·∫≠p l·∫ßn ƒë·∫ßu"]
        A2["Th·∫•y giao di·ªán Onboarding"]
        A3["Upload Avatar & Nh·∫≠p Bio"]
        A4["Ch·ªçn s·ªü th√≠ch (Tags)"]
        A5["Nh·∫•p 'Ho√†n t·∫•t'"]
        A10["Truy c·∫≠p News Feed"]
    end

    subgraph Boundary["üñ•Ô∏è Giao di·ªán (Frontend)"]
        B1["Check tr·∫°ng th√°i user:<br/>isOnboarded?"]
        B2["Hi·ªÉn th·ªã Form Welcome"]
        B3["X·ª≠ l√Ω Preview ·∫£nh t·∫°i ch·ªó"]
        B4["G·ª≠i Request PATCH /api/users/me"]
        B5["ƒêi·ªÅu h∆∞·ªõng sang Trang ch·ªß"]
    end

    subgraph UseCase["‚öôÔ∏è X·ª≠ l√Ω nghi·ªáp v·ª• (Backend)"]
        C1["Nh·∫≠n d·ªØ li·ªáu Profile"]
        C2["X·ª≠ l√Ω l∆∞u File Media (Local Storage)"]
        C3["Sanitize vƒÉn b·∫£n (Bio)"]
        C4["C·∫≠p nh·∫≠t User Document"]
        C5["ƒê√°nh d·∫•u isOnboarded = true"]
    end

    subgraph Entity["üóÑÔ∏è D·ªØ li·ªáu (Database)"]
        D1[(Collection: Users)]
        D2[(Collection: Media/Images)]
    end

    %% Connections
    A1 --> B1
    B1 -- "Ch∆∞a (false)" --> B2
    B2 --> A2
    A2 --> A3
    A3 --> A4
    A4 --> A5
    A5 --> B4
    
    B4 --> C1
    C1 --> C2
    C2 <--> D2
    C1 --> C3
    C3 --> C4
    C4 <--> D1
    C4 --> C5
    C5 --> B5
    
    B5 --> A10
    B1 -- "R·ªìi (true)" --> A10

    %% Styling
    style User fill:#fff5f8,stroke:#ff8caf
    style Boundary fill:#e8f4fd,stroke:#2196f3
    style UseCase fill:#f9f9f9,stroke:#333
```

---

## 2. Gi·∫£i th√≠ch lu·ªìng ho·∫°t ƒë·ªông (Flow Explanation)

| B∆∞·ªõc | Th√†nh ph·∫ßn | M√¥ t·∫£ chi ti·∫øt |
|:---:|---|---|
| **K√≠ch ho·∫°t** | **Boundary** | Ngay sau Login, Frontend ki·ªÉm tra m·ªôt Flag (v√≠ d·ª•: `isOnboarded`). N·∫øu ch∆∞a, s·∫Ω ch·∫∑n ng∆∞·ªùi d√πng v√†o News Feed cho ƒë·∫øn khi xong Profile c∆° b·∫£n. |
| **X·ª≠ l√Ω ·∫¢nh** | **UseCase/Entity** | ·∫¢nh ƒë∆∞·ª£c upload l√™n server. T√™n file ƒë∆∞·ª£c hash v√† l∆∞u ƒë∆∞·ªùng d·∫´n v√†o database. |
| **S·ªü th√≠ch** | **UseCase** | Vi·ªác ch·ªçn Tag l√∫c ƒë·∫ßu gi√∫p h·ªá th·ªëng g·ª£i √Ω n·ªôi dung ph√π h·ª£p ngay t·ª´ phi√™n l√†m vi·ªác ƒë·∫ßu ti√™n (M√¥ h√¨nh Discovery). |
| **K·∫øt th√∫c** | **UseCase** | Khi Flag `isOnboarded` chuy·ªÉn sang `true`, ng∆∞·ªùi d√πng s·∫Ω kh√¥ng bao gi·ªù th·∫•y l·∫°i m√†n h√¨nh n√†y n·ªØa. |

---

## 3. Ph√¢n t√≠ch r·ªßi ro (Risk Audit)

| ID | R·ªßi ro | Gi·∫£i th√≠ch | Gi·∫£i ph√°p |
|:---:|---|---|---|
| **OB-01** | **Bad Content** | Avatar ho·∫∑c Bio ch·ª©a n·ªôi dung nh·∫°y c·∫£m. | G·∫Øn k·∫øt v·ªõi M6 (Moderation) ƒë·ªÉ admin ki·ªÉm duy·ªát sau ƒë√≥. |
| **OB-02** | **File Bombing** | Upload ·∫£nh dung l∆∞·ª£ng qu√° l·ªõn l√†m treo server. | Frontend & Backend gi·ªõi h·∫°n dung l∆∞·ª£ng file (v√≠ d·ª•: max 2MB). |
| **OB-03** | **UX Friction** | User c·∫£m th·∫•y phi·ªÅn v√† mu·ªën b·ªè qua. | Th√™m n√∫t "B·ªè qua/Thi·∫øt l·∫≠p sau" n·∫øu m·ª•c ti√™u l√† gi·ªØ ch√¢n ng∆∞·ªùi d√πng thay v√¨ b·∫Øt bu·ªôc 100%. |

---
*T√†i li·ªáu ƒë∆∞·ª£c bi√™n so·∫°n b·ªüi **T√≠t d·ªÖ th∆∞∆°ng**.*

```

### life-2/diagrams/activity-diagrams/m1-a4-recovery.md
```md
# M1-A4: Password Recovery Cycle - Detailed Design

> **Persona:** Senior System Architect (T√≠t d·ªÖ th∆∞∆°ng)
> **M·ª•c ti√™u:** Quy tr√¨nh l·∫•y l·∫°i quy·ªÅn truy c·∫≠p khi ng∆∞·ªùi d√πng qu√™n m·∫≠t kh·∫©u th√¥ng qua Mailer.
> **Ki·∫øn tr√∫c:** B-U-E (Boundary-UseCase-Entity).

---

## 1. S∆° ƒë·ªì Activity Diagram (Mermaid)

```mermaid
flowchart TD
    %% Swimlanes
    subgraph User["üë§ Ng∆∞·ªùi d√πng (Member)"]
        A1["Nh·∫•p 'Qu√™n m·∫≠t kh·∫©u'"]
        A2["Nh·∫≠p Email v√† g·ª≠i"]
        A3["M·ªü Email, click link Reset"]
        A4["Nh·∫≠p m·∫≠t kh·∫©u m·ªõi"]
        A10["Nh·∫≠n th√¥ng b√°o: Th√†nh c√¥ng"]
    end

    subgraph Boundary["üñ•Ô∏è Giao di·ªán (Frontend)"]
        B1["G·ª≠i Request /api/users/forgot-password"]
        B2["Hi·ªÉn th·ªã: ƒê√£ g·ª≠i th∆∞ (n·∫øu email ƒë√∫ng)"]
        B3["Verify Token qua URL v√† hi·ªán form ƒë·ªïi pass"]
        B4["G·ª≠i Request /api/users/reset-password"]
        B5["Chuy·ªÉn h∆∞·ªõng v·ªÅ trang Login"]
    end

    subgraph UseCase["‚öôÔ∏è X·ª≠ l√Ω nghi·ªáp v·ª• (Backend)"]
        C1["Nh·∫≠n y√™u c·∫ßu Forgot Pass"]
        C2{"Ki·ªÉm tra Email t·ªìn t·∫°i?"}
        C3["T·∫°o Reset Token (Ng·∫Øn h·∫°n - 1h)"]
        C4["G·ª≠i Email Reset qua Mailer"]
        C5{"Verify Token (Kh·ªõp + C√≤n h·∫°n?)"}
        C6["Hash m·∫≠t kh·∫©u m·ªõi v√† c·∫≠p nh·∫≠t DB"]
        C7["H·ªßy Token reset ngay l·∫≠p t·ª©c"]
    end

    subgraph Entity["üóÑÔ∏è D·ªØ li·ªáu (Database)"]
        D1[(Collection: Users)]
    end

    subgraph External["üìß D·ªãch v·ª• ngo√†i (Mailer)"]
        E1["Th∆∞ ch·ª©a link m√£ h√≥a Reset"]
    end

    %% Connections
    A1 --> A2
    A2 --> B1
    B1 --> C1
    C1 --> C2
    C2 -- "Kh√¥ng" --> B2
    C2 -- "C√≥" --> C3
    C3 --> C4
    C4 --> E1
    E1 -.-> A3
    A3 --> B3
    B3 --> C5
    C5 -- "H·ª£p l·ªá" --> A4
    A4 --> B4
    B4 --> C6
    C6 <--> D1
    C6 --> C7
    C7 --> B5
    B5 --> A10

    %% Styling
    style User fill:#fff5f8,stroke:#ff8caf
    style Boundary fill:#e8f4fd,stroke:#2196f3
    style UseCase fill:#f9f9f9,stroke:#333
    style External fill:#fffde7,stroke:#fbc02d
```

---

## 2. Gi·∫£i th√≠ch lu·ªìng ho·∫°t ƒë·ªông (Flow Explanation)

| B∆∞·ªõc | Th√†nh ph·∫ßn | M√¥ t·∫£ chi ti·∫øt |
|:---:|---|---|
| **Y√™u c·∫ßu** | **User/Boundary** | Ch·ªâ y√™u c·∫ßu nh·∫≠p Email. H·ªá th·ªëng kh√¥ng b√°o l·ªói n·∫øu email ch∆∞a t·ªìn t·∫°i ƒë·ªÉ b·∫£o m·∫≠t. |
| **D·ªãch v·ª•** | **External** | Email g·ª≠i ƒëi ph·∫£i l√† d·∫°ng HTML chuy√™n nghi·ªáp v√† c√≥ link r√µ r√†ng. |
| **X√°c th·ª±c** | **UseCase** | Reset Token c√≥ th·ªùi h·∫°n r·∫•t ng·∫Øn (v√≠ d·ª•: 1 gi·ªù) ƒë·ªÉ gi·∫£m c·ª≠a s·ªï r·ªßi ro. |
| **An to√†n** | **UseCase** | Sau khi ƒë·ªïi pass th√†nh c√¥ng, Token ph·∫£i b·ªã h·ªßy b·ªè ngay l·∫≠p t·ª©c ƒë·ªÉ kh√¥ng th·ªÉ d√πng link ƒë√≥ l·∫ßn th·ª© 2. |

---

## 3. Ph√¢n t√≠ch r·ªßi ro (Risk Audit)

| ID | R·ªßi ro | Gi·∫£i th√≠ch | Gi·∫£i ph√°p |
|:---:|---|---|---|
| **RC-01** | **Spam Reset Request** | K·∫ª x·∫•u g·ª≠i y√™u c·∫ßu reset h√†ng lo·∫°t v√†o 1 email c·ªßa n·∫°n nh√¢n. | √Åp d·ª•ng "Wait-time" (v√≠ d·ª•: ch·ªâ ƒë∆∞·ª£c g·ª≠i l·∫°i sau 5 ph√∫t). |
| **RC-02** | **Session Interception** | Link reset b·ªã k·∫πt l·∫°i trong l·ªãch s·ª≠ tr√¨nh duy·ªát ho·∫∑c cache. | Token ƒë∆∞·ª£c h·ªßy ngay sau khi d√πng. |
| **RC-03** | **Mail Hijacking** | Ng∆∞·ªùi d√πng b·ªã hack email. | Khuy·∫øn kh√≠ch b·∫≠t 2FA (giai ƒëo·∫°n sau c·ªßa d·ª± √°n). |

---
*T√†i li·ªáu ƒë∆∞·ª£c thi·∫øt k·∫ø b·ªüi **T√≠t d·ªÖ th∆∞∆°ng**.*

```

### life-2/diagrams/activity-diagrams/m4-a3-connection-privacy.md
```md
# M4-A3: Connection Privacy (Blocking) - Detailed Design

> **Persona:** Senior System Architect (T√≠t d·ªÖ th∆∞∆°ng)
> **M·ª•c ti√™u:** M√¥ t·∫£ lu·ªìng ch·∫∑n ng∆∞·ªùi d√πng ƒë·ªÉ b·∫£o v·ªá kh√¥ng gian c√° nh√¢n v√† an to√†n tr√™n m·∫°ng x√£ h·ªôi.
> **Ki·∫øn tr√∫c:** **MVC** (View - Controller/Service - Model).

---

## 1. S∆° ƒë·ªì Activity Diagram (Mermaid)

```mermaid
flowchart TD
    subgraph User["üë§ Ng∆∞·ªùi d√πng (Member)"]
        A1["Ph√°t hi·ªán h√†nh vi qu·∫•y r·ªëi"]
        A2["S·ª≠ d·ª•ng menu 'Ch·∫∑n ng∆∞·ªùi d√πng'"]
        A10["Kh√¥ng c√≤n th·∫•y n·ªôi dung c·ªßa ng∆∞·ªùi ƒë√≥"]
    end

    subgraph View["üñ•Ô∏è Frontend (View)"]
        B1["Nh·∫≠n l·ªánh Block"]
        B2["G·ª≠i Request POST /api/connections/block"]
        B3["·∫®n to√†n b·ªô b√†i vi·∫øt c·ªßa ng∆∞·ªùi b·ªã ch·∫∑n kh·ªèi UI"]
        B4["ƒêi·ªÅu h∆∞·ªõng v·ªÅ trang ch·ªß"]
    end

    subgraph ControllerService["‚öôÔ∏è Backend (Controller/Service)"]
        C1["Ti·∫øp nh·∫≠n y√™u c·∫ßu Ch·∫∑n"]
        C2["H·ªßy b·ªè quan h·ªá Follow gi·ªØa 2 b√™n (n·∫øu c√≥)"]
        C3["T·∫°o b·∫£n ghi Block List"]
        C4["Ghi log l√Ω do (n·∫øu c·∫ßn cho Moderation)"]
        C5["X√≥a Cache News Feed c·ªßa c·∫£ 2"]
    end

    subgraph Model["üóÑÔ∏è Database (Model)"]
        D1["(Collection: Blocks)"]
        D2["(Collection: Connections)"]
    end

    %% Connections
    A2 --> B1
    B1 --> B2
    B2 --> C1
    C1 --> C2
    C2 <--> D2
    C2 --> C3
    C3 <--> D1
    C3 --> C4
    C4 --> C5
    C5 --> B3
    B3 --> A10
    B3 --> B4

    %% Styling
    style User fill:#fff5f8,stroke:#ff8caf
    style View fill:#e8f4fd,stroke:#2196f3
    style ControllerService fill:#f9f9f9,stroke:#333
    style Model fill:#fffde7,stroke:#fbc02d
```

---

## 2. Gi·∫£i th√≠ch lu·ªìng ho·∫°t ƒë·ªông (Flow Explanation)

| B∆∞·ªõc | Th√†nh ph·∫ßn | M√¥ t·∫£ chi ti·∫øt |
|:---:|---|---|
| **R√†o c·∫£n** | **Controller/Service** | Khi th·ª±c hi·ªán Block, h·ªá th·ªëng t·ª± ƒë·ªông th·ª±c hi·ªán **"Double Unfollow"** (A ng·ª´ng theo d√µi B v√† ng∆∞·ª£c l·∫°i). |
| **B·∫£o l∆∞u** | **Model** | Danh s√°ch ch·∫∑n ƒë∆∞·ª£c l∆∞u trong collection `blocks` v·ªõi c√°c tr∆∞·ªùng `blockerId` v√† `blockedId`. |
| **Hi·ªáu l·ª±c t·ª©c th√¨** | **View** | Frontend s·∫Ω ch·ªß ƒë·ªông l·ªçc s·∫°ch d·ªØ li·ªáu ng∆∞·ªùi b·ªã ch·∫∑n kh·ªèi b·ªô nh·ªõ t·∫°m (Cache/State) ƒë·ªÉ ng∆∞·ªùi d√πng kh√¥ng c√≤n th·∫•y h·ªç ngay l·∫≠p t·ª©c. |
| **T√°c ƒë·ªông News Feed** | **Controller/Service** | Vi·ªác x√≥a cache gi√∫p lu·ªìng t·ªïng h·ª£p tin t·ª©c (M3-A1) lo·∫°i tr·ª´ ng∆∞·ªùi b·ªã ch·∫∑n ngay trong phi√™n l√†m vi·ªác ti·∫øp theo. |

---

## 3. Ph√¢n t√≠ch r·ªßi ro (Risk Audit)

| ID | R·ªßi ro | Gi·∫£i th√≠ch | Gi·∫£i ph√°p |
|:---:|---|---|---|
| **CP-01** | **Circular Blocking** | User A ch·∫∑n B, ƒë·ªìng th·ªùi B c≈©ng ch·∫∑n A. | Model ƒë·∫£m b·∫£o m·ªói c·∫∑p (A, B) c√≥ b·∫£n ghi ƒë·ªôc l·∫≠p, h√†nh ƒë·ªông c·ªßa ng∆∞·ªùi n√†y kh√¥ng ·∫£nh h∆∞·ªüng ƒë·∫øn tr·∫°ng th√°i ch·∫∑n c·ªßa ng∆∞·ªùi kia. |
| **CP-02** | **One-way Visibility** | Ng∆∞·ªùi b·ªã ch·∫∑n v·∫´n th·∫•y b√†i vi·∫øt qua tag ho·∫∑c comment chung. | Tuy·ªát ƒë·ªëi: Logic Fetching ·ªü m·ªçi module (M2, M3, M4) ph·∫£i l·ªìng th√™m ƒëi·ªÅu ki·ªán `blockedIds`. |
| **CP-03** | **Unblocking UX** | Ng∆∞·ªùi d√πng mu·ªën b·ªè ch·∫∑n sau n√†y. | Cung c·∫•p m√†n h√¨nh "Danh s√°ch ƒë√£ ch·∫∑n" trong c√†i ƒë·∫∑t t√†i kho·∫£n ƒë·ªÉ th·ª±c hi·ªán Unblock (X√≥a record trong `blocks`). |

---
*T√†i li·ªáu ƒë∆∞·ª£c c·∫≠p nh·∫≠t d·ª±a tr√™n ti·∫øp c·∫≠n **MVC & Local-First** b·ªüi **T√≠t d·ªÖ th∆∞∆°ng**.*

```

### life-2/diagrams/activity-diagrams/m4-a2-engagement-logic.md
```md
# M4-A2: Engagement Logic (Like/Comment) - Detailed Design

> **Persona:** Senior System Architect (T√≠t d·ªÖ th∆∞∆°ng)
> **M·ª•c ti√™u:** M√¥ t·∫£ lu·ªìng x·ª≠ l√Ω t∆∞∆°ng t√°c tr·ª±c ti·∫øp c·ªßa ng∆∞·ªùi d√πng l√™n b√†i vi·∫øt, ƒë·∫£m b·∫£o t√≠nh realtime v√† nh·∫•t qu√°n d·ªØ li·ªáu.
> **Ki·∫øn tr√∫c:** **MVC** (View - Controller/Service - Model).

---

## 1. S∆° ƒë·ªì Activity Diagram (Mermaid)

```mermaid
flowchart TD
    subgraph User["üë§ Ng∆∞·ªùi d√πng (Member)"]
        A1["Xem b√†i vi·∫øt tr√™n Feed"]
        A2["Nh·∫•p Like ho·∫∑c G√µ Comment"]
        A10["Th·∫•y t∆∞∆°ng t√°c c·ªßa m√¨nh ƒë√£ hi·ªán l√™n"]
    end

    subgraph View["üñ•Ô∏è Frontend (View)"]
        B1["Nh·∫≠n s·ª± ki·ªán Like/Comment"]
        B2["G·ª≠i Request POST /api/engagement"]
        B3["Hi·ªÉn th·ªã Comment t·∫°m th·ªùi<br/>(Optimistic UI)"]
        B4["B√°o l·ªói n·∫øu kh√¥ng th·ªÉ t∆∞∆°ng t√°c"]
    end

    subgraph ControllerService["‚öôÔ∏è Backend (Controller/Service)"]
        C1["Ti·∫øp nh·∫≠n t∆∞∆°ng t√°c"]
        C2{"Lo·∫°i t∆∞∆°ng t√°c?"}
        C3["X·ª≠ l√Ω Like: TƒÉng/Gi·∫£m Like Count"]
        C4["X·ª≠ l√Ω Comment: L∆∞u n·ªôi dung & C·∫•p b·∫≠c"]
        C5["Ki·ªÉm tra t·ª´ c·∫•m trong Comment"]
        C6["G·ª≠i th√¥ng b√°o Local (Triggers M6)"]
        C7["Tr·∫£ v·ªÅ d·ªØ li·ªáu ƒë√£ c·∫≠p nh·∫≠t"]
    end

    subgraph Model["üóÑÔ∏è Database (Model)"]
        D1["(Collection: Posts)"]
        D2["(Collection: Comments)"]
        D3["(Collection: Likes)"]
    end

    %% Connections
    A1 --> A2
    A2 --> B1
    B1 --> B3
    B1 --> B2
    B2 --> C1
    C1 --> C2
    C2 -- "Like" --> C3
    C3 <--> D3
    C3 --> D1
    C2 -- "Comment" --> C4
    C4 <--> D2
    C4 --> C5
    C5 --> D1
    D1 --> C6
    C6 --> C7
    C7 --> B3
    B3 --> A10

    %% Styling
    style User fill:#fff5f8,stroke:#ff8caf
    style View fill:#e8f4fd,stroke:#2196f3
    style ControllerService fill:#f9f9f9,stroke:#333
    style Model fill:#fffde7,stroke:#fbc02d
```

---

## 2. Gi·∫£i th√≠ch lu·ªìng ho·∫°t ƒë·ªông (Flow Explanation)

| B∆∞·ªõc | Th√†nh ph·∫ßn | M√¥ t·∫£ chi ti·∫øt |
|:---:|---|---|
| **Optimistic UX** | **View** | ƒê·ªëi v·ªõi Like v√† Comment, h·ªá th·ªëng ∆∞u ti√™n hi·ªÉn th·ªã ngay l·∫≠p t·ª©c ƒë·ªÉ t·∫°o c·∫£m gi√°c "Realtime" cho ng∆∞·ªùi d√πng. |
| **Ph√¢n lo·∫°i** | **Controller/Service** | Backend ph√¢n t√°ch logic gi·ªØa Like (Toggle tr·∫°ng th√°i) v√† Comment (L∆∞u tr·ªØ n·ªôi dung vƒÉn b·∫£n). |
| **B·∫£o m·∫≠t n·ªôi dung** | **Controller/Service** | C√°c comment c≈©ng ƒë∆∞·ª£c ch·∫°y qua b·ªô l·ªçc Sanity check (gi·ªëng b√†i vi·∫øt) ƒë·ªÉ ƒë·∫£m b·∫£o kh√¥ng ch·ª©a t·ª´ ng·ªØ ƒë·ªôc h·∫°i. |
| **G·∫Øn k·∫øt** | **Model** | M·ªçi t∆∞∆°ng t√°c ƒë·ªÅu tham chi·∫øu ƒë·∫øn `postId` g·ªëc ƒë·ªÉ sau n√†y c√≥ th·ªÉ truy v·∫•n: "Ai ƒë√£ Like b√†i n√†y?" ho·∫∑c "C√°c b√¨nh lu·∫≠n c·ªßa b√†i n√†y l√† g√¨?". |

---

## 3. Ph√¢n t√≠ch r·ªßi ro (Risk Audit)

| ID | R·ªßi ro | Gi·∫£i th√≠ch | Gi·∫£i ph√°p |
|:---:|---|---|---|
| **EL-01** | **Spam Engagement** | User/Bot th·ª±c hi·ªán Like/Comment li√™n t·ª•c v·ªõi t·∫ßn su·∫•t cao. | √Åp d·ª•ng **Rate Limiting** (v√≠ d·ª•: t·ªëi ƒëa 60 t∆∞∆°ng t√°c/ph√∫t tr√™n m·ªói t√†i kho·∫£n). |
| **EL-02** | **Comment Ghosting** | Comment ƒë∆∞·ª£c l∆∞u nh∆∞ng kh√¥ng hi·ªán l√™n do l·ªói Index. | Controller tr·∫£ v·ªÅ Full Document c·ªßa Comment sau khi l∆∞u ƒë·ªÉ Frontend render ch√≠nh x√°c. |
| **EL-03** | **Deleted Post Interaction** | T∆∞∆°ng t√°c v√†o m·ªôt b√†i vi·∫øt v·ª´a b·ªã x√≥a. | Backend ki·ªÉm tra tr·∫°ng th√°i b√†i vi·∫øt `status: 'published'` tr∆∞·ªõc khi ch·∫•p nh·∫≠n Like/Comment. |

---
*T√†i li·ªáu ƒë∆∞·ª£c c·∫≠p nh·∫≠t d·ª±a tr√™n ti·∫øp c·∫≠n **MVC & Local-First** b·ªüi **T√≠t d·ªÖ th∆∞∆°ng**.*

```

### life-2/diagrams/activity-diagrams/m6-a1-sse-dispatcher.md
```md
# M6-A1: SSE Event Dispatcher - Detailed Design

> **Persona:** Senior System Architect (T√≠t d·ªÖ th∆∞∆°ng)
> **M·ª•c ti√™u:** M√¥ t·∫£ lu·ªìng ƒë·∫©y th√¥ng b√°o th·ªùi gian th·ª±c t·ª´ Server xu·ªëng Client s·ª≠ d·ª•ng c√¥ng ngh·ªá Server-Sent Events (SSE).
> **Ki·∫øn tr√∫c:** **MVC** (View - Controller/Service - Model).

---

## 1. S∆° ƒë·ªì Activity Diagram (Mermaid)

```mermaid
flowchart TD
    subgraph User["üë§ Ng∆∞·ªùi d√πng (Member)"]
        A1["Duy tr√¨ k·∫øt n·ªëi trang web"]
        A10["Th·∫•y th√¥ng b√°o Pop-up xu·∫•t hi·ªán"]
    end

    subgraph View["üñ•Ô∏è Frontend (View)"]
        B1["M·ªü k·∫øt n·ªëi 'EventSource' t·ªõi /api/notifications/stream"]
        B2["L·∫Øng nghe s·ª± ki·ªán 'message'"]
        B3["Hi·ªÉn th·ªã Toast/Notification Dot"]
        B4["T·ª± ƒë·ªông k·∫øt n·ªëi l·∫°i n·∫øu m·∫•t m·∫°ng"]
    end

    subgraph ControllerService["‚öôÔ∏è Backend (Controller/Service)"]
        C1["Ti·∫øp nh·∫≠n k·∫øt n·ªëi SSE"]
        C2["Duy tr√¨ stream trong Response Headers"]
        C3["L·∫Øng nghe s·ª± ki·ªán n·ªôi b·ªô (Internal Event Bus)"]
        C4["ƒê√≥ng g√≥i data th√¥ng b√°o sang ƒë·ªãnh d·∫°ng SSE"]
        C5["ƒê·∫©y d·ªØ li·ªáu qua lu·ªìng Response"]
    end

    subgraph Model["üóÑÔ∏è Database (Model)"]
        D1["(Hook: afterChange t·∫°i Posts/Likes/Follows)"]
        D2["(Collection: Notifications)"]
    end

    %% Connections
    A1 --> B1
    B1 --> C1
    C1 --> C2
    D1 -- "S·ª± ki·ªán m·ªõi" --> C3
    D1 --> D2
    C3 --> C4
    C4 --> C5
    C5 --> B2
    B2 --> B3
    B3 --> A10
    B4 --> B1

    %% Styling
    style User fill:#fff5f8,stroke:#ff8caf
    style View fill:#e8f4fd,stroke:#2196f3
    style ControllerService fill:#f9f9f9,stroke:#333
    style Model fill:#fffde7,stroke:#fbc02d
```

---

## 2. Gi·∫£i th√≠ch lu·ªìng ho·∫°t ƒë·ªông (Flow Explanation)

| B∆∞·ªõc | Th√†nh ph·∫ßn | M√¥ t·∫£ chi ti·∫øt |
|:---:|---|---|
| **Duy tr√¨ k·∫øt n·ªëi** | **View** | Tr√¨nh duy·ªát m·ªü m·ªôt k√™nh HTTP d√†i (Long-lived) t·ªõi Server. SSE hi·ªáu qu·∫£ h∆°n WebSocket cho c√°c ·ª©ng d·ª•ng ch·ªâ c·∫ßn lu·ªìng d·ªØ li·ªáu m·ªôt chi·ªÅu (Server -> Client). |
| **K√≠ch ho·∫°t ng·∫ßm** | **Model** | Khi c√≥ b·∫•t k·ª≥ thay ƒë·ªïi n√†o (Like, Comment, Follow), c√°c Hook `afterChange` c·ªßa Database s·∫Ω ph√°t ƒëi t√≠n hi·ªáu s·ª± ki·ªán. |
| **ƒêi·ªÅu ph·ªëi** | **Controller/Service** | Service l·ªçc s·ª± ki·ªán theo `userId`, ƒë·∫£m b·∫£o ch·ªâ ƒë·∫©y th√¥ng b√°o c·ªßa ai t·ªõi ƒë√∫ng tr√¨nh duy·ªát c·ªßa ng∆∞·ªùi ƒë√≥. |
| **Persistence** | **Model** | Th√¥ng b√°o c≈©ng ƒë∆∞·ª£c l∆∞u v√†o collection `notifications` ƒë·ªÉ ng∆∞·ªùi d√πng c√≥ th·ªÉ xem l·∫°i trong t∆∞∆°ng lai khi kh√¥ng online. |

---

## 3. Ph√¢n t√≠ch r·ªßi ro (Risk Audit)

| ID | R·ªßi ro | Gi·∫£i th√≠ch | Gi·∫£i ph√°p |
|:---:|---|---|---|
| **ED-01** | **Connection Leak** | Qu√° nhi·ªÅu k·∫øt n·ªëi SSE treo g√¢y c·∫°n ki·ªát t√†i nguy√™n Server. | Controller thi·∫øt l·∫≠p **Timeout** v√† c∆° ch·∫ø d·ªçn d·∫πp k·∫øt n·ªëi (Cleanup) khi User ƒë√≥ng tab ho·∫∑c logout. |
| **ED-02** | **Message Loss** | M·∫•t k·∫øt n·ªëi l√∫c Server ƒëang ƒë·∫©y tin, th√¥ng b√°o b·ªã tr√¥i m·∫•t. | Client s·∫Ω t·ª± ƒë·ªông l·∫•y l·∫°i (Refetch) danh s√°ch th√¥ng b√°o ch∆∞a ƒë·ªçc t·ª´ Database ngay sau khi k·∫øt n·ªëi l·∫°i th√†nh c√¥ng. |
| **ED-03** | **Scalability** | Khi c√≥ h√†ng ng√†n User online, memory c·ªßa Controller s·∫Ω qu√° t·∫£i. | S·ª≠ d·ª•ng **Redis Pub/Sub** (Ph√°t tri·ªÉn sau) ho·∫∑c gi·ªõi h·∫°n s·ªë l∆∞·ª£ng k·∫øt n·ªëi ƒë·ªìng th·ªùi tr√™n m·ªói Instance ch·∫°y ·ª©ng d·ª•ng. |

---
*T√†i li·ªáu ƒë∆∞·ª£c c·∫≠p nh·∫≠t d·ª±a tr√™n ti·∫øp c·∫≠n **MVC & Local-First** b·ªüi **T√≠t d·ªÖ th∆∞∆°ng**.*

```

### life-2/diagrams/activity-diagrams/m4-a1-friendship-handshake.md
```md
# M4-A1: Friendship Handshake - Detailed Design

> **Persona:** Senior System Architect (T√≠t d·ªÖ th∆∞∆°ng)
> **M·ª•c ti√™u:** M√¥ t·∫£ lu·ªìng thi·∫øt l·∫≠p v√† h·ªßy b·ªè m·ªëi quan h·ªá theo d√µi (Follow/Unfollow) gi·ªØa c√°c th√†nh vi√™n.
> **Ki·∫øn tr√∫c:** **MVC** (View - Controller/Service - Model).

---

## 1. S∆° ƒë·ªì Activity Diagram (Mermaid)

```mermaid
flowchart TD
    subgraph User["üë§ Ng∆∞·ªùi d√πng (Member)"]
        A1["Truy c·∫≠p H·ªì s∆° ng∆∞·ªùi d√πng kh√°c"]
        A2["Nh·∫•p n√∫t 'Follow' ho·∫∑c 'Unfollow'"]
        A10["Th·∫•y tr·∫°ng th√°i: ƒêang theo d√µi / Theo d√µi"]
    end

    subgraph View["üñ•Ô∏è Frontend (View)"]
        B1["Nh·∫≠n s·ª± ki·ªán Click"]
        B2["G·ª≠i Request POST /api/connections/follow"]
        B3["C·∫≠p nh·∫≠t UI n√∫t b·∫•m t·ª©c th√¨ (Optimistic UI)"]
        B4["Hi·ªÉn th·ªã l·ªói n·∫øu Request th·∫•t b·∫°i"]
    end

    subgraph ControllerService["‚öôÔ∏è Backend (Controller/Service)"]
        C1["Ti·∫øp nh·∫≠n y√™u c·∫ßu Follow"]
        C2{"ƒê√£ t·ªìn t·∫°i quan h·ªá?"}
        C3["T·∫°o b·∫£n ghi Connection m·ªõi"]
        C4["X√≥a b·∫£n ghi Connection c≈©"]
        C5["C·∫≠p nh·∫≠t s·ªë Follower/Following c·ªßa 2 User"]
        C6["Tr·∫£ v·ªÅ k·∫øt qu·∫£ th√†nh c√¥ng"]
    end

    subgraph Model["üóÑÔ∏è Database (Model)"]
        D1["(Collection: Connections)"]
        D2["(Collection: Users)"]
    end

    %% Connections
    A1 --> A2
    A2 --> B1
    B1 --> B3
    B1 --> B2
    B2 --> C1
    C1 --> C2
    C2 -- "Ch∆∞a (Follow)" --> C3
    C3 <--> D1
    C2 -- "R·ªìi (Unfollow)" --> C4
    C4 <--> D1
    C3 --> C5
    C4 --> C5
    C5 <--> D2
    C5 --> C6
    C6 --> B3
    B3 --> A10

    %% Styling
    style User fill:#fff5f8,stroke:#ff8caf
    style View fill:#e8f4fd,stroke:#2196f3
    style ControllerService fill:#f9f9f9,stroke:#333
    style Model fill:#fffde7,stroke:#fbc02d
```

---

## 2. Gi·∫£i th√≠ch lu·ªìng ho·∫°t ƒë·ªông (Flow Explanation)

| B∆∞·ªõc | Th√†nh ph·∫ßn | M√¥ t·∫£ chi ti·∫øt |
|:---:|---|---|
| **Optimistic UI** | **View** | ƒê·ªÉ mang l·∫°i c·∫£m gi√°c m∆∞·ª£t m√†, Frontend s·∫Ω ƒë·ªïi tr·∫°ng th√°i n√∫t Follow ngay l·∫≠p t·ª©c tr∆∞·ªõc khi nh·∫≠n ph·∫£n h·ªìi t·ª´ Server. |
| **Logic ƒë·ªëi x·ª©ng** | **Controller/Service** | N·∫øu ƒë√£ Follow, h√†nh ƒë·ªông ti·∫øp theo s·∫Ω l√† Unfollow (X√≥a record). N·∫øu ch∆∞a, s·∫Ω l√† t·∫°o m·ªõi record k·∫øt n·ªëi. |
| **ƒê·ªìng b·ªô h√≥a s·ªë li·ªáu** | **Controller/Service** | Backend ch·ªãu tr√°ch nhi·ªám tƒÉng/gi·∫£m s·ªë l∆∞·ª£ng `followerCount` v√† `followingCount` trong document `User` t∆∞∆°ng ·ª©ng. |
| **L∆∞u tr·ªØ** | **Model** | Quan h·ªá ƒë∆∞·ª£c l∆∞u trong collection `connections` v·ªõi hai tr∆∞·ªùng `followerId` v√† `followingId`. |

---

## 3. Ph√¢n t√≠ch r·ªßi ro (Risk Audit)

| ID | R·ªßi ro | Gi·∫£i th√≠ch | Gi·∫£i ph√°p |
|:---:|---|---|---|
| **FH-01** | **Self-Follow** | Ng∆∞·ªùi d√πng t√¨m c√°ch t·ª± theo d√µi ch√≠nh m√¨nh. | Controller ki·ªÉm tra `if (followerId === followingId)` v√† t·ª´ ch·ªëi y√™u c·∫ßu. |
| **FH-02** | **Race Condition** | Click li√™n t·ª•c n√∫t Follow/Unfollow g√¢y sai l·ªách s·ªë ƒë·∫øm. | S·ª≠ d·ª•ng c√°c to√°n t·ª≠ nguy√™n t·ª≠ (Atomic operators) nh∆∞ `$inc` trong MongoDB thay v√¨ ghi ƒë√® gi√° tr·ªã. |
| **FH-03** | **Connection Loop** | (Kh√¥ng √°p d·ª•ng v√¨ ƒë√¢y l√† quan h·ªá 1 chi·ªÅu). | H·ªá th·ªëng h·ªó tr·ª£ quan h·ªá ƒë∆°n ph∆∞∆°ng (A follow B, B kh√¥ng nh·∫•t thi·∫øt follow A). |

---
*T√†i li·ªáu ƒë∆∞·ª£c c·∫≠p nh·∫≠t d·ª±a tr√™n ti·∫øp c·∫≠n **MVC & Local-First** b·ªüi **T√≠t d·ªÖ th∆∞∆°ng**.*

```

### life-2/diagrams/activity-diagrams/m3-discovery-feed-summary.md
```md
# Module M3: Discovery & Feed - General Activity Diagrams (Level 1)

> **Persona:** Senior System Architect (T√≠t d·ªÖ th∆∞∆°ng)
> **Ph·∫°m vi:** M√¥ t·∫£ c√°ch h·ªá th·ªëng ph√¢n ph·ªëi n·ªôi dung v√† h·ªó tr·ª£ ng∆∞·ªùi d√πng kh√°m ph√° (Search/Discovery).
> **Ki·∫øn tr√∫c:** Tu√¢n th·ªß Boundary-UseCase-Entity (B-U-E).

---

## 1. S∆° ƒë·ªì ho·∫°t ƒë·ªông t·ªïng qu√°t (High-Level Flow)

S∆° ƒë·ªì n√†y m√¥ t·∫£ hai lu·ªìng ch√≠nh: Nh·∫≠n tin (Feed) v√† T√¨m ki·∫øm (Discovery).

```mermaid
flowchart TD
    %% Nodes
    Start(["Truy c·∫≠p trang ch·ªß / Discovery"])
    
    A1{"Ng∆∞·ªùi d√πng mu·ªën g√¨?"}
    
    %% Feed Branch
    B1["M3-A1: T·ªïng h·ª£p News Feed<br/>(Feed Assembler)"]
    B2["L·ªçc n·ªôi dung theo quan h·ªá & s·ªü th√≠ch"]
    
    %% Discovery Branch
    C1["M3-A2: Truy v·∫•n t√¨m ki·∫øm<br/>(Search Engine Query)"]
    C2["M3-A3: G·ª£i √Ω n·ªôi dung m·ªõi<br/>(Discovery Recommendation)"]
    
    Display["Hi·ªÉn th·ªã danh s√°ch k·∫øt qu·∫£"]
    End(["K·∫øt th√∫c / T∆∞∆°ng t√°c v·ªõi n·ªôi dung"])

    %% Flow
    Start --> A1
    A1 -- "Xem tin" --> B1
    B1 --> B2
    B2 --> Display
    
    A1 -- "T√¨m ki·∫øm" --> C1
    C1 --> Display
    
    A1 -- "Kh√°m ph√° m·ªõi" --> C2
    C2 --> Display
    
    Display --> End

    %% Styling
    style Start fill:#fff5f8,stroke:#ff8caf
    style End fill:#fff5f8,stroke:#ff8caf
    style B1 fill:#e8f4fd,stroke:#2196f3
    style C1 fill:#e8f4fd,stroke:#2196f3
    style C2 fill:#e8f4fd,stroke:#2196f3
```

---

## 2. Gi·∫£i th√≠ch c√°c giai ƒëo·∫°n ch√≠nh (Stages Explanation)

| Giai ƒëo·∫°n | Vai tr√≤ | Tr√°ch nhi·ªám ch√≠nh |
|:---:|---|---|
| **Feed Assembly** | `M3-A1` | Thu th·∫≠p b√†i vi·∫øt t·ª´ nh·ªØng ng∆∞·ªùi User ƒëang theo d√µi v√† c√°c b√†i vi·∫øt c√¥ng khai c√≥ li√™n quan. |
| **Search Engine** | `M3-A2` | S·ª≠ d·ª•ng Atlas Search (Fuzzy search) ƒë·ªÉ t√¨m ki·∫øm Post, User ho·∫∑c Tag theo t·ª´ kh√≥a. |
| **Recommendation** | `M3-A3` | ƒê·ªÅ xu·∫•t nh·ªØng n·ªôi dung ƒëang "Trending" ho·∫∑c ph√π h·ª£p v·ªõi s·ªü th√≠ch trong Profile c·ªßa ng∆∞·ªùi d√πng. |

---

---

## 3. Th√†nh ph·∫ßn H·∫° t·∫ßng (Local Technical Stack)

D·ª±a tr√™n ki·∫øn tr√∫c **MVC**, h·ªá th·ªëng ∆∞u ti√™n s·ª≠ d·ª•ng t√†i nguy√™n n·ªôi t·∫°i (Local) ƒë·ªÉ gi·∫£i quy·∫øt c√°c b√†i to√°n k·ªπ thu·∫≠t:

1.  **Local Search Logic (Regex/Query)**: S·ª≠ d·ª•ng s·ª©c m·∫°nh truy v·∫•n c·ªßa MongoDB v√† Regex ƒë·ªÉ t√¨m ki·∫øm n·ªôi dung, kh√¥ng ph·ª• thu·ªôc v√†o d·ªãch v·ª• b√™n th·ª© 3.
2.  **Local Image Processor (Sharp)**: T·∫≠n d·ª•ng th∆∞ vi·ªán x·ª≠ l√Ω ·∫£nh t·∫°i Backend ƒë·ªÉ t·∫°o thumbnail v√† n√©n ·∫£nh ngay khi upload, l∆∞u tr·ªØ tr·ª±c ti·∫øp tr√™n Local Storage.
3.  **Local Database Indexing**: T·ªëi ∆∞u h√≥a hi·ªáu nƒÉng b·∫±ng c√°c b·ªô Index (Single/Compound) ƒë∆∞·ª£c thi·∫øt l·∫≠p tr·ª±c ti·∫øp trong c√°c Collection.

---
*T√†i li·ªáu ƒë∆∞·ª£c c·∫≠p nh·∫≠t d·ª±a tr√™n ti·∫øp c·∫≠n **MVC & Local-First** theo y√™u c·∫ßu c·ªßa y√™u th∆∞∆°ng.*

```

### life-2/diagrams/activity-diagrams/m3-a3-discovery-recommendation.md
```md
# M3-A3: Discovery Recommendation - Detailed Design

> **Persona:** Senior System Architect (T√≠t d·ªÖ th∆∞∆°ng)
> **M·ª•c ti√™u:** M√¥ t·∫£ lu·ªìng g·ª£i √Ω n·ªôi dung d·ª±a tr√™n xu h∆∞·ªõng (Trending) v√† s·ªü th√≠ch c√° nh√¢n ƒë·ªÉ tƒÉng t√≠nh g·∫Øn k·∫øt c·ªßa ng∆∞·ªùi d√πng.
> **Ki·∫øn tr√∫c:** B-U-E (Boundary-UseCase-Entity).

---

## 1. S∆° ƒë·ªì Activity Diagram (Mermaid)

```mermaid
flowchart TD
    subgraph User["üë§ Ng∆∞·ªùi d√πng (Member)"]
        A1["K√©o xu·ªëng cu·ªëi News Feed"]
        A2["Truy c·∫≠p Tab 'Kh√°m ph√°'"]
        A10["Th·∫•y n·ªôi dung m·ªõi l·∫°, th√∫ v·ªã"]
    end

    subgraph Boundary["üñ•Ô∏è Giao di·ªán (Frontend)"]
        B1["G·ª≠i Request GET /api/posts/discovery"]
        B2["Hi·ªÉn th·ªã danh s√°ch Post d·∫°ng Grid/Gallery"]
        B3["G·ª£i √Ω c√°c Hashtag ƒëang 'Hot'"]
    end

    subgraph UseCase["‚öôÔ∏è X·ª≠ l√Ω nghi·ªáp v·ª• (Backend)"]
        C1["Nh·∫≠n Request kh√°m ph√°"]
        C2["L·∫•y danh s√°ch 'Interests' t·ª´ Profile User"]
        C3["T√≠nh to√°n ƒëi·ªÉm 'Trending' (Like + View / Time)"]
        C4["Truy v·∫•n b√†i vi·∫øt theo Tags s·ªü th√≠ch"]
        C5["Tr·ªôn (Shake) k·∫øt qu·∫£ ng·∫´u nhi√™n"]
        C6["Tr·∫£ v·ªÅ danh s√°ch Discovery"]
    end

    subgraph Entity["üóÑÔ∏è D·ªØ li·ªáu (Database)"]
        D1["(Collection: Posts)"]
        D2["(Collection: Users)"]
        D3["(Collection: Tags)"]
    end

    %% Connections
    A1 --> B1
    A2 --> B1
    B1 --> C1
    C1 --> C2
    C2 <--> D2
    C1 --> C3
    C3 <--> D1
    C3 <--> D3
    C2 --> C4
    C4 <--> D1
    C4 --> C5
    C3 --> C5
    C5 --> C6
    C6 --> B2
    C6 --> B3
    B2 --> A10
    B3 --> A10

    %% Styling
    style User fill:#fff5f8,stroke:#ff8caf
    style Boundary fill:#e8f4fd,stroke:#2196f3
    style UseCase fill:#f9f9f9,stroke:#333
```

---

## 2. Gi·∫£i th√≠ch lu·ªìng ho·∫°t ƒë·ªông (Flow Explanation)

| B∆∞·ªõc | Th√†nh ph·∫ßn | M√¥ t·∫£ chi ti·∫øt |
|:---:|---|---|
| **D·ª±a tr√™n s·ªü th√≠ch** | **UseCase** | H·ªá th·ªëng ƒë·ªçc c√°c th·∫ª `interests` ƒë∆∞·ª£c ng∆∞·ªùi d√πng ch·ªçn l√∫c Onboarding (M1-A5) ƒë·ªÉ ∆∞u ti√™n b√†i vi·∫øt c√≥ Tag t∆∞∆°ng ·ª©ng. |
| **Thu·∫≠t to√°n Trending** | **UseCase** | C√°c b√†i vi·∫øt c√≥ l∆∞·ª£ng t∆∞∆°ng t√°c (Like/Comment) cao trong th·ªùi gian ng·∫Øn (v√≠ d·ª•: 24h qua) s·∫Ω ƒë∆∞·ª£c ƒë·∫©y l√™n ƒë·∫ßu. |
| **T√≠nh kh√°m ph√°** | **UseCase** | Vi·ªác **"Shake" (Tr·ªôn ng·∫´u nhi√™n)** gi√∫p ng∆∞·ªùi d√πng kh√¥ng th·∫•y s·ª± l·∫∑p l·∫°i nh√†m ch√°n m·ªói khi v√†o trang Discovery. |
| **Hashtag Hot** | **Boundary** | Hi·ªÉn th·ªã c√°c t·ª´ kh√≥a ƒëang ƒë∆∞·ª£c th·∫£o lu·∫≠n nhi·ªÅu nh·∫•t ƒë·ªÉ khuy·∫øn kh√≠ch ng∆∞·ªùi d√πng nh·∫•p v√†o xem th√™m. |

---

## 3. Ph√¢n t√≠ch r·ªßi ro (Risk Audit)

| ID | R·ªßi ro | Gi·∫£i th√≠ch | Gi·∫£i ph√°p |
|:---:|---|---|---|
| **DR-01** | **Filter Bubble** | H·ªá th·ªëng ch·ªâ g·ª£i √Ω nh·ªØng g√¨ ng∆∞·ªùi d√πng ƒë√£ bi·∫øt, g√¢y h·∫πp t·∫ßm nh√¨n. | Lu√¥n d√†nh **20-30%** v·ªã tr√≠ cho c√°c n·ªôi dung ng·∫´u nhi√™n ho√†n to√†n kh√¥ng thu·ªôc s·ªü th√≠ch c·ªßa User. |
| **DR-02** | **Cold Start** | Ng∆∞·ªùi d√πng m·ªõi ch∆∞a c√≥ s·ªü th√≠ch, h·ªá th·ªëng kh√¥ng bi·∫øt g·ª£i √Ω g√¨. | M·∫∑c ƒë·ªãnh hi·ªÉn th·ªã c√°c n·ªôi dung c√≥ ƒëi·ªÉm **Global Trending** cao nh·∫•t cho ng∆∞·ªùi d√πng m·ªõi. |
| **DR-03** | **Spam Trending** | Hacker d√πng bot ƒë·ªÉ "b∆°m" Like khi·∫øn b√†i vi·∫øt x·∫•u l√™n Trending. | √Åp d·ª•ng tr·ªçng s·ªë gi·∫£m d·∫ßn theo th·ªùi gian (Time decay) v√† ki·ªÉm tra IP/T√†i kho·∫£n th·ª±c hi·ªán t∆∞∆°ng t√°c. |

---
*T√†i li·ªáu ƒë∆∞·ª£c bi√™n so·∫°n b·ªüi **T√≠t d·ªÖ th∆∞∆°ng**.*

```

### life-2/diagrams/activity-diagrams/m2-a1-editor-pipeline.md
```md
# M2-A1: Rich-text Editor Pipeline - Detailed Design

> **Persona:** Senior System Architect (T√≠t d·ªÖ th∆∞∆°ng)
> **M·ª•c ti√™u:** M√¥ t·∫£ lu·ªìng x·ª≠ l√Ω so·∫°n th·∫£o vƒÉn b·∫£n phong ph√∫, ƒë·∫£m b·∫£o an to√†n (XSS) v√† tr·∫£i nghi·ªám so·∫°n th·∫£o m∆∞·ª£t m√†.
> **Ki·∫øn tr√∫c:** B-U-E (Boundary-UseCase-Entity).

---

## 1. S∆° ƒë·ªì Activity Diagram (Mermaid)

```mermaid
flowchart TD
    subgraph User["üë§ Ng∆∞·ªùi d√πng (Member)"]
        A1["Nh·∫≠p n·ªôi dung v√†o Editor"]
        A2["S·ª≠ d·ª•ng c√¥ng c·ª• ch·ªçn format<br/>(Bold, Italic, Link...)"]
        A10["Th·∫•y tr·∫°ng th√°i: ƒê√£ l∆∞u nh√°p"]
    end

    subgraph Boundary["üñ•Ô∏è Giao di·ªán (Frontend)"]
        B1["Editor (Lexical/TipTap)<br/>b·∫Øt s·ª± ki·ªán thay ƒë·ªïi"]
        B2["X·ª≠ l√Ω bi·∫øn ƒë·ªïi Rich-text sang JSON<br/>(Lexical Nodes)"]
        B3{"Debounce (3s)?"}
        B4["G·ª≠i Request PATCH /api/posts/draft"]
        B5["Hi·ªÉn th·ªã Spinner: ƒêang l∆∞u..."]
    end

    subgraph UseCase["‚öôÔ∏è X·ª≠ l√Ω nghi·ªáp v·ª• (Backend)"]
        C1["Nh·∫≠n Request l∆∞u nh√°p"]
        C2["X·ª≠ l√Ω Sanitize HTML/JSON<br/>(Ch·ªëng XSS)"]
        C3["Ph√¢n t√°ch n·ªôi dung & Metadata"]
        C4["Ghi ƒë√® b·∫£n nh√°p c≈© c·ªßa User"]
        C5["Tr·∫£ v·ªÅ Success Response"]
    end

    subgraph Entity["üóÑÔ∏è D·ªØ li·ªáu (Database)"]
        D1["(Collection: Posts - status: draft)"]
    end

    %% Connections
    A1 --> B1
    A2 --> B1
    B1 --> B2
    B2 --> B3
    B3 -- "Ch∆∞a ƒë·ªß" --> B1
    B3 -- "ƒê·ªß (3s)" --> B4
    B4 --> B5
    B4 --> C1
    C1 --> C2
    C2 --> C3
    C3 --> C4
    C4 <--> D1
    C4 --> C5
    C5 --> B5
    B5 --> A10

    %% Styling
    style User fill:#fff5f8,stroke:#ff8caf
    style Boundary fill:#e8f4fd,stroke:#2196f3
    style UseCase fill:#f9f9f9,stroke:#333
    style Entity fill:#fffde7,stroke:#fbc02d
```

---

## 2. Gi·∫£i th√≠ch lu·ªìng ho·∫°t ƒë·ªông (Flow Explanation)

| B∆∞·ªõc | Th√†nh ph·∫ßn | M√¥ t·∫£ chi ti·∫øt |
|:---:|---|---|
| **So·∫°n th·∫£o** | **User** | Ng∆∞·ªùi d√πng g√µ vƒÉn b·∫£n v√† ch√®n c√°c ƒë·ªãnh d·∫°ng. Editor ho·∫°t ƒë·ªông ·ªü ch·∫ø ƒë·ªô th·ªùi gian th·ª±c. |
| **X·ª≠ l√Ω ng·∫ßm** | **Boundary** | H·ªá th·ªëng kh√¥ng g·ª≠i request m·ªói l·∫ßn g√µ ph√≠m. K·ªπ thu·∫≠t **Debounce** ƒë∆∞·ª£c d√πng ƒë·ªÉ g·ªôp c√°c thay ƒë·ªïi trong 3 gi√¢y th√†nh 1 l∆∞·ª£t g·ª≠i duy nh·∫•t. |
| **B·∫£o m·∫≠t** | **UseCase** | Backend b·∫Øt bu·ªôc ph·∫£i ch·∫°y b·ªô l·ªçc (Sanitizer) ƒë·ªÉ lo·∫°i b·ªè c√°c th·∫ª `<script>` ho·∫∑c thu·ªôc t√≠nh nguy hi·ªÉm c√≥ th·ªÉ g√¢y l·ªói XSS. |
| **L∆∞u tr·ªØ** | **Entity** | B·∫£n nh√°p ƒë∆∞·ª£c l∆∞u v√†o collection `posts` v·ªõi tr·∫°ng th√°i `draft` ƒë·ªÉ ng∆∞·ªùi d√πng c√≥ th·ªÉ quay l·∫°i vi·∫øt ti·∫øp b·∫•t c·ª© l√∫c n√†o. |

---

## 3. Ph√¢n t√≠ch r·ªßi ro (Risk Audit)

| ID | R·ªßi ro | Gi·∫£i th√≠ch | Gi·∫£i ph√°p |
|:---:|---|---|---|
| **CE-01** | **XSS Attack** | Hacker ch√®n m√£ ƒë·ªôc v√†o n·ªôi dung rich-text. | S·ª≠ d·ª•ng th∆∞ vi·ªán `dompurify` ho·∫∑c validator c·ªßa TipTap/Lexical ·ªü c·∫£ Client v√† Server. |
| **CE-02** | **Conflict Draft** | Hai thi·∫øt b·ªã c√πng s·ª≠a 1 b·∫£n nh√°p. | S·ª≠ d·ª•ng timestamp ho·∫∑c c∆° ch·∫ø "Locking" (ch·ªâ cho ph√©p thi·∫øt b·ªã m·ªõi nh·∫•t ghi ƒë√®). |
| **CE-03** | **Network Failure** | ƒêang l∆∞u nh√°p th√¨ m·∫•t m·∫°ng. | T√≠ch h·ª£p **LocalStorage** ƒë·ªÉ l∆∞u b·∫£n sao l∆∞u d·ª± ph√≤ng t·∫°m th·ªùi t·∫°i m√°y ng∆∞·ªùi d√πng. |

---
*T√†i li·ªáu ƒë∆∞·ª£c bi√™n so·∫°n b·ªüi **T√≠t d·ªÖ th∆∞∆°ng**.*

```

### life-2/diagrams/activity-diagrams/m4-engagement-connections-summary.md
```md
# Module M4: Engagement & Connections - General Activity Diagrams (Level 1)

> **Persona:** Senior System Architect (T√≠t d·ªÖ th∆∞∆°ng)
> **Ph·∫°m vi:** M√¥ t·∫£ c√°ch ng∆∞·ªùi d√πng t∆∞∆°ng t√°c v·ªõi n·ªôi dung v√† k·∫øt n·ªëi v·ªõi nhau trong m·∫°ng x√£ h·ªôi.
> **Ki·∫øn tr√∫c:** **MVC** (View - Controller/Service - Model) & **Local-First**.

---

## 1. S∆° ƒë·ªì ho·∫°t ƒë·ªông t·ªïng qu√°t (High-Level Flow)

S∆° ƒë·ªì n√†y m√¥ t·∫£ hai lu·ªìng ch√≠nh: T∆∞∆°ng t√°c n·ªôi dung v√† Qu·∫£n l√Ω quan h·ªá.

```mermaid
flowchart TD
    %% Nodes
    Start(["Kh√°m ph√° n·ªôi dung / H·ªì s∆° ng∆∞·ªùi d√πng"])
    
    A1{"Ng∆∞·ªùi d√πng mu·ªën l√†m g√¨?"}
    
    %% Engagement Branch
    B1["M4-A2: T∆∞∆°ng t√°c n·ªôi dung<br/>(Like/Comment Pipeline)"]
    B2["C·∫≠p nh·∫≠t ch·ªâ s·ªë t∆∞∆°ng t√°c b√†i vi·∫øt"]
    
    %% Connection Branch
    C1["M4-A1: Thi·∫øt l·∫≠p k·∫øt n·ªëi<br/>(Follow/Unfollow Handshake)"]
    C2["M4-A3: Qu·∫£n l√Ω ri√™ng t∆∞<br/>(Block/Privacy Control)"]
    
    End(["K·∫øt th√∫c / C·∫≠p nh·∫≠t tr·∫°ng th√°i m·∫°ng x√£ h·ªôi"])

    %% Flow
    Start --> A1
    A1 -- "T∆∞∆°ng t√°c (Like/CMT)" --> B1
    B1 --> B2
    B2 --> End
    
    A1 -- "K·∫øt n·ªëi (Follow)" --> C1
    C1 --> End
    
    A1 -- "B·∫£o m·∫≠t (Ch·∫∑n)" --> C2
    C2 --> End

    %% Styling
    style Start fill:#fff5f8,stroke:#ff8caf
    style End fill:#fff5f8,stroke:#ff8caf
    style B1 fill:#e8f4fd,stroke:#2196f3
    style C1 fill:#e8f4fd,stroke:#2196f3
    style C2 fill:#e8f4fd,stroke:#2196f3
```

---

## 2. Gi·∫£i th√≠ch c√°c giai ƒëo·∫°n ch√≠nh (Stages Explanation)

| Giai ƒëo·∫°n | Vai tr√≤ | Tr√°ch nhi·ªám ch√≠nh |
|:---:|---|---|
| **Handshake** | `M4-A1` | Qu·∫£n l√Ω lu·ªìng theo d√µi (Follow). S·ª≠ d·ª•ng Model c·ª•c b·ªô ƒë·ªÉ ki·ªÉm tra s·ª± t·ªìn t·∫°i c·ªßa quan h·ªá tr∆∞·ªõc khi c·∫≠p nh·∫≠t. |
| **Engagement** | `M4-A2` | X·ª≠ l√Ω Like v√† B√¨nh lu·∫≠n. ƒê·∫£m b·∫£o t√≠nh nh·∫•t qu√°n gi·ªØa n·ªôi dung b√¨nh lu·∫≠n v√† b√†i vi·∫øt g·ªëc m√† kh√¥ng th√¥ng qua d·ªãch v·ª• ngo√†i. |
| **Enforcement** | `M4-A3` | Th·ª±c thi c√°c r√†o c·∫£n k·∫øt n·ªëi (Ch·∫∑n/B·ªè ch·∫∑n). ƒê√¢y l√† b·ªô l·ªçc an to√†n cho tr·∫£i nghi·ªám ng∆∞·ªùi d√πng. |

---

## 3. Th√†nh ph·∫ßn H·∫° t·∫ßng (Local Technical Stack)

H·ªá th·ªëng tu√¢n th·ªß tri·∫øt l√Ω **MVC** v√† x·ª≠ l√Ω **Local** ho√†n to√†n:

1.  **Local Notification Trigger**: Khi c√≥ t∆∞∆°ng t√°c, Controller ch·ªß ƒë·ªông g·ªçi Service th√¥ng b√°o ƒë·ªÉ c·∫≠p nh·∫≠t cho ng∆∞·ªùi d√πng (Internal Service Call).
2.  **Model Relationships**: S·ª≠ d·ª•ng c√°c b·∫£n ghi (Documents) trong collection `connections` ƒë·ªÉ l∆∞u tr·ªØ quan h·ªá, tr√°nh d√πng ƒë·ªì th·ªã b√™n ngo√†i (Graph DB).
3.  **Local Verification**: M·ªçi h√†nh ƒë·ªông t∆∞∆°ng t√°c ƒë·ªÅu ƒë∆∞·ª£c Model ki·ªÉm tra quy·ªÅn (Access Control) ngay t·∫°i ch·ªó d·ª±a tr√™n tr·∫°ng th√°i `isPrivate` ho·∫∑c `Blocked`.

---
*T√†i li·ªáu ƒë∆∞·ª£c c·∫≠p nh·∫≠t theo ti·∫øp c·∫≠n **MVC & Local-First** b·ªüi **T√≠t d·ªÖ th∆∞∆°ng**.*

```

### life-2/diagrams/activity-diagrams/m5-a1-bookmark-persistence.md
```md
# M5-A1: Bookmark Persistence - Detailed Design

> **Persona:** Senior System Architect (T√≠t d·ªÖ th∆∞∆°ng)
> **M·ª•c ti√™u:** M√¥ t·∫£ lu·ªìng l∆∞u v√† b·ªè l∆∞u b√†i vi·∫øt, ƒë·∫£m b·∫£o t√≠nh nh·∫•t qu√°n gi·ªØa View v√† Model.
> **Ki·∫øn tr√∫c:** **MVC** (View - Controller/Service - Model).

---

## 1. S∆° ƒë·ªì Activity Diagram (Mermaid)

```mermaid
flowchart TD
    subgraph User["üë§ Ng∆∞·ªùi d√πng (Member)"]
        A1["Nh·∫•p bi·ªÉu t∆∞·ª£ng Bookmark üîñ tr√™n b√†i vi·∫øt"]
        A10["Th·∫•y bi·ªÉu t∆∞·ª£ng chuy·ªÉn m√†u (Active)"]
    end

    subgraph View["üñ•Ô∏è Frontend (View)"]
        B1["Nh·∫≠n s·ª± ki·ªán Click"]
        B2["G·ª≠i Request POST /api/bookmarks/toggle"]
        B3["C·∫≠p nh·∫≠t UI c·ª•c b·ªô (Optimistic UI)"]
        B4["Hi·ªÉn th·ªã th√¥ng b√°o: 'ƒê√£ l∆∞u v√†o b·ªô s∆∞u t·∫≠p'"]
    end

    subgraph ControllerService["‚öôÔ∏è Backend (Controller/Service)"]
        C1["Ti·∫øp nh·∫≠n y√™u c·∫ßu Toggle Bookmark"]
        C2{"ƒê√£ Bookmark b√†i n√†y ch∆∞a?"}
        C3["X√≥a b·∫£n ghi Bookmark c≈©"]
        C4["T·∫°o b·∫£n ghi Bookmark m·ªõi"]
        C5["G√°n v√†o Collection m·∫∑c ƒë·ªãnh: 'T·∫•t c·∫£'"]
        C6["Tr·∫£ v·ªÅ tr·∫°ng th√°i m·ªõi cho Client"]
    end

    subgraph Model["üóÑÔ∏è Database (Model)"]
        D1["(Collection: Bookmarks)"]
        D2["(Collection: BookmarkCollections)"]
    end

    %% Connections
    A1 --> B1
    B1 --> B3
    B1 --> B2
    B2 --> C1
    C1 --> C2
    C2 -- "R·ªìi (B·ªè l∆∞u)" --> C3
    C3 <--> D1
    C2 -- "Ch∆∞a (L∆∞u)" --> C4
    C4 --> C5
    C5 <--> D2
    C4 <--> D1
    C3 --> C6
    C5 --> C6
    C6 --> B4
    B4 --> A10

    %% Styling
    style User fill:#fff5f8,stroke:#ff8caf
    style View fill:#e8f4fd,stroke:#2196f3
    style ControllerService fill:#f9f9f9,stroke:#333
    style Model fill:#fffde7,stroke:#fbc02d
```

---

## 2. Gi·∫£i th√≠ch lu·ªìng ho·∫°t ƒë·ªông (Flow Explanation)

| B∆∞·ªõc | Th√†nh ph·∫ßn | M√¥ t·∫£ chi ti·∫øt |
|:---:|---|---|
| **Toggle Logic** | **Controller/Service** | H·ªá th·ªëng kh√¥ng d√πng hai API ri√™ng bi·ªát cho Save/Unsave m√† d√πng chung m·ªôt endpoint Toggle ƒë·ªÉ ƒë∆°n gi·∫£n h√≥a logic cho View. |
| **M·∫∑c ƒë·ªãnh** | **Controller/Service** | Khi l∆∞u l·∫ßn ƒë·∫ßu, h·ªá th·ªëng lu√¥n g√°n b√†i vi·∫øt v√†o b·ªô s∆∞u t·∫≠p h·ªá th·ªëng c√≥ t√™n l√† "T·∫•t c·∫£" (Uncategorized) ƒë·ªÉ ƒë·∫£m b·∫£o kh√¥ng c√≥ bookmark n√†o b·ªã m·ªì c√¥i. |
| **Ph·∫£n h·ªìi nhanh** | **View** | S·ª≠ d·ª•ng **Optimistic UI** ƒë·ªÉ icon ƒë·ªïi m√†u ngay khi click, mang l·∫°i c·∫£m gi√°c ·ª©ng d·ª•ng ph·∫£n h·ªìi t·ª©c th√¨. |
| **L∆∞u tr·ªØ** | **Model** | M·ªói record trong `bookmarks` ch·ª©a b·ªô ba: `userId` - `postId` - `collectionId`. |

---

## 3. Ph√¢n t√≠ch r·ªßi ro (Risk Audit)

| ID | R·ªßi ro | Gi·∫£i th√≠ch | Gi·∫£i ph√°p |
|:---:|---|---|---|
| **BP-01** | **Redundant Records** | Click qu√° nhanh t·∫°o ra nhi·ªÅu b·∫£n ghi tr√πng l·∫∑p cho c√πng m·ªôt b√†i vi·∫øt. | S·ª≠ d·ª•ng **Compound Index** duy nh·∫•t (Unique) tr√™n `userId` + `postId` trong Model ƒë·ªÉ DB t·ª± ch·∫∑n r√°c. |
| **BP-02** | **Post Deletion** | B√†i vi·∫øt g·ªëc b·ªã x√≥a nh∆∞ng Bookmark v·∫´n c√≤n g√¢y l·ªói 404. | S·ª≠ d·ª•ng **Cascade Delete** ho·∫∑c Service c·ªßa Post (M2) ph·∫£i g·ª≠i t√≠n hi·ªáu x√≥a to√†n b·ªô Bookmark li√™n quan khi Post b·ªã g·ª°. |
| **BP-03** | **Access Denied** | L∆∞u b√†i vi·∫øt t·ª´ m·ªôt t√†i kho·∫£n v·ª´a chuy·ªÉn sang ch·∫ø ƒë·ªô Private/Blocked. | Controller ki·ªÉm tra l·∫°i quy·ªÅn xem b√†i vi·∫øt (`visibility`) ngay t·∫°i th·ªùi ƒëi·ªÉm th·ª±c hi·ªán l∆∞u. |

---
*T√†i li·ªáu ƒë∆∞·ª£c c·∫≠p nh·∫≠t d·ª±a tr√™n ti·∫øp c·∫≠n **MVC & Local-First** b·ªüi **T√≠t d·ªÖ th∆∞∆°ng**.*

```

### life-2/diagrams/activity-diagrams/index.md
```md
# Activity Diagrams - B·∫£n ƒë·ªì quy tr√¨nh chi ti·∫øt (Granular Todo List)

> **Persona:** Senior System Architect (T√≠t d·ªÖ th∆∞∆°ng)
> **M·ª•c ti√™u:** Ph√¢n r√£ c√°c lu·ªìng nghi·ªáp v·ª• th√†nh c√°c b∆∞·ªõc ƒëi nh·ªè nh·∫•t, r√µ r√†ng nh·∫•t ƒë·ªÉ ƒë·∫£m b·∫£o qu√° tr√¨nh tri·ªÉn khai kh√¥ng b·ªã l·∫°c h∆∞·ªõng.

---

## üìÇ I. Module M1: Auth & Profile (Identity Foundation)

| ID | T√™n S∆° ƒê·ªì Con (Sub-Flow) | Vai Tr√≤ | M·ª©c ƒê·ªô Chi Ti·∫øt | Tr·∫°ng Th√°i |
|:---:|---|---|:---:|:---:|
| ID | T√™n S∆° ƒê·ªì Con (Sub-Flow) | Vai Tr√≤ | M·ª©c ƒê·ªô Chi Ti·∫øt | Tr·∫°ng Th√°i |
|:---:|---|---|:---:|:---:|
| **M1-A1** | **User Registration (Email)** | Lu·ªìng nh·∫≠p li·ªáu, validate v√† g·ª≠i mail x√°c nh·∫≠n. | R·∫•t chi ti·∫øt | ‚úÖ Done |
| **M1-A2** | **Internal Login Protocol** | X√°c th·ª±c credentials, t·∫°o JWT v√† qu·∫£n l√Ω session. | K·ªπ thu·∫≠t | ‚úÖ Done |
| **M1-A3** | **Email Verification Flow** | X√°c th·ª±c t√†i kho·∫£n th√¥ng qua Mailer. | T√≠ch h·ª£p | ‚úÖ Done |
| **M1-A4** | **Password Recovery Cycle** | Quy tr√¨nh qu√™n m·∫≠t kh·∫©u, OTP v√† c·∫≠p nh·∫≠t b·∫£o m·∫≠t. | B·∫£o m·∫≠t | ‚úÖ Done |
| **M1-A5** | **Profile Onboarding Setup** | Lu·ªìng thi·∫øt l·∫≠p avatar, bio ngay sau khi ƒëƒÉng nh·∫≠p l·∫ßn ƒë·∫ßu. | UX Flow | ‚úÖ Done |

---

## üìÇ II. Module M2: Content Engine (Core Value)

| ID | T√™n S∆° ƒê·ªì Con (Sub-Flow) | Vai Tr√≤ | M·ª©c ƒê·ªô Chi Ti·∫øt | Tr·∫°ng Th√°i |
|:---:|---|---|:---:|:---:|
| **M2-A1** | **Rich-text Editor Pipeline** | X·ª≠ l√Ω input vƒÉn b·∫£n, format v√† l∆∞u nh√°p (draft). | Frontend-heavy | ‚úÖ Done |
| **M2-A2** | **Media Attachment Handler** | Lu·ªìng upload, n√©n ·∫£nh v√† g·∫Øn ƒë·ªãnh danh v√†o b√†i vi·∫øt. | Technical | ‚úÖ Done |
| **M2-A3** | **Post Integrity & Tagging** | Ki·ªÉm tra b√†i vi·∫øt (Sanity check) v√† b√≥c t√°ch hashtag. | Backend Logic | ‚úÖ Done |
| **M2-A4** | **Visibility Enforcement** | √Åp d·ª•ng quy·ªÅn ri√™ng t∆∞ (Public/Friend) v√†o b√†i vi·∫øt. | Access Control | ‚úÖ Done |

---

## üìÇ III. Module M3: Discovery & Feed (Distribution)

| ID | T√™n S∆° ƒê·ªì Con (Sub-Flow) | Vai Tr√≤ | M·ª©c ƒê·ªô Chi Ti·∫øt | Tr·∫°ng Th√°i |
|:---:|---|---|:---:|:---:|
| **M3-A1** | **News Feed Assembler** | Lu·ªìng t·ªïng h·ª£p b√†i vi·∫øt t·ª´ b·∫°n b√® & s·ªü th√≠ch. | Data-intensive | ‚úÖ Done |
| **M3-A2** | **Search Engine Query** | Lu·ªìng t√¨m ki·∫øm b√†i vi·∫øt/ng∆∞·ªùi d√πng. | Technical | ‚úÖ Done |
| **M3-A3** | **Discovery Recommendation** | G·ª£i √Ω c√°c b√†i vi·∫øt "hot" cho ng∆∞·ªùi m·ªõi. | Algorithmic | ‚úÖ Done |
| **M3-A4** | **Autocomplete Dispatcher** | Lu·ªìng g·ª£i √Ω t·ª´ kh√≥a nhanh khi ng∆∞·ªùi d√πng ƒëang g√µ. | Real-time | ‚úÖ Done (Part of A2) |

---

## üìÇ IV. Module M4: Engagement & Connections (Social)

| ID | T√™n S∆° ƒê·ªì Con (Sub-Flow) | Vai Tr√≤ | M·ª©c ƒê·ªô Chi Ti·∫øt | Tr·∫°ng Th√°i |
|:---:|---|---|:---:|:---:|
| **M4-A1** | **Friendship Handshake** | Lu·ªìng theo d√µi (Follow/Unfollow) v√† ƒë·ªìng b·ªô quan h·ªá. | Connection | ‚úÖ Done |
| **M4-A2** | **Engagement Logic** | Lu·ªìng x·ª≠ l√Ω Like, b√¨nh lu·∫≠n v√† ph·∫£n h·ªìi tr√™n b√†i vi·∫øt. | Logic | ‚úÖ Done |
| **M4-A3** | **Connection Privacy** | Lu·ªìng ch·∫∑n ng∆∞·ªùi d√πng v√† b·∫£o m·∫≠t quan h·ªá x√£ h·ªôi. | Security | ‚úÖ Done |

---

## üìÇ V. Module M5: Bookmarking (Knowledge Management)

| ID | T√™n S∆° ƒê·ªì Con (Sub-Flow) | Vai Tr√≤ | M·ª©c ƒê·ªô Chi Ti·∫øt | Tr·∫°ng Th√°i |
|:---:|---|---|:---:|:---:|
| **M5-A1** | **Bookmark Persistence** | L∆∞u gi·ªØ b√†i vi·∫øt v√† ph√¢n lo·∫°i v√†o m·ª•c m·∫∑c ƒë·ªãnh. | Storage | ‚úÖ Done |
| **M5-A2** | **Collection Orchestrator** | Qu·∫£n l√Ω th∆∞ m·ª•c v√† di chuy·ªÉn b√†i vi·∫øt gi·ªØa c√°c m·ª•c. | Organization | ‚úÖ Done |

---

## üìÇ VI. Module M6: Notifications & Moderation (Safety)

| ID | T√™n S∆° ƒê·ªì Con (Sub-Flow) | Vai Tr√≤ | M·ª©c ƒê·ªô Chi Ti·∫øt | Tr·∫°ng Th√°i |
|:---:|---|---|:---:|:---:|
| **M6-A1** | **SSE Event Dispatcher** | Trigger t·ª´ database v√† ƒë·∫©y th√¥ng b√°o qua lu·ªìng SSE. | Infra | ‚úÖ Done |
| **M6-A2** | **Content Report Pipeline** | Lu·ªìng user b√°o c√°o vi ph·∫°m v√† h√†ng ch·ªù x·ª≠ l√Ω. | Process | ‚úÖ Done |
| **M6-A3** | **Enforcement Action** | Admin th·ª±c thi kh√≥a/x√≥a n·ªôi dung v√† log k·∫øt qu·∫£. | Admin | ‚úÖ Done |

---

## üõ†Ô∏è üèóÔ∏è VII. C√°c Sub-Activities D√πng Chung (Utilities)

| ID | T√™n Utility Flow | ƒê∆∞·ª£c d√πng b·ªüi | M√¥ t·∫£ ng·∫Øn |
|:---:|---|---|---|
| **S1** | **Media Pipeline** | M1, M2 | Upload, resize, storage path. |
| **S2** | **Auth Guardian** | All Modules | Ki·ªÉm tra token, quy·ªÅn truy c·∫≠p middleware. |
| **S3** | **Input Sanitizer** | M2, M4 | X·ª≠ l√Ω XSS, x√≥a k√Ω t·ª± l·∫°, chu·∫©n h√≥a text. |

---

**Ghi ch√∫ t·ª´ T√≠t d·ªÖ th∆∞∆°ng:**
Vi·ªác r√£ nh·ªè n√†y gi·ªëng nh∆∞ l·∫Øp LEGO v·∫≠y ƒë√≥ **y√™u th∆∞∆°ng**. M·ªói mi·∫øng nh·ªè (Sub-flow) ƒë·ªÅu ƒë∆°n gi·∫£n v√† d·ªÖ ki·ªÉm so√°t. Khi ch√∫ng m√¨nh l·∫Øp gh√©p l·∫°i, h·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông tr·ªü n√™n v·ªØng ch·∫Øc v√† kh√¥ng lo sai s√≥t ·ªü c√°c chi ti·∫øt ng√°ch.

B·∫°n h√£y ch·ªçn m·ªôt "mi·∫øng LEGO" b·∫•t k·ª≥ ƒë·ªÉ **T√≠t d·ªÖ th∆∞∆°ng** th·ª±c hi·ªán nh√©! ü•∞

```

### life-2/api/api-design.md
```md
# API Design

> **M·ª•c ƒë√≠ch:** Request/Response format, auth, errors  
> **Tham chi·∫øu:** api-spec.md  

---

## Authentication

- **Method:** JWT (Payload Auth plugin)
- **Header:** `Authorization: Bearer <token>`
- **Refresh:** Endpoint refresh token

---

## Request/Response Format

**Request:** JSON body
**Response:** JSON

```json
{
  "docs": [...],
  "totalDocs": 100,
  "limit": 10,
  "page": 1
}
```

---

## Example: POST /api/posts

**Description:** Create a new post  
**Auth:** Required (JWT)

**Request Body:**
- `content`: string (required)
- `media`: string[] (optional)
- `tags`: string[] (optional)

**Response 201:**
- `id`: string
- `createdAt`: ISO8601

**Errors:**
- 401: Unauthorized
- 400: Validation error

---

## Example: GET /api/posts (Feed)

**Description:** List posts for feed (ranking applied)  
**Auth:** Required

**Query params:**
- `limit`: number (default 10)
- `page`: number
- `cursor`: string (for cursor-based pagination)

```

### life-2/api/api-spec.md
```md
# API Specification

> **M·ª•c ƒë√≠ch:** ƒê·∫∑c t·∫£ danh s√°ch REST endpoints cho to√†n b·ªô h·ªá th·ªëng.
> **Format:** Path, Method, Description, Module logic.

---

## üîë 1. Authentication (Module M1)

| Method | Path | Description | Access |
|---|---|---|---|
| `POST` | `/api/users/login` | ƒêƒÉng nh·∫≠p h·ªá th·ªëng | Public |
| `POST` | `/api/users/logout` | ƒêƒÉng xu·∫•t | Auth |
| `POST` | `/api/users/register` | ƒêƒÉng k√Ω ng∆∞·ªùi d√πng m·ªõi | Public |
| `GET` | `/api/users/me` | L·∫•y th√¥ng tin session hi·ªán t·∫°i | Auth |

## üë§ 2. User & Profile (Module M1)

| Method | Path | Description | Access |
|---|---|---|---|
| `GET` | `/api/users/:id` | L·∫•y Profile chi ti·∫øt | Public |
| `PATCH` | `/api/users/:id` | C·∫≠p nh·∫≠t th√¥ng tin Profile/Settings | Owner |
| `POST` | `/api/follows` | Follow m·ªôt ng∆∞·ªùi d√πng | Auth |
| `DELETE` | `/api/follows/:id` | Unfollow ng∆∞·ªùi d√πng | Owner |

## üìù 3. Content Engine (Module M2)

| Method | Path | Description | Access |
|---|---|---|---|
| `GET` | `/api/posts` | L·∫•y danh s√°ch b√†i vi·∫øt (theo filter) | Public |
| `POST` | `/api/posts` | T·∫°o b√†i vi·∫øt m·ªõi | Auth |
| `PATCH` | `/api/posts/:id` | C·∫≠p nh·∫≠t b√†i vi·∫øt | Owner |
| `DELETE` | `/api/posts/:id` | X√≥a b√†i vi·∫øt | Owner |
| `POST` | `/api/media` | Upload file ƒëa ph∆∞∆°ng ti·ªán | Auth |

## üöÄ 4. Discovery & Feed (Module M3)

| Method | Path | Description | Access |
|---|---|---|---|
| `GET` | `/api/v1/feed` | L·∫•y news feed ƒë√£ rank | Auth/Guest |
| `GET` | `/api/v1/search` | T√¨m ki·∫øm (Posts/Users/Tags) | Public |
| `GET` | `/api/v1/search/suggest` | Autocomplete g·ª£i √Ω t√¨m ki·∫øm | Public |

## üíæ 5. Social Bookmarking (Module M5)

| Method | Path | Description | Access |
|---|---|---|---|
| `GET` | `/api/user-collections` | L·∫•y c√°c b·ªô s∆∞u t·∫≠p c·ªßa user | Auth |
| `POST` | `/api/user-collections` | T·∫°o m·ªõi b·ªô s∆∞u t·∫≠p | Auth |
| `PATCH` | `/api/user-collections/:id/save` | L∆∞u b√†i v√†o collection | Owner |
| `PATCH` | `/api/user-collections/:id/unsave`| X√≥a b√†i kh·ªèi collection | Owner |

## üîî 6. Notifications (Module M6)

| Method | Path | Description | Access |
|---|---|---|---|
| `GET` | `/api/notifications` | L·∫•y danh s√°ch th√¥ng b√°o | Auth |
| `PATCH` | `/api/notifications/:id` | ƒê√°nh d·∫•u ƒë√£ ƒë·ªçc | Owner |

---

*Ghi ch√∫: C√°c endpoint `/api/v1/*` l√† c√°c custom route handler ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a trong Next.js App Router ƒë·ªÉ x·ª≠ l√Ω logic ph·ª©c t·∫°p ngo√†i Payload default.* ü•∞

```

### life-2/ui/ui-frame-design.md
```md
# UI Frame Design

> **M·ª•c ƒë√≠ch:** T·ªïng h·ª£p layout c√°c m√†n h√¨nh ch√≠nh  
> **Wireframes chi ti·∫øt:** ui/wireframes/  

---

## C√°c m√†n h√¨nh ch√≠nh

| Nh√≥m | M√†n h√¨nh | Tham chi·∫øu Wireframe |
|---|---|---|
| **M1: Auth** | Login, Profile, Edit Profile | [m1-auth-profile.md](./wireframes/m1-auth-profile.md) |
| **M2: Content** | Create Post, Post Card, Trending | [m2-content-engine.md](./wireframes/m2-content-engine.md) |
| **M3: Discovery**| News Feed, Search Results | [m3-discovery-feed.md](./wireframes/m3-discovery-feed.md) |
| **M4: Feedback** | Comment Section, Follow List | [m4-engagement.md](./wireframes/m4-engagement.md) |
| **M5: Library** | Collections, Save Modal | [m5-bookmarking.md](./wireframes/m5-bookmarking.md) |
| **M6: Safety** | Notifications, Report Modal | [m6-notifications-moderation.md](./wireframes/m6-notifications-moderation.md) |

## Layout Concept (Pink Petals)

- **Header:** Sticky, Blur effect (Glassmorphism). Logo b√™n tr√°i, Search ·ªü gi·ªØa, Notifications & Profile b√™n ph·∫£i.
- **Main Container:** Max-width 1200px. Chia th√†nh 3 c·ªôt tr√™n Desktop (Sidebar | Main | Trending).
- **Primary Color:** H·ªìng c√°nh sen (#FF8CAF) cho c√°c n√∫t h√†nh ƒë·ªông ch√≠nh (CTA).
- **Micro-animations:** Hover effect tr√™n PostCard, Slide-in cho Notifications.

---
*Ghi ch√∫ t·ª´ T√≠t d·ªÖ th∆∞∆°ng: To√†n b·ªô UI ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªìng b·ªô theo chu·∫©n Radix UI ƒë·ªÉ ƒë·∫£m b·∫£o t√≠nh ti·∫øp c·∫≠n (Accessibility) cao nh·∫•t.* ü•∞

```

### life-2/ui/wireframes/m1-auth-profile.md
```md
# Wireframes: Module M1 - Authentication & Profile

> **M·ª•c ƒë√≠ch:** Ph√°c th·∫£o c·∫•u tr√∫c giao di·ªán cho c√°c m√†n h√¨nh Auth v√† Profile.  
> **Phong c√°ch:** Pink Petals Design System (S·∫°ch s·∫Ω, T·ªëi gi·∫£n, M√†u h·ªìng ch·ªß ƒë·∫°o).

---

## 1. Login Screen (`/login`)

```text
+---------------------------------------------+
|                [ Logo ]                     |
|            Welcome to KLTN                  |
|                                             |
|  +---------------------------------------+  |
|  |  Email                                |  |
|  |  [ user@example.com                ]  |  |
|  +---------------------------------------+  |
|                                             |
|  +---------------------------------------+  |
|  |  Password                             |  |
|  |  [ ************                    ]  |  |
|  +---------------------------------------+  |
|                                             |
|  [ ] Remember me           Forgot password? |
|                                             |
|  +=======================================+  |
|  ‚Äñ           SIGN IN (Pink Button)       ‚Äñ  |
|  +=======================================+  |
|                                             |
|             --- OR ---                      |
|                                             |
|  +---------------------------------------+  |
|  |      Sign in with Google              |  |
|  +---------------------------------------+  |
|                                             |
|  Don't have an account? [Sign up]           |
+---------------------------------------------+
```

---

## 2. Profile Screen (`/u/[username]`)

```text
+---------------------------------------------+
| [Back]        User Profile         [Menu]   |
+---------------------------------------------+
|                                             |
|   +-------+   [ Display Name ]              |
|   | Avatar|   @[username]                   |
|   +-------+                                 |
|                                             |
|   "This is my tech bio. I love coding!"     |
|                                             |
|   [ 120 Posts ]  [ 450 Following ]  [ 800 Followers ] |
|                                             |
|   +=======================================+  |
|   ‚Äñ           EDIT PROFILE                ‚Äñ  |
|   +=======================================+  |
|                                             |
|   [ Posts ]   [ Collections ]   [ Likes ]    |
|   +---------------------------------------+  |
|   | [ PostCard ]                          |  |
|   | Content snippet...                    |  |
|   +---------------------------------------+  |
|   | [ PostCard ]                          |  |
|   | Content snippet...                    |  |
|   +---------------------------------------+  |
+---------------------------------------------+
```

---

## 3. Edit Profile Screen (`/settings/profile`)

```text
+---------------------------------------------+
| [Cancel]      Edit Profile        [Save]    |
+---------------------------------------------+
|                                             |
|      +-------+                              |
|      | Photo |  [ Change Avatar ]           |
|      +-------+                              |
|                                             |
|   Display Name                              |
|   [ Steve Thuong Hai                  ]     |
|                                             |
|   Bio (max 160)                             |
|   [ +-------------------------------+ ]     |
|   [ | Writing my thoughts...        | ]     |
|   [ +-------------------------------+ ]     |
|                                             |
|   Social Links                              |
|   +---------------------------------------+ |
|   | [ Icon ] GitHub URL                   | |
|   +---------------------------------------+ |
|   | [ Icon ] LinkedIn URL                 | |
|   +---------------------------------------+ |
+---------------------------------------------+
```

```

### life-2/ui/wireframes/m6-notifications-moderation.md
```md
# Wireframes: Module M6 - Notifications & Moderation

> **M·ª•c ƒë√≠ch:** Ph√°c th·∫£o giao di·ªán th√¥ng b√°o v√† b√°o c√°o vi ph·∫°m.
> **Phong c√°ch:** Pink Petals Design System.

---

## 1. Notification Dropdown (Header)

```text
+-----------------------------------------+
| **Notifications**       [Mark all as read]|
+-----------------------------------------+
|                                         |
| +-------------------------------------+ |
| | [Av] **Steve** liked your post:     | |
| | "Why NoSQL is great..."  *2m ago*   | |
| +-------------------------------------+ |
|                                         |
| +-------------------------------------+ |
| | [Av] **Tech Student** followed you. | |
| |                         *15m ago*   | |
| +-------------------------------------+ |
|                                         |
| +-------------------------------------+ |
| | [Av] **Admin** resolved your report.| |
| |                         *1h ago*    | |
| +-------------------------------------+ |
|                                         |
| [ View all notifications ]              |
+-----------------------------------------+
```

---

## 2. Report Content Modal

```text
+-----------------------------------------+
| [X] Report Post                         |
+-----------------------------------------+
|                                         |
| Why are you reporting this?             |
|                                         |
| ( ) It's spam                           |
| ( ) Hate speech or symbols              |
| ( ) Bullying or harassment              |
| ( ) Toxic or inappropriate content      |
| ( ) Other                               |
|                                         |
| [ Additional comments (optional)     ]  |
|                                         |
| [ Submit Report ]                       |
+-----------------------------------------+
```

---

## 3. Real-time Toast (In-App)

```text
+---------------------------------------+
|  +----+  **New Notification**         |
|  | Av |  @steve liked your post        |
|  +----+                               |
+---------------------------------------+
(Floating at Top Right corner)
```

```

### life-2/ui/wireframes/m2-content-engine.md
```md
# Wireframes: Module M2 - Content Engine

> **M·ª•c ƒë√≠ch:** Ph√°c th·∫£o c·∫•u tr√∫c giao di·ªán cho vi·ªác t·∫°o v√† hi·ªÉn th·ªã n·ªôi dung (Posts, Tags).  
> **Phong c√°ch:** Pink Petals Design System.

---

## 1. Create Post Modal/Screen

```text
+---------------------------------------------+
| [X]          Create New Post       [Post]   |
+---------------------------------------------+
|                                             |
|  +---------------------------------------+  |
|  | What's on your mind?                  |  |
|  | [ Write something techy here...    ]  |  |
|  | [ Support Markdown, e.g. **bold**   ]  |  |
|  |                                       |  |
|  +---------------------------------------+  |
|                                             |
|  [ + Add Image ]  [ + Add Link ]  [ # Tag ] |
|                                             |
|  +---------------------------------------+  |
|  | Preview Media:                        |  |
|  | [ Image Thumbnail [X] ] [ Link Card ] |  |
|  +---------------------------------------+  |
|                                             |
|  Visibility: [ Public v ]                   |
+---------------------------------------------+
```

---

## 2. Post Card (Feed Item)

```text
+---------------------------------------------+
|  +----+  **Steve Thuong Hai** (@steve)       |
|  | Av |  2 hours ago                        |
|  +----+                                     |
|                                             |
|  Check out this amazing NoSQL design!       |
|  It follows aggregate root patterns...      |
|                                             |
|  +---------------------------------------+  |
|  | [           Post Image              ] |  |
|  +---------------------------------------+  |
|                                             |
|  #NoSQL #Database #Design                   |
|                                             |
|  +---------------------------------------+  |
|  | [Heart] 120  [Comment] 45  [Save] 80  |  |
|  +---------------------------------------+  |
+---------------------------------------------+
```

---

## 3. Trending Tags (Sidebar Component)

```text
+---------------------------------------------+
|  **Trending Topics**                        |
|                                             |
|  1. #NextJS               (1.2k posts)      |
|  2. #React19              (850 posts)       |
|  3. #TailwindCSS          (600 posts)       |
|  4. #PayloadCMS           (400 posts)       |
|  5. #MongoDB              (300 posts)       |
|                                             |
|  [ View all topics ]                        |
+---------------------------------------------+
```

```

### life-2/ui/wireframes/m4-engagement.md
```md
# Wireframes: Module M4 - Engagement & Connections

> **M·ª•c ƒë√≠ch:** Ph√°c th·∫£o giao di·ªán t∆∞∆°ng t√°c v√† quan h·ªá ng∆∞·ªùi d√πng.
> **Phong c√°ch:** Pink Petals Design System.

---

## 1. Comment Section (Expandable)

```text
+-------------------------------------------------+
| [ M2 Post Content ... ]                         |
| [ Heart: 1.2k ]  [ Comment: 45 ]  [ Save ]      |
+-------------------------------------------------+
| **Comments (45)**                               |
|                                                 |
| +---------------------------------------------+ |
| | [Av] **Username**  *1h ago*                 | |
| | "Great article! Very helpful for my project."| |
| | [Reply] [Like]                              | |
| +---------------------------------------------+ |
|                                                 |
| +---------------------------------------------+ |
| | [Av] [ Write a comment...                 ] | |
| | [ Button: Post ]                            | |
| +---------------------------------------------+ |
+-------------------------------------------------+
```

---

## 2. Followers/Following List

```text
+-------------------------------------------------------+
| [Back]   **Followers (800)**                          |
+-------------------------------------------------------+
|                                                       |
|  [Search followers...]                                |
|                                                       |
|  +-------------------------------------------------+  |
|  | [Av] **Steve Thuong Hai** (@steve)     [Follow] |  |
|  | "Sharing NoSQL knowledge..."                    |  |
|  +-------------------------------------------------+  |
|                                                       |
|  +-------------------------------------------------+  |
|  | [Av] **Tech Student** (@student123)    [Following]| |
|  | "Building my first app..."                      |  |
|  +-------------------------------------------------+  |
+-------------------------------------------------------+
```

```

### life-2/ui/wireframes/m3-discovery-feed.md
```md
# Wireframes: Module M3 - Discovery & Feed

> **M·ª•c ƒë√≠ch:** Ph√°c th·∫£o c·∫•u tr√∫c giao di·ªán cho lu·ªìng kh√°m ph√° b√†i vi·∫øt v√† t√¨m ki·∫øm.
> **Phong c√°ch:** Pink Petals Design System.

---

## 1. Main News Feed (`/`)

```text
+-------------------------------------------------------+
|  [Logo]   [ Search Knowledge...      ]   [Noti] [User]|
+-------------------------------------------------------+
|                                                       |
|  [Tab: For You]   [Tab: Following]   [Tab: Trending]  |
|  ---------------------------------------------------  |
|                                                       |
|  +-------------------------------------------------+  |
|  | [ M2 PostCard: Steve Thuong Hai ]               |  |
|  | "Why NoSQL is great for social apps..."        |  |
|  | [ Image ]                                       |  |
|  | [Heart] 1.2k  [Comment] 45  [Save]              |  |
|  +-------------------------------------------------+  |
|                                                       |
|  +-------------------------------------------------+  |
|  | [ M2 PostCard: Tech Learner ]                  |  |
|  | "My first Next.js 15 project experience..."     |  |
|  | [Heart] 850   [Comment] 22  [Save]              |  |
|  +-------------------------------------------------+  |
|                                                       |
|  [ Loading... (Spinner) ]                             |
+-------------------------------------------------------+
```

---

## 2. Search Autocomplete UI (Dropdown)

```text
+-----------------------------------------+
| [ Search Knowledge...             ]     |
+-----------------------------------------+
|  **Suggested Topics**                   |
|  # [NextJS]                             |
|  # [React19]                            |
|                                         |
|  **People**                             |
|  (Av) [Steve Thuong Hai] @steve         |
|  (Av) [Tech Student] @student123        |
|                                         |
|  [ Search for "..." in posts ]          |
+-----------------------------------------+
```

---

## 3. Search Results Page (`/search?q=...`)

```text
+-------------------------------------------------------+
| [Back]   Search results for "NoSQL"                   |
+-------------------------------------------------------+
|                                                       |
|  [Filter: All]  [Posts]  [People]  [Tags]             |
|                                                       |
|  Found 120 posts:                                     |
|                                                       |
|  +-------------------------------------------------+  |
|  | **Post Title/Snippet highlighting "NoSQL"**    |  |
|  | by @author...                                   |  |
|  +-------------------------------------------------+  |
|                                                       |
|  People:                                              |
|  (Av) @nosql_expert  [Follow]                         |
+-------------------------------------------------------+
```

```

### life-2/ui/wireframes/m5-bookmarking.md
```md
# Wireframes: Module M5 - Social Bookmarking

> **M·ª•c ƒë√≠ch:** Ph√°c th·∫£o c·∫•u tr√∫c giao di·ªán cho qu·∫£n l√Ω b·ªô s∆∞u t·∫≠p v√† l∆∞u b√†i vi·∫øt.
> **Phong c√°ch:** Pink Petals Design System.

---

## 1. Save to Collection Modal

```text
+-----------------------------------------+
| [X] Save to Collection                  |
+-----------------------------------------+
|                                         |
|  [Search collections...]                |
|                                         |
|  [ ] **My Bookmarks** (Default)         |
|  [x] **Next.js Learning**               |
|  [ ] **UI/UX Design**                   |
|                                         |
|  +-----------------------------------+  |
|  | + Create New Collection            |  |
|  +-----------------------------------+  |
|                                         |
|  [ Done ]                               |
+-----------------------------------------+
```

---

## 2. Collections List View (Library)

```text
+-------------------------------------------------------+
|  [Logo]   [ Search... ]                [Noti] [User]  |
+-------------------------------------------------------+
|                                                       |
|  **My Library**                                       |
|                                                       |
|  +------------+   +------------+   +------------+     |
|  | [ Image ]  |   | [ Image ]  |   | [ Empty ]  |     |
|  | Next.js    |   | AI Research|   | To Watch   |     |
|  | (12 items) |   | (5 items)  |   | (0 items)  |     |
|  +------------+   +------------+   +------------+     |
|                                                       |
|  [ Button: Create New Collection ]                    |
+-------------------------------------------------------+
```

---

## 3. Collection Detail View

```text
+-------------------------------------------------------+
| [Back]   **Next.js Learning** (Public)      [Edit]    |
| Description: "Resources for mastering Next.js 15."    |
+-------------------------------------------------------+
|                                                       |
|  +-------------------------------------------------+  |
|  | [ M2 PostCard: Steve Thuong Hai ]      [Remove] |  |
|  | "Next.js 15 Server Components Guide"            |  |
|  +-------------------------------------------------+  |
|                                                       |
|  +-------------------------------------------------+  |
|  | [ M2 PostCard: Vercel Team ]           [Remove] |  |
|  | "Caching strategies in App Router"              |  |
|  +-------------------------------------------------+  |
+-------------------------------------------------------+
```

```

### life-2/specs/m1-auth-profile-spec.md
```md
# Specification: Module M1 - Authentication & Profile

> **M·ª•c ƒë√≠ch:** ƒê·∫∑c t·∫£ chi ti·∫øt ƒë·ªÉ AI Agent th·ª±c hi·ªán code cho module Auth & Profile.  
> **Tr·∫°ng th√°i:** Draft | **Version:** 1.0.0

---

## 1. Overview
Cung c·∫•p kh·∫£ nƒÉng ƒëƒÉng nh·∫≠p, ƒëƒÉng k√Ω v√† qu·∫£n l√Ω th√¥ng tin c√° nh√¢n. H·ªó tr·ª£ Email/Password truy·ªÅn th·ªëng v√† Google OAuth.

## 2. Data Models (PayloadCMS)

### Collection: `users`
- **Fields**:
  - `email`: string (required)
  - `username`: string (unique, required)
  - `roles`: select (admin, user) - default: user
  - `profile`: group {
      display_name, avatar (upload), bio, social_links (array)
    }
- **Access Control**:
  - Read: Anyone (Public profile)
  - Update: Owner only

## 3. API Endpoints (Centralized)
D·ª±a tr√™n `ENDPOINTS` config:
- `AUTH.LOGIN`: `/api/users/login` (Payload default)
- `AUTH.REGISTER`: `/api/users/register` (Custom handler to auto-create profile)
- `PROFILE.UPDATE`: `/api/users/:id`

## 4. UI Requirements (Pink Petals Design System)
*   **Colors**: Primary (Pink-500), Secondary (Orange-500).
*   **Components**: Radix UI based.
*   **Screens**:
    - `LoginScreen`: Form v·ªõi email/password + "Sign in with Google" button.
    - `RegisterScreen`: Username, Email, Password, Confirm Password.
    - `ProfileScreen`: View profile info + "Edit Profile" button.
    - `EditProfileScreen`: Form c·∫≠p nh·∫≠t Avatar, Bio, Social Links.

## 5. Validation Rules (Zod)
- `username`: min 3, max 20, regex: `^[a-zA-Z0-9_]+$`.
- `bio`: max 160 characters.
- `social_links`: valid URLs only.

## 6. Logic ƒê·∫∑c bi·ªát
- **Auto-slug**: T·ª± ƒë·ªông t·∫°o `username` t·ª´ email n·∫øu User kh√¥ng nh·∫≠p.
- **Security**: Bypass `password` field trong m·ªçi query Read tr·ª´ l√∫c Auth.

```

### life-2/specs/m4-engagement-spec.md
```md
# Specification: Module M4 - Engagement & Connections

> **M·ª•c ƒë√≠ch:** ƒê·∫∑c t·∫£ chi ti·∫øt cho h·ªá th·ªëng t∆∞∆°ng t√°c b√†i vi·∫øt (Like, Comment) v√† quan h·ªá gi·ªØa ng∆∞·ªùi d√πng (Follow).
> **Tr·∫°ng th√°i:** Draft | **Version:** 1.0.0

---

## 1. Overview
Module n√†y ch·ªãu tr√°ch nhi·ªám cho c√°c h√†nh ƒë·ªông mang t√≠nh x√£ h·ªôi c·ªßa h·ªá th·ªëng, gi√∫p tƒÉng t√≠nh t∆∞∆°ng t√°c gi·ªØa ng∆∞·ªùi d√πng v√† n·ªôi dung.

## 2. Business Logic

### 2.1 Engagement (T∆∞∆°ng t√°c b√†i vi·∫øt)
- **Like**: M·ªôt ng∆∞·ªùi d√πng ch·ªâ c√≥ th·ªÉ Like m·ªôt b√†i vi·∫øt m·ªôt l·∫ßn. H√†nh ƒë·ªông Like s·∫Ω trigger c·∫≠p nh·∫≠t `stats.likes` trong collection `posts`.
- **Comment**: Cho ph√©p b√¨nh lu·∫≠n vƒÉn b·∫£n. C√°c b√¨nh lu·∫≠n c√≥ th·ªÉ ƒë∆∞·ª£c s·∫Øp x·∫øp theo th·ªùi gian ho·∫∑c l∆∞·ª£t th√≠ch b√†i.

### 2.2 Connections (Quan h·ªá ng∆∞·ªùi d√πng)
- **Follow**: Quan h·ªá m·ªôt chi·ªÅu (A follows B). Khi A follow B, b√†i vi·∫øt c·ªßa B s·∫Ω xu·∫•t hi·ªán tr√™n Feed "Following" c·ªßa A.
- **Unfollow**: G·ª° b·ªè quan h·ªá.

## 3. Data Models (PayloadCMS)

### Collection: `follows`
- `follower`: Relationship (users)
- `following`: Relationship (users)
- **Constraint**: Unique index tr√™n c·∫∑p `{follower, following}`.

### Collection: `comments`
- `post`: Relationship (posts)
- `author`: Relationship (users)
- `content`: textarea (required)
- `replies`: Array of Objects (cho nested comments - optional cho MVP)

## 4. API Endpoints
- `POST /api/follows`: T·∫°o quan h·ªá follow.
- `DELETE /api/follows/:id`: X√≥a quan h·ªá.
- `POST /api/comments`: G·ª≠i b√¨nh lu·∫≠n m·ªõi.
- `GET /api/comments?post=[id]`: L·∫•y danh s√°ch b√¨nh lu·∫≠n c·ªßa b√†i vi·∫øt.

## 5. UI Requirements
- **Engagement Bar**: N·∫±m d∆∞·ªõi m·ªói b√†i vi·∫øt, hi·ªÉn th·ªã s·ªë l∆∞·ª£ng Like/Comment.
- **Comment Section**: Danh s√°ch c√°c b√¨nh lu·∫≠n v·ªõi Avatar v√† th·ªùi gian.
- **Follow Button**: Hi·ªÉn th·ªã tr√™n Profile ho·∫∑c PostCard, ƒë·ªïi tr·∫°ng th√°i "Follow" <-> "Following".

## 6. Access Control
- Engagement/Connection: Authenticated users only.
- Read Comments: Public.

```

### life-2/specs/m3-discovery-feed-spec.md
```md
# Specification: Module M3 - Discovery & Feed

> **M·ª•c ƒë√≠ch:** ƒê·∫∑c t·∫£ chi ti·∫øt cho h·ªá th·ªëng hi·ªÉn th·ªã b√†i vi·∫øt (News Feed) v√† t√¨m ki·∫øm (Search).
> **Tr·∫°ng th√°i:** Draft | **Version:** 1.0.0

---

## 1. Overview
Cung c·∫•p cho ng∆∞·ªùi d√πng d√≤ng th·ªùi gian ch·ª©a c√°c b√†i vi·∫øt m·ªõi nh·∫•t v√† ph√π h·ª£p nh·∫•t d·ª±a tr√™n thu·∫≠t to√°n s·∫Øp x·∫øp. ƒê·ªìng th·ªùi cung c·∫•p kh·∫£ nƒÉng t√¨m ki·∫øm n·ªôi dung, th·∫ª v√† ng∆∞·ªùi d√πng th√¥ng qua MongoDB Atlas Search.

## 2. Business Logic: News Feed Ranking
H·ªá th·ªëng s·ª≠ d·ª•ng thu·∫≠t to√°n **Time-decay + Engagement** ƒë·ªÉ t√≠nh to√°n ƒëi·ªÉm s·ªë b√†i vi·∫øt (`rankingScore`):
- **C√¥ng th·ª©c:** `score = (likesCount + commentsCount*2 + sharesCount*3) / (1 + hoursSincePost / 24)^1.8`
- **T·∫ßn su·∫•t c·∫≠p nh·∫≠t:**
    - C·∫≠p nh·∫≠t ngay khi c√≥ t∆∞∆°ng t√°c m·ªõi (Like, Comment).
    - C·∫≠p nh·∫≠t h√†ng gi·ªù b·∫±ng Cron Job (cho c√°c b√†i vi·∫øt < 7 ng√†y tu·ªïi) ƒë·ªÉ h√¢m n√≥ng/l√†m ngu·ªôi theo th·ªùi gian.

## 3. Search Logic (Atlas Search)
S·ª≠ d·ª•ng **MongoDB Atlas Search** ƒë·ªÉ th·ª±c hi·ªán:
- **Full-text Search:** T√¨m ki·∫øm trong `posts.content` v√† `tags.name`.
- **Autocomplete:** G·ª£i √Ω ng∆∞·ªùi d√πng khi g√µ `username` ho·∫∑c `display_name`.
- **Fuzzy Search:** Cho ph√©p l·ªói ch√≠nh t·∫£ nh·∫π (max 2 characters).

## 4. API Endpoints
- `GET /api/v1/feed`: Tr·∫£ v·ªÅ danh s√°ch b√†i vi·∫øt ƒë√£ rank.
    - Params: `page`, `limit`, `category` (optional).
- `GET /api/v1/search`: T√¨m ki·∫øm t·ªïng qu√°t.
    - Params: `q` (query), `type` (posts|users|tags).
- `GET /api/v1/search/suggest`: API cho autocomplete.

## 5. UI Requirements (Design System)
- **Feed Container:** Danh s√°ch v√¥ t·∫≠n (Infinite Scroll) v·ªõi `LoadingSpinner` ·ªü cu·ªëi.
- **Empty State:** Hi·ªÉn th·ªã khi Feed kh√¥ng c√≥ b√†i vi·∫øt ho·∫∑c Search kh√¥ng ra k·∫øt qu·∫£.
- **Search Bar:** T√≠ch h·ª£p v√†o header, hi·ªÉn th·ªã dropdown k·∫øt qu·∫£ g·ª£i √Ω nhanh (Autocomplete).

## 6. Access Control
- Read Feed/Search: Anyone (Public).
- Personallized Feed (Following only): Authenticated users.

```

### life-2/specs/m6-notifications-moderation-spec.md
```md
# Specification: Module M6 - Notifications & Moderation

> **M·ª•c ƒë√≠ch:** ƒê·∫∑c t·∫£ h·ªá th·ªëng th√¥ng b√°o th·ªùi gian th·ª±c v√† qu·∫£n l√Ω n·ªôi dung/b√°o c√°o.
> **Tr·∫°ng th√°i:** Draft | **Version:** 1.0.0

---

## 1. Overview
H·ªá th·ªëng gi√∫p ng∆∞·ªùi d√πng c·∫≠p nh·∫≠n c√°c s·ª± ki·ªán m·ªõi (Likes, Comments, Follows) th√¥ng qua Server-Sent Events (SSE). ƒê·ªìng th·ªùi cung c·∫•p c√¥ng c·ª• b√°o c√°o n·ªôi dung vi ph·∫°m ƒë·ªÉ b·∫£o v·ªá c·ªông ƒë·ªìng.

## 2. Real-time Notifications (SSE)
- **C∆° ch·∫ø**: S·ª≠ d·ª•ng `Server-Sent Events` thay v√¨ WebSockets ƒë·ªÉ ti·∫øt ki·ªám t√†i nguy√™n v√† t∆∞∆°ng th√≠ch t·ªët v·ªõi Next.js App Router.
- **S·ª± ki·ªán ghi nh·∫≠n**:
    - `POST_LIKE`: C√≥ ng∆∞·ªùi th√≠ch b√†i vi·∫øt c·ªßa b·∫°n.
    - `POST_COMMENT`: C√≥ ng∆∞·ªùi b√¨nh lu·∫≠n b√†i vi·∫øt c·ªßa b·∫°n.
    - `USER_FOLLOW`: C√≥ ng∆∞·ªùi m·ªõi follow b·∫°n.
- **Data Persistence**: M·ªçi th√¥ng b√°o ƒë·ªÅu ƒë∆∞·ª£c l∆∞u v√†o collection `notifications` ƒë·ªÉ xem l·∫°i khi offline.

## 3. Moderation & Report System
- **Report Flow**: Ng∆∞·ªùi d√πng b·∫•m "Report" tr√™n b√†i vi·∫øt -> Ch·ªçn l√Ω do (Spam, Hate speech,...) -> Admin duy·ªát trong trang qu·∫£n tr·ªã.
- **Auto-action (Optional)**: B√†i vi·∫øt b·ªã b√°o c√°o > 10 l·∫ßn b·ªüi c√°c ng∆∞·ªùi d√πng kh√°c nhau s·∫Ω t·ª± ƒë·ªông ·∫©n t√†ng th·ªùi (Hidden) ƒë·ªÉ ch·ªù Admin x·ª≠ l√Ω.

## 4. Data Models (PayloadCMS)

### Collection: `notifications`
- `recipient`: Relationship (users)
- `actor`: Relationship (users) - Ng∆∞·ªùi g√¢y ra h√†nh ƒë·ªông
- `type`: Enum (like, comment, follow, system)
- `entityId`: string (ID c·ªßa b√†i vi·∫øt ho·∫∑c comment li√™n quan)
- `isRead`: boolean (default: false)

### Collection: `reports`
- `reporter`: Relationship (users)
- `targetEntity`: string (Post ID)
- `reason`: Select (spam, inappropriate, toxic, other)
- `status`: Select (pending, resolved, dismissed)

## 5. API Endpoints
- `GET /api/v1/notifications/stream`: Endpoint SSE ƒë·ªÉ nh·∫≠n th√¥ng b√°o real-time.
- `GET /api/notifications`: L·∫•y danh s√°ch th√¥ng b√°o ƒë√£ l∆∞u.
- `POST /api/reports`: G·ª≠i b√°o c√°o vi ph·∫°m.

## 6. UI Requirements
- **Notification Dropdown**: Hi·ªÉn th·ªã tr√™n Header, c√≥ s·ªë th√¥ng b√°o ch∆∞a ƒë·ªçc (Red dot).
- **Report Modal**: Form ch·ªçn l√Ω do b√°o c√°o.
- **In-App Toast**: Hi·ªÉn th·ªã popup nh·ªè khi c√≥ th√¥ng b√°o m·ªõi k·ªÉ c·∫£ khi user kh√¥ng m·ªü dropdown.

```

### life-2/specs/m5-bookmarking-spec.md
```md
# Specification: Module M5 - Social Bookmarking

> **M·ª•c ƒë√≠ch:** ƒê·∫∑c t·∫£ h·ªá th·ªëng l∆∞u tr·ªØ b√†i vi·∫øt v√† t·ªï ch·ª©c theo b·ªô s∆∞u t·∫≠p (Collections).
> **Tr·∫°ng th√°i:** Draft | **Version:** 1.0.0

---

## 1. Overview
H·ªá th·ªëng cho ph√©p ng∆∞·ªùi d√πng l∆∞u b√†i vi·∫øt ("Save for later") v√† ph√¢n lo·∫°i c√°c b√†i vi·∫øt ƒë√£ l∆∞u v√†o c√°c b·ªô s∆∞u t·∫≠p (Collections) ho·∫∑c th∆∞ m·ª•c (Folders) ƒë·ªÉ d·ªÖ d√†ng qu·∫£n l√Ω ki·∫øn th·ª©c.

## 2. Data Models (PayloadCMS)

### Collection: `user_collections`
- **Fields**:
  - `name`: string (required)
  - `owner`: Relationship (users)
  - `description`: textarea
  - `isPublic`: checkbox (m·∫∑c ƒë·ªãnh: false)
  - `items`: Array of Objects (Embedded Bookmarks)
    - `post`: Relationship (posts)
    - `savedAt`: Date (default: now)
- **Strategy**: S·ª≠ d·ª•ng c∆° ch·∫ø **Embedded Array** ƒë·ªÉ l∆∞u danh s√°ch ID b√†i vi·∫øt v√†o document Collection, gi√∫p truy v·∫•n nhanh danh s√°ch ƒë√£ l∆∞u ch·ªâ trong 1 l·∫ßn ƒë·ªçc document.

## 3. Business Logic
- **Quick Save**: H√†nh ƒë·ªông l∆∞u nhanh b√†i vi·∫øt v√†o collection m·∫∑c ƒë·ªãnh ("My Bookmarks").
- **Custom Collections**: Ng∆∞·ªùi d√πng c√≥ th·ªÉ t·∫°o kh√¥ng gi·ªõi h·∫°n collection (v√≠d·ª•: "H·ªçc Next.js", "AI Research").
- **Public/Private**: C√°c collection c√≥ th·ªÉ ƒë∆∞·ª£c c√¥ng khai ƒë·ªÉ chia s·∫ª cho ng∆∞·ªùi kh√°c xem (Social Bookmarking).

## 4. API Endpoints
- `GET /api/v1/collections`: L·∫•y danh s√°ch collection c·ªßa user hi·ªán t·∫°i.
- `POST /api/v1/collections`: T·∫°o collection m·ªõi.
- `PATCH /api/v1/collections/:id/save`: Th√™m m·ªôt b√†i vi·∫øt v√†o collection (D√πng `$push`).
- `PATCH /api/v1/collections/:id/unsave`: X√≥a m·ªôt b√†i vi·∫øt kh·ªèi collection (D√πng `$pull`).
- `GET /api/v1/collections/:id`: L·∫•y chi ti·∫øt collection v√† Populate c√°c b√†i vi·∫øt b√™n trong.

## 5. UI Requirements
- **Save Modal**: Hi·ªÉn th·ªã khi b·∫•m n√∫t "Save" tr√™n b√†i vi·∫øt, cho ph√©p ch·ªçn collection ho·∫∑c t·∫°o m·ªõi.
- **Collection View**: Giao di·ªán d·∫°ng l∆∞·ªõi (Grid) hi·ªÉn th·ªã c√°c collection v·ªõi ·∫£nh cover (l·∫•y t·ª´ b√†i vi·∫øt ƒë·∫ßu ti√™n trong collection).
- **Manage Items**: Giao di·ªán x√≥a ho·∫∑c di chuy·ªÉn b√†i vi·∫øt gi·ªØa c√°c collections.

## 6. Access Control
- Read Public Collections: Anyone.
- Manage Collections: Owner only.

```

### life-2/specs/m2-content-engine-spec.md
```md
# Specification: Module M2 - Content Engine

> **M·ª•c ƒë√≠ch:** ƒê·∫∑c t·∫£ h·ªá th·ªëng bi√™n so·∫°n v√† hi·ªÉn th·ªã b√†i vi·∫øt.
> **Tr·∫°ng th√°i:** Draft | **Version:** 1.0.0

---

## 1. Overview

Module M2 l√† tr√°i tim c·ªßa h·ªá th·ªëng, cho ph√©p ng∆∞·ªùi d√πng chia s·∫ª ki·∫øn th·ª©c th√¥ng qua vƒÉn b·∫£n, h√¨nh ·∫£nh, m√£ ngu·ªìn v√† c√°c li√™n k·∫øt b√™n ngo√†i.

## 2. Data Models (PayloadCMS)

### Collection: `posts`

- **Fields**:
  - `content`: RichText/Markdown (required)
  - `author`: Relationship (users) - auto-filled from current user
  - `media`: Array of Uploads (media collection)
  - `links`: Array of objects { title, url }
  - `tags`: Relationship (tags collection, hasMany: true)
  - `stats`: Group { likes: number, comments: number, shares: number }
  - `rankingScore`: number (c·∫≠p nh·∫≠t qua hook)

- **Hooks**:
  - `beforeChange`: T·ª± ƒë·ªông sanitize n·ªôi dung v√† b√≥c t√°ch `tags` t·ª´ hashtag trong `content`.
  - `afterChange`: T√≠nh to√°n/C·∫≠p nh·∫≠t `rankingScore`.

### Collection: `tags`

- **Fields**:
  - `name`: string (unique, required)
  - `slug`: string (auto-generate from name)
  - `postCount`: number (denormalized)

## 3. API Endpoints

- `GET /api/posts`: L·∫•y danh s√°ch b√†i vi·∫øt (theo filter: tag, author, search).
- `POST /api/posts`: T·∫°o b√†i vi·∫øt m·ªõi.
- `GET /api/posts/:id`: Xem chi ti·∫øt b√†i vi·∫øt.
- `PATCH /api/posts/:id`: Ch·ªânh s·ª≠a (ch·ªâ ch·ªß s·ªü h·ªØu).
- `DELETE /api/posts/:id`: X√≥a b√†i vi·∫øt.
- `GET /api/tags/trending`: L·∫•y danh s√°ch tag ph·ªï bi·∫øn nh·∫•t.

## 4. UI Requirements (Design System)

- **Editor Component**: H·ªó tr·ª£ Markdown preview, d·ªÖ d√†ng ch√®n media v√† link.
- **PostCard**: Hi·ªÉn th·ªã snippet n·ªôi dung, avatar t√°c gi·∫£, v√† c√°c n√∫t t∆∞∆°ng t√°c (Like/Comment).
- **Tag Cloud**: Hi·ªÉn th·ªã c√°c tag n·ªïi b·∫≠t ·ªü Sidebar.

## 5. Logic ƒê·∫∑c bi·ªát

- **Ranking Algorithm**: `score = (likes + comments*2) / (hours_since_post + 2)^1.8`.
- **Link Preview**: T·ª± ƒë·ªông l·∫•y OpenGraph meta (title, image) khi user d√°n link v√†o b√†i vi·∫øt.

```

### life-2/specs/index.md
```md
# Index: Project Specifications (Module-based)

> **M·ª•c ƒë√≠ch:** Danh m·ª•c c√°c t√†i li·ªáu ƒë·∫∑c t·∫£ chi ti·∫øt ph·ª•c v·ª• AI Code Generation.

---

| Module | T√™n t√†i li·ªáu | Tr·∫°ng th√°i |
|---|---|---|
| **M1** | [Authentication & Profile](./m1-auth-profile-spec.md) | [X] Ho√†n th√†nh |
| **M2** | [Content Engine](./m2-content-engine-spec.md) | [X] Ho√†n th√†nh |
| **M3** | [Discovery & Feed](./m3-discovery-feed-spec.md) | [X] Ho√†n th√†nh |
| **M4** | [Engagement & Connections](./m4-engagement-spec.md) | [X] Ho√†n th√†nh |
| **M5** | [Social Bookmarking](./m5-bookmarking-spec.md) | [X] Ho√†n th√†nh |
| **M6** | [Notifications & Moderation](./m6-notifications-moderation-spec.md) | [X] Ho√†n th√†nh |

---
*Ghi ch√∫: C√°c t√†i li·ªáu Spec cung c·∫•p ƒë·∫ßy ƒë·ªß th√¥ng tin v·ªÅ Data Model, Logic nghi·ªáp v·ª• v√† API Endpoints cho t·ª´ng module.* ü•∞

```

### diagram/class-diagram-research.md
```md
# Class Diagram - T√†i nguy√™n nghi√™n c·ª©u

> **Ngu·ªìn**: NotebookLM - https://notebooklm.google.com/notebook/46ddeb54-c391-43df-95f2-53c820428ada
> **Ng√†y t·∫°o**: 2026-02-02

---

## 1. L√Ω thuy·∫øt

### 1.1 Kh√°i ni·ªám
**Class Diagram (S∆° ƒë·ªì l·ªõp)** l√† bi·ªÉu ƒë·ªì quan tr·ªçng nh·∫•t trong nh√≥m m√¥ h√¨nh h√≥a c·∫•u tr√∫c (Structural Modeling) c·ªßa UML.

- **ƒê·ªãnh nghƒ©a**: S∆° ƒë·ªì m√¥ t·∫£ c·∫•u tr√∫c tƒ©nh c·ªßa h·ªá th·ªëng b·∫±ng c√°ch hi·ªÉn th·ªã c√°c l·ªõp (classes), thu·ªôc t√≠nh (attributes), h√†nh vi/ph∆∞∆°ng th·ª©c (behaviors/operations) v√† m·ªëi quan h·ªá gi·ªØa c√°c ƒë·ªëi t∆∞·ª£ng.
- **Vai tr√≤**: R√∫t ng·∫Øn kho·∫£ng c√°ch gi·ªØa th·∫ø gi·ªõi th·ª±c v√† th·∫ø gi·ªõi ph·∫ßn m·ªÅm, x√¢y d·ª±ng thu·∫≠t ng·ªØ chung cho ng∆∞·ªùi s·ª≠ d·ª•ng v√† ng∆∞·ªùi ph√¢n t√≠ch h·ªá th·ªëng.

### 1.2 M·ª•c ƒë√≠ch s·ª≠ d·ª•ng
- **M√¥ t·∫£ c·∫•u tr√∫c d·ªØ li·ªáu**: X√°c ƒë·ªãnh th√¥ng tin c·∫ßn l∆∞u tr·ªØ v√† c·∫•u tr√∫c c·ªßa ch√∫ng
- **ƒê·∫∑c t·∫£ thi·∫øt k·∫ø**: ƒê·∫∑t t√™n, l·∫≠p m√¥ h√¨nh kh√°i ni·ªám, ƒë·∫∑c t·∫£ c·ªông t√°c gi·ªØa c√°c th√†nh ph·∫ßn
- **Thi·∫øt k·∫ø CSDL**: L√†m c∆° s·ªü cho s∆° ƒë·ªì c∆° s·ªü d·ªØ li·ªáu
- **Giao ti·∫øp**: C√¥ng c·ª• ƒë·ªÉ ph√¢n t√≠ch vi√™n, thi·∫øt k·∫ø vi√™n v√† l·∫≠p tr√¨nh vi√™n hi·ªÉu r√µ h·ªá th·ªëng

### 1.3 Khi n√†o d√πng?

| Giai ƒëo·∫°n | M·ª•c ƒë√≠ch | M·ª©c ƒë·ªô chi ti·∫øt |
|-----------|----------|-----------------|
| **Ph√¢n t√≠ch** | N·∫Øm b·∫Øt th·ª±c th·ªÉ nghi·ªáp v·ª• t·ª´ y√™u c·∫ßu | M·ª©c kh√°i ni·ªám, b·ªè qua chi ti·∫øt k·ªπ thu·∫≠t |
| **Thi·∫øt k·∫ø** | Chi ti·∫øt h√≥a c·∫•u tr√∫c ph·∫ßn m·ªÅm tr∆∞·ªõc khi code | ƒê·∫ßy ƒë·ªß ki·ªÉu d·ªØ li·ªáu, visibility, ph∆∞∆°ng th·ª©c |
| **L·∫≠p tr√¨nh** | B·∫£n v·∫Ω k·ªπ thu·∫≠t ƒë·ªÉ chuy·ªÉn ƒë·ªïi sang m√£ ngu·ªìn | Mapping to Code |

### 1.4 √ù nghƒ©a trong ph√¢n t√≠ch thi·∫øt k·∫ø
- ƒê·ªãnh h√¨nh ki·∫øn tr√∫c ph·∫ßn m·ªÅm th√¥ng qua x√°c ƒë·ªãnh m·ªëi quan h·ªá
- C∆° s·ªü cho CSDL v√† Code: √Ånh x·∫° tr·ª±c ti·∫øp ra b·∫£ng CSDL ho·∫∑c class trong m√£ ngu·ªìn
- **B·∫£n thi·∫øt k·∫ø "x∆∞∆°ng s·ªëng"** c·ªßa ph·∫ßn m·ªÅm

---

## 2. C·∫•u tr√∫c

### 2.1 C√°ch bi·ªÉu di·ªÖn Class

M·ªôt l·ªõp ƒë∆∞·ª£c bi·ªÉu di·ªÖn b·∫±ng **h√¨nh ch·ªØ nh·∫≠t chia 3 ngƒÉn**:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      TenLop             ‚îÇ  ‚Üê NgƒÉn 1: T√™n l·ªõp (PascalCase)
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ - thuocTinh1: String    ‚îÇ  ‚Üê NgƒÉn 2: Thu·ªôc t√≠nh
‚îÇ # thuocTinh2: int       ‚îÇ
‚îÇ + thuocTinh3: Date      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ + phuongThuc1(): void   ‚îÇ  ‚Üê NgƒÉn 3: Ph∆∞∆°ng th·ª©c
‚îÇ - phuongThuc2(p: int)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Quy t·∫Øc ƒë·∫∑c bi·ªát**:
- L·ªõp tr·ª´u t∆∞·ª£ng (Abstract): T√™n l·ªõp *in nghi√™ng*
- Interface: C√≥ k√Ω hi·ªáu `<<interface>>`
- Static: Thu·ªôc t√≠nh/ph∆∞∆°ng th·ª©c ƒë∆∞·ª£c <u>g·∫°ch ch√¢n</u>

### 2.2 K√Ω hi·ªáu Visibility (T·∫ßm v·ª±c truy c·∫≠p)

| K√Ω hi·ªáu | T√™n | √ù nghƒ©a |
|---------|-----|---------|
| `+` | Public | Truy c·∫≠p c√¥ng khai, m·ªçi l·ªõp kh√°c ƒë·ªÅu c√≥ th·ªÉ truy c·∫≠p |
| `-` | Private | Truy c·∫≠p ri√™ng t∆∞, ch·ªâ n·ªôi b·ªô l·ªõp ƒë√≥ |
| `#` | Protected | Ch·ªâ l·ªõp ƒë√≥ v√† c√°c l·ªõp con k·∫ø th·ª´a |
| `~` | Package | Truy c·∫≠p trong c√πng g√≥i/package |

### 2.3 C√°c lo·∫°i ƒë∆∞·ªùng n·ªëi (Relationships)

| Lo·∫°i quan h·ªá | K√Ω hi·ªáu | √ù nghƒ©a | V√≠ d·ª• |
|--------------|---------|---------|-------|
| **K·∫ø th·ª´a** (Generalization) | ƒê∆∞·ªùng li·ªÅn, m≈©i t√™n tam gi√°c r·ªóng ‚Üí l·ªõp cha | "Is-a" (L√† m·ªôt) | HinhVuong k·∫ø th·ª´a Shape |
| **K·∫øt h·ª£p** (Association) | ƒê∆∞·ªùng li·ªÅn (c√≥/kh√¥ng m≈©i t√™n) | K·∫øt n·ªëi gi·ªØa hai l·ªõp | SinhVien tham gia KhoaHoc |
| **K·∫øt t·∫≠p** (Aggregation) | ƒê∆∞·ªùng li·ªÅn, h√¨nh thoi r·ªóng ‚óá | "Has-a" l·ªèng l·∫ªo | Xe h∆°i c√≥ B√°nh xe |
| **C·∫•u th√†nh** (Composition) | ƒê∆∞·ªùng li·ªÅn, h√¨nh thoi ƒë·∫∑c ‚óÜ | "Part-of" ch·∫∑t ch·∫Ω | H√≥a ƒë∆°n - Chi ti·∫øt h√≥a ƒë∆°n |
| **Ph·ª• thu·ªôc** (Dependency) | ƒê∆∞·ªùng n√©t ƒë·ª©t, m≈©i t√™n m·ªü | A s·ª≠ d·ª•ng B | L·ªõp A d√πng bi·∫øn c·ª•c b·ªô ki·ªÉu B |

### 2.4 Multiplicity (B·∫£n s·ªë)

| K√Ω hi·ªáu | √ù nghƒ©a |
|---------|---------|
| `1` | Ch·ªâ duy nh·∫•t 1 |
| `0..1` | 0 ho·∫∑c 1 (t√πy ch·ªçn) |
| `*` ho·∫∑c `0..*` | 0 ho·∫∑c nhi·ªÅu |
| `1..*` | 1 ho·∫∑c nhi·ªÅu |
| `2..4` | Kho·∫£ng x√°c ƒë·ªãnh (t·ª´ 2 ƒë·∫øn 4) |

### 2.5 C√∫ ph√°p Mermaid

```mermaid
classDiagram
    %% K·∫ø th·ª´a (Inheritance)
    NhanVien <|-- GiangVien : Is-a

    %% C·∫•u th√†nh (Composition) - "Part-of"
    HoaDon *-- ChiTietHoaDon : Composition

    %% K·∫øt t·∫≠p (Aggregation) - "Has-a"
    PhongHoc o-- MayTinh : Aggregation

    %% K·∫øt h·ª£p (Association)
    SinhVien "0..*" --> "1..*" KhoaHoc : Tham gia

    %% Ph·ª• thu·ªôc (Dependency)
    LopHoc ..> ThoiKhoaBieu : Uses

    %% ƒê·ªãnh nghƒ©a Class chi ti·∫øt
    class SinhVien {
        -String maSV
        -String hoTen
        #Date ngaySinh
        +dangKyHocPhan()
        +xemDiem() float
    }

    class GiangVien {
        +String maGV
        +dayHoc()
    }
```

**K√Ω hi·ªáu Mermaid:**
- `<|--` : K·∫ø th·ª´a (Inheritance)
- `*--` : C·∫•u th√†nh (Composition)
- `o--` : K·∫øt t·∫≠p (Aggregation)
- `-->` : K·∫øt h·ª£p (Association)
- `..>` : Ph·ª• thu·ªôc (Dependency)

---

## 3. C√°ch th·ª©c x√¢y d·ª±ng

### 3.1 Quy tr√¨nh 6 b∆∞·ªõc

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  B∆Ø·ªöC 1: X√°c ƒë·ªãnh c√°c l·ªõp (Identify Classes)                   ‚îÇ
‚îÇ  ‚Üì                                                              ‚îÇ
‚îÇ  B∆Ø·ªöC 2: X√°c ƒë·ªãnh m·ªëi quan h·ªá (Identify Relationships)         ‚îÇ
‚îÇ  ‚Üì                                                              ‚îÇ
‚îÇ  B∆Ø·ªöC 3: X√°c ƒë·ªãnh thu·ªôc t√≠nh (Identify Attributes)             ‚îÇ
‚îÇ  ‚Üì                                                              ‚îÇ
‚îÇ  B∆Ø·ªöC 4: X√°c ƒë·ªãnh ph∆∞∆°ng th·ª©c (Identify Methods)               ‚îÇ
‚îÇ  ‚Üì                                                              ‚îÇ
‚îÇ  B∆Ø·ªöC 5: T·ªï ch·ª©c v√† tinh ch·ªânh (Refine & Organize)             ‚îÇ
‚îÇ  ‚Üì                                                              ‚îÇ
‚îÇ  B∆Ø·ªöC 6: Ki·ªÉm tra v√† nh√≥m g√≥i (Check & Group)                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 3.2 Chi ti·∫øt t·ª´ng b∆∞·ªõc

**B∆∞·ªõc 1: X√°c ƒë·ªãnh c√°c l·ªõp**
- T√¨m ki·∫øm **danh t·ª´** trong t√†i li·ªáu y√™u c·∫ßu, Use Case scenarios
- Ti√™u ch√≠: C√≥ th√¥ng tin c·∫ßn l∆∞u tr·ªØ? C√≥ h·ªá th·ªëng b√™n ngo√†i? C√≥ vai tr√≤ t√°c nghi·ªáp?
- Ph√¢n lo·∫°i: Con ng∆∞·ªùi, V·∫≠t th·ªÉ, T·ªï ch·ª©c, S·ª± ki·ªán, ƒê·ªãa ƒëi·ªÉm

**B∆∞·ªõc 2: X√°c ƒë·ªãnh m·ªëi quan h·ªá**
- T√¨m ki·∫øm **ƒë·ªông t·ª´** th·ªÉ hi·ªán t∆∞∆°ng t√°c gi·ªØa c√°c l·ªõp
- X√°c ƒë·ªãnh: Association, Generalization, Aggregation, Composition, Dependency

**B∆∞·ªõc 3: X√°c ƒë·ªãnh thu·ªôc t√≠nh**
- T√¨m th√¥ng tin d·ªØ li·ªáu ph·ª• thu·ªôc v√†o ƒë·ªëi t∆∞·ª£ng c·ª• th·ªÉ
- Ph√¢n lo·∫°i: ƒë·ªãnh danh, ph√¢n lo·∫°i, ƒë·ªãnh l∆∞·ª£ng, th·ªùi gian, kh√¥ng gian
- N·∫øu thu·ªôc t√≠nh ph·ª©c t·∫°p ‚Üí t√°ch th√†nh L·ªõp ri√™ng

**B∆∞·ªõc 4: X√°c ƒë·ªãnh ph∆∞∆°ng th·ª©c**
- B·ªï sung h√†nh vi m√† ƒë·ªëi t∆∞·ª£ng c·∫ßn th·ª±c hi·ªán
- T∆∞∆°ng ·ª©ng v·ªõi c√°c h√†nh ƒë·ªông x·ª≠ l√Ω d·ªØ li·ªáu c·ªßa l·ªõp

**B∆∞·ªõc 5: T·ªï ch·ª©c v√† tinh ch·ªânh**
- S·ª≠ d·ª•ng k·∫ø th·ª´a cho c√°c l·ªõp c√≥ ƒë·∫∑c ƒëi·ªÉm chung
- X·ª≠ l√Ω thu·ªôc t√≠nh ph√¢n lo·∫°i ‚Üí t√°ch th√†nh l·ªõp con
- Lo·∫°i b·ªè li√™n k·∫øt d∆∞ th·ª´a

**B∆∞·ªõc 6: Ki·ªÉm tra v√† nh√≥m g√≥i**
- Ki·ªÉm tra bao ph·ªß h·∫øt y√™u c·∫ßu
- Nh√≥m c√°c l·ªõp li√™n quan th√†nh Packages

### 3.3 Best Practices

| N√™n l√†m | Kh√¥ng n√™n l√†m |
|---------|---------------|
| T·∫≠p trung v√†o th√¥ng tin quan tr·ªçng | M√¥ h√¨nh h√≥a m·ªçi th·ª© |
| D√πng k√Ω hi·ªáu c·∫ßn thi·∫øt | L·∫°m d·ª•ng t·∫•t c·∫£ k√Ω hi·ªáu UML |
| Ph√¢n bi·ªát m·ª©c ph√¢n t√≠ch/thi·∫øt k·∫ø | Tr·ªôn l·∫´n m·ª©c ƒë·ªô chi ti·∫øt |
| ƒê·∫∑t t√™n chu·∫©n (PascalCase) | ƒê·∫∑t t√™n kh√¥ng nh·∫•t qu√°n |
| D√πng Association Class khi c·∫ßn | T·∫°o quan h·ªá 1-1 d∆∞ th·ª´a |

---

## 4. Ho·∫°t ƒë·ªông

### 4.1 C√°ch ƒë·ªçc m·ªôt L·ªõp

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      SinhVien           ‚îÇ  ‚Üê Vi·∫øt th∆∞·ªùng/ƒë·∫≠m = Concrete Class
‚îÇ      *TenLop*           ‚îÇ  ‚Üê In nghi√™ng = Abstract Class
‚îÇ   <<interface>>         ‚îÇ  ‚Üê Stereotype = Interface
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ - maSV: String          ‚îÇ  ‚Üê Private attribute
‚îÇ # ngaySinh: Date        ‚îÇ  ‚Üê Protected attribute
‚îÇ + hoTen: String         ‚îÇ  ‚Üê Public attribute
‚îÇ _staticAttr: int_       ‚îÇ  ‚Üê G·∫°ch ch√¢n = Static
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ + dangKy(): void        ‚îÇ  ‚Üê Public method
‚îÇ - validate(): bool      ‚îÇ  ‚Üê Private method
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 4.2 C√°ch hi·ªÉu c√°c m·ªëi quan h·ªá

| Nh√¨n th·∫•y | Hi·ªÉu l√† |
|-----------|---------|
| M≈©i t√™n tam gi√°c r·ªóng | L·ªõp con "L√Ä M·ªòT" (Is-a) tr∆∞·ªùng h·ª£p c·ªßa L·ªõp cha |
| H√¨nh thoi r·ªóng ‚óá | Quan h·ªá "C√ì M·ªòT" (Has-a) l·ªèng l·∫ªo, con t·ªìn t·∫°i ƒë·ªôc l·∫≠p |
| H√¨nh thoi ƒë·∫∑c ‚óÜ | Quan h·ªá "B·ªò PH·∫¨N" (Part-of) ch·∫∑t, con ph·ª• thu·ªôc cha |
| ƒê∆∞·ªùng n√©t ƒë·ª©t | L·ªõp A "S·ª¨ D·ª§NG" l·ªõp B (dependency) |
| M≈©i t√™n navigability | L·ªõp ƒëu√¥i c√≥ th·ªÉ g·ªçi l·ªõp ƒë·∫ßu |

### 4.3 C√°ch ƒë·ªçc B·∫£n s·ªë (Multiplicity)

V√≠ d·ª•: `Kh√°ch h√†ng (1) ------ (0..*) ƒê∆°n h√†ng`

‚Üí ƒê·ªçc: "M·ªôt kh√°ch h√†ng c√≥ th·ªÉ c√≥ nhi·ªÅu ƒë∆°n h√†ng (ho·∫∑c ch∆∞a c√≥), nh∆∞ng m·ªói ƒë∆°n h√†ng ch·ªâ thu·ªôc v·ªÅ ƒë√∫ng 1 kh√°ch h√†ng"

### 4.4 Theo d√µi lu·ªìng th√¥ng tin

1. **Chi·ªÅu m≈©i t√™n (Navigability)**:
   - A ‚Üí B: Trong code c·ªßa A s·∫Ω c√≥ bi·∫øn tham chi·∫øu ƒë·∫øn B
   - A c√≥ th·ªÉ g·ªçi h√†m c·ªßa B, nh∆∞ng B kh√¥ng bi·∫øt g√¨ v·ªÅ A

2. **√Ånh x·∫° sang Code**:
   - Quan h·ªá Aggregation/Composition/Association: L·ªõp ch·ª©a s·∫Ω c√≥ thu·ªôc t√≠nh l√† ƒë·ªëi t∆∞·ª£ng c·ªßa l·ªõp kia
   - V√≠ d·ª•: HoaDon (1) ‚óÜ-- (1..*) ChiTietHoaDon ‚Üí HoaDon c√≥ List<ChiTietHoaDon>

---

## 5. Th√†nh ph·∫ßn c·∫•u th√†nh

### 5.1 C√°c lo·∫°i L·ªõp

| Lo·∫°i | ƒê·∫∑c ƒëi·ªÉm | K√Ω hi·ªáu |
|------|----------|---------|
| **Concrete Class** | C√≥ th·ªÉ t·∫°o ƒë·ªëi t∆∞·ª£ng th·ª±c t·∫ø | T√™n vi·∫øt b√¨nh th∆∞·ªùng |
| **Abstract Class** | Kh√¥ng t·∫°o ƒë·ªëi t∆∞·ª£ng, l√†m c∆° s·ªü k·∫ø th·ª´a | T√™n *in nghi√™ng* |
| **Interface** | ƒê·ªãnh nghƒ©a t·∫≠p h√†nh vi ph·∫£i th·ª±c thi | `<<interface>>` |

### 5.2 C√°c lo·∫°i Thu·ªôc t√≠nh

| Lo·∫°i | M√¥ t·∫£ | K√Ω hi·ªáu |
|------|-------|---------|
| Instance Attribute | Thu·ªôc v·ªÅ ƒë·ªëi t∆∞·ª£ng c·ª• th·ªÉ | B√¨nh th∆∞·ªùng |
| Static Attribute | Thu·ªôc v·ªÅ c·∫£ l·ªõp (chia s·∫ª chung) | <u>G·∫°ch ch√¢n</u> |
| Derived Attribute | T√≠nh to√°n t·ª´ thu·ªôc t√≠nh kh√°c | `/tuoi` (d·∫•u /) |

### 5.3 C√°c lo·∫°i Ph∆∞∆°ng th·ª©c

| Lo·∫°i | M√¥ t·∫£ | K√Ω hi·ªáu |
|------|-------|---------|
| Concrete Method | C√≥ ph·∫ßn th√¢n x·ª≠ l√Ω ƒë·∫ßy ƒë·ªß | B√¨nh th∆∞·ªùng |
| Abstract/Virtual Method | Ch∆∞a c√†i ƒë·∫∑t ho·∫∑c c√≥ th·ªÉ ghi ƒë√® | *In nghi√™ng* |
| Static Method | Thu·ªôc v·ªÅ l·ªõp | <u>G·∫°ch ch√¢n</u> |

### 5.4 T·∫•t c·∫£ c√°c lo·∫°i Quan h·ªá

```
ASSOCIATION (K·∫øt h·ª£p)
    ‚îú‚îÄ‚îÄ Unidirectional (1 chi·ªÅu)     A ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ> B
    ‚îú‚îÄ‚îÄ Bidirectional (2 chi·ªÅu)      A <‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ> B
    ‚îî‚îÄ‚îÄ Reflexive (Ph·∫£n th√¢n)        A ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                           ‚îî‚îÄ‚îÄ> A

AGGREGATION (K·∫øt t·∫≠p)               A ‚óá‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ> B
    ‚Üí "Has-a" l·ªèng l·∫ªo

COMPOSITION (C·∫•u th√†nh)             A ‚óÜ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ> B
    ‚Üí "Part-of" ch·∫∑t ch·∫Ω

GENERALIZATION (K·∫ø th·ª´a)            A ‚óÅ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ B
    ‚Üí "Is-a"

DEPENDENCY (Ph·ª• thu·ªôc)              A - - - - -> B
    ‚Üí "Uses"

REALIZATION (Hi·ªán th·ª±c h√≥a)         A ‚óÅ- - - - - B
    ‚Üí Interface implementation
```

### 5.5 Th√†nh ph·∫ßn b·ªï sung

| Th√†nh ph·∫ßn | Vai tr√≤ | V√≠ d·ª• |
|------------|---------|-------|
| **Association Class** | L∆∞u th√¥ng tin c·ªßa m·ªëi quan h·ªá | ƒêi·ªÉm (gi·ªØa SinhVien v√† MonHoc) |
| **Stereotypes** | M·ªü r·ªông/ph√¢n lo·∫°i th√†nh ph·∫ßn | `<<interface>>`, `<<ORM Persistable>>` |
| **Constraints** | Quy t·∫Øc/ƒëi·ªÅu ki·ªán r√†ng bu·ªôc | `{visibility=implementation}` |
| **Role Name** | L√†m r√µ vai tr√≤ trong quan h·ªá | "employer", "employee" |
| **Multiplicity** | S·ªë l∆∞·ª£ng ƒë·ªëi t∆∞·ª£ng tham gia | 1, 0..1, *, 1..* |

---

## Checklist

- [x] **L√Ω thuy·∫øt**: c√≥ kh√°i ni·ªám, m·ª•c ƒë√≠ch, b·ªëi c·∫£nh s·ª≠ d·ª•ng
- [x] **C·∫•u tr√∫c**: c√≥ c√∫ ph√°p/k√Ω hi·ªáu, format UML/Mermaid
- [x] **C√°ch x√¢y d·ª±ng**: c√≥ quy tr√¨nh 6 b∆∞·ªõc v√† best practices
- [x] **Ho·∫°t ƒë·ªông**: c√≥ c√°ch ƒë·ªçc v√† lu·ªìng th√¥ng tin
- [x] **Th√†nh ph·∫ßn**: c√≥ danh s√°ch ƒë·∫ßy ƒë·ªß th√†nh ph·∫ßn v√† quan h·ªá

---

*T√†i li·ªáu ƒë∆∞·ª£c t·ªïng h·ª£p t·ª´ NotebookLM v·ªõi ngu·ªìn "Ch·ªß ƒë·ªÅ 5: M√¥ h√¨nh h√≥a c·∫•u tr√∫c"*

```

### diagram/y-tuong.md
```md
# Use Case Diagram

- To√†n h·ªá th·ªëng + 1‚Äì2 s∆° ƒë·ªì con cho nh√≥m ch·ª©c nƒÉng quan tr·ªçng (Feed, B√†i vi·∫øt, Notification).

# Activity Diagram

- Lu·ªìng: ƒëƒÉng k√Ω/ƒëƒÉng nh·∫≠p, ƒëƒÉng b√†i, t·∫°o k·∫øt n·ªëi/b·∫°n b√®, b√°o c√°o vi ph·∫°m.

- N·∫øu c√≥ AI (g·ª£i √Ω b√†i vi·∫øt, x·∫øp h·∫°ng feed), v·∫Ω activity cho pipeline x·ª≠ l√Ω d·ªØ li·ªáu & suy lu·∫≠n.

# Class Diagram

- Domain model: User, Profile, Post, Comment, Reaction, Follow, Notification, RecommendationJob, FeatureVector, v.v.

# Sequence Diagram

- 3‚Äì5 use case quan tr·ªçng:

+ User xem newsfeed (c√≥ g·ªçi AI ranking)

+ User ƒëƒÉng b√†i (g·ªìm upload media, l∆∞u DB, push notification)

+ User nh·∫≠n notification (real-time / background job)

# Component Diagram

- Ph√¢n r√£ th√†nh: WebApp, API Gateway, Auth Service, User Service, Post Service, Feed/Ranking Service (AI), Notification Service, Search Service.
```

### diagram/activity-diagram-research.md
```md
# Activity Diagram - T√†i nguy√™n nghi√™n c·ª©u

> **Ngu·ªìn**: NotebookLM - https://notebooklm.google.com/notebook/46ddeb54-c391-43df-95f2-53c820428ada
> **Ng√†y t·∫°o**: 2026-02-02

---

## 1. L√Ω thuy·∫øt

### 1.1 Kh√°i ni·ªám
**Activity Diagram (Bi·ªÉu ƒë·ªì ho·∫°t ƒë·ªông/h√†nh ƒë·ªông)** l√† m·ªôt lo·∫°i bi·ªÉu ƒë·ªì thu·ªôc nh√≥m M√¥ h√¨nh h√≥a h√†nh vi (Behavioral Modeling) trong UML.

- **ƒê·ªãnh nghƒ©a**: Bi·ªÉu ƒë·ªì ch·ªâ ra d√≤ng ch·∫£y c·ªßa c√°c ho·∫°t ƒë·ªông (flow of activities) ho·∫∑c quy tr√¨nh trong h·ªá th·ªëng.
- **B·∫£n ch·∫•t**: M√¥ t·∫£ tr√¨nh t·ª± c√°c b∆∞·ªõc th·ª±c hi·ªán m·ªôt c√¥ng vi·ªác t·ª´ ƒëi·ªÉm b·∫Øt ƒë·∫ßu ƒë·∫øn ƒëi·ªÉm k·∫øt th√∫c.

### 1.2 M·ª•c ƒë√≠ch s·ª≠ d·ª•ng
- **M√¥ t·∫£ thu·∫≠t to√°n v√† quy tr√¨nh nghi·ªáp v·ª•**: Chi ti·∫øt h√≥a c√°c b∆∞·ªõc x·ª≠ l√Ω b√™n trong m·ªôt ch·ª©c nƒÉng c·ª• th·ªÉ
- **Th·ªÉ hi·ªán s·ª± t∆∞∆°ng t√°c**: L√†m r√µ s·ª± t∆∞∆°ng t√°c gi·ªØa ng∆∞·ªùi d√πng (Admin/User) v√† H·ªá th·ªëng qua t·ª´ng b∆∞·ªõc
- **L√†m r√µ c√°c lu·ªìng s·ª± ki·ªán**: H√¨nh dung c√°c lu·ªìng ƒëi c·ªßa d·ªØ li·ªáu v√† ƒëi·ªÅu khi·ªÉn, bao g·ªìm c·∫£ nh√°nh r·∫Ω

### 1.3 Khi n√†o d√πng?
- Trong giai ƒëo·∫°n Ph√¢n t√≠ch v√† Thi·∫øt k·∫ø h·ªá th·ªëng
- Sau khi ƒë√£ x√°c ƒë·ªãnh danh s√°ch Use Case
- Khi c·∫ßn m√¥ t·∫£ chi ti·∫øt k·ªãch b·∫£n (Scenario) c·ªßa m·ªôt Use Case ph·ª©c t·∫°p
- Khi c·∫ßn m√¥ t·∫£ quy tr√¨nh nghi·ªáp v·ª• (Business Process) c·ªßa kh√°ch h√†ng

**V√≠ d·ª•**: Sau khi x√°c ƒë·ªãnh Use Case "Qu·∫£n l√Ω b√†i vi·∫øt", v·∫Ω Activity Diagram cho: "Th√™m b√†i vi·∫øt", "S·ª≠a b√†i vi·∫øt", "X√≥a b√†i vi·∫øt"

### 1.4 So s√°nh Activity Diagram vs Flowchart

| ƒê·∫∑c ƒëi·ªÉm | Flowchart | Activity Diagram |
|----------|-----------|------------------|
| **Ph·∫°m vi** | L·∫≠p tr√¨nh c·∫•u tr√∫c, thu·∫≠t to√°n tu·∫ßn t·ª± | UML (H∆∞·ªõng ƒë·ªëi t∆∞·ª£ng), h√†nh vi h·ªá th·ªëng |
| **Kh·∫£ nƒÉng x·ª≠ l√Ω** | Ch·ªß y·∫øu tu·∫ßn t·ª± | H·ªó tr·ª£ x·ª≠ l√Ω song song (Fork/Join) |
| **Th√†nh ph·∫ßn** | Kh·ªëi h√¨nh h·ªçc ƒë∆°n gi·∫£n | C√≥ Swimlanes, Fork/Join |
| **Chu·∫©n h√≥a** | Kh√¥ng chu·∫©n h√≥a th·ªëng nh·∫•t | Thu·ªôc chu·∫©n UML |

**K·∫øt lu·∫≠n**: Activity Diagram l√† phi√™n b·∫£n "n√¢ng c·∫•p" v√† chu·∫©n h√≥a c·ªßa Flowchart.

---

## 2. C·∫•u tr√∫c

### 2.1 C√°c th√†nh ph·∫ßn c∆° b·∫£n

```
    ‚óè                          ‚Üê Initial Node (ƒëi·ªÉm b·∫Øt ƒë·∫ßu)
    ‚îÇ
    ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Ho·∫°t ƒë·ªông 1    ‚îÇ            ‚Üê Activity Node (h√¨nh ch·ªØ nh·∫≠t bo g√≥c)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                      ‚Üê Control Flow (m≈©i t√™n)
         ‚ñº
    ‚óá‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚óá                 ‚Üê Decision Node (h√¨nh thoi)
   /           \
  / [ƒê√∫ng]      \ [Sai]
 ‚ñº               ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ A  ‚îÇ         ‚îÇ B  ‚îÇ
‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îò
   ‚îÇ              ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚ñº
    ‚óá‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚óá                 ‚Üê Merge Node (h√¨nh thoi)
          ‚îÇ
          ‚ñº
    ‚îÉ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÉ                 ‚Üê Fork Node (thanh ƒë·∫≠m)
   /           \
  ‚ñº             ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ C  ‚îÇ       ‚îÇ D  ‚îÇ             ‚Üê X·ª≠ l√Ω song song
‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îò
   ‚îÇ             ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚ñº
    ‚îÉ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÉ                 ‚Üê Join Node (thanh ƒë·∫≠m)
          ‚îÇ
          ‚ñº
        (‚óè)                     ‚Üê Final Node (h√¨nh m·∫Øt b√≤)
```

### 2.2 K√Ω hi·ªáu c√°c th√†nh ph·∫ßn

| Th√†nh ph·∫ßn | K√Ω hi·ªáu | M√¥ t·∫£ |
|------------|---------|-------|
| **Initial Node** | ‚óè (tr√≤n ƒë·∫∑c ƒëen) | ƒêi·ªÉm b·∫Øt ƒë·∫ßu quy tr√¨nh |
| **Activity Node** | ‚ñ¢ (ch·ªØ nh·∫≠t bo g√≥c) | M·ªôt b∆∞·ªõc th·ª±c hi·ªán, h√†nh ƒë·ªông c·ª• th·ªÉ |
| **Control Flow** | ‚Üí (m≈©i t√™n) | Tr√¨nh t·ª± th·ª±c hi·ªán |
| **Decision Node** | ‚óá (h√¨nh thoi, 1 v√†o nhi·ªÅu ra) | R·∫Ω nh√°nh theo ƒëi·ªÅu ki·ªán |
| **Merge Node** | ‚óá (h√¨nh thoi, nhi·ªÅu v√†o 1 ra) | G·ªôp c√°c nh√°nh l·∫°i |
| **Fork Node** | ‚îÉ‚îÅ‚îÅ‚îÅ‚îÉ (thanh ƒë·∫≠m, 1 v√†o nhi·ªÅu ra) | B·∫Øt ƒë·∫ßu x·ª≠ l√Ω song song |
| **Join Node** | ‚îÉ‚îÅ‚îÅ‚îÅ‚îÉ (thanh ƒë·∫≠m, nhi·ªÅu v√†o 1 ra) | K·∫øt th√∫c x·ª≠ l√Ω song song (ƒë·ªìng b·ªô) |
| **Final Node** | (‚óè) (tr√≤n ƒë·∫∑c trong tr√≤n r·ªóng) | K·∫øt th√∫c quy tr√¨nh |
| **Swimlanes** | C·ªôt d·ªçc/h√†ng ngang | Ph√¢n chia tr√°ch nhi·ªám |

### 2.3 Guard Conditions (ƒêi·ªÅu ki·ªán b·∫£o v·ªá)

Tr√™n c√°c lu·ªìng ƒëi ra t·ª´ Decision Node, ghi ƒëi·ªÅu ki·ªán trong ngo·∫∑c vu√¥ng:
- `[ƒê√∫ng]` / `[Sai]`
- `[H·ª£p l·ªá]` / `[Kh√¥ng h·ª£p l·ªá]`
- `[OK]` / `[Cancel]`

### 2.4 C√∫ ph√°p Mermaid

```mermaid
flowchart TD
    %% Initial Node
    Start((Start)) --> A[ƒêƒÉng nh·∫≠p]

    %% Decision Node
    A --> B{Th√¥ng tin ƒë√∫ng?}

    %% Branching
    B -- ƒê√∫ng --> C[Truy c·∫≠p trang ch·ªß]
    B -- Sai --> D[Hi·ªÉn th·ªã l·ªói]
    D --> A

    %% Fork (X·ª≠ l√Ω song song)
    C --> Fork(( ))
    Fork --> E[L·∫•y d·ªØ li·ªáu ng∆∞·ªùi d√πng]
    Fork --> F[L·∫•y danh s√°ch b√†i vi·∫øt]

    %% Join (G·ªôp song song)
    E --> Join(( ))
    F --> Join

    %% Swimlanes (S·ª≠ d·ª•ng Subgraph)
    subgraph System
        E
        F
    end
    subgraph User
        A
    end

    %% Final Node
    Join --> End(((End)))
```

**K√Ω hi·ªáu Mermaid:**
- `(( ))`: H√¨nh tr√≤n (Start/Fork/Join)
- `[ ]`: H√¨nh ch·ªØ nh·∫≠t (Action)
- `{ }`: H√¨nh thoi (Decision)
- `((( )))`: H√¨nh tr√≤n ƒë√¥i (Final Node)
- `subgraph`: T·∫°o Swimlanes

---

## 3. C√°ch th·ª©c x√¢y d·ª±ng

### 3.1 Quy tr√¨nh 5 b∆∞·ªõc

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  B∆Ø·ªöC 1: X√°c ƒë·ªãnh ph·∫°m vi t·ª´ Use Case                          ‚îÇ
‚îÇ  ‚Üì                                                              ‚îÇ
‚îÇ  B∆Ø·ªöC 2: X√°c ƒë·ªãnh c√°c l√†n b∆°i (Swimlanes)                      ‚îÇ
‚îÇ  ‚Üì                                                              ‚îÇ
‚îÇ  B∆Ø·ªöC 3: X√°c ƒë·ªãnh c√°c ho·∫°t ƒë·ªông v√† lu·ªìng ƒëi ch√≠nh              ‚îÇ
‚îÇ  ‚Üì                                                              ‚îÇ
‚îÇ  B∆Ø·ªöC 4: X√°c ƒë·ªãnh ƒëi·ªÉm quy·∫øt ƒë·ªãnh v√† r·∫Ω nh√°nh                  ‚îÇ
‚îÇ  ‚Üì                                                              ‚îÇ
‚îÇ  B∆Ø·ªöC 5: K·∫øt th√∫c quy tr√¨nh (Final Node)                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 3.2 Chi ti·∫øt t·ª´ng b∆∞·ªõc

**B∆∞·ªõc 1: X√°c ƒë·ªãnh ph·∫°m vi t·ª´ Use Case**
- Ch·ªçn m·ªôt Use Case c·ª• th·ªÉ (VD: "Th√™m chuy√™n m·ª•c", "ƒêƒÉng nh·∫≠p")
- ƒê·ªçc k·ªπ ƒë·∫∑c t·∫£ Use Case (k·ªãch b·∫£n ch√≠nh v√† ngo·∫°i l·ªá)

**B∆∞·ªõc 2: X√°c ƒë·ªãnh Swimlanes**
- X√°c ƒë·ªãnh c√°c ƒë·ªëi t∆∞·ª£ng tham gia
- Th∆∞·ªùng c√≥ 2 l√†n ch√≠nh:
  - **Ng∆∞·ªùi d√πng (User/Admin)**: Nh·∫≠p li·ªáu, b·∫•m n√∫t
  - **H·ªá th·ªëng (System)**: Ki·ªÉm tra, x·ª≠ l√Ω, l∆∞u CSDL, hi·ªÉn th·ªã th√¥ng b√°o

**B∆∞·ªõc 3: X√°c ƒë·ªãnh ho·∫°t ƒë·ªông v√† lu·ªìng ch√≠nh**
- Chuy·ªÉn ƒë·ªïi c√°c b∆∞·ªõc trong Basic Flow th√†nh Activity Node
- D√πng m≈©i t√™n n·ªëi theo tr√¨nh t·ª± th·ªùi gian

**B∆∞·ªõc 4: X√°c ƒë·ªãnh ƒëi·ªÉm quy·∫øt ƒë·ªãnh**
- T√¨m t·ª´ kh√≥a: "N·∫øu... th√¨...", "Ki·ªÉm tra", "X√°c th·ª±c"
- V·∫Ω Decision Node v√† c√°c nh√°nh r·∫Ω
- Ghi Guard Conditions tr√™n m·ªói nh√°nh

**B∆∞·ªõc 5: K·∫øt th√∫c quy tr√¨nh**
- ƒê√°nh d·∫•u Final Node
- ƒê·∫£m b·∫£o m·ªçi lu·ªìng (k·ªÉ c·∫£ l·ªói) ƒë·ªÅu d·∫´n ƒë·∫øn k·∫øt th√∫c ho·∫∑c quay l·∫°i ho·∫°t ƒë·ªông h·ª£p l·ªá

### 3.3 Best Practices

| N√™n l√†m | Kh√¥ng n√™n l√†m |
|---------|---------------|
| M·ªôt Use Case - M·ªôt Activity Diagram | Nh·ªìi nh√©t to√†n b·ªô h·ªá th·ªëng v√†o 1 bi·ªÉu ƒë·ªì |
| Lu√¥n c√≥ Initial Node v√† Final Node | B·ªè qua ƒëi·ªÉm b·∫Øt ƒë·∫ßu/k·∫øt th√∫c |
| ƒê·∫∑t t√™n ƒë·ªông t·ª´ (VD: "Ki·ªÉm tra ƒëƒÉng nh·∫≠p") | ƒê·∫∑t t√™n danh t·ª´ (VD: "Vi·ªác ki·ªÉm tra") |
| V·∫Ω c·∫£ lu·ªìng ngo·∫°i l·ªá (l·ªói) | Ch·ªâ v·∫Ω Happy Path |
| S·ª≠ d·ª•ng Swimlanes ph√¢n chia tr√°ch nhi·ªám | ƒê·ªÉ c√°c ho·∫°t ƒë·ªông l·∫´n l·ªôn kh√¥ng r√µ ai l√†m |
| Kh·ªõp v·ªõi Use Case Specification | Kh√¥ng ƒë·ªìng b·ªô v·ªõi t√†i li·ªáu ƒë·∫∑c t·∫£ |

---

## 4. Ho·∫°t ƒë·ªông

### 4.1 C√°ch ƒë·ªçc t·ª´ng th√†nh ph·∫ßn

| Nh√¨n th·∫•y | ƒê·ªçc l√† |
|-----------|--------|
| ‚óè (tr√≤n ƒë·∫∑c ƒëen) | "Quy tr√¨nh b·∫Øt ƒë·∫ßu t·∫°i ƒë√¢y" |
| ‚ñ¢ (ch·ªØ nh·∫≠t bo g√≥c) | "H·ªá th·ªëng/Ng∆∞·ªùi d√πng ƒëang l√†m [ƒë·ªông t·ª´]" |
| ‚óá (h√¨nh thoi, 1 v√†o nhi·ªÅu ra) | "C√¢u h·ªèi/ƒëi·ªÅu ki·ªán ki·ªÉm tra" |
| ‚îÉ‚îÅ‚îÅ‚îÅ‚îÉ (thanh ƒë·∫≠m, 1 v√†o nhi·ªÅu ra) | "B·∫Øt ƒë·∫ßu l√†m ƒë·ªìng th·ªùi c√°c vi·ªác sau" |
| ‚îÉ‚îÅ‚îÅ‚îÅ‚îÉ (thanh ƒë·∫≠m, nhi·ªÅu v√†o 1 ra) | "Ch·ªù t·∫•t c·∫£ xong m·ªõi ƒëi ti·∫øp" |
| (‚óè) (h√¨nh m·∫Øt b√≤) | "Quy tr√¨nh ho√†n t·∫•t" |

### 4.2 C√°ch theo d√µi lu·ªìng

**Lu·ªìng ƒëi·ªÅu khi·ªÉn (Control Flow)**:
- ƒê∆∞·ªùng li·ªÅn n√©t c√≥ m≈©i t√™n
- ƒê·ªçc: "L√†m xong vi·ªác A th√¨ chuy·ªÉn sang vi·ªác B"
- G·∫∑p Decision: Ch·ªçn m·ªôt h∆∞·ªõng theo ƒëi·ªÅu ki·ªán
- G·∫∑p Fork: Theo d√µi t·∫•t c·∫£ h∆∞·ªõng c√πng l√∫c

**Lu·ªìng d·ªØ li·ªáu (Data Flow)**:
- Object Node: H√¨nh ch·ªØ nh·∫≠t g√≥c vu√¥ng (VD: `H√≥a ƒë∆°n [Ch∆∞a thanh to√°n]`)
- Object Flow: M≈©i t√™n n·ªëi Activity ‚Üî Object
- ƒê·ªçc: "Ho·∫°t ƒë·ªông A t·∫°o ra d·ªØ li·ªáu X, Ho·∫°t ƒë·ªông B d√πng d·ªØ li·ªáu X"

**Theo d√µi tr√°ch nhi·ªám (Swimlanes)**:
- Xem Activity Node n·∫±m trong c·ªôt/h√†ng n√†o
- ƒê·ªçc: "N√∫t 'Duy·ªát b√†i' trong l√†n 'Admin' ‚Üí Admin th·ª±c hi·ªán"

### 4.3 T√≥m t·∫Øt c√°ch ƒë·ªçc

> "B·∫Øt ƒë·∫ßu t·ª´ ch·∫•m ƒëen ‚Üí ƒëi theo m≈©i t√™n ‚Üí ƒë·ªÉ √Ω l√†n b∆°i ƒë·ªÉ bi·∫øt ai l√†m ‚Üí d·ª´ng l·∫°i suy nghƒ© ·ªü h√¨nh thoi ‚Üí ch·∫°y song song ·ªü thanh ƒë·∫≠m ‚Üí d·ª´ng l·∫°i ·ªü h√¨nh m·∫Øt b√≤"

---

## 5. Th√†nh ph·∫ßn c·∫•u th√†nh

### 5.1 Danh s√°ch ƒë·∫ßy ƒë·ªß

| Th√†nh ph·∫ßn | T√™n ti·∫øng Anh | Vai tr√≤ |
|------------|---------------|---------|
| **N√∫t kh·ªüi ƒë·∫ßu** | Initial Node | ƒêi·ªÉm b·∫Øt ƒë·∫ßu quy tr√¨nh |
| **N√∫t h√†nh ƒë·ªông** | Action/Activity Node | C√°c b∆∞·ªõc th·ª±c hi·ªán c√¥ng vi·ªác |
| **Lu·ªìng ƒëi·ªÅu khi·ªÉn** | Control Flow | ƒê∆∞·ªùng n·ªëi ch·ªâ ƒë·ªãnh tr√¨nh t·ª± |
| **Lu·ªìng ƒë·ªëi t∆∞·ª£ng** | Object Flow | ƒê∆∞·ªùng n·ªëi ch·ªâ ƒë·ªãnh d√≤ng ch·∫£y d·ªØ li·ªáu |
| **N√∫t quy·∫øt ƒë·ªãnh** | Decision Node | R·∫Ω nh√°nh theo ƒëi·ªÅu ki·ªán (If/Else) |
| **N√∫t g·ªôp** | Merge Node | N∆°i c√°c lu·ªìng r·∫Ω nh√°nh g·∫∑p nhau |
| **N√∫t chia song song** | Fork Node | B·∫Øt ƒë·∫ßu x·ª≠ l√Ω ƒëa lu·ªìng |
| **N√∫t g·ªôp song song** | Join Node | K·∫øt th√∫c x·ª≠ l√Ω ƒëa lu·ªìng (ƒë·ªìng b·ªô) |
| **L√†n b∆°i** | Swimlanes (Partitions) | Ph√¢n chia tr√°ch nhi·ªám |
| **N√∫t k·∫øt th√∫c** | Activity Final Node | K·∫øt th√∫c to√†n b·ªô quy tr√¨nh |
| **N√∫t k·∫øt th√∫c lu·ªìng** | Flow Final Node | Ch·ªâ k·∫øt th√∫c m·ªôt nh√°nh (k√Ω hi·ªáu: ‚äó) |
| **Ghi ch√∫** | Note/Comment | Gi·∫£i th√≠ch th√™m |

### 5.2 Chi ti·∫øt c√°c n√∫t ƒë·∫∑c bi·ªát

**Decision Node vs Merge Node**:
```
Decision:  1 v√†o ‚Üí nhi·ªÅu ra (c√≥ ƒëi·ªÅu ki·ªán)
Merge:     nhi·ªÅu v√†o ‚Üí 1 ra (kh√¥ng c√≥ ƒëi·ªÅu ki·ªán)
```

**Fork Node vs Join Node**:
```
Fork:      1 v√†o ‚Üí nhi·ªÅu ra (song song)
Join:      nhi·ªÅu v√†o ‚Üí 1 ra (ƒë·ªìng b·ªô - ch·ªù t·∫•t c·∫£)
```

**Activity Final vs Flow Final**:
```
Activity Final (‚óè):  K·∫øt th√∫c TO√ÄN B·ªò quy tr√¨nh
Flow Final (‚äó):      Ch·ªâ k·∫øt th√∫c M·ªòT nh√°nh, nh√°nh kh√°c v·∫´n ch·∫°y
```

---

## Checklist

- [x] **L√Ω thuy·∫øt**: c√≥ kh√°i ni·ªám, m·ª•c ƒë√≠ch, so s√°nh v·ªõi Flowchart
- [x] **C·∫•u tr√∫c**: c√≥ c√∫ ph√°p/k√Ω hi·ªáu, c√°c th√†nh ph·∫ßn, Mermaid
- [x] **C√°ch x√¢y d·ª±ng**: c√≥ quy tr√¨nh 5 b∆∞·ªõc v√† best practices
- [x] **Ho·∫°t ƒë·ªông**: c√≥ c√°ch ƒë·ªçc t·ª´ng th√†nh ph·∫ßn, theo d√µi lu·ªìng
- [x] **Th√†nh ph·∫ßn**: c√≥ danh s√°ch ƒë·∫ßy ƒë·ªß c√°c th√†nh ph·∫ßn

---

*T√†i li·ªáu ƒë∆∞·ª£c t·ªïng h·ª£p t·ª´ NotebookLM v·ªõi ngu·ªìn "M√¥ h√¨nh h√≥a h√†nh vi" v√† "ƒê·ªì √°n t·ªët nghi·ªáp x√¢y d·ª±ng website"*

```

### diagram/sequence-diagram-research.md
```md
# Sequence Diagram - T√†i nguy√™n nghi√™n c·ª©u

> **Ngu·ªìn**: NotebookLM - https://notebooklm.google.com/notebook/46ddeb54-c391-43df-95f2-53c820428ada
> **Ng√†y t·∫°o**: 2026-02-02

---

## 1. L√Ω thuy·∫øt

### 1.1 Kh√°i ni·ªám
**Sequence Diagram (Bi·ªÉu ƒë·ªì tu·∫ßn t·ª±)** l√† m·ªôt lo·∫°i bi·ªÉu ƒë·ªì thu·ªôc nh√≥m M√¥ h√¨nh h√≥a h√†nh vi (Behavioral Modeling) trong UML.

- **ƒê·ªãnh nghƒ©a**: Bi·ªÉu ƒë·ªì d√πng ƒë·ªÉ x√°c ƒë·ªãnh c√°c tr√¨nh t·ª± di·ªÖn ra s·ª± ki·ªán c·ªßa m·ªôt nh√≥m ƒë·ªëi t∆∞·ª£ng. Mi√™u t·∫£ chi ti·∫øt c√°c th√¥ng ƒëi·ªáp (messages) ƒë∆∞·ª£c g·ª≠i v√† nh·∫≠n gi·ªØa c√°c ƒë·ªëi t∆∞·ª£ng, ƒë·ªìng th·ªùi ch√∫ tr·ªçng ƒë·∫øn **tr√¨nh t·ª± v·ªÅ m·∫∑t th·ªùi gian**.
- **B·∫£n ch·∫•t**: Di·ªÖn gi·∫£i chi ti·∫øt c√°ch th·ª©c m·ªôt ch·ª©c nƒÉng ho·∫°t ƒë·ªông th√¥ng qua s·ª± t∆∞∆°ng t√°c gi·ªØa c√°c ƒë·ªëi t∆∞·ª£ng theo th·ªùi gian.

### 1.2 M·ª•c ƒë√≠ch s·ª≠ d·ª•ng
- X√°c ƒë·ªãnh r√µ **th·ª© t·ª± c√°c b∆∞·ªõc** th·ª±c hi·ªán c·ªßa m·ªôt ch·ª©c nƒÉng
- M√¥ t·∫£ **lu·ªìng th√¥ng tin** v√† c√°c th√¥ng ƒëi·ªáp trao ƒë·ªïi gi·ªØa Actor v√† h·ªá th·ªëng
- **Chi ti·∫øt h√≥a logic** t·ª´ y√™u c·∫ßu ch·ª©c nƒÉng, l√†m c∆° s·ªü ƒë·ªÉ l·∫≠p tr√¨nh vi√™n vi·∫øt m√£

### 1.3 Khi n√†o d√πng?
- Sau khi ƒë√£ x√°c ƒë·ªãnh ƒë∆∞·ª£c c√°c Use Case
- Khi c·∫ßn ƒëi s√¢u v√†o chi ti·∫øt k·ªπ thu·∫≠t c·ªßa t·ª´ng ch·ª©c nƒÉng
- C√°c tr∆∞·ªùng h·ª£p c·ª• th·ªÉ:
  - M√¥ t·∫£ lu·ªìng x·ª≠ l√Ω c·ªßa ch·ª©c nƒÉng ƒêƒÉng nh·∫≠p
  - M√¥ t·∫£ c√°c ch·ª©c nƒÉng qu·∫£n l√Ω (CRUD)
  - M√¥ t·∫£ c√°c lu·ªìng t∆∞∆°ng t√°c ph√≠a ng∆∞·ªùi d√πng cu·ªëi

### 1.4 M·ªëi quan h·ªá v·ªõi Use Case Diagram

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    USE CASE DIAGRAM                             ‚îÇ
‚îÇ                  (Ai l√†m g√¨ - T·ªïng qu√°t)                       ‚îÇ
‚îÇ                          ‚Üì                                      ‚îÇ
‚îÇ              √Ånh x·∫° 1-1 ho·∫∑c 1-n                               ‚îÇ
‚îÇ                          ‚Üì                                      ‚îÇ
‚îÇ                 SEQUENCE DIAGRAM                                ‚îÇ
‚îÇ              (L√†m nh∆∞ th·∫ø n√†o - Chi ti·∫øt)                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**So s√°nh**:
- **Use Case**: Cho bi·∫øt "Ai l√†m g√¨" (T√°c nh√¢n t∆∞∆°ng t√°c v·ªõi h·ªá th·ªëng)
- **Sequence**: Gi·∫£i th√≠ch "L√†m nh∆∞ th·∫ø n√†o" (Tr√¨nh t·ª± th√¥ng ƒëi·ªáp gi·ªØa c√°c ƒë·ªëi t∆∞·ª£ng)

---

## 2. C·∫•u tr√∫c

### 2.1 C√°c th√†nh ph·∫ßn c∆° b·∫£n

```
   Actor      Object1       Object2       Object3
     ‚îÇ           ‚îÇ             ‚îÇ             ‚îÇ
     ‚îÇ           ‚îÇ             ‚îÇ             ‚îÇ
     ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ             ‚îÇ             ‚îÇ  Synchronous Message
     ‚îÇ           ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ            ‚îÇ
     ‚îÇ           ‚îÇ             ‚îå‚î¥‚îê           ‚îÇ  Activation Box
     ‚îÇ           ‚îÇ             ‚îÇ ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ
     ‚îÇ           ‚îÇ             ‚îÇ ‚îÇ           ‚îå‚î¥‚îê
     ‚îÇ           ‚îÇ             ‚îÇ ‚îÇ<‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îò‚îÇ‚îò Return Message
     ‚îÇ           ‚îÇ<‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îò             ‚îÇ
     ‚îÇ<‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÇ             ‚îÇ             ‚îÇ
     ‚îÇ           ‚îÇ             ‚îÇ             ‚îÇ
     ‚ñº           ‚ñº             ‚ñº             ‚ñº
                    Th·ªùi gian (t·ª´ tr√™n xu·ªëng d∆∞·ªõi)
```

### 2.2 K√Ω hi·ªáu c√°c th√†nh ph·∫ßn

| Th√†nh ph·∫ßn | K√Ω hi·ªáu | M√¥ t·∫£ |
|------------|---------|-------|
| **Actor** | H√¨nh ng∆∞·ªùi que | Ng∆∞·ªùi d√πng ho·∫∑c h·ªá th·ªëng b√™n ngo√†i |
| **Lifeline** | H√¨nh ch·ªØ nh·∫≠t + ƒë∆∞·ªùng ƒë·ª©t n√©t d·ªçc | S·ª± t·ªìn t·∫°i c·ªßa ƒë·ªëi t∆∞·ª£ng theo th·ªùi gian |
| **Activation Box** | H√¨nh ch·ªØ nh·∫≠t h·∫πp tr√™n Lifeline | Th·ªùi gian ƒë·ªëi t∆∞·ª£ng ƒëang x·ª≠ l√Ω |
| **Synchronous Message** | M≈©i t√™n ƒë·∫∑c (‚îÄ‚ñ∂) | G·ªçi h√†m, ch·ªù x·ª≠ l√Ω xong |
| **Asynchronous Message** | M≈©i t√™n m·ªü (‚îÄ>) | G·ª≠i r·ªìi ti·∫øp t·ª•c, kh√¥ng ch·ªù |
| **Return Message** | M≈©i t√™n n√©t ƒë·ª©t (- - >) | Tr·∫£ v·ªÅ k·∫øt qu·∫£ |
| **Self Message** | M≈©i t√™n quay l·∫°i ch√≠nh m√¨nh | ƒê·ªëi t∆∞·ª£ng g·ªçi ch√≠nh n√≥ |

### 2.3 C√°c lo·∫°i Message

| Lo·∫°i | K√Ω hi·ªáu UML | √ù nghƒ©a | Mermaid |
|------|-------------|---------|---------|
| **Synchronous** | M≈©i t√™n ƒë·∫∑c (‚ñ∂) | G·ªçi v√† ch·ªù x·ª≠ l√Ω xong | `A->>B: message` |
| **Asynchronous** | M≈©i t√™n m·ªü (>) | G·ª≠i r·ªìi ti·∫øp t·ª•c | `A-)B: message` |
| **Return** | N√©t ƒë·ª©t, m≈©i t√™n m·ªü | Tr·∫£ k·∫øt qu·∫£ v·ªÅ | `B-->>A: result` |
| **Self** | Quay l·∫°i ch√≠nh m√¨nh | T·ª± g·ªçi | `A->>A: process` |

### 2.4 Combined Fragments

| Fragment | T·ª´ kh√≥a | √ù nghƒ©a | Mermaid |
|----------|---------|---------|---------|
| **Alternative** | `alt` | If/Else - r·∫Ω nh√°nh | `alt [cond] ... else ... end` |
| **Option** | `opt` | If - t√πy ch·ªçn | `opt [cond] ... end` |
| **Loop** | `loop` | V√≤ng l·∫∑p | `loop [cond] ... end` |
| **Break** | `break` | Ng·∫Øt lu·ªìng | `break [cond] ... end` |
| **Parallel** | `par` | X·ª≠ l√Ω song song | `par ... and ... end` |

### 2.5 C√∫ ph√°p Mermaid

```mermaid
sequenceDiagram
    autonumber
    %% ƒê·ªãnh nghƒ©a Actor v√† Object
    actor User as Ng∆∞·ªùi d√πng
    participant UI as Giao di·ªán (Form)
    participant DB as C∆° s·ªü d·ªØ li·ªáu

    %% Lu·ªìng ch√≠nh
    User->>+UI: 1. Nh·∫≠p Username/Pass
    UI->>+DB: 2. G·ª≠i y√™u c·∫ßu x√°c th·ª±c()

    %% Combined Fragment: Alternative (alt)
    alt Th√¥ng tin h·ª£p l·ªá
        DB-->>UI: 3. Tr·∫£ v·ªÅ: H·ª£p l·ªá
        UI-->>-User: 4. Chuy·ªÉn ƒë·∫øn Trang ch·ªß
    else Th√¥ng tin sai
        DB-->>-UI: 3. Tr·∫£ v·ªÅ: L·ªói

        %% Combined Fragment: Option (opt)
        opt Ng∆∞·ªùi d√πng mu·ªën th·ª≠ l·∫°i
            UI->>UI: Hi·ªÉn th·ªã th√¥ng b√°o l·ªói
            UI-->>User: Y√™u c·∫ßu nh·∫≠p l·∫°i
        end
    end

    %% V√≤ng l·∫∑p (loop)
    loop Ki·ªÉm tra phi√™n ƒëƒÉng nh·∫≠p
        UI->>DB: Ping tr·∫°ng th√°i()
    end
```

**K√Ω hi·ªáu Mermaid**:
- `->>+` : Synchronous Message + Activate
- `-->>-` : Return Message + Deactivate
- `actor` : Khai b√°o Actor
- `participant` : Khai b√°o Object

---

## 3. C√°ch th·ª©c x√¢y d·ª±ng

### 3.1 Quy tr√¨nh 5 b∆∞·ªõc

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  B∆Ø·ªöC 1: X√°c ƒë·ªãnh ph·∫°m vi v√† k·ªãch b·∫£n Use Case                 ‚îÇ
‚îÇ  ‚Üì                                                              ‚îÇ
‚îÇ  B∆Ø·ªöC 2: X√°c ƒë·ªãnh c√°c ƒë·ªëi t∆∞·ª£ng tham gia (Lifelines)           ‚îÇ
‚îÇ  ‚Üì                                                              ‚îÇ
‚îÇ  B∆Ø·ªöC 3: X√°c ƒë·ªãnh th√¥ng ƒëi·ªáp v√† th·ª© t·ª±                         ‚îÇ
‚îÇ  ‚Üì                                                              ‚îÇ
‚îÇ  B∆Ø·ªöC 4: S·ª≠ d·ª•ng Combined Fragments (alt, loop, opt)           ‚îÇ
‚îÇ  ‚Üì                                                              ‚îÇ
‚îÇ  B∆Ø·ªöC 5: Ho√†n thi·ªán v√† tinh ch·ªânh                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 3.2 Chi ti·∫øt t·ª´ng b∆∞·ªõc

**B∆∞·ªõc 1: X√°c ƒë·ªãnh ph·∫°m vi t·ª´ Use Case**
- Ch·ªçn m·ªôt Use Case c·ª• th·ªÉ (VD: "ƒêƒÉng nh·∫≠p", "Qu·∫£n l√Ω b√†i vi·∫øt")
- Tham chi·∫øu B·∫£ng k·ªãch b·∫£n: T√°c nh√¢n, Ti·ªÅn ƒëi·ªÅu ki·ªán, Chu·ªói s·ª± ki·ªán, Ngo·∫°i l·ªá

**B∆∞·ªõc 2: X√°c ƒë·ªãnh Lifelines (theo MVC)**
- **Actor**: Ng∆∞·ªùi d√πng, Admin
- **Boundary (View)**: Giao di·ªán, Form
- **Control (Controller)**: X·ª≠ l√Ω logic
- **Entity (Model/Database)**: L∆∞u tr·ªØ d·ªØ li·ªáu

**B∆∞·ªõc 3: X√°c ƒë·ªãnh th√¥ng ƒëi·ªáp**
- Chuy·ªÉn ƒë·ªïi "Chu·ªói s·ª± ki·ªán" th√†nh m≈©i t√™n
- Th·ª© t·ª±: Tr√™n ‚Üí D∆∞·ªõi (theo th·ªùi gian)
- Lu·ªìng: Actor ‚Üí View ‚Üí Controller ‚Üí Database ‚Üí tr·∫£ v·ªÅ

**B∆∞·ªõc 4: S·ª≠ d·ª•ng Combined Fragments**
- `alt`: R·∫Ω nh√°nh (ƒëƒÉng nh·∫≠p ƒë√∫ng/sai)
- `opt`: T√πy ch·ªçn (x√°c nh·∫≠n x√≥a)
- `loop`: L·∫∑p (hi·ªÉn th·ªã danh s√°ch)

**B∆∞·ªõc 5: Ho√†n thi·ªán**
- Th√™m Return messages
- Ki·ªÉm tra ƒë·ªìng b·ªô v·ªõi Class Diagram

### 3.3 Best Practices

| N√™n l√†m | Kh√¥ng n√™n l√†m |
|---------|---------------|
| B√°m s√°t ki·∫øn tr√∫c MVC | ƒê·ªÉ View g·ªçi tr·ª±c ti·∫øp Database |
| ƒê·∫∑t t√™n h√†m th·ª±c t·∫ø (checkLogin(), getAllPosts()) | ƒê·∫∑t t√™n m√¥ t·∫£ chung chung |
| V·∫Ω lu·ªìng logic ch√≠nh | V·∫Ω qu√° chi ti·∫øt getter/setter |
| S·ª≠ d·ª•ng AI/Mermaid | V·∫Ω th·ªß c√¥ng l√£ng ph√≠ th·ªùi gian |
| Ki·ªÉm tra kh·ªõp v·ªõi Use Case Specification | Kh√¥ng ƒë·ªìng b·ªô t√†i li·ªáu |

---

## 4. Ho·∫°t ƒë·ªông

### 4.1 Nguy√™n t·∫Øc ƒë·ªçc

**Hai chi·ªÅu kh√¥ng gian**:
- **Chi·ªÅu d·ªçc (Th·ªùi gian)**: T·ª´ tr√™n xu·ªëng d∆∞·ªõi - s·ª± ki·ªán tr√™n x·∫£y ra tr∆∞·ªõc
- **Chi·ªÅu ngang (ƒê·ªëi t∆∞·ª£ng)**: C√°c ƒë·ªëi t∆∞·ª£ng x·∫øp theo h√†ng ngang ·ªü ƒë·∫ßu

### 4.2 C√°ch ƒë·ªçc t·ª´ng th√†nh ph·∫ßn

| Nh√¨n th·∫•y | ƒê·ªçc l√† |
|-----------|--------|
| ƒê∆∞·ªùng ƒë·ª©t n√©t d·ªçc (Lifeline) | "ƒê·ªëi t∆∞·ª£ng n√†y t·ªìn t·∫°i trong su·ªët quy tr√¨nh" |
| H√¨nh ch·ªØ nh·∫≠t h·∫πp (Activation Box) | "ƒê·ªëi t∆∞·ª£ng ƒëang b·∫≠n x·ª≠ l√Ω" |
| M≈©i t√™n ƒë·∫∑c (‚Üí‚ñ∂) | "A g·ªçi B v√† ch·ªù xong m·ªõi ti·∫øp t·ª•c" |
| M≈©i t√™n m·ªü (‚Üí>) | "A g·ª≠i B r·ªìi l√†m vi·ªác kh√°c ngay" |
| M≈©i t√™n n√©t ƒë·ª©t (- - >) | "B tr·∫£ k·∫øt qu·∫£ v·ªÅ A" |
| Khung `alt` | "N·∫æU... TH√å... NG∆Ø·ª¢C L·∫†I..." (If/Else) |
| Khung `opt` | "N·∫æU... TH√å..." (If, kh√¥ng c√≥ Else) |
| Khung `loop` | "L·∫∂P L·∫†I" (For/While) |
| Khung `break` | "NG·∫ÆT/THO√ÅT" (Exception) |

### 4.3 C√°ch theo d√µi lu·ªìng

1. **B·∫Øt ƒë·∫ßu t·ª´ g√≥c tr√°i tr√™n**: Actor g·ª≠i th√¥ng ƒëi·ªáp ƒë·∫ßu ti√™n
2. **L·∫ßn theo m≈©i t√™n**: Xem tr·ªè ƒë·∫øn ƒë·ªëi t∆∞·ª£ng n√†o
3. **Nh√¨n xu·ªëng d∆∞·ªõi**: Di chuy·ªÉn d·ªçc theo Lifeline
4. **X·ª≠ l√Ω logic**: G·∫∑p khung `alt/opt` ‚Üí x√°c ƒë·ªãnh nh√°nh
5. **K·∫øt th√∫c**: Kh√¥ng c√≤n th√¥ng ƒëi·ªáp ho·∫∑c Return cu·ªëi c√πng

---

## 5. Th√†nh ph·∫ßn c·∫•u th√†nh

### 5.1 Danh s√°ch ƒë·∫ßy ƒë·ªß

| Th√†nh ph·∫ßn | T√™n ti·∫øng Anh | Vai tr√≤ |
|------------|---------------|---------|
| **T√°c nh√¢n** | Actor | Ng∆∞·ªùi d√πng ho·∫∑c h·ªá th·ªëng b√™n ngo√†i |
| **ƒê∆∞·ªùng s·ªëng** | Lifeline | ƒê·∫°i di·ªán v√≤ng ƒë·ªùi c·ªßa ƒë·ªëi t∆∞·ª£ng |
| **ƒê·ªëi t∆∞·ª£ng** | Object/Participant | C√°c th√†nh ph·∫ßn h·ªá th·ªëng (View, Controller, DB) |
| **Thanh k√≠ch ho·∫°t** | Activation Bar | Th·ªùi gian ƒë·ªëi t∆∞·ª£ng th·ª±c thi |
| **Th√¥ng ƒëi·ªáp ƒë·ªìng b·ªô** | Synchronous Message | G·ªçi v√† ch·ªù x·ª≠ l√Ω |
| **Th√¥ng ƒëi·ªáp b·∫•t ƒë·ªìng b·ªô** | Asynchronous Message | G·ª≠i kh√¥ng c·∫ßn ch·ªù |
| **Th√¥ng ƒëi·ªáp tr·∫£ v·ªÅ** | Return Message | Ph·∫£n h·ªìi k·∫øt qu·∫£ |
| **T·ª± g·ªçi** | Self-Message | ƒê·ªëi t∆∞·ª£ng g·ªçi ch√≠nh m√¨nh |
| **Khung ƒëi·ªÅu khi·ªÉn** | Combined Fragments | alt, opt, loop, break, par |
| **ƒêi·ªÅu ki·ªán b·∫£o v·ªá** | Guard Condition | ƒêi·ªÅu ki·ªán trong [ ] |

### 5.2 Chi ti·∫øt Combined Fragments

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  alt [ƒêi·ªÅu ki·ªán 1]         ‚îÇ  If - Else                      ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                   ‚îÇ
‚îÇ  ... h√†nh ƒë·ªông n·∫øu ƒë√∫ng ...                                  ‚îÇ
‚îÇ  ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ (ƒë∆∞·ªùng chia ƒë√¥i)              ‚îÇ
‚îÇ  else [ƒêi·ªÅu ki·ªán 2]                                          ‚îÇ
‚îÇ  ... h√†nh ƒë·ªông n·∫øu sai ...                                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  opt [ƒêi·ªÅu ki·ªán]           ‚îÇ  If (kh√¥ng c√≥ Else)             ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                   ‚îÇ
‚îÇ  ... h√†nh ƒë·ªông n·∫øu ƒë√∫ng ...                                  ‚îÇ
‚îÇ  (b·ªè qua n·∫øu sai)                                            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  loop [ƒêi·ªÅu ki·ªán l·∫∑p]      ‚îÇ  For / While                    ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                   ‚îÇ
‚îÇ  ... l·∫∑p l·∫°i h√†nh ƒë·ªông ...                                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  par                       ‚îÇ  Parallel (song song)           ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                   ‚îÇ
‚îÇ  ... h√†nh ƒë·ªông 1 ...                                         ‚îÇ
‚îÇ  ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ ‚îÄ                                  ‚îÇ
‚îÇ  and                                                         ‚îÇ
‚îÇ  ... h√†nh ƒë·ªông 2 (c√πng l√∫c) ...                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## Checklist

- [x] **L√Ω thuy·∫øt**: c√≥ kh√°i ni·ªám, m·ª•c ƒë√≠ch, m·ªëi quan h·ªá v·ªõi Use Case
- [x] **C·∫•u tr√∫c**: c√≥ c√∫ ph√°p/k√Ω hi·ªáu, c√°c lo·∫°i Message, Mermaid
- [x] **C√°ch x√¢y d·ª±ng**: c√≥ quy tr√¨nh 5 b∆∞·ªõc v√† best practices
- [x] **Ho·∫°t ƒë·ªông**: c√≥ c√°ch ƒë·ªçc t·ª´ng th√†nh ph·∫ßn, theo d√µi lu·ªìng
- [x] **Th√†nh ph·∫ßn**: c√≥ danh s√°ch ƒë·∫ßy ƒë·ªß + chi ti·∫øt Combined Fragments

---

*T√†i li·ªáu ƒë∆∞·ª£c t·ªïng h·ª£p t·ª´ NotebookLM v·ªõi ngu·ªìn "Lu·∫≠n VƒÉn X√¢y D·ª±ng Website Khoa CNTT" v√† "M√¥ h√¨nh h√≥a h√†nh vi"*

```

### diagram/use-case-diagram-research.md
```md
# Use Case Diagram - T√†i nguy√™n nghi√™n c·ª©u

> **Ngu·ªìn**: NotebookLM - https://notebooklm.google.com/notebook/46ddeb54-c391-43df-95f2-53c820428ada
> **Ng√†y t·∫°o**: 2026-02-02

---

## 1. L√Ω thuy·∫øt

### 1.1 Kh√°i ni·ªám
**Use Case Diagram (Bi·ªÉu ƒë·ªì ca s·ª≠ d·ª•ng)** l√† m·ªôt lo·∫°i bi·ªÉu ƒë·ªì thu·ªôc nh√≥m M√¥ h√¨nh h√≥a h√†nh vi (Behavioral Modeling) trong UML.

- **ƒê·ªãnh nghƒ©a**: Bi·ªÉu ƒë·ªì m√¥ t·∫£ s·ª± t∆∞∆°ng t√°c gi·ªØa c√°c t√°c nh√¢n b√™n ngo√†i (actors) v√† h·ªá th·ªëng th√¥ng qua c√°c ca s·ª≠ d·ª•ng (use cases).
- **B·∫£n ch·∫•t**: Th·ªÉ hi·ªán c√°c ch·ª©c nƒÉng, nhi·ªám v·ª• c·ªßa h·ªá th·ªëng d∆∞·ªõi g√≥c ƒë·ªô c·ªßa ng∆∞·ªùi s·ª≠ d·ª•ng.

### 1.2 M·ª•c ƒë√≠ch s·ª≠ d·ª•ng
- **Th·ªÉ hi·ªán y√™u c·∫ßu h·ªá th·ªëng**: M√¥ t·∫£ m·ªçi y√™u c·∫ßu ch·ª©c nƒÉng c·ªßa h·ªá th·ªëng
- **M√¥ t·∫£ t∆∞∆°ng t√°c**: X√°c ƒë·ªãnh ai (t√°c nh√¢n) s·∫Ω th·ª±c hi·ªán h√†nh ƒë·ªông g√¨ v·ªõi h·ªá th·ªëng
- **ƒê·ªãnh h√¨nh ch·ª©c nƒÉng**: X√°c ƒë·ªãnh danh s√°ch t√≠nh nƒÉng (ƒêƒÉng nh·∫≠p, Qu·∫£n l√Ω ng∆∞·ªùi d√πng, Qu·∫£n l√Ω b√†i vi·∫øt...)
- **Cung c·∫•p Use Case View**: M·ªôt trong 5 g√≥c nh√¨n quan tr·ªçng trong ki·∫øn tr√∫c UML

### 1.3 Khi n√†o d√πng?

| Giai ƒëo·∫°n | M√¥ t·∫£ |
|-----------|-------|
| **Sau kh·∫£o s√°t** | Sau khi t√¨m hi·ªÉu User Personas, d√πng Use Case ƒë·ªÉ c·ª• th·ªÉ h√≥a y√™u c·∫ßu |
| **Tr∆∞·ªõc thi·∫øt k·∫ø chi ti·∫øt** | X√°c ƒë·ªãnh ph·∫°m vi ch·ª©c nƒÉng tr∆∞·ªõc khi v·∫Ω Class Diagram, Sequence Diagram |
| **Giai ƒëo·∫°n Ph√¢n t√≠ch & Thi·∫øt k·∫ø** | L√† tr·ªçng t√¢m c·ªßa Analysis & Design phase |

### 1.4 Vai tr√≤ trong quy tr√¨nh ph√°t tri·ªÉn

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    USE CASE DIAGRAM                            ‚îÇ
‚îÇ                         ‚Üì                                      ‚îÇ
‚îÇ     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ
‚îÇ     ‚îÇ Ph√¢n r√£ ch·ª©c nƒÉng th√†nh modules         ‚îÇ               ‚îÇ
‚îÇ     ‚îÇ (Qu·∫£n l√Ω Slide, Qu·∫£n l√Ω Ng∆∞·ªùi d√πng...)  ‚îÇ               ‚îÇ
‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ
‚îÇ                         ‚Üì                                      ‚îÇ
‚îÇ     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ
‚îÇ     ‚îÇ X√¢y d·ª±ng k·ªãch b·∫£n ki·ªÉm th·ª≠ (Test Cases) ‚îÇ               ‚îÇ
‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ
‚îÇ                         ‚Üì                                      ‚îÇ
‚îÇ     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ
‚îÇ     ‚îÇ Giao ti·∫øp gi·ªØa BA - Dev - Kh√°ch h√†ng    ‚îÇ               ‚îÇ
‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**C∆° s·ªü cho c√°c bi·ªÉu ƒë·ªì kh√°c**:
- **Sequence Diagram**: M√¥ t·∫£ tr√¨nh t·ª± th·ª±c hi·ªán c·ªßa m·ªôt Use Case c·ª• th·ªÉ
- **Class Diagram**: Thi·∫øt k·∫ø c√°c l·ªõp c·∫ßn thi·∫øt ƒë·ªÉ th·ª±c thi Use Case
- **Collaboration Diagram**: Bi·ªÉu di·ªÖn k·ªãch b·∫£n khai th√°c c·ªßa Use Case

---

## 2. C·∫•u tr√∫c

### 2.1 C√°c th√†nh ph·∫ßn c∆° b·∫£n

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     H·ªÜ TH·ªêNG ATM                            ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ                                                      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ        ‚ï≠‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïÆ      ‚ï≠‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïÆ       ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ        ‚îÇ  R√∫t ti·ªÅn    ‚îÇ      ‚îÇ Ki·ªÉm tra    ‚îÇ       ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ        ‚îÇ              ‚îÇ      ‚îÇ s·ªë d∆∞       ‚îÇ       ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ        ‚ï∞‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïØ      ‚ï∞‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïØ       ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ               ‚îÇ                                      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ               ‚îÇ <<include>>                          ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ               ‚ñº                                      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ        ‚ï≠‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïÆ                              ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ        ‚îÇ X√°c th·ª±c PIN ‚îÇ                              ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ        ‚ï∞‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïØ                              ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                                                      ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                     System Boundary                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚îå‚îÄ‚îê
     ‚îÇO‚îÇ    ‚Üê Actor (h√¨nh ng∆∞·ªùi que)
    /‚îÇ\
    / \
  Kh√°ch h√†ng
```

### 2.2 K√Ω hi·ªáu c√°c th√†nh ph·∫ßn

| Th√†nh ph·∫ßn | K√Ω hi·ªáu | M√¥ t·∫£ |
|------------|---------|-------|
| **Actor** | H√¨nh ng∆∞·ªùi que | Ng∆∞·ªùi d√πng ho·∫∑c h·ªá th·ªëng b√™n ngo√†i |
| **Use Case** | H√¨nh b·∫ßu d·ª•c (ellipse) | Ch·ª©c nƒÉng c·ª• th·ªÉ c·ªßa h·ªá th·ªëng |
| **System Boundary** | H√¨nh ch·ªØ nh·∫≠t | Ph·∫°m vi c·ªßa h·ªá th·ªëng |
| **Association** | ƒê∆∞·ªùng li·ªÅn n√©t | T∆∞∆°ng t√°c Actor - Use Case |
| **Include** | ƒê∆∞·ªùng n√©t ƒë·ª©t + `<<include>>` | B·∫Øt bu·ªôc ph·∫£i th·ª±c hi·ªán |
| **Extend** | ƒê∆∞·ªùng n√©t ƒë·ª©t + `<<extend>>` | T√πy ch·ªçn, c√≥ ƒëi·ªÅu ki·ªán |
| **Generalization** | ƒê∆∞·ªùng li·ªÅn + m≈©i t√™n tam gi√°c r·ªóng | K·∫ø th·ª´a |

### 2.3 C√°c lo·∫°i quan h·ªá chi ti·∫øt

**Association (Li√™n k·∫øt)**:
```
  Actor ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Use Case
```
- Th·ªÉ hi·ªán Actor tham gia v√†o Use Case

**Include (Bao g·ªìm)**:
```
  Base UC - - - - - -> Included UC
             <<include>>
```
- Use Case A **b·∫Øt bu·ªôc** ph·∫£i th·ª±c hi·ªán Use Case B
- V√≠ d·ª•: "R√∫t ti·ªÅn" include "X√°c th·ª±c th·∫ª"

**Extend (M·ªü r·ªông)**:
```
  Extension UC - - - - - -> Base UC
               <<extend>>
```
- Use Case A **c√≥ th·ªÉ** ƒë∆∞·ª£c th·ª±c hi·ªán khi c√≥ ƒëi·ªÅu ki·ªán
- V√≠ d·ª•: "In h√≥a ƒë∆°n" extend "R√∫t ti·ªÅn"

**Generalization (K·∫ø th·ª´a)**:
```
  Actor con ‚óÅ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Actor cha
```
- Actor con k·∫ø th·ª´a quy·ªÅn h·∫°n c·ªßa Actor cha

### 2.4 C√∫ ph√°p Mermaid

```mermaid
graph TD
    subgraph "H·ªá th·ªëng ATM"
        UC1[R√∫t ti·ªÅn]
        UC2[Ki·ªÉm tra s·ªë d∆∞]
        UC3[X√°c th·ª±c PIN]
        UC4[In h√≥a ƒë∆°n]
    end

    User((Kh√°ch h√†ng)) --> UC1
    User --> UC2
    UC1 -.->|<<include>>| UC3
    UC4 -.->|<<extend>>| UC1
    BankSys((H·ªá th·ªëng NH)) --> UC1
```

**Ho·∫∑c d√πng useCaseDiagram**:
```mermaid
useCaseDiagram
    actor "Kh√°ch h√†ng" as User
    actor "H·ªá th·ªëng Ng√¢n h√†ng" as BankSys

    package "H·ªá th·ªëng ATM" {
        usecase "R√∫t ti·ªÅn" as UC1
        usecase "Ki·ªÉm tra s·ªë d∆∞" as UC2
        usecase "X√°c th·ª±c PIN" as UC3
        usecase "In h√≥a ƒë∆°n" as UC4
    }

    User --> UC1
    User --> UC2
    UC1 ..> UC3 : <<include>>
    UC4 ..> UC1 : <<extend>>
    UC1 --> BankSys
```

---

## 3. C√°ch th·ª©c x√¢y d·ª±ng

### 3.1 Quy tr√¨nh 5 b∆∞·ªõc

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  B∆Ø·ªöC 1: X√°c ƒë·ªãnh c√°c T√°c nh√¢n (Identify Actors)               ‚îÇ
‚îÇ  ‚Üì                                                              ‚îÇ
‚îÇ  B∆Ø·ªöC 2: X√°c ƒë·ªãnh c√°c Ca s·ª≠ d·ª•ng (Identify Use Cases)          ‚îÇ
‚îÇ  ‚Üì                                                              ‚îÇ
‚îÇ  B∆Ø·ªöC 3: X√°c ƒë·ªãnh c√°c Quan h·ªá (Identify Relationships)         ‚îÇ
‚îÇ  ‚Üì                                                              ‚îÇ
‚îÇ  B∆Ø·ªöC 4: V·∫Ω bi√™n h·ªá th·ªëng (System Boundary)                    ‚îÇ
‚îÇ  ‚Üì                                                              ‚îÇ
‚îÇ  B∆Ø·ªöC 5: Ki·ªÉm tra v√† tinh ch·ªânh (Review and Refine)            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 3.2 Chi ti·∫øt t·ª´ng b∆∞·ªõc

**B∆∞·ªõc 1: X√°c ƒë·ªãnh Actors**
- Tr·∫£ l·ªùi: Ai s·ª≠ d·ª•ng h·ªá th·ªëng? H·ªá th·ªëng n√†o t∆∞∆°ng t√°c? Ai cung c·∫•p/nh·∫≠n d·ªØ li·ªáu?
- Actor l√† **vai tr√≤ (role)**, kh√¥ng ph·∫£i c√° nh√¢n c·ª• th·ªÉ
- V√≠ d·ª•: "Gi·∫£ng vi√™n" thay v√¨ "Th·∫ßy Tu·∫•n"

**B∆∞·ªõc 2: X√°c ƒë·ªãnh Use Cases**
- D·ª±a v√†o b·∫£ng y√™u c·∫ßu ch·ª©c nƒÉng ho·∫∑c s∆° ƒë·ªì ph√¢n r√£
- T√¨m c·ª•m **ƒê·ªông t·ª´ + Danh t·ª´**
- V√≠ d·ª•: "ƒêƒÉng nh·∫≠p", "Th√™m chuy√™n m·ª•c", "S·ª≠a gi·∫£ng vi√™n", "X√≥a slide"

**B∆∞·ªõc 3: X√°c ƒë·ªãnh Quan h·ªá**
- **Association**: N·ªëi Actor v·ªõi Use Case h·ªç th·ª±c hi·ªán
- **Include**: Khi ti·ªÅn ƒëi·ªÅu ki·ªán y√™u c·∫ßu (VD: "ƒë√£ ƒëƒÉng nh·∫≠p")
- **Extend**: Khi h√†nh ƒë·ªông l√† t√πy ch·ªçn c√≥ ƒëi·ªÅu ki·ªán
- **Generalization**: Khi Actor con k·∫ø th·ª´a Actor cha

**B∆∞·ªõc 4: V·∫Ω System Boundary**
- H√¨nh ch·ªØ nh·∫≠t bao quanh Use Cases
- Use Cases n·∫±m trong, Actors n·∫±m ngo√†i

**B∆∞·ªõc 5: Ki·ªÉm tra**
- M·ªói Use Case ph·∫£i mang l·∫°i gi√° tr·ªã cho Actor
- Ki·ªÉm tra k·ªãch b·∫£n Main flow v√† Exception

### 3.3 Best Practices

| N√™n l√†m | Kh√¥ng n√™n l√†m |
|---------|---------------|
| ƒê·∫∑t t√™n: **ƒê·ªông t·ª´ + Danh t·ª´** | ƒê·∫∑t t√™n ch·ªâ c√≥ danh t·ª´ |
| Gom c√°c b∆∞·ªõc nh·ªè th√†nh UC l·ªõn | V·∫Ω "Nh·∫≠p username", "Nh·∫≠p password" ri√™ng |
| K√®m b·∫£ng ƒë·∫∑c t·∫£ Use Case | Ch·ªâ c√≥ h√¨nh v·∫Ω kh√¥ng c√≥ m√¥ t·∫£ |
| Ph√¢n r√£ UC qu√° l·ªõn | ƒê·ªÉ UC "Qu·∫£n l√Ω h·ªá th·ªëng" qu√° chung |
| Ph√¢n bi·ªát Include vs Extend | Nh·∫ßm l·∫´n b·∫Øt bu·ªôc vs t√πy ch·ªçn |

---

## 4. Ho·∫°t ƒë·ªông

### 4.1 C√°ch ƒë·ªçc bi·ªÉu ƒë·ªì

Tr·∫£ l·ªùi c√¢u h·ªèi: **"Ai (Actor) ƒëang l√†m g√¨ (Use Case) v·ªõi h·ªá th·ªëng?"**

**ƒê·ªçc Actor**:
- H√¨nh ng∆∞·ªùi que n·∫±m **ngo√†i** System Boundary
- X√°c ƒë·ªãnh vai tr√≤: Admin, User, H·ªá th·ªëng b√™n ngo√†i...
- M·ªôt Actor c√≥ th·ªÉ n·ªëi v·ªõi nhi·ªÅu Use Cases

**ƒê·ªçc Use Case**:
- H√¨nh b·∫ßu d·ª•c n·∫±m **trong** System Boundary
- T√™n l√† ƒê·ªông t·ª´ + Danh t·ª´
- ƒê·∫°i di·ªán cho m·ªôt ch·ª©c nƒÉng ho√†n ch·ªânh

**ƒê·ªçc c√°c quan h·ªá**:

| Nh√¨n th·∫•y | Hi·ªÉu l√† |
|-----------|---------|
| ƒê∆∞·ªùng li·ªÅn n√©t Actor ‚Üí UC | Actor tham gia v√†o ch·ª©c nƒÉng n√†y |
| `<<include>>` A ‚Üí B | ƒê·ªÉ l√†m A, **b·∫Øt bu·ªôc** ph·∫£i ch·∫°y B |
| `<<extend>>` B ‚Üí A | Khi l√†m A, **c√≥ th·ªÉ** l√†m th√™m B (t√πy ch·ªçn) |
| M≈©i t√™n tam gi√°c Actor con ‚Üí Actor cha | Actor con k·∫ø th·ª´a m·ªçi quy·ªÅn c·ªßa cha |

**ƒê·ªçc System Boundary**:
- Trong h√¨nh ch·ªØ nh·∫≠t = ph·∫°m vi ph·∫ßn m·ªÅm
- Ngo√†i h√¨nh ch·ªØ nh·∫≠t = m√¥i tr∆∞·ªùng b√™n ngo√†i

### 4.2 V√≠ d·ª• ƒë·ªçc bi·ªÉu ƒë·ªì

```
Admin ‚îÄ‚îÄ‚îÄ‚îÄ [Qu·∫£n l√Ω ng∆∞·ªùi d√πng]
       ‚îÇ
       ‚îî‚îÄ‚îÄ [Qu·∫£n l√Ω b√†i vi·∫øt]
                    ‚îÇ
                    ‚îÇ <<include>>
                    ‚ñº
               [ƒêƒÉng nh·∫≠p]
```

ƒê·ªçc:
- Admin c√≥ th·ªÉ th·ª±c hi·ªán "Qu·∫£n l√Ω ng∆∞·ªùi d√πng" v√† "Qu·∫£n l√Ω b√†i vi·∫øt"
- ƒê·ªÉ "Qu·∫£n l√Ω b√†i vi·∫øt", Admin **b·∫Øt bu·ªôc** ph·∫£i "ƒêƒÉng nh·∫≠p" tr∆∞·ªõc

---

## 5. Th√†nh ph·∫ßn c·∫•u th√†nh

### 5.1 Danh s√°ch th√†nh ph·∫ßn

| Th√†nh ph·∫ßn | M√¥ t·∫£ | V√≠ d·ª• |
|------------|-------|-------|
| **Actors** | Ng∆∞·ªùi d√πng ho·∫∑c h·ªá th·ªëng b√™n ngo√†i | Admin, User, H·ªá th·ªëng thanh to√°n |
| **Use Cases** | Ch·ª©c nƒÉng nghi·ªáp v·ª• c·ªßa h·ªá th·ªëng | ƒêƒÉng nh·∫≠p, Th√™m/S·ª≠a/X√≥a chuy√™n m·ª•c |
| **System Boundary** | Ph·∫°m vi gi·ªõi h·∫°n c·ªßa ·ª©ng d·ª•ng | H√¨nh ch·ªØ nh·∫≠t bao quanh |
| **Relationships** | C√°c m·ªëi quan h·ªá | Association, Include, Extend, Generalization |
| **Use Case Specification** | B·∫£ng ƒë·∫∑c t·∫£ chi ti·∫øt k√®m theo | K·ªãch b·∫£n, ti·ªÅn ƒëi·ªÅu ki·ªán, ngo·∫°i l·ªá |

### 5.2 Use Case Specification (ƒê·∫∑c t·∫£ Use Case)

ƒê√¢y l√† th√†nh ph·∫ßn vƒÉn b·∫£n quan tr·ªçng ƒëi k√®m bi·ªÉu ƒë·ªì:

| M·ª•c | M√¥ t·∫£ | V√≠ d·ª• |
|-----|-------|-------|
| **T√™n Use Case** | T√™n ch·ª©c nƒÉng | ƒêƒÉng nh·∫≠p |
| **T√°c nh√¢n ch√≠nh** | Actor th·ª±c hi·ªán | Admin, User |
| **Ti·ªÅn ƒëi·ªÅu ki·ªán** | ƒêi·ªÅu ki·ªán c·∫ßn c√≥ tr∆∞·ªõc | Ch∆∞a ƒëƒÉng nh·∫≠p |
| **H·∫≠u ƒëi·ªÅu ki·ªán** | K·∫øt qu·∫£ sau khi th·ª±c hi·ªán | ƒêƒÉng nh·∫≠p th√†nh c√¥ng |
| **K√≠ch ho·∫°t (Trigger)** | S·ª± ki·ªán b·∫Øt ƒë·∫ßu | Ng∆∞·ªùi d√πng ch·ªçn ch·ª©c nƒÉng ƒëƒÉng nh·∫≠p |
| **Main Flow** | C√°c b∆∞·ªõc ch√≠nh | 1. Nh·∫≠p th√¥ng tin ‚Üí 2. Ki·ªÉm tra ‚Üí 3. Th√¥ng b√°o th√†nh c√¥ng |
| **Exception** | T√¨nh hu·ªëng l·ªói | Sai m·∫≠t kh·∫©u ‚Üí B√°o l·ªói ‚Üí Y√™u c·∫ßu nh·∫≠p l·∫°i |

### 5.3 M·∫´u Use Case Specification

```markdown
## Use Case: ƒêƒÉng nh·∫≠p

| M·ª•c | N·ªôi dung |
|-----|----------|
| **T√™n UC** | UC01 - ƒêƒÉng nh·∫≠p |
| **T√°c nh√¢n** | Admin, User |
| **Ti·ªÅn ƒëi·ªÅu ki·ªán** | Ng∆∞·ªùi d√πng ch∆∞a ƒëƒÉng nh·∫≠p, ƒëang ·ªü trang Login |
| **H·∫≠u ƒëi·ªÅu ki·ªán** | ƒêƒÉng nh·∫≠p th√†nh c√¥ng, chuy·ªÉn ƒë·∫øn trang ch·ªß |
| **Trigger** | Ng∆∞·ªùi d√πng truy c·∫≠p trang ƒëƒÉng nh·∫≠p |

### Main Flow:
1. Ng∆∞·ªùi d√πng nh·∫≠p username v√† password
2. Ng∆∞·ªùi d√πng nh·∫•n n√∫t "ƒêƒÉng nh·∫≠p"
3. H·ªá th·ªëng ki·ªÉm tra th√¥ng tin
4. H·ªá th·ªëng x√°c th·ª±c th√†nh c√¥ng
5. H·ªá th·ªëng chuy·ªÉn ƒë·∫øn trang ch·ªß

### Exception:
- **3a.** Sai username/password:
  - 3a1. H·ªá th·ªëng hi·ªÉn th·ªã th√¥ng b√°o l·ªói
  - 3a2. Quay l·∫°i b∆∞·ªõc 1
- **3b.** T√†i kho·∫£n b·ªã kh√≥a:
  - 3b1. H·ªá th·ªëng th√¥ng b√°o t√†i kho·∫£n b·ªã kh√≥a
  - 3b2. K·∫øt th√∫c Use Case
```

---

## Checklist

- [x] **L√Ω thuy·∫øt**: c√≥ kh√°i ni·ªám, m·ª•c ƒë√≠ch, vai tr√≤ trong quy tr√¨nh
- [x] **C·∫•u tr√∫c**: c√≥ c√∫ ph√°p/k√Ω hi·ªáu, c√°c lo·∫°i quan h·ªá, Mermaid
- [x] **C√°ch x√¢y d·ª±ng**: c√≥ quy tr√¨nh 5 b∆∞·ªõc v√† best practices
- [x] **Ho·∫°t ƒë·ªông**: c√≥ c√°ch ƒë·ªçc Actor, Use Case, quan h·ªá
- [x] **Th√†nh ph·∫ßn**: c√≥ danh s√°ch ƒë·∫ßy ƒë·ªß + Use Case Specification

---

*T√†i li·ªáu ƒë∆∞·ª£c t·ªïng h·ª£p t·ª´ NotebookLM v·ªõi ngu·ªìn "M√¥ h√¨nh h√≥a c·∫•u tr√∫c" v√† "ƒê·ªì √°n t·ªët nghi·ªáp x√¢y d·ª±ng website"*

```

### diagram/object-diagram-research.md
```md
# Object Diagram - T√†i nguy√™n nghi√™n c·ª©u

> **Ngu·ªìn**: NotebookLM - https://notebooklm.google.com/notebook/46ddeb54-c391-43df-95f2-53c820428ada
> **Ng√†y t·∫°o**: 2026-02-02

---

## 1. L√Ω thuy·∫øt

### 1.1 Kh√°i ni·ªám
**Object Diagram (S∆° ƒë·ªì ƒë·ªëi t∆∞·ª£ng)** l√† m·ªôt bi·ªÉu ƒë·ªì thu·ªôc nh√≥m m√¥ h√¨nh h√≥a c·∫•u tr√∫c (Structural Modeling) trong UML.

- **ƒê·ªãnh nghƒ©a**: L√† m·ªôt phi√™n b·∫£n c·ª• th·ªÉ c·ªßa Class Diagram. N·∫øu Class Diagram l√† b·∫£n v·∫Ω thi·∫øt k·∫ø (khu√¥n m·∫´u), th√¨ Object Diagram l√† m·ªôt **b·ª©c ·∫£nh ch·ª•p nhanh (snapshot)** c·ªßa h·ªá th·ªëng t·∫°i m·ªôt th·ªùi ƒëi·ªÉm c·ª• th·ªÉ, hi·ªÉn th·ªã c√°c ƒë·ªëi t∆∞·ª£ng th·ª±c t·∫ø (instances) v√† m·ªëi quan h·ªá gi·ªØa ch√∫ng.
- **K√Ω hi·ªáu ƒë·∫∑c tr∆∞ng**: T√™n c·ªßa ƒë·ªëi t∆∞·ª£ng lu√¥n ƒë∆∞·ª£c **g·∫°ch d∆∞·ªõi** ƒë·ªÉ ph√¢n bi·ªát v·ªõi l·ªõp (v√≠ d·ª•: <u>sinhVienA: SinhVien</u>)

### 1.2 M·ª•c ƒë√≠ch s·ª≠ d·ª•ng
- **Minh h·ªça k·ªãch b·∫£n c·ª• th·ªÉ**: Bi·ªÉu di·ªÖn v√≠ d·ª• th·ª±c t·∫ø v·ªÅ d·ªØ li·ªáu v√† c·∫•u tr√∫c ƒë·ªëi t∆∞·ª£ng
- **Ki·ªÉm tra t√≠nh ƒë√∫ng ƒë·∫Øn**: Ki·ªÉm tra Class Diagram c√≥ ho·∫°t ƒë·ªông ƒë√∫ng v·ªõi t√¨nh hu·ªëng th·ª±c t·∫ø kh√¥ng
- **M√¥ t·∫£ tr·∫°ng th√°i**: Hi·ªÉn th·ªã gi√° tr·ªã c·ª• th·ªÉ c·ªßa thu·ªôc t√≠nh t·∫°i m·ªôt th·ªùi ƒëi·ªÉm nh·∫•t ƒë·ªãnh

### 1.3 Khi n√†o d√πng?
- Khi Class Diagram qu√° ph·ª©c t·∫°p v√† tr·ª´u t∆∞·ª£ng, c·∫ßn v√≠ d·ª• c·ª• th·ªÉ ƒë·ªÉ gi·∫£i th√≠ch
- Khi c·∫ßn ph√¢n t√≠ch quan h·ªá Aggregation/Composition ƒë·ªÉ xem v√≤ng ƒë·ªùi ƒë·ªëi t∆∞·ª£ng
- Trong giai ƒëo·∫°n ph√¢n t√≠ch (Analysis) ƒë·ªÉ n·∫Øm b·∫Øt y√™u c·∫ßu qua v√≠ d·ª• d·ªØ li·ªáu th·ª±c t·∫ø

### 1.4 So s√°nh Class Diagram vs Object Diagram

| Ti√™u ch√≠ | Class Diagram | Object Diagram |
|----------|---------------|----------------|
| **B·∫£n ch·∫•t** | Khu√¥n m·∫´u (Template) | Th·ªÉ hi·ªán (Instance) |
| **T√≠nh th·ªùi gian** | Tƒ©nh (Static) - Lu√¥n ƒë√∫ng | Snapshot - Ch·ªâ ƒë√∫ng t·∫°i th·ªùi ƒëi·ªÉm ƒë√≥ |
| **Th√†nh ph·∫ßn** | L·ªõp (Class) - t√™n kh√¥ng g·∫°ch ch√¢n | ƒê·ªëi t∆∞·ª£ng (Object) - t√™n g·∫°ch ch√¢n |
| **Thu·ªôc t√≠nh** | T√™n + ki·ªÉu d·ªØ li·ªáu (name: string) | Gi√° tr·ªã c·ª• th·ªÉ (name = "Nguyen Van A") |
| **M·ª•c ti√™u** | ƒê·ªãnh nghƒ©a h·ªá th·ªëng (Design) | Ki·ªÉm tra ho·∫°t ƒë·ªông (Verification) |

**·∫®n d·ª•**: N·∫øu Class Diagram l√† "b·∫£n v·∫Ω ki·∫øn tr√∫c" ng√¥i nh√†, th√¨ Object Diagram l√† "b·ª©c ·∫£nh ch·ª•p" ng√¥i nh√† khi ƒë√£ c√≥ ng∆∞·ªùi v√† ƒë·ªì ƒë·∫°c c·ª• th·ªÉ.

---

## 2. C·∫•u tr√∫c

### 2.1 C√°ch bi·ªÉu di·ªÖn ƒê·ªëi t∆∞·ª£ng (Object)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  sv1 : SinhVien             ‚îÇ  ‚Üê T√™n ƒë·ªëi t∆∞·ª£ng : T√™n l·ªõp (G·∫†CH CH√ÇN)
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  maSV = "SV001"             ‚îÇ  ‚Üê Gi√° tr·ªã thu·ªôc t√≠nh
‚îÇ  hoTen = "Nguyen Van A"     ‚îÇ
‚îÇ  tuoi = 20                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Quy t·∫Øc quan tr·ªçng**:
- T√™n ƒë·ªëi t∆∞·ª£ng **PH·∫¢I ƒë∆∞·ª£c g·∫°ch ch√¢n** ƒë·ªÉ ph√¢n bi·ªát v·ªõi Class
- C√∫ ph√°p ƒë·∫ßy ƒë·ªß: `<u>T√™n_ƒë·ªëi_t∆∞·ª£ng : T√™n_l·ªõp</u>`
- ƒê·ªëi t∆∞·ª£ng n·∫∑c danh: `<u>: T√™n_l·ªõp</u>` (kh√¥ng c√≥ t√™n c·ª• th·ªÉ)

### 2.2 C√°ch hi·ªÉn th·ªã Gi√° tr·ªã thu·ªôc t√≠nh

| Class Diagram | Object Diagram |
|---------------|----------------|
| `name: String` | `name = "Nguyen Van A"` |
| `age: int` | `age = 20` |
| `status: String` | `status = "Active"` |

- Thu·ªôc t√≠nh Static: v·∫´n ƒë∆∞·ª£c <u>g·∫°ch ch√¢n</u> nh∆∞ trong Class Diagram

### 2.3 C√°c lo·∫°i Li√™n k·∫øt (Links)

Li√™n k·∫øt (Link) l√† th·ªÉ hi·ªán c·ª• th·ªÉ c·ªßa Association trong Class Diagram.

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  sv1 : SinhVien  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ  kh1 : KhoaHoc   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  Link   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**ƒê·∫∑c ƒëi·ªÉm**:
- ƒê∆∞·ªùng li·ªÅn n√©t n·ªëi gi·ªØa hai ƒë·ªëi t∆∞·ª£ng
- **Kh√¥ng c√≥ multiplicity** (1..*, 0..1) - v√¨ ƒë√¢y l√† li√™n k·∫øt c·ª• th·ªÉ
- C√≥ th·ªÉ c√≥ t√™n li√™n k·∫øt ho·∫∑c t√™n vai tr√≤

### 2.4 C√∫ ph√°p Mermaid (M√¥ ph·ªèng)

Mermaid ch∆∞a c√≥ lo·∫°i bi·ªÉu ƒë·ªì ri√™ng cho Object Diagram, nh∆∞ng c√≥ th·ªÉ m√¥ ph·ªèng:

```mermaid
classDiagram
    %% M√¥ ph·ªèng ƒë·ªëi t∆∞·ª£ng (d√πng class)
    class sv1_SinhVien {
        maSV = "SV001"
        hoTen = "Nguyen Van A"
    }

    class kh1_KhoaHoc {
        tenMon = "Lap trinh Web"
        maMon = "INT3306"
    }

    %% M√¥ ph·ªèng li√™n k·∫øt
    sv1_SinhVien -- kh1_KhoaHoc : Dang_ky

    %% L∆∞u √Ω: Mermaid kh√¥ng h·ªó tr·ª£ g·∫°ch ch√¢n t√™n
```

---

## 3. C√°ch th·ª©c x√¢y d·ª±ng

### 3.1 Quy tr√¨nh 6 b∆∞·ªõc

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  B∆Ø·ªöC 1: Ph√¢n t√≠ch Class Diagram                               ‚îÇ
‚îÇ  ‚Üì                                                              ‚îÇ
‚îÇ  B∆Ø·ªöC 2: X√°c ƒë·ªãnh k·ªãch b·∫£n c·ª• th·ªÉ (scenario)                   ‚îÇ
‚îÇ  ‚Üì                                                              ‚îÇ
‚îÇ  B∆Ø·ªöC 3: Kh·ªüi t·∫°o c√°c ƒë·ªëi t∆∞·ª£ng (Instantiate Objects)          ‚îÇ
‚îÇ  ‚Üì                                                              ‚îÇ
‚îÇ  B∆Ø·ªöC 4: G√°n gi√° tr·ªã cho thu·ªôc t√≠nh                            ‚îÇ
‚îÇ  ‚Üì                                                              ‚îÇ
‚îÇ  B∆Ø·ªöC 5: V·∫Ω c√°c li√™n k·∫øt (Links)                               ‚îÇ
‚îÇ  ‚Üì                                                              ‚îÇ
‚îÇ  B∆Ø·ªöC 6: Ki·ªÉm tra t√≠nh nh·∫•t qu√°n v·ªõi Class Diagram             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 3.2 Chi ti·∫øt t·ª´ng b∆∞·ªõc

**B∆∞·ªõc 1: Ph√¢n t√≠ch Class Diagram**
- Xem x√©t c·∫•u tr√∫c, thu·ªôc t√≠nh v√† m·ªëi quan h·ªá ƒë√£ ƒë·ªãnh nghƒ©a

**B∆∞·ªõc 2: X√°c ƒë·ªãnh k·ªãch b·∫£n**
- Ch·ªçn t√¨nh hu·ªëng th·ª±c t·∫ø c·∫ßn minh h·ªça
- V√≠ d·ª•: "Sinh vi√™n Nguy·ªÖn VƒÉn A ƒëƒÉng k√Ω m√¥n L·∫≠p tr√¨nh Web"

**B∆∞·ªõc 3: Kh·ªüi t·∫°o ƒë·ªëi t∆∞·ª£ng**
- V·∫Ω h√¨nh ch·ªØ nh·∫≠t cho t·ª´ng ƒë·ªëi t∆∞·ª£ng
- ƒê·∫∑t t√™n theo c√∫ ph√°p: `<u>T√™n_ƒë·ªëi_t∆∞·ª£ng : T√™n_l·ªõp</u>`

**B∆∞·ªõc 4: G√°n gi√° tr·ªã thu·ªôc t√≠nh**
- ƒêi·ªÅn d·ªØ li·ªáu c·ª• th·ªÉ: `T√™n_thu·ªôc_t√≠nh = Gi√°_tr·ªã`
- ƒê·∫£m b·∫£o tu√¢n th·ªß ki·ªÉu d·ªØ li·ªáu trong Class Diagram

**B∆∞·ªõc 5: V·∫Ω li√™n k·∫øt**
- D·ª±a v√†o Association trong Class Diagram
- V·ªõi multiplicity 1..*: v·∫Ω nhi·ªÅu ƒë·ªëi t∆∞·ª£ng c·ª• th·ªÉ

**B∆∞·ªõc 6: Ki·ªÉm tra**
- ƒê·∫£m b·∫£o tu√¢n th·ªß multiplicity
- T√™n thu·ªôc t√≠nh kh·ªõp v·ªõi Class Diagram

### 3.3 Best Practices

| N√™n l√†m | Kh√¥ng n√™n l√†m |
|---------|---------------|
| T·∫≠p trung v√†o k·ªãch b·∫£n c·ª• th·ªÉ | V·∫Ω t·∫•t c·∫£ ƒë·ªëi t∆∞·ª£ng c·ªßa h·ªá th·ªëng |
| Gi·ªØ t√≠nh nh·∫•t qu√°n v·ªõi Class Diagram | T·ª± th√™m thu·ªôc t√≠nh m·ªõi |
| D√πng ƒë·ªÉ ki·ªÉm tra thi·∫øt k·∫ø | Vi·∫øt multiplicity tr√™n ƒë∆∞·ªùng link |
| Hi·ªÉn th·ªã tr·∫°ng th√°i qua gi√° tr·ªã | B·ªè qua vi·ªác g·∫°ch ch√¢n t√™n |

---

## 4. Ho·∫°t ƒë·ªông

### 4.1 C√°ch ƒë·ªçc t√™n ƒë·ªëi t∆∞·ª£ng

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  sv1 : SinhVien           ‚îÇ  ‚Üê ƒê·ªëi t∆∞·ª£ng sv1 thu·ªôc l·ªõp SinhVien
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ        ‚îÇ     (PH·∫¢I g·∫°ch ch√¢n)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  : HoaDon                 ‚îÇ  ‚Üê ƒê·ªëi t∆∞·ª£ng n·∫∑c danh thu·ªôc l·ªõp HoaDon
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                 ‚îÇ     (v·∫´n g·∫°ch ch√¢n)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Quy t·∫Øc ph√¢n bi·ªát**:
- T√™n **g·∫°ch ch√¢n** ‚Üí Object
- T√™n **kh√¥ng g·∫°ch ch√¢n** ‚Üí Class
- T√™n **in nghi√™ng** ‚Üí Abstract Class

### 4.2 C√°ch hi·ªÉu gi√° tr·ªã thu·ªôc t√≠nh

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  hd1 : HoaDon             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  maHD = "HD001"           ‚îÇ  ‚Üê Gi√° tr·ªã c·ª• th·ªÉ
‚îÇ  ngayLap = "2026-02-02"   ‚îÇ
‚îÇ  trangThai = "DaThanhToan"‚îÇ  ‚Üê Tr·∫°ng th√°i c·ªßa ƒë·ªëi t∆∞·ª£ng
‚îÇ  _tongSoHD = 100_         ‚îÇ  ‚Üê Static (g·∫°ch ch√¢n) - thu·ªôc v·ªÅ l·ªõp
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 4.3 C√°ch theo d√µi li√™n k·∫øt

**So s√°nh v·ªõi Class Diagram**:

| Class Diagram | Object Diagram |
|---------------|----------------|
| `KhachHang (1) ‚îÄ‚îÄ‚îÄ (*) DonHang` | 1 ƒë·ªëi t∆∞·ª£ng KH n·ªëi v·ªõi 3 ƒë·ªëi t∆∞·ª£ng DH c·ª• th·ªÉ |
| C√≥ multiplicity 1..* | Kh√¥ng c√≥ multiplicity |
| M√¥ t·∫£ tr·ª´u t∆∞·ª£ng | Minh h·ªça c·ª• th·ªÉ |

**V√≠ d·ª•**:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  kh1 : KH    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
       ‚îÇ          ‚îÇ          ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ dh1 : DH ‚îÇ ‚îÇ dh2 : DH ‚îÇ ‚îÇ dh3 : DH  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 5. Th√†nh ph·∫ßn c·∫•u th√†nh

### 5.1 Danh s√°ch th√†nh ph·∫ßn

| Th√†nh ph·∫ßn | M√¥ t·∫£ | K√Ω hi·ªáu |
|------------|-------|---------|
| **Objects** | Th·ª±c th·ªÉ t·ªìn t·∫°i trong h·ªá th·ªëng th·ª±c t·∫ø | H√¨nh ch·ªØ nh·∫≠t |
| **Object Names** | ƒê·ªãnh danh duy nh·∫•t cho ƒë·ªëi t∆∞·ª£ng | <u>G·∫°ch ch√¢n</u> |
| **Anonymous Objects** | ƒê·ªëi t∆∞·ª£ng kh√¥ng c√≥ t√™n c·ª• th·ªÉ | <u>: TenLop</u> |
| **Attribute Values** | Gi√° tr·ªã d·ªØ li·ªáu c·ª• th·ªÉ c·ªßa thu·ªôc t√≠nh | `tenThuocTinh = giaTriCuThe` |
| **Links** | ƒê∆∞·ªùng n·ªëi th·ªÉ hi·ªán m·ªëi quan h·ªá gi·ªØa ƒë·ªëi t∆∞·ª£ng | ƒê∆∞·ªùng li·ªÅn n√©t |

### 5.2 Chi ti·∫øt t·ª´ng th√†nh ph·∫ßn

**Objects (ƒê·ªëi t∆∞·ª£ng)**:
- Th√†nh ph·∫ßn ch√≠nh c·ªßa s∆° ƒë·ªì
- ƒê·∫°i di·ªán cho th·ª±c th·ªÉ t·ªìn t·∫°i trong h·ªá th·ªëng
- L√† instance c·ª• th·ªÉ c·ªßa Class

**Object Names (T√™n ƒë·ªëi t∆∞·ª£ng)**:
- C√∫ ph√°p: `t√™n_ƒë·ªëi_t∆∞·ª£ng : T√™n_L·ªõp`
- B·∫Øt bu·ªôc g·∫°ch ch√¢n
- V√≠ d·ª•: `<u>xe_cua_tuan : XeHoi</u>`

**Anonymous Objects (ƒê·ªëi t∆∞·ª£ng n·∫∑c danh)**:
- C√∫ ph√°p: `: T√™n_L·ªõp` (kh√¥ng c√≥ t√™n)
- V·∫´n ph·∫£i g·∫°ch ch√¢n
- D√πng khi danh t√≠nh kh√¥ng quan tr·ªçng b·∫±ng lo·∫°i

**Attribute Values (Gi√° tr·ªã thu·ªôc t√≠nh)**:
- X√°c ƒë·ªãnh tr·∫°ng th√°i c·ªßa ƒë·ªëi t∆∞·ª£ng
- C√∫ ph√°p: `tenThuocTinh = giaTri`
- Static attribute v·∫´n g·∫°ch ch√¢n

**Links (Li√™n k·∫øt)**:
- Instance c·ªßa Association trong Class Diagram
- Kh√¥ng c√≥ multiplicity
- Th·ªÉ hi·ªán quan h·ªá c·ª• th·ªÉ gi·ªØa 2 ƒë·ªëi t∆∞·ª£ng

---

## Checklist

- [x] **L√Ω thuy·∫øt**: c√≥ kh√°i ni·ªám, m·ª•c ƒë√≠ch, so s√°nh v·ªõi Class Diagram
- [x] **C·∫•u tr√∫c**: c√≥ c√∫ ph√°p/k√Ω hi·ªáu, c√°ch g·∫°ch ch√¢n, Mermaid m√¥ ph·ªèng
- [x] **C√°ch x√¢y d·ª±ng**: c√≥ quy tr√¨nh 6 b∆∞·ªõc v√† best practices
- [x] **Ho·∫°t ƒë·ªông**: c√≥ c√°ch ƒë·ªçc t√™n, gi√° tr·ªã, li√™n k·∫øt
- [x] **Th√†nh ph·∫ßn**: c√≥ danh s√°ch ƒë·∫ßy ƒë·ªß 5 th√†nh ph·∫ßn ch√≠nh

---

*T√†i li·ªáu ƒë∆∞·ª£c t·ªïng h·ª£p t·ª´ NotebookLM v·ªõi ngu·ªìn "Ch·ªß ƒë·ªÅ 5: M√¥ h√¨nh h√≥a c·∫•u tr√∫c"*

```

### life-1/artkitacture.md
```md
---                                                                                     
  üèóÔ∏è B·∫¢N KI·∫æN TR√öC T·ªîNG TH·ªÇ                                                               
                                                                                          
  Website M·∫°ng X√£ H·ªôi Chia S·∫ª Ki·∫øn Th·ª©c                                                   
                                                                                          
  ---                                                                                     
  1. ROADMAP T·ªîNG TH·ªÇ (Quy tr√¨nh 7 B∆∞·ªõc B·ªô TT&TT)                                         
                                                                                          
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         
  ‚îÇ                         V√íNG ƒê·ªúI PH√ÅT TRI·ªÇN D·ª∞ √ÅN                          ‚îÇ          
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î§          
  ‚îÇ  1  ‚îÇ  2  ‚îÇ  3  ‚îÇ  4  ‚îÇ  5  ‚îÇ  6  ‚îÇ  7  ‚îÇ  8  ‚îÇ  9  ‚îÇ 10  ‚îÇ 11  ‚îÇ 12  ‚îÇ... ‚îÇ          
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î§          
  ‚îÇ ‚ñà‚ñà‚ñà‚ñà B1: X√°c ƒë·ªãnh y√™u c·∫ßu                                                  ‚îÇ          
  ‚îÇ      ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà B2: Ph√¢n t√≠ch & Thi·∫øt k·∫ø                                     ‚îÇ          
  ‚îÇ              ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà B3: L·∫≠p tr√¨nh (Sprints)              ‚îÇ          
  ‚îÇ                            ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà B4: Ki·ªÉm th·ª≠                   ‚îÇ          
  ‚îÇ                                        ‚ñà‚ñà‚ñà‚ñà B5: ƒê√≥ng g√≥i                   ‚îÇ          
  ‚îÇ                                            ‚ñà‚ñà‚ñà‚ñà B6: Tri·ªÉn khai             ‚îÇ          
  ‚îÇ                                                ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà B7: V·∫≠n h√†nh   ‚îÇ          
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê 
  ‚îÇ Giai ‚îÇ  T√™n   ‚îÇ               ‚îÇ                            ‚îÇ                        ‚îÇ 
  ‚îÇ      ‚îÇ (theo  ‚îÇ   M·ª•c ti√™u    ‚îÇ        Deliverables        ‚îÇ     AI Integration     ‚îÇ 
  ‚îÇ ƒëo·∫°n ‚îÇ   7    ‚îÇ     ch√≠nh     ‚îÇ                            ‚îÇ                        ‚îÇ 
  ‚îÇ      ‚îÇ b∆∞·ªõc)  ‚îÇ               ‚îÇ                            ‚îÇ                        ‚îÇ 
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ 
  ‚îÇ      ‚îÇ X√°c    ‚îÇ ƒê·ªãnh h√¨nh d·ª±  ‚îÇ - B·∫£ng m√¥ t·∫£ s·∫£n ph·∫©m-     ‚îÇ ChatGPT/Claude: Chuy·ªÉn ‚îÇ 
  ‚îÇ  1   ‚îÇ ƒë·ªãnh   ‚îÇ √°n, th·ªëng     ‚îÇ User Personas- User        ‚îÇ  √Ω t∆∞·ªüng ‚Üí User        ‚îÇ 
  ‚îÇ      ‚îÇ y√™u    ‚îÇ nh·∫•t scope    ‚îÇ Stories- MVP Features List ‚îÇ Stories, t·∫°o prototype ‚îÇ 
  ‚îÇ      ‚îÇ c·∫ßu    ‚îÇ               ‚îÇ                            ‚îÇ  HTML nhanh            ‚îÇ 
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ 
  ‚îÇ      ‚îÇ Ph√¢n   ‚îÇ               ‚îÇ - SRS (Software            ‚îÇ Claude: G·ª£i √Ω design   ‚îÇ 
  ‚îÇ      ‚îÇ t√≠ch & ‚îÇ ƒê·∫∑c t·∫£ chi    ‚îÇ Requirements)- Wireframes- ‚îÇ patterns, t·∫°o UML/ERD, ‚îÇ 
  ‚îÇ  2   ‚îÇ  Thi·∫øt ‚îÇ ti·∫øt + thi·∫øt  ‚îÇ  UI Mockups- Database      ‚îÇ  thi·∫øt k·∫ø API          ‚îÇ 
  ‚îÇ      ‚îÇ  k·∫ø    ‚îÇ k·∫ø k·ªπ thu·∫≠t   ‚îÇ Schema- API Design- User   ‚îÇ endpoints              ‚îÇ 
  ‚îÇ      ‚îÇ        ‚îÇ               ‚îÇ Journey Map                ‚îÇ                        ‚îÇ 
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ 
  ‚îÇ      ‚îÇ        ‚îÇ               ‚îÇ - Source code (Next.js +   ‚îÇ Copilot/Cursor: Code   ‚îÇ 
  ‚îÇ      ‚îÇ L·∫≠p    ‚îÇ X√¢y d·ª±ng ph·∫ßn ‚îÇ Payload)- Components       ‚îÇ generation,            ‚îÇ 
  ‚îÇ  3   ‚îÇ tr√¨nh  ‚îÇ  m·ªÅm theo     ‚îÇ library- API               ‚îÇ autocomplete,          ‚îÇ 
  ‚îÇ      ‚îÇ        ‚îÇ thi·∫øt k·∫ø      ‚îÇ implementations- Database  ‚îÇ debugging, refactoring ‚îÇ 
  ‚îÇ      ‚îÇ        ‚îÇ               ‚îÇ migrations                 ‚îÇ                        ‚îÇ 
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ 
  ‚îÇ      ‚îÇ Ki·ªÉm   ‚îÇ ƒê·∫£m b·∫£o ch·∫•t  ‚îÇ - Test cases- Test         ‚îÇ AI: Sinh unit tests,   ‚îÇ 
  ‚îÇ  4   ‚îÇ th·ª≠    ‚îÇ l∆∞·ª£ng, ph√°t   ‚îÇ reports- Bug reports-      ‚îÇ g·ª£i √Ω edge cases, t·∫°o  ‚îÇ 
  ‚îÇ      ‚îÇ        ‚îÇ hi·ªán l·ªói      ‚îÇ Performance benchmarks     ‚îÇ test data              ‚îÇ 
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ 
  ‚îÇ      ‚îÇ ƒê√≥ng   ‚îÇ Chu·∫©n b·ªã s·∫£n  ‚îÇ - T√†i li·ªáu c√†i ƒë·∫∑t- H∆∞·ªõng  ‚îÇ AI: T·∫°o documentation  ‚îÇ 
  ‚îÇ  5   ‚îÇ g√≥i    ‚îÇ ph·∫©m s·∫µn s√†ng ‚îÇ d·∫´n s·ª≠ d·ª•ng- Release       ‚îÇ t·ª´ code, vi·∫øt README   ‚îÇ 
  ‚îÇ      ‚îÇ        ‚îÇ  tri·ªÉn khai   ‚îÇ notes- Docker images       ‚îÇ                        ‚îÇ 
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ 
  ‚îÇ      ‚îÇ        ‚îÇ ƒê∆∞a s·∫£n ph·∫©m  ‚îÇ - Deployed application-    ‚îÇ Copilot: Vi·∫øt GitHub   ‚îÇ 
  ‚îÇ  6   ‚îÇ Tri·ªÉn  ‚îÇ l√™n           ‚îÇ CI/CD pipelines-           ‚îÇ Actions, deployment    ‚îÇ 
  ‚îÇ      ‚îÇ khai   ‚îÇ production    ‚îÇ Monitoring setup- SSL      ‚îÇ scripts                ‚îÇ 
  ‚îÇ      ‚îÇ        ‚îÇ               ‚îÇ certificates               ‚îÇ                        ‚îÇ 
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ 
  ‚îÇ      ‚îÇ V·∫≠n    ‚îÇ               ‚îÇ - Bug fixes- Feature       ‚îÇ AI: Gi·∫£i th√≠ch legacy  ‚îÇ 
  ‚îÇ  7   ‚îÇ h√†nh & ‚îÇ Duy tr√¨, c·∫≠p  ‚îÇ updates- Performance       ‚îÇ code, g·ª£i √Ω refactor,  ‚îÇ 
  ‚îÇ      ‚îÇ  B·∫£o   ‚îÇ nh·∫≠t, m·ªü r·ªông ‚îÇ reports- User feedback     ‚îÇ c·∫≠p nh·∫≠t docs          ‚îÇ 
  ‚îÇ      ‚îÇ tr√¨    ‚îÇ               ‚îÇ analysis                   ‚îÇ                        ‚îÇ 
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò 
  ---                                                                                     
  2. CHI TI·∫æT GIAI ƒêO·∫†N 1 - X√ÅC ƒê·ªäNH Y√äU C·∫¶U                                              
                                                                                          
  üéØ M·ª•c ti√™u                                                                             
                                                                                          
  ƒê·ªãnh h√¨nh r√µ r√†ng s·∫£n ph·∫©m, x√°c ƒë·ªãnh ph·∫°m vi MVP, v√† t·∫°o n·ªÅn t·∫£ng cho c√°c giai ƒëo·∫°n sau.
                                                                                          
  ‚úÖ Checklist c√¥ng vi·ªác                                                                  
                                                                                          
  GIAI ƒêO·∫†N 1: X√ÅC ƒê·ªäNH Y√äU C·∫¶U                                                           
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê                         
                                                                                          
  ‚ñ° 1.1 Nghi√™n c·ª©u & Ph√¢n t√≠ch                                                            
     ‚ñ° Nghi√™n c·ª©u th·ªã tr∆∞·ªùng m·∫°ng x√£ h·ªôi Vi·ªát Nam                                         
     ‚ñ° Ph√¢n t√≠ch ƒë·ªëi th·ªß (Facebook, LinkedIn, Spiderum, Viblo)                            
     ‚ñ° X√°c ƒë·ªãnh USP (Unique Selling Point) - Content-centric + Social Bookmarking         
     ‚ñ° Nghi√™n c·ª©u ph√°p l√Ω m·∫°ng x√£ h·ªôi Vi·ªát Nam                                            
                                                                                          
  ‚ñ° 1.2 X√°c ƒë·ªãnh ng∆∞·ªùi d√πng m·ª•c ti√™u                                                      
     ‚ñ° T·∫°o User Personas (3-5 personas)                                                   
     ‚ñ° ƒê·ªãnh nghƒ©a user segments (sinh vi√™n, developer, content creator...)                
     ‚ñ° X√°c ƒë·ªãnh pain points v√† needs c·ªßa t·ª´ng segment                                     
                                                                                          
  ‚ñ° 1.3 X√¢y d·ª±ng User Stories                                                             
     ‚ñ° Vi·∫øt Epic cho 10 MVP features                                                      
     ‚ñ° Break down th√†nh User Stories (As a [user], I want [feature], so that [benefit])   
     ‚ñ° ƒê·ªãnh nghƒ©a Acceptance Criteria cho m·ªói story                                       
     ‚ñ° ∆Ø·ªõc l∆∞·ª£ng Story Points (d√πng Planning Poker)                                       
                                                                                          
  ‚ñ° 1.4 ƒê·∫∑c t·∫£ y√™u c·∫ßu s∆° b·ªô                                                              
     ‚ñ° Li·ªát k√™ Functional Requirements (FR)                                               
     ‚ñ° Li·ªát k√™ Non-functional Requirements (NFR): Performance, Security, Scalability      
     ‚ñ° X√°c ƒë·ªãnh constraints & assumptions                                                 
     ‚ñ° ƒê·ªãnh nghƒ©a Definition of Done (DoD)                                                
                                                                                          
  ‚ñ° 1.5 X√°c nh·∫≠n & Ph√™ duy·ªát                                                              
     ‚ñ° Review v·ªõi stakeholders                                                            
     ‚ñ° Sign-off MVP scope                                                                 
     ‚ñ° T·∫°o Product Backlog ban ƒë·∫ßu                                                        
                                                                                          
  üì¶ Deliverables (S·∫£n ph·∫©m ƒë·∫ßu ra)                                                       
  T√†i li·ªáu: docs/01-vision/product-vision.md                                              
  M√¥ t·∫£: T·∫ßm nh√¨n s·∫£n ph·∫©m, USP, target market                                            
  Format: Markdown                                                                        
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                                
  T√†i li·ªáu: docs/01-vision/user-personas.md                                               
  M√¥ t·∫£: 3-5 User Personas chi ti·∫øt                                                       
  Format: Markdown + h√¨nh                                                                 
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                                
  T√†i li·ªáu: docs/01-vision/user-stories.md                                                
  M√¥ t·∫£: Epic + User Stories cho MVP                                                      
  Format: Markdown                                                                        
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                                
  T√†i li·ªáu: docs/01-vision/requirements-srs.md                                            
  M√¥ t·∫£: ƒê·∫∑c t·∫£ y√™u c·∫ßu s∆° b·ªô (FR + NFR)                                                  
  Format: Markdown                                                                        
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                                
  T√†i li·ªáu: docs/01-vision/product-backlog.csv                                            
  M√¥ t·∫£: Backlog v·ªõi priority                                                             
  Format: CSV/Notion                                                                      
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                                
  T√†i li·ªáu: docs/01-vision/competitor-analysis.md                                         
  M√¥ t·∫£: Ph√¢n t√≠ch ƒë·ªëi th·ªß                                                                
  Format: Markdown                                                                        
  ü§ñ AI c√≥ th·ªÉ h·ªó tr·ª£                                                                     
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ   C√¥ng vi·ªác   ‚îÇ   C√¥ng c·ª• AI    ‚îÇ                     C√°ch d√πng                      ‚îÇ
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
  ‚îÇ T·∫°o User      ‚îÇ                 ‚îÇ Prompt: "T·∫°o 3 user personas cho m·∫°ng x√£ h·ªôi chia  ‚îÇ
  ‚îÇ Personas      ‚îÇ ChatGPT/Claude  ‚îÇ s·∫ª ki·∫øn th·ª©c tech, bao g·ªìm demographics, goals,    ‚îÇ
  ‚îÇ               ‚îÇ                 ‚îÇ pain points"                                       ‚îÇ
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
  ‚îÇ Vi·∫øt User     ‚îÇ Claude          ‚îÇ Prompt: "Chuy·ªÉn y√™u c·∫ßu 'ƒêƒÉng nh·∫≠p b·∫±ng Google'    ‚îÇ
  ‚îÇ Stories       ‚îÇ                 ‚îÇ th√†nh User Story v·ªõi Acceptance Criteria"          ‚îÇ
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
  ‚îÇ Ph√¢n t√≠ch ƒë·ªëi ‚îÇ ChatGPT +       ‚îÇ So s√°nh features, UX, v√† business model            ‚îÇ
  ‚îÇ  th·ªß          ‚îÇ WebSearch       ‚îÇ                                                    ‚îÇ
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
  ‚îÇ Rapid         ‚îÇ Claude          ‚îÇ T·∫°o HTML/CSS mockup nhanh t·ª´ m√¥ t·∫£                 ‚îÇ
  ‚îÇ Prototyping   ‚îÇ                 ‚îÇ                                                    ‚îÇ
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
  ‚îÇ Brainstorm    ‚îÇ Claude          ‚îÇ "G·ª£i √Ω 20 t√≠nh nƒÉng cho m·∫°ng x√£ h·ªôi                ‚îÇ
  ‚îÇ features      ‚îÇ                 ‚îÇ content-centric"                                   ‚îÇ
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
  ‚ùì C√¢u h·ªèi c·∫ßn tr·∫£ l·ªùi tr∆∞·ªõc khi chuy·ªÉn giai ƒëo·∫°n                                       
                                                                                          
  1. Target users: Ai l√† ng∆∞·ªùi d√πng ch√≠nh? (Developer? Sinh vi√™n? Content creator?)       
  2. Monetization: M√¥ h√¨nh kinh doanh l√† g√¨? (Ads? Premium? Freemium?)                    
  3. Content focus: Lo·∫°i content n√†o l√† ch√≠nh? (Text? Video? Link sharing?)               
  4. Social Bookmarking scope: MVP ch·ªâ c·∫ßn Save post hay c·∫ßn Collections?                 
  5. Realtime: C·∫ßn realtime notifications ngay t·ª´ MVP kh√¥ng?                              
  6. Moderation: AI moderation hay human moderation? Hay c·∫£ hai?                          
  7. Legal: C√≥ ƒëƒÉng k√Ω gi·∫•y ph√©p MXH v·ªõi B·ªô TT&TT kh√¥ng?                                  
                                                                                          
  ---                                                                                     
  3. MVP IMPLEMENTATION MATRIX                                                            
                                                                                          
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         
  ‚îÇ                     MVP FEATURES DEPENDENCY GRAPH                           ‚îÇ         
  ‚îÇ                                                                             ‚îÇ         
  ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                                          ‚îÇ         
  ‚îÇ   ‚îÇ 1. Auth      ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ         
  ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                               ‚îÇ          ‚îÇ         
  ‚îÇ          ‚îÇ                                                       ‚îÇ          ‚îÇ         
  ‚îÇ          ‚ñº                                                       ‚îÇ          ‚îÇ         
  ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                         ‚îÇ          ‚îÇ          
  ‚îÇ   ‚îÇ 2. Profile   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ 6.Connections‚îÇ                         ‚îÇ          ‚îÇ          
  ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                         ‚îÇ          ‚îÇ          
  ‚îÇ          ‚îÇ                    ‚îÇ                                  ‚îÇ          ‚îÇ         
  ‚îÇ          ‚ñº                    ‚ñº                                  ‚îÇ          ‚îÇ         
  ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ          ‚îÇ          
  ‚îÇ   ‚îÇ 4. Posts     ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ 3. News Feed ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ 9. Search    ‚îÇ    ‚îÇ          ‚îÇ          
  ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ          ‚îÇ          
  ‚îÇ          ‚îÇ                                                       ‚îÇ          ‚îÇ         
  ‚îÇ          ‚ñº                                                       ‚îÇ          ‚îÇ         
  ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ          ‚îÇ          
  ‚îÇ   ‚îÇ 5. Interact  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ 7. Notif     ‚îÇ     ‚îÇ 9b.Bookmarks ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ          
  ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ          
  ‚îÇ          ‚îÇ                    ‚îÇ                                             ‚îÇ         
  ‚îÇ          ‚ñº                    ‚ñº                                             ‚îÇ         
  ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                     ‚îÇ         
  ‚îÇ   ‚îÇ 8. Messaging ‚îÇ     ‚îÇ 10. Privacy  ‚îÇ                                     ‚îÇ         
  ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                     ‚îÇ         
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ    Feature     ‚îÇ Priority ‚îÇ Sprint ‚îÇ Dependencies  ‚îÇ         Technical Notes         ‚îÇ
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
  ‚îÇ 1.             ‚îÇ          ‚îÇ Sprint ‚îÇ               ‚îÇ OAuth2 (Google/Facebook) +      ‚îÇ
  ‚îÇ Authentication ‚îÇ    P0    ‚îÇ    1   ‚îÇ None          ‚îÇ Email/Password. JWT tokens.     ‚îÇ
  ‚îÇ                ‚îÇ          ‚îÇ        ‚îÇ               ‚îÇ Payload Auth plugin             ‚îÇ
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
  ‚îÇ 2. User        ‚îÇ          ‚îÇ Sprint ‚îÇ               ‚îÇ Avatar upload (Cloudinary/S3),  ‚îÇ
  ‚îÇ Profile        ‚îÇ    P0    ‚îÇ    1   ‚îÇ Auth          ‚îÇ bio, social links. Payload      ‚îÇ
  ‚îÇ                ‚îÇ          ‚îÇ        ‚îÇ               ‚îÇ Collection: users               ‚îÇ
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
  ‚îÇ                ‚îÇ          ‚îÇ Sprint ‚îÇ Posts,        ‚îÇ Hybrid fan-out (write + read).  ‚îÇ
  ‚îÇ 3. News Feed   ‚îÇ    P0    ‚îÇ    2   ‚îÇ Connections   ‚îÇ Pagination v·ªõi cursor. Caching  ‚îÇ
  ‚îÇ                ‚îÇ          ‚îÇ        ‚îÇ               ‚îÇ v·ªõi Redis                       ‚îÇ
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
  ‚îÇ 4. Post        ‚îÇ          ‚îÇ Sprint ‚îÇ               ‚îÇ Rich text (Lexical/TipTap),     ‚îÇ
  ‚îÇ Creation       ‚îÇ    P0    ‚îÇ    2   ‚îÇ Auth          ‚îÇ image upload, tags, mentions.   ‚îÇ
  ‚îÇ                ‚îÇ          ‚îÇ        ‚îÇ               ‚îÇ Collection: posts               ‚îÇ
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
  ‚îÇ 5.             ‚îÇ          ‚îÇ Sprint ‚îÇ               ‚îÇ Like (toggle), Comment          ‚îÇ
  ‚îÇ Interactions   ‚îÇ    P0    ‚îÇ    2   ‚îÇ Posts         ‚îÇ (nested), Share. Optimistic UI  ‚îÇ
  ‚îÇ                ‚îÇ          ‚îÇ        ‚îÇ               ‚îÇ updates                         ‚îÇ
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
  ‚îÇ                ‚îÇ          ‚îÇ Sprint ‚îÇ               ‚îÇ Follow/Unfollow, Block.         ‚îÇ
  ‚îÇ 6. Connections ‚îÇ    P0    ‚îÇ    3   ‚îÇ Profile       ‚îÇ Relationship collection. Mutual ‚îÇ
  ‚îÇ                ‚îÇ          ‚îÇ        ‚îÇ               ‚îÇ  follows detection              ‚îÇ
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
  ‚îÇ 7.             ‚îÇ    P1    ‚îÇ Sprint ‚îÇ Interactions  ‚îÇ Push + In-app. WebSocket ho·∫∑c   ‚îÇ
  ‚îÇ Notifications  ‚îÇ          ‚îÇ    3   ‚îÇ               ‚îÇ SSE. Queue v·ªõi Bull/BullMQ      ‚îÇ
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
  ‚îÇ 8. Messaging   ‚îÇ    P1    ‚îÇ Sprint ‚îÇ Connections   ‚îÇ 1-1 chat. WebSocket real-time.  ‚îÇ
  ‚îÇ                ‚îÇ          ‚îÇ    4   ‚îÇ               ‚îÇ Message encryption (optional)   ‚îÇ
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
  ‚îÇ 9. Search      ‚îÇ    P1    ‚îÇ Sprint ‚îÇ Posts, Users  ‚îÇ Full-text search MongoDB Atlas  ‚îÇ
  ‚îÇ                ‚îÇ          ‚îÇ    4   ‚îÇ               ‚îÇ Search ho·∫∑c Meilisearch         ‚îÇ
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
  ‚îÇ 9b.            ‚îÇ    P1    ‚îÇ Sprint ‚îÇ Posts         ‚îÇ Save to collection. Collection: ‚îÇ
  ‚îÇ Bookmarking    ‚îÇ          ‚îÇ    3   ‚îÇ               ‚îÇ  bookmarks. Simple MVP first    ‚îÇ
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
  ‚îÇ                ‚îÇ          ‚îÇ Sprint ‚îÇ               ‚îÇ Profile visibility, post        ‚îÇ
  ‚îÇ 10. Privacy    ‚îÇ    P1    ‚îÇ    4   ‚îÇ All           ‚îÇ visibility, block list. RBAC    ‚îÇ
  ‚îÇ                ‚îÇ          ‚îÇ        ‚îÇ               ‚îÇ v·ªõi Payload Access Control      ‚îÇ
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
  ---                                                                                     
  4. TECHNICAL ARCHITECTURE PREVIEW                                                       
                                                                                          
  High-Level Architecture                                                                 
                                                                                          
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         
  ‚îÇ                              CLIENT LAYER                                   ‚îÇ         
  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ          
  ‚îÇ  ‚îÇ                    Next.js 15 + React 19                             ‚îÇ   ‚îÇ         
  ‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ   ‚îÇ           
  ‚îÇ  ‚îÇ  ‚îÇ   Pages   ‚îÇ  ‚îÇComponents ‚îÇ  ‚îÇ   Hooks   ‚îÇ  ‚îÇ  Context  ‚îÇ        ‚îÇ   ‚îÇ           
  ‚îÇ  ‚îÇ  ‚îÇ (App Dir) ‚îÇ  ‚îÇ (Shadcn)  ‚îÇ  ‚îÇ (TanStack)‚îÇ  ‚îÇ (Auth/UI) ‚îÇ        ‚îÇ   ‚îÇ           
  ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ   ‚îÇ           
  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ          
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         
                                       ‚îÇ HTTPS/WSS                                        
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         
  ‚îÇ                           APPLICATION LAYER                                 ‚îÇ         
  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ          
  ‚îÇ  ‚îÇ                        Payload CMS 3.x                               ‚îÇ   ‚îÇ         
  ‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ   ‚îÇ           
  ‚îÇ  ‚îÇ  ‚îÇCollections‚îÇ  ‚îÇ   Hooks   ‚îÇ  ‚îÇ  Access   ‚îÇ  ‚îÇ REST/GQL  ‚îÇ        ‚îÇ   ‚îÇ           
  ‚îÇ  ‚îÇ  ‚îÇ  (Data)   ‚îÇ  ‚îÇ(Lifecycle)‚îÇ  ‚îÇ (RBAC)    ‚îÇ  ‚îÇ   APIs    ‚îÇ        ‚îÇ   ‚îÇ           
  ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ   ‚îÇ           
  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ          
  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                      ‚îÇ          
  ‚îÇ  ‚îÇ   Bull/MQ    ‚îÇ  ‚îÇ  WebSocket   ‚îÇ  ‚îÇ   AI/ML      ‚îÇ                      ‚îÇ          
  ‚îÇ  ‚îÇ (Job Queue)  ‚îÇ  ‚îÇ  (Realtime)  ‚îÇ  ‚îÇ (Moderation) ‚îÇ                      ‚îÇ          
  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                      ‚îÇ          
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         
                                       ‚îÇ                                                  
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         
  ‚îÇ                              DATA LAYER                                     ‚îÇ         
  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ          
  ‚îÇ  ‚îÇ   MongoDB    ‚îÇ  ‚îÇ    Redis     ‚îÇ  ‚îÇ  Cloudinary  ‚îÇ  ‚îÇ   Vercel     ‚îÇ    ‚îÇ          
  ‚îÇ  ‚îÇ  (Primary)   ‚îÇ  ‚îÇ   (Cache)    ‚îÇ  ‚îÇ  (Media)     ‚îÇ  ‚îÇ   (Blob)     ‚îÇ    ‚îÇ          
  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ          
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         
                                                                                          
  Database Schema Overview (MongoDB Collections)                                          
                                                                                          
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         
  ‚îÇ                         CORE COLLECTIONS                                    ‚îÇ         
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§         
  ‚îÇ                                                                             ‚îÇ         
  ‚îÇ  USERS                     POSTS                      COMMENTS              ‚îÇ         
  ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                      ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ              ‚îÇ         
  ‚îÇ  _id: ObjectId             _id: ObjectId              _id: ObjectId         ‚îÇ         
  ‚îÇ  email: string (unique)    author: ref‚ÜíUsers          post: ref‚ÜíPosts       ‚îÇ         
  ‚îÇ  password: hash            content: richtext          author: ref‚ÜíUsers     ‚îÇ         
  ‚îÇ  name: string              media: [urls]              content: string       ‚îÇ         
  ‚îÇ  avatar: url               tags: [string]             parent: ref‚ÜíComments  ‚îÇ         
  ‚îÇ  bio: string               visibility: enum           createdAt: date       ‚îÇ         
  ‚îÇ  followers: [ref]          likes: [ref‚ÜíUsers]                               ‚îÇ         
  ‚îÇ  following: [ref]          commentsCount: number                            ‚îÇ         
  ‚îÇ  createdAt: date           sharesCount: number                              ‚îÇ         
  ‚îÇ                            createdAt: date                                  ‚îÇ         
  ‚îÇ                                                                             ‚îÇ         
  ‚îÇ  BOOKMARKS                 NOTIFICATIONS              MESSAGES              ‚îÇ         
  ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ              ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ              ‚îÇ         
  ‚îÇ  _id: ObjectId             _id: ObjectId              _id: ObjectId         ‚îÇ         
  ‚îÇ  user: ref‚ÜíUsers           user: ref‚ÜíUsers            conversation: ref     ‚îÇ         
  ‚îÇ  post: ref‚ÜíPosts           type: enum                 sender: ref‚ÜíUsers     ‚îÇ         
  ‚îÇ  collection: string        actor: ref‚ÜíUsers           content: string       ‚îÇ         
  ‚îÇ  createdAt: date           target: ref (polymorphic)  readAt: date          ‚îÇ         
  ‚îÇ                            read: boolean              createdAt: date       ‚îÇ         
  ‚îÇ                            createdAt: date                                  ‚îÇ         
  ‚îÇ                                                                             ‚îÇ         
  ‚îÇ  FOLLOWS                   BLOCKS                     CONVERSATIONS         ‚îÇ         
  ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                     ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ         ‚îÇ         
  ‚îÇ  _id: ObjectId             _id: ObjectId              _id: ObjectId         ‚îÇ         
  ‚îÇ  follower: ref‚ÜíUsers       blocker: ref‚ÜíUsers         participants: [ref]   ‚îÇ         
  ‚îÇ  following: ref‚ÜíUsers      blocked: ref‚ÜíUsers         lastMessage: ref      ‚îÇ         
  ‚îÇ  createdAt: date           createdAt: date            updatedAt: date       ‚îÇ         
  ‚îÇ                                                                             ‚îÇ         
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         
                                                                                          
  API Endpoints Categories                                                                
                                                                                          
  /api/auth/*          ‚Üí Authentication (login, register, OAuth, logout, refresh)         
  /api/users/*         ‚Üí User profiles (CRUD, follow, block, search)                      
  /api/posts/*         ‚Üí Posts (CRUD, like, share, feed)                                  
  /api/comments/*      ‚Üí Comments (CRUD, nested replies)                                  
  /api/bookmarks/*     ‚Üí Bookmarks (save, unsave, list, collections)                      
  /api/notifications/* ‚Üí Notifications (list, mark read, preferences)                     
  /api/messages/*      ‚Üí Messaging (conversations, send, read)                            
  /api/search/*        ‚Üí Search (users, posts, hashtags)                                  
  /api/upload/*        ‚Üí Media upload (images, videos)                                    
                                                                                          
  ---                                                                                     
  5. C√ÇU H·ªéI C·∫¶N QUY·∫æT ƒê·ªäNH                                                               
                                                                                          
  üî¥ Quy·∫øt ƒë·ªãnh Ki·∫øn tr√∫c (Ph·∫£i quy·∫øt ƒë·ªãnh tr∆∞·ªõc khi code)                                
                                                                                          
  1. News Feed Algorithm: Timeline ƒë∆°n gi·∫£n hay thu·∫≠t to√°n ranking (engagement-based)?    
  2. Realtime Stack: WebSocket (Socket.io) vs SSE vs Polling? Self-hosted vs Pusher/Ably? 
  3. File Storage: Vercel Blob vs Cloudinary vs AWS S3? C·∫ßn CDN kh√¥ng?                    
  4. Search Engine: MongoDB Atlas Search vs Meilisearch vs Algolia?                       
  5. Queue System: Bull (Redis-based) vs BullMQ vs kh√¥ng c·∫ßn queue MVP?                   
                                                                                          
  üü° Quy·∫øt ƒë·ªãnh Product (C√≥ th·ªÉ ƒëi·ªÅu ch·ªânh sau)                                           
                                                                                          
  6. Social Bookmarking: MVP ch·ªâ Save post hay c·∫ßn Collections/Folders ngay?              
  7. Content Types: Ch·ªâ text+image hay h·ªó tr·ª£ video, polls, stories?                      
  8. Moderation: AI auto-moderation hay report-based (human review)?                      
  9. Monetization: Ads, Premium subscription, hay ch∆∞a c·∫ßn MVP?                           
  10. Mobile App: Web responsive first hay c·∫ßn React Native sau?                          
                                                                                          
  üü¢ Quy·∫øt ƒë·ªãnh V·∫≠n h√†nh                                                                  
                                                                                          
  11. Hosting: Vercel Pro ($20/mo) hay self-host (VPS/AWS)?                               
  12. Database: MongoDB Atlas (managed) hay self-hosted?                                  
  13. Monitoring: Vercel Analytics + Sentry hay Datadog?                                  
  14. CI/CD: GitHub Actions hay Vercel auto-deploy?                                       
                                                                                          
  ---                                                                                     
  üìã NEXT STEPS                                                                           
                                                                                          
  D·ª±a tr√™n ki·∫øn tr√∫c t·ªïng th·ªÉ n√†y, b∆∞·ªõc ti·∫øp theo b·∫°n n√™n l√†m:                            
                                                                                          
  1. Tr·∫£ l·ªùi c√°c c√¢u h·ªèi quy·∫øt ƒë·ªãnh ·ªü Section 5                                           
  2. T·∫°o User Personas chi ti·∫øt (c√≥ th·ªÉ d√πng AI h·ªó tr·ª£)                                   
  3. Vi·∫øt User Stories cho MVP Sprint 1 (Auth + Profile)                                  
  4. Thi·∫øt k·∫ø Wireframes cho c√°c m√†n h√¨nh ch√≠nh                                           
                                                                                          
  B·∫°n mu·ªën t√¥i h·ªó tr·ª£ chi ti·∫øt ph·∫ßn n√†o ti·∫øp theo? V√≠ d·ª•:                                 
  - ƒê√†o s√¢u v√†o thi·∫øt k·∫ø database schema?                                                 
  - T·∫°o User Personas?                                                                    
  - Vi·∫øt User Stories chi ti·∫øt?                                                           
  - So s√°nh c√°c l·ª±a ch·ªçn technical (Redis vs kh√¥ng Redis, etc.)?
```

### life-1/lifecycle-checklist-and-folder-structure.md
```md
# üìã Checklist V√≤ng ƒê·ªùi Ph√°t Tri·ªÉn Website

> **T√†i li·ªáu:** `Docs/life-1/lifecycle-checklist-and-folder-structure.md`  
> **M·ª•c ƒë√≠ch:** Kim ch·ªâ nam ƒë·ªãnh h∆∞·ªõng ph√°t tri·ªÉn, n·∫Øm b·∫Øt ƒë∆∞·ªùng ƒëi c·∫ßn tri·ªÉn khai  
> **Tham chi·∫øu:** arhitacture-V2.md, artkitacture.md  

---

## üîó Ngu·ªìn Tham Kh·∫£o: NotebookLM

| Notebook | URL | N·ªôi dung t·∫≠p trung |
|----------|-----|--------------------|
| T√†i nguy√™n t·ªïng qu√°t | [46ddeb54...](https://notebooklm.google.com/notebook/46ddeb54-c391-43df-95f2-53c820428ada) | SDLC, AI trong ph√°t tri·ªÉn, thi·∫øt k·∫ø ki·∫øn tr√∫c |
| Template Next.js | [54c93705...](https://notebooklm.google.com/notebook/54c93705-0398-4ded-b698-61c44ce692f8) | Ki·∫øn tr√∫c d·ª± √°n Next.js, folder structure, conventions |

**C√°ch query:** `python3 scripts/run.py ask_question.py --question "..." --notebook-url "[URL]"`  
*(Skill: ~/.cursor/skills/notebooklm/)*

---

## üìä T·ªïng Quan 4 Giai ƒêo·∫°n

| Giai ƒëo·∫°n | T√™n | M·ª•c ti√™u ch√≠nh | Th∆∞ m·ª•c Docs |
|-----------|-----|----------------|--------------|
| **1** | ƒê·ªãnh h∆∞·ªõng | T√†i li·ªáu k·ªπ thu·∫≠t c∆° b·∫£n, kim ch·ªâ nam ph√°t tri·ªÉn | `Docs/life-1/` |
| **2** | Ph√¢n t√≠ch & Thi·∫øt k·∫ø | X√°c ƒë·ªãnh t√≠nh nƒÉng, s∆° ƒë·ªì thi·∫øt k·∫ø, spec k·ªπ thu·∫≠t | `Docs/life-2/` |
| **3** | Tri·ªÉn khai | Setup, x√¢y d·ª±ng, spec-driven, test ‚áÑ AI agent | `Docs/life-3/` |
| **4** | Verify | Ki·ªÉm ch·ª©ng k·∫øt qu·∫£, ch·∫•t l∆∞·ª£ng | `Docs/life-4/` |

---

## üéØ GIAI ƒêO·∫†N 1 ‚Äî ƒê·ªäNH H∆Ø·ªöNG

### M·ª•c ti√™u
ƒê·ªãnh h√¨nh d·ª± √°n, th·ªëng nh·∫•t scope, t·∫°o n·ªÅn t·∫£ng t√†i li·ªáu k·ªπ thu·∫≠t ƒë√≥ng vai tr√≤ kim ch·ªâ nam.

### Checklist c√¥ng vi·ªác

```
‚ñ° 1.1 Nghi√™n c·ª©u & Ph√¢n t√≠ch (b·ªè qua n·∫øu demo)
‚ñ° 1.2 X√°c ƒë·ªãnh ng∆∞·ªùi d√πng m·ª•c ti√™u
   ‚ñ° T·∫°o 2-3 User Personas
   ‚ñ° X√°c ƒë·ªãnh pain points
‚ñ° 1.3 X√¢y d·ª±ng User Stories (Focus MVP)
   ‚ñ° Epic 1‚Äì10 (Auth, Profile, Posts, Feed, Bookmarking, Search, ‚Ä¶)
‚ñ° 1.4 Nghi√™n c·ª©u k·ªπ thu·∫≠t
   ‚ñ° News Feed Ranking Algorithm
   ‚ñ° SSE v·ªõi Next.js
   ‚ñ° MongoDB Atlas Search
‚ñ° 1.5 ƒê·∫∑c t·∫£ y√™u c·∫ßu chi ti·∫øt
   ‚ñ° Functional Requirements
   ‚ñ° Non-functional Requirements
   ‚ñ° Database Schema s∆° b·ªô
   ‚ñ° API Endpoints specification
‚ñ° 1.6 Setup m√¥i tr∆∞·ªùng ph√°t tri·ªÉn (optional, c√≥ th·ªÉ sang giai ƒëo·∫°n 3)
```

### Deliverables & Ki·∫øn tr√∫c th∆∞ m·ª•c

```
Docs/life-1/
‚îú‚îÄ‚îÄ arhitacture-V2.md          # Roadmap ƒëi·ªÅu ch·ªânh, checklist giai ƒëo·∫°n 1
‚îú‚îÄ‚îÄ artkitacture.md            # Ki·∫øn tr√∫c t·ªïng th·ªÉ, MVP matrix, schema
‚îú‚îÄ‚îÄ lifecycle-checklist-and-folder-structure.md   # ‚Üê File n√†y
‚îú‚îÄ‚îÄ 01-vision/
‚îÇ   ‚îú‚îÄ‚îÄ product-vision.md      # T·∫ßm nh√¨n, USP, target market
‚îÇ   ‚îú‚îÄ‚îÄ user-personas.md       # 3-5 User Personas
‚îÇ   ‚îú‚îÄ‚îÄ user-stories.md        # Epic + User Stories
‚îÇ   ‚îú‚îÄ‚îÄ requirements-srs.md    # FR + NFR
‚îÇ   ‚îî‚îÄ‚îÄ competitor-analysis.md # Ph√¢n t√≠ch ƒë·ªëi th·ªß (n·∫øu c√≥)
‚îú‚îÄ‚îÄ 02-decisions/
‚îÇ   ‚îî‚îÄ‚îÄ technical-decisions.md # C√°c quy·∫øt ƒë·ªãnh k·ªπ thu·∫≠t ƒë√£ x√°c ƒë·ªãnh
‚îî‚îÄ‚îÄ 03-research/
    ‚îú‚îÄ‚îÄ news-feed-algorithm.md
    ‚îú‚îÄ‚îÄ sse-nextjs.md
    ‚îî‚îÄ‚îÄ mongodb-search.md
```

---

## üéØ GIAI ƒêO·∫†N 2 ‚Äî PH√ÇN T√çCH & THI·∫æT K·∫æ

### M·ª•c ti√™u
D·ª±a tr√™n t√†i li·ªáu giai ƒëo·∫°n 1, ph√¢n t√≠ch thi·∫øt k·∫ø chi ti·∫øt v·ªõi c√°c s∆° ƒë·ªì ƒëi·ªÉn h√¨nh.

### Checklist c√¥ng vi·ªác

```
‚ñ° 2.1 S∆° ƒë·ªì quan h·ªá th·ª±c th·ªÉ (ER)
‚ñ° 2.2 S∆° ƒë·ªì Use Case
‚ñ° 2.3 S∆° ƒë·ªì tu·∫ßn t·ª± (Sequence)
‚ñ° 2.4 S∆° ƒë·ªì lu·ªìng (Flow)
‚ñ° 2.5 S∆° ƒë·ªì l·ªõp (Class)
‚ñ° 2.6 Thi·∫øt k·∫ø Database chi ti·∫øt
‚ñ° 2.7 Thi·∫øt k·∫ø khung giao di·ªán UI (wireframe/frame)
‚ñ° 2.8 Thi·∫øt k·∫ø API
```

### Deliverables & Ki·∫øn tr√∫c th∆∞ m·ª•c

```
Docs/life-2/
‚îú‚îÄ‚îÄ diagrams/
‚îÇ   ‚îú‚îÄ‚îÄ er-diagram.md          # ho·∫∑c .drawio, .mermaid
‚îÇ   ‚îú‚îÄ‚îÄ use-case-diagram.md
‚îÇ   ‚îú‚îÄ‚îÄ sequence-diagram.md
‚îÇ   ‚îú‚îÄ‚îÄ flow-diagram.md
‚îÇ   ‚îî‚îÄ‚îÄ class-diagram.md
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ schema-design.md       # Chi ti·∫øt collections, indexes
‚îÇ   ‚îî‚îÄ‚îÄ migrations/            # (n·∫øu c·∫ßn l∆∞u migration plan)
‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îú‚îÄ‚îÄ wireframes/            # Khung giao di·ªán t·ª´ng m√†n h√¨nh
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.md
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ feed.md
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ profile.md
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îî‚îÄ‚îÄ ui-frame-design.md     # T·ªïng h·ª£p frame layout
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ api-spec.md            # REST/GraphQL endpoints
‚îÇ   ‚îî‚îÄ‚îÄ api-design.md          # Request/Response, auth
‚îî‚îÄ‚îÄ specs/                     # Spec chi ti·∫øt ph·ª•c v·ª• AI code generation
    ‚îú‚îÄ‚îÄ auth-spec.md
    ‚îú‚îÄ‚îÄ posts-spec.md
    ‚îú‚îÄ‚îÄ feed-spec.md
    ‚îî‚îÄ‚îÄ ...
```

### Mapping s∆° ƒë·ªì ‚Üí file

| Lo·∫°i s∆° ƒë·ªì | File | Ghi ch√∫ |
|------------|------|---------|
| ER | `diagrams/er-diagram.md` | Entities, relationships |
| Use Case | `diagrams/use-case-diagram.md` | Actors, use cases |
| Sequence | `diagrams/sequence-diagram.md` | Lu·ªìng t∆∞∆°ng t√°c |
| Flow | `diagrams/flow-diagram.md` | Lu·ªìng x·ª≠ l√Ω |
| Class | `diagrams/class-diagram.md` | C·∫•u tr√∫c class |
| Database | `database/schema-design.md` | Collections, indexes |
| UI Frame | `ui/wireframes/`, `ui/ui-frame-design.md` | Layout m√†n h√¨nh |
| API | `api/api-spec.md`, `api/api-design.md` | Endpoints, contract |

---

## üéØ GIAI ƒêO·∫†N 3 ‚Äî TRI·ªÇN KHAI

### M·ª•c ti√™u
L·∫•y th√†nh qu·∫£ giai ƒëo·∫°n 2 ƒë·ªÉ x√¢y d·ª±ng th·ª±c t·∫ø. Spec-driven, t√≠ch h·ª£p AI code generation.

### Checklist c√¥ng vi·ªác

```
‚ñ° 3.1 Setup m√¥i tr∆∞·ªùng
   ‚ñ° Init Next.js + Payload
   ‚ñ° Configure MongoDB Atlas
   ‚ñ° Setup Vercel project
   ‚ñ° TypeScript, ESLint, Prettier
‚ñ° 3.2 X√¢y d·ª±ng ki·∫øn tr√∫c d·ª± √°n
   ‚ñ° C·∫•u tr√∫c th∆∞ m·ª•c theo template Next.js
   ‚ñ° App Router, layouts, route groups
‚ñ° 3.3 X√°c ƒë·ªãnh th∆∞ vi·ªán & dependencies
   ‚ñ° package.json, lockfile
   ‚ñ° Shadcn UI, Tailwind, ‚Ä¶
‚ñ° 3.4 X√¢y d·ª±ng theo spec
   ‚ñ° Tham chi·∫øu Docs/life-2/specs/
   ‚ñ° AI agent ƒë·ªçc spec ‚Üí t·∫°o sinh code
‚ñ° 3.5 Test ‚áÑ AI agent
   ‚ñ° Unit tests, integration tests
   ‚ñ° AI h·ªó tr·ª£ vi·∫øt test, debug
```

### Deliverables & Ki·∫øn tr√∫c th∆∞ m·ª•c

```
Docs/life-3/
‚îú‚îÄ‚îÄ setup/
‚îÇ   ‚îú‚îÄ‚îÄ env-setup.md           # Bi·∫øn m√¥i tr∆∞·ªùng, secrets
‚îÇ   ‚îî‚îÄ‚îÄ deployment-guide.md
‚îú‚îÄ‚îÄ architecture/
‚îÇ   ‚îú‚îÄ‚îÄ folder-structure.md    # C·∫•u tr√∫c th∆∞ m·ª•c d·ª± √°n th·ª±c t·∫ø
‚îÇ   ‚îî‚îÄ‚îÄ tech-choices.md        # L√Ω do ch·ªçn th∆∞ vi·ªán
‚îú‚îÄ‚îÄ sprint-logs/               # Ghi ch√∫ t·ª´ng sprint (optional)
‚îÇ   ‚îú‚îÄ‚îÄ sprint-1.md
‚îÇ   ‚îî‚îÄ‚îÄ sprint-2.md
‚îî‚îÄ‚îÄ ai-prompt-refs/            # Prompt tham chi·∫øu cho AI agent
    ‚îú‚îÄ‚îÄ auth-implementation.md
    ‚îú‚îÄ‚îÄ post-crud.md
    ‚îî‚îÄ‚îÄ ...
```

### Spec-driven flow (cho AI agent)

```
Docs/life-2/specs/*.md  ‚Üí  ƒê·ªçc b·ªüi AI  ‚Üí  Sinh code  ‚Üí  src/
                                                ‚Üì
                                          Test ‚Üê‚Üí Fix
```

---

## üéØ GIAI ƒêO·∫†N 4 ‚Äî VERIFY

### M·ª•c ti√™u
Ki·ªÉm ch·ª©ng k·∫øt qu·∫£, ch·∫•t l∆∞·ª£ng, ƒë·ªëi chi·∫øu v·ªõi y√™u c·∫ßu ban ƒë·∫ßu.

### Checklist c√¥ng vi·ªác

```
‚ñ° 4.1 ƒê·ªëi chi·∫øu v·ªõi spec
   ‚ñ° T·∫•t c·∫£ requirements ƒë√£ implement?
   ‚ñ° Database schema kh·ªõp thi·∫øt k·∫ø?
‚ñ° 4.2 Ki·ªÉm th·ª≠ ch·ª©c nƒÉng
   ‚ñ° E2E, smoke tests
   ‚ñ° Performance benchmarks
‚ñ° 4.3 T√†i li·ªáu v·∫≠n h√†nh
   ‚ñ° README, h∆∞·ªõng d·∫´n deploy
   ‚ñ° Runbook (n·∫øu c·∫ßn)
‚ñ° 4.4 Sign-off & Archive
   ‚ñ° L∆∞u quy·∫øt ƒë·ªãnh, lessons learned
```

### Deliverables & Ki·∫øn tr√∫c th∆∞ m·ª•c

```
Docs/life-4/
‚îú‚îÄ‚îÄ verification/
‚îÇ   ‚îú‚îÄ‚îÄ spec-coverage.md       # ƒê·ªëi chi·∫øu spec vs implementation
‚îÇ   ‚îî‚îÄ‚îÄ test-report.md
‚îú‚îÄ‚îÄ release/
‚îÇ   ‚îú‚îÄ‚îÄ release-notes.md
‚îÇ   ‚îî‚îÄ‚îÄ deployment-checklist.md
‚îî‚îÄ‚îÄ archive/
    ‚îú‚îÄ‚îÄ lessons-learned.md
    ‚îî‚îÄ‚îÄ decisions-log.md       # L·ªãch s·ª≠ quy·∫øt ƒë·ªãnh
```

---

## üå≤ C√ÇY TH∆Ø M·ª§C T·ªîNG TH·ªÇ D·ª∞ KI·∫æN

```
Docs/
‚îú‚îÄ‚îÄ life-1/                    # Giai ƒëo·∫°n 1: ƒê·ªãnh h∆∞·ªõng
‚îÇ   ‚îú‚îÄ‚îÄ 01-vision/
‚îÇ   ‚îú‚îÄ‚îÄ 02-decisions/
‚îÇ   ‚îî‚îÄ‚îÄ 03-research/
‚îú‚îÄ‚îÄ life-2/                    # Giai ƒëo·∫°n 2: Ph√¢n t√≠ch Thi·∫øt k·∫ø
‚îÇ   ‚îú‚îÄ‚îÄ diagrams/
‚îÇ   ‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îî‚îÄ‚îÄ specs/
‚îú‚îÄ‚îÄ life-3/                    # Giai ƒëo·∫°n 3: Tri·ªÉn khai
‚îÇ   ‚îú‚îÄ‚îÄ setup/
‚îÇ   ‚îú‚îÄ‚îÄ architecture/
‚îÇ   ‚îú‚îÄ‚îÄ sprint-logs/
‚îÇ   ‚îî‚îÄ‚îÄ ai-prompt-refs/
‚îî‚îÄ‚îÄ life-4/                    # Giai ƒëo·∫°n 4: Verify
    ‚îú‚îÄ‚îÄ verification/
    ‚îú‚îÄ‚îÄ release/
    ‚îî‚îÄ‚îÄ archive/
```

---

## ‚úÖ Success Criteria

- [x] M·ªói giai ƒëo·∫°n c√≥ checklist c√≥ th·ªÉ tick
- [x] M·ªói lo·∫°i t√†i li·ªáu c√≥ ƒë∆∞·ªùng d·∫´n file r√µ r√†ng
- [x] AI agent c√≥ th·ªÉ ƒë·ªçc spec t·ª´ `Docs/life-2/specs/` ƒë·ªÉ sinh code
- [x] NotebookLM ƒë∆∞·ª£c d√πng khi c·∫ßn tham kh·∫£o SDLC, ki·∫øn tr√∫c Next.js

### Verification (2026-02-01)

| Ki·ªÉm tra | Tr·∫°ng th√°i |
|----------|------------|
| Th∆∞ m·ª•c life-1/01-vision, 02-decisions, 03-research | ‚úì |
| Th∆∞ m·ª•c life-2/diagrams, database, ui, api, specs | ‚úì |
| Th∆∞ m·ª•c life-3/setup, architecture, sprint-logs, ai-prompt-refs | ‚úì |
| Th∆∞ m·ª•c life-4/verification, release, archive | ‚úì |
| Template files c√≥ header v√† instructions | ‚úì |
| Cross-check v·ªõi artkitacture.md, arhitacture-V2.md | ‚úì |

### Consistency v·ªõi artkitacture & arhitacture-V2

- **Tech stack:** Next.js 15/16, Payload, MongoDB, Tailwind, Shadcn, Local Storage, SSE, Atlas Search ‚Äî kh·ªõp
- **User personas:** Developer, Student, Tech learner ‚Äî kh·ªõp
- **10 MVP features:** Auth, Profile, Posts, Feed, Interactions, Bookmark, Search, Notifications, Moderation, Privacy ‚Äî kh·ªõp
- **News Feed algorithm:** Time-decay + Engagement (Option C) ‚Äî kh·ªõp arhitacture-V2
- **Technical decisions:** Realtime=SSE, Storage=Vercel Blob, Queue=Kh√¥ng ‚Äî kh·ªõp

---

*C·∫≠p nh·∫≠t: 2026-02-01*

```

### life-1/arhitacture-V2.md
```md
---                                                                                      
  üîÑ C·∫¨P NH·∫¨T: ROADMAP ƒêI·ªÄU CH·ªàNH CHO D·ª∞ √ÅN DEMO                                           
                                                                                           
  D·ª±a tr√™n c√¢u tr·∫£ l·ªùi c·ªßa b·∫°n, ƒë√¢y l√† roadmap th·ª±c t·∫ø cho d·ª± √°n:                          
                                                                                           
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          
  ‚îÇ                    TECH STACK ƒê√É X√ÅC ƒê·ªäNH                                   ‚îÇ          
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§          
  ‚îÇ Frontend:    Next.js 16 + React 19 + TypeScript                             ‚îÇ           
  ‚îÇ Backend:     Payload CMS 3.x                                                ‚îÇ          
  ‚îÇ Database:    MongoDB Atlas                                                  ‚îÇ          
  ‚îÇ Styling:     Tailwind CSS + Shadcn UI                                       ‚îÇ          
  ‚îÇ Storage:     Local Server Storage (Disk)                   ‚îÇ          
  ‚îÇ Realtime:    SSE (Server-Sent Events)                                       ‚îÇ          
  ‚îÇ Search:      MongoDB Atlas Search                                           ‚îÇ          
  ‚îÇ Hosting:     Vercel                                                         ‚îÇ          
  ‚îÇ CI/CD:       Vercel Auto-Deploy                                             ‚îÇ          
  ‚îÇ Monitoring:  Vercel Analytics                                               ‚îÇ          
  ‚îÇ Queue:       Kh√¥ng (x·ª≠ l√Ω ƒë·ªìng b·ªô trong MVP)                                ‚îÇ          
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          
                                                                                           
  ---                                                                                      
  üìã GIAI ƒêO·∫†N 1 ƒêI·ªÄU CH·ªàNH - X√ÅC ƒê·ªäNH Y√äU C·∫¶U (CHO D·ª∞ √ÅN DEMO)                            
                                                                                           
  ‚úÖ Checklist c√¥ng vi·ªác (ƒê√£ lo·∫°i b·ªè nghi√™n c·ª©u th·ªã tr∆∞·ªùng)                                
                                                                                           
  GIAI ƒêO·∫†N 1: X√ÅC ƒê·ªäNH Y√äU C·∫¶U (Simplified for Demo)                                      
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê                          
                                                                                           
  ‚úì 1.1 Nghi√™n c·ª©u & Ph√¢n t√≠ch ‚Üí B·ªé QUA (d·ª± √°n demo)                                       
                                                                                           
  ‚ñ° 1.2 X√°c ƒë·ªãnh ng∆∞·ªùi d√πng m·ª•c ti√™u                                                       
     ‚ñ° T·∫°o 2-3 User Personas ƒë∆°n gi·∫£n:                                                     
        - Developer (junior/senior)                                                        
        - Student (CNTT)                                                                   
        - Tech enthusiast                                                                  
     ‚ñ° X√°c ƒë·ªãnh pain points: n∆°i chia s·∫ª ki·∫øn th·ª©c tech Vi·ªát Nam c√≤n thi·∫øu                 
                                                                                           
  ‚ñ° 1.3 X√¢y d·ª±ng User Stories (Focus MVP)                                                  
     ‚ñ° Epic 1: Authentication (Email/Password + OAuth Google)                              
     ‚ñ° Epic 2: Profile Management (Avatar, Bio, Social links)                              
     ‚ñ° Epic 3: Content Creation (Text + Image + Link)                                      
     ‚ñ° Epic 4: Social Bookmarking v·ªõi Collections                                          
     ‚ñ° Epic 5: News Feed v·ªõi ranking algorithm                                             
     ‚ñ° Epic 6: Interactions (Like, Comment, Share)                                         
     ‚ñ° Epic 7: Search (Users, Posts, Tags)                                                 
     ‚ñ° Epic 8: Realtime Notifications (SSE)                                                
     ‚ñ° Epic 9: Moderation (Auto-approve + Report system)                                   
     ‚ñ° Epic 10: Privacy & Connections                                                      
                                                                                           
  ‚ñ° 1.4 NGHI√äN C·ª®U K·ª∏ THU·∫¨T (M·ªõi th√™m - quan tr·ªçng!)                                       
     ‚ñ° Nghi√™n c·ª©u News Feed Ranking Algorithm:                                             
        - Reddit's hot ranking                                                             
        - Hacker News algorithm                                                            
        - Time-decay + engagement score                                                    
        - Ch·ªçn 1 thu·∫≠t to√°n ph√π h·ª£p ƒë·ªÉ implement                                           
                                                                                           
     ‚ñ° Nghi√™n c·ª©u SSE implementation v·ªõi Next.js:                                          
        - Route Handlers cho SSE                                                           
        - Client-side EventSource                                                          
        - Reconnection strategy                                                            
                                                                                           
     ‚ñ° Nghi√™n c·ª©u MongoDB Atlas Search:                                                    
        - Full-text search indexes                                                         
        - Autocomplete                                                                     
        - Faceted search                                                                   
                                                                                           
  ‚ñ° 1.5 ƒê·∫∑c t·∫£ y√™u c·∫ßu chi ti·∫øt                                                            
     ‚ñ° Functional Requirements cho 10 MVP features                                         
     ‚ñ° Non-functional Requirements:                                                        
        - Performance: Page load < 3s                                                      
        - Search response < 500ms                                                          
        - SSE latency < 1s                                                                 
     ‚ñ° Database Schema design (chi ti·∫øt 9 collections)                                     
     ‚ñ° API Endpoints specification                                                         
                                                                                           
  ‚ñ° 1.6 Setup m√¥i tr∆∞·ªùng ph√°t tri·ªÉn                                                        
     ‚ñ° Init Next.js 15 project v·ªõi App Router                                              
     ‚ñ° Setup Payload CMS local                                                             
     ‚ñ° Configure MongoDB Atlas (free tier)                                                 
     ‚ñ° Setup Vercel project                                                                
     ‚ñ° Configure TypeScript + ESLint + Prettier                                            
                                                                                           
  ---                                                                                      
  üéØ C√ÅC QUY·∫æT ƒê·ªäNH ƒê√É X√ÅC ƒê·ªäNH                                                            
  C√¢u h·ªèi: Target Users                                                                    
  Quy·∫øt ƒë·ªãnh: Developer, Sinh vi√™n CNTT, Tech learners                                     
  Notes: Content-centric community                                                         
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                                 
  C√¢u h·ªèi: Monetization                                                                    
  Quy·∫øt ƒë·ªãnh: Kh√¥ng                                                                        
  Notes: D·ª± √°n demo                                                                        
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                                 
  C√¢u h·ªèi: Content Types                                                                   
  Quy·∫øt ƒë·ªãnh: Text + Image + Link sharing                                                  
  Notes: Kh√¥ng video trong MVP                                                             
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                                 
  C√¢u h·ªèi: Bookmarking                                                                     
  Quy·∫øt ƒë·ªãnh: ‚úÖ Collections/Folders                                                       
  Notes: Core feature                                                                      
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                                 
  C√¢u h·ªèi: Realtime                                                                        
  Quy·∫øt ƒë·ªãnh: ‚úÖ SSE                                                                       
  Notes: Notifications + Live updates                                                      
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                                 
  C√¢u h·ªèi: Moderation                                                                      
  Quy·∫øt ƒë·ªãnh: Auto-approve + Report system                                                 
  Notes: Human admin review reports                                                        
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                                 
  C√¢u h·ªèi: News Feed                                                                       
  Quy·∫øt ƒë·ªãnh: Ranking algorithm                                                            
  Notes: C·∫ßn nghi√™n c·ª©u th√™m                                                               
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                                 
  C√¢u h·ªèi: File Storage                                                                    
  Quy·∫øt ƒë·ªãnh: Local Server Storage                                                         
  Notes: L∆∞u tr·ªØ tr·ª±c ti·∫øp trong th∆∞ m·ª•c d·ª± √°n (public/media)                              
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                                 
  C√¢u h·ªèi: Search                                                                          
  Quy·∫øt ƒë·ªãnh: MongoDB Atlas Search                                                         
  Notes:                                                                                   
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                                 
  C√¢u h·ªèi: Queue System                                                                    
  Quy·∫øt ƒë·ªãnh: ‚ùå Kh√¥ng (ƒë·ªìng b·ªô)                                                           
  Notes: ƒê∆°n gi·∫£n h√≥a MVP                                                                  
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                                 
  C√¢u h·ªèi: Hosting                                                                         
  Quy·∫øt ƒë·ªãnh: Vercel                                                                       
  Notes: Auto-deploy                                                                       
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                                 
  C√¢u h·ªèi: Database                                                                        
  Quy·∫øt ƒë·ªãnh: MongoDB Atlas                                                                
  Notes: Free tier 512MB                                                                   
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                                                 
  C√¢u h·ªèi: Monitoring                                                                      
  Quy·∫øt ƒë·ªãnh: Vercel Analytics                                                             
  Notes:                                                                                   
  ---                                                                                      
  üî¨ RESEARCH TASKS - ∆ØU TI√äN CAO                                                          
                                                                                           
  ƒê√¢y l√† c√°c task nghi√™n c·ª©u k·ªπ thu·∫≠t c·∫ßn l√†m TR∆Ø·ªöC KHI CODE:                              
                                                                                           
  1Ô∏è‚É£ News Feed Ranking Algorithm (QUAN TR·ªåNG!)                                             
                                                                                           
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                      
  ‚îÇ          C√ÅC THU·∫¨T TO√ÅN RANKING PH·ªî BI·∫æN                        ‚îÇ                      
  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                      
  ‚îÇ                                                                 ‚îÇ                      
  ‚îÇ A) REDDIT "HOT" ALGORITHM                                       ‚îÇ                      
  ‚îÇ    score = log(upvotes) + (age_in_hours / 12.5)                ‚îÇ                       
  ‚îÇ    Pros: ƒê∆°n gi·∫£n, balance viral + fresh                       ‚îÇ                       
  ‚îÇ    Cons: C·∫ßn nhi·ªÅu engagement data                             ‚îÇ                       
  ‚îÇ                                                                 ‚îÇ                      
  ‚îÇ B) HACKER NEWS ALGORITHM                                        ‚îÇ                      
  ‚îÇ    score = (points - 1) / (age_in_hours + 2)^1.8              ‚îÇ                        
  ‚îÇ    Pros: Decay nhanh, ∆∞u ti√™n fresh content                    ‚îÇ                       
  ‚îÇ    Cons: Old viral posts bi·∫øn m·∫•t nhanh                        ‚îÇ                       
  ‚îÇ                                                                 ‚îÇ                      
  ‚îÇ C) TIME-DECAY + ENGAGEMENT (SIMPLE)                            ‚îÇ                       
  ‚îÇ    score = (likes + comments*2 + shares*3) / age_weight       ‚îÇ                        
  ‚îÇ    age_weight = 1 + (hours_since_post / 24)                   ‚îÇ                        
  ‚îÇ    Pros: D·ªÖ implement, customize ƒë∆∞·ª£c                          ‚îÇ                       
  ‚îÇ    Cons: C·∫ßn tune parameters                                   ‚îÇ                       
  ‚îÇ                                                                 ‚îÇ                      
  ‚îÇ D) WILSON SCORE (BAYESIAN)                                     ‚îÇ                       
  ‚îÇ    D√πng cho rating systems                                      ‚îÇ                      
  ‚îÇ    Pros: Statistically sound                                   ‚îÇ                       
  ‚îÇ    Cons: Ph·ª©c t·∫°p cho MVP                                      ‚îÇ                       
  ‚îÇ                                                                 ‚îÇ                      
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                      
                                                                                           
  ƒê·ªÄ XU·∫§T CHO MVP: Option C (Time-decay + Engagement)                                      
  L√Ω do:                                                                                   
  - ƒê∆°n gi·∫£n implement                                                                     
  - Customize ƒë∆∞·ª£c weights                                                                 
  - Ph√π h·ª£p social network content-centric                                                 
                                                                                           
  Action items:                                                                            
  - Query NotebookLM v·ªÅ "News Feed ranking algorithm best practices"                       
  - Prototype 3 algorithms trong MongoDB Aggregation Pipeline                              
  - Benchmark performance v·ªõi 10k posts                                                    
  - Ch·ªçn 1 algorithm cho MVP                                                               
                                                                                           
  2Ô∏è‚É£ SSE v·ªõi Next.js 15 App Router                                                         
                                                                                           
  // C·∫ßn research:                                                                         
  // 1. Route Handler cho SSE endpoint                                                     
  // 2. ReadableStream implementation                                                      
  // 3. Client EventSource connection                                                      
  // 4. Reconnection logic                                                                 
  // 5. Error handling & fallback                                                          
                                                                                           
  Action items:                                                                            
  - ƒê·ªçc Next.js docs v·ªÅ Streaming                                                          
  - POC simple SSE notification                                                            
  - Test v·ªõi nhi·ªÅu concurrent connections                                                  
  - X·ª≠ l√Ω reconnection khi deploy                                                          
                                                                                           
  3Ô∏è‚É£ MongoDB Atlas Search Setup                                                            
                                                                                           
  // C·∫ßn research:                                                                         
  // 1. Atlas Search index creation                                                        
  // 2. $search aggregation stage                                                          
  // 3. Autocomplete configuration                                                         
  // 4. Highlighting search results                                                        
                                                                                           
  Action items:                                                                            
  - T·∫°o free Atlas cluster                                                                 
  - Setup search index cho posts collection                                                
  - Test full-text search performance                                                      
  - Implement autocomplete                                                                 
                                                                                           
  ---                                                                                      
  üìä MVP FEATURES - ∆ØU TI√äN L·∫†I                                                            
                                                                                           
  D·ª±a tr√™n quy·∫øt ƒë·ªãnh m·ªõi, ƒë√¢y l√† th·ª© t·ª± ∆∞u ti√™n:                                          
                                                                                           
  SPRINT 1 (Core Foundation)                                                               
  ‚îú‚îÄ 1. Authentication (Email + OAuth Google)                                              
  ‚îú‚îÄ 2. User Profile (Avatar, Bio)                                                         
  ‚îî‚îÄ Setup: MongoDB, Local Storage, Basic UI                                                 
                                                                                           
  SPRINT 2 (Content Creation)                                                              
  ‚îú‚îÄ 4. Post Creation (Text + Image + Link)                                                
  ‚îú‚îÄ 5. Interactions (Like, Comment)                                                       
  ‚îî‚îÄ 9b. Bookmarking (Save + Collections) ‚Üê CORE FEATURE                                   
                                                                                           
  SPRINT 3 (Discovery)                                                                     
  ‚îú‚îÄ 3. News Feed (Ranking Algorithm) ‚Üê RESEARCH NEEDED                                    
  ‚îú‚îÄ 9. Search (MongoDB Atlas Search)                                                      
  ‚îî‚îÄ 6. Connections (Follow/Unfollow)                                                      
                                                                                           
  SPRINT 4 (Engagement)                                                                    
  ‚îú‚îÄ 7. Notifications (SSE) ‚Üê RESEARCH NEEDED                                              
  ‚îú‚îÄ 8. Moderation (Report system)                                                         
  ‚îî‚îÄ 10. Privacy Settings                                                                  
                                                                                           
  ---                                                                                      
  üöÄ NEXT IMMEDIATE ACTIONS                                                                
                                                                                           
  ƒê·ªÉ ti·∫øn h√†nh ngay, b·∫°n c·∫ßn:                                                              
                                                                                           
  Tu·∫ßn n√†y (Giai ƒëo·∫°n 1):                                                                  
                                                                                           
  1. Nghi√™n c·ª©u News Feed Algorithm (1-2 ng√†y)                                             
    - D√πng NotebookLM query th√™m                                                           
    - ƒê·ªçc case studies: Reddit, HN, DEV.to                                                 
    - Ch·ªçn 1 algorithm + l√Ω do                                                             
  2. T·∫°o User Personas (0.5 ng√†y)                                                          
    - Developer persona                                                                    
    - Student persona                                                                      
    - Tech learner persona                                                                 
  3. Vi·∫øt User Stories chi ti·∫øt (1 ng√†y)                                                   
    - Break down 10 epics th√†nh stories                                                    
    - V·ªõi Acceptance Criteria c·ª• th·ªÉ                                                       
  4. Design Database Schema (1 ng√†y)                                                       
    - Chi ti·∫øt 9 collections                                                               
    - Indexes cho performance                                                              
    - Relationships                                                                        
  5. Setup Project (0.5 ng√†y)                                                              
    - Init Next.js + Payload                                                               
    - Configure MongoDB Atlas                                                              
    - Setup Vercel project                                                                 
                                                                                           
  ---
```

### life-1/03-research/sse-nextjs.md
```md
### T√≠ch H·ª£p SSE cho Realtime Notifications trong M·∫°ng X√£ H·ªôi

#### 1. Full Prototype Code

##### **Server-side: Route Handler cho SSE (app/api/notifications/route.ts)**

Endpoint n√†y stream events t·ª´ server. T√≠ch h·ª£p Payload CMS qua global event emitter (ho·∫∑c Redis cho scale, nh∆∞ g·ª£i √Ω tr√™n X). S·ª≠ d·ª•ng JWT ƒë·ªÉ auth (gi·∫£ s·ª≠ b·∫°n d√πng Payload auth).

```typescript
// app/api/notifications/route.ts
import { NextRequest, NextResponse } from 'next/server';
import { verifyJwt } from '@/lib/auth'; // Gi·∫£ s·ª≠ h√†m verify JWT t·ª´ Payload
import { EventEmitter } from 'events';

// Global event emitter (thay b·∫±ng Redis pub/sub cho production)
const notificationEmitter = new EventEmitter();

export async function GET(request: NextRequest) {
  const token = request.headers.get('authorization')?.split(' ')[1];
  if (!token || !verifyJwt(token)) {
    return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
  }

  const headers = {
    'Content-Type': 'text/event-stream',
    'Cache-Control': 'no-cache',
    'Connection': 'keep-alive',
  };

  const stream = new ReadableStream({
    start(controller) {
      // Listener cho events t·ª´ Payload hooks
      const sendNotification = (data: any) => {
        const eventData = `data: ${JSON.stringify(data)}\n\n`;
        controller.enqueue(eventData);
      };

      notificationEmitter.on('notification', sendNotification);

      // Heartbeat ƒë·ªÉ gi·ªØ k·∫øt n·ªëi (m·ªói 30s, tr√°nh timeout)
      const heartbeatInterval = setInterval(() => {
        controller.enqueue(':\n\n'); // Comment line ƒë·ªÉ heartbeat
      }, 30000);

      // Cleanup khi client disconnect
      request.signal.addEventListener('abort', () => {
        notificationEmitter.off('notification', sendNotification);
        clearInterval(heartbeatInterval);
        controller.close();
      });
    },
  });

  return new NextResponse(stream, { headers });
}

// H√†m trigger t·ª´ Payload hooks (g·ªçi khi c√≥ event m·ªõi)
export function triggerNotification(userId: string, data: { type: string; message: string }) {
  notificationEmitter.emit('notification', { userId, ...data });
}
```

##### **T√≠ch H·ª£p Payload CMS Hooks (payload.config.ts ho·∫∑c collection hooks)**

Trong collection nh∆∞ `Posts` ho·∫∑c `Notifications`, d√πng afterChange hook ƒë·ªÉ trigger SSE khi c√≥ like/comment.

```typescript
// collections/Posts.ts (Payload collection config)
import { CollectionConfig } from 'payload/types';
import { triggerNotification } from '@/app/api/notifications/route';

const Posts: CollectionConfig = {
  slug: 'posts',
  hooks: {
    afterChange: [
      async ({ doc, operation, previousDoc }) => {
        if (operation === 'update') {
          // Ki·ªÉm tra n·∫øu c√≥ like/comment m·ªõi
          if (doc.likesCount > (previousDoc?.likesCount || 0)) {
            triggerNotification(doc.author.id, { type: 'like', message: 'B√†i vi·∫øt c·ªßa b·∫°n ƒë∆∞·ª£c like!' });
          }
          // T∆∞∆°ng t·ª± cho comment, share
        }
        return doc;
      },
    ],
  },
  fields: [
    // C√°c fields kh√°c...
  ],
};

export default Posts;
```

##### **Client-side: Component React (components/Notifications.tsx)**

K·∫øt n·ªëi SSE v·ªõi EventSource, x·ª≠ l√Ω reconnection v√† display notifications.

```tsx
// components/Notifications.tsx
'use client';

import { useEffect, useState } from 'react';
import { useSession } from 'next-auth/react'; // Gi·∫£ s·ª≠ d√πng NextAuth cho auth

export default function Notifications() {
  const { data: session } = useSession();
  const [messages, setMessages] = useState<{ type: string; message: string }[]>([]);
  const [eventSource, setEventSource] = useState<EventSource | null>(null);

  useEffect(() => {
    if (!session?.user?.id) return;

    const es = new EventSource('/api/notifications', {
      withCredentials: true, // N·∫øu c·∫ßn cookie auth
    });

    es.onmessage = (event) => {
      const data = JSON.parse(event.data);
      if (data.userId === session.user.id) {
        setMessages((prev) => [...prev, data]);
      }
    };

    es.onerror = (error) => {
      console.error('SSE error:', error);
      es.close();
      // Exponential backoff reconnection (t·ªëi ∆∞u t·ª´ AI suggestion)
      setTimeout(() => {
        setEventSource(new EventSource('/api/notifications'));
      }, 5000); // Retry sau 5s
    };

    setEventSource(es);

    return () => {
      es.close();
    };
  }, [session]);

  return (
    <div className="notifications-bell">
      <button>üîî {messages.length}</button>
      <ul>
        {messages.map((msg, i) => (
          <li key={i}>{`${msg.type}: ${msg.message}`}</li>
        ))}
      </ul>
    </div>
  );
}
```

**H∆∞·ªõng d·∫´n tri·ªÉn khai & AI t·ªëi ∆∞u**:

- Setup: Th√™m endpoint v√†o Next.js App Router, config Payload collection.
- Test: Ch·∫°y local v·ªõi `npm run dev`, trigger like ƒë·ªÉ xem notification push.
- AI: Prompt Claude "Refactor SSE code with Redis pub/sub for scaling" ƒë·ªÉ n√¢ng c·∫•p, gi·∫£m th·ªùi gian t·ª´ 2 gi·ªù xu·ªëng 20 ph√∫t. T·ª´ X, SSE ƒë∆∞·ª£c khen v√¨ compatibility v·ªõi HTTP/2 v√† d·ªÖ integrate.

#### 2. Sequence Diagram cho SSE Flow

D∆∞·ªõi ƒë√¢y l√† diagram sequence minh h·ªça lu·ªìng SSE t·ª´ client connect ƒë·∫øn receive event. T√¥i v·∫Ω b·∫±ng Mermaid (d·ªÖ copy-paste v√†o tools nh∆∞ Mermaid Live ƒë·ªÉ visualize). Lu·ªìng n√†y bao g·ªìm t√≠ch h·ª£p Payload hook, ph√π h·ª£p cho m·∫°ng x√£ h·ªôi n∆°i events nh∆∞ like trigger push.

```mermaid
sequenceDiagram
    participant Client as Client (Browser)
    participant Server as Next.js Server
    participant Payload as Payload CMS
    participant DB as MongoDB

    Client->>Server: GET /api/notifications (with JWT)
    Server->>Server: Verify auth
    Server-->>Client: 200 OK (text/event-stream)
    Note over Client,Server: K·∫øt n·ªëi SSE m·ªü (keep-alive)

    alt C√≥ event m·ªõi (e.g., like post)
        Client->>Server: POST /api/like (action trigger)
        Server->>Payload: Update post (likesCount++)
        Payload->>DB: Save changes
        Payload->>Server: afterChange hook ‚Üí triggerNotification()
        Server->>Server: Emit event via EventEmitter/Redis
        Server-->>Client: Stream data: {type: 'like', message: '...'}
        Client->>Client: Update UI (add notification)
    end

    alt Disconnect
        Client->>Server: Abort signal
        Server->>Server: Cleanup listeners
    end

    alt Reconnect (error)
        Client->>Client: onerror ‚Üí close & retry (5s)
        Client->>Server: Re-GET /api/notifications
    end
```

**Gi·∫£i th√≠ch diagram**:

- **Lu·ªìng ch√≠nh**: Client connect SSE, server gi·ªØ k·∫øt n·ªëi. Khi c√≥ action (like), Payload hook trigger event, server stream data.
- **Reconnection**: Built-in, v·ªõi backoff ƒë·ªÉ reliable.
- **·ª®ng d·ª•ng AI**: Prompt AI "Generate Mermaid sequence diagram for SSE flow in Next.js with Payload" ƒë·ªÉ t·∫°o diagram nhanh, gi·∫£m th·ªùi gian design t·ª´ 30 ph√∫t xu·ªëng 5 ph√∫t.

N·∫øu c·∫ßn test prototype (d√πng code_execution ƒë·ªÉ run code), m·ªü r·ªông v·ªõi Redis, ho·∫∑c research s√¢u h∆°n tr√™n X (v√≠ d·ª•: SSE vs SignalR nh∆∞ trong .NET discussions), h√£y cho t√¥i bi·∫øt ƒë·ªÉ h·ªó tr·ª£ th√™m!

```

### life-1/03-research/news-feed-algorithm.md
```md
# News Feed Ranking Algorithm Research

> **M·ª•c ƒë√≠ch:** Document nghi√™n c·ª©u thu·∫≠t to√°n ranking cho News Feed  
> **Ngu·ªìn:** NotebookLM research, arhitacture-V2.md  
> **Query NotebookLM:** `python3 scripts/run.py ask_question.py --question "News Feed ranking algorithm" --notebook-url "[URL]"`  

---

## C√°c thu·∫≠t to√°n ph·ªï bi·∫øn

### C) Time-decay + Engagement (Simple)
- `score = (likes + comments*2 + shares*3) / age_weight`
- `age_weight = 1 + (hours_since_post / 24)`
- Pros: D·ªÖ implement, customize ƒë∆∞·ª£c
- Cons: C·∫ßn tune parameters

## Thu·∫≠t to√°n ƒë√£ ch·ªçn

**ƒê·ªÅ xu·∫•t: Option C (Time-decay + Engagement)**

L√Ω do:
- ƒê∆°n gi·∫£n implement
- Customize ƒë∆∞·ª£c weights (like=1, comment=2, share=3)
- Ph√π h·ª£p social network content-centric
- C√≥ th·ªÉ tune age_weight theo th·ªùi gian (24h, 48h, ...)

## Implementation notes

- **Engagement score:** `likesCount + commentsCount*2 + sharesCount*3`
- **Age weight:** `1 + (hoursSincePost / 24)` ‚Äî tƒÉng d·∫ßn theo th·ªùi gian ‚Üí score c≈© gi·∫£m
- **Final score:** `engagementScore / ageWeight`
- **Sort:** `{ rankingScore: -1, createdAt: -1 }`
- **Precompute:** C·∫≠p nh·∫≠t `rankingScore` khi c√≥ like/comment/share (ho·∫∑c cron job)

```

### life-1/01-vision/user-stories.md
```md
# User Stories

> **M·ª•c ƒë√≠ch:** Epic + User Stories cho 10 MVP features
> **Format:** As a [user], I want [feature], so that [benefit]

---

## Epic 1: Authentication

- **US-1.1:** As a user, I want ƒëƒÉng k√Ω b·∫±ng email/password ƒë·ªÉ t·∫°o t√†i kho·∫£n
- **US-1.3:** As a user, I want ƒëƒÉng xu·∫•t ƒë·ªÉ b·∫£o m·∫≠t khi d√πng chung thi·∫øt b·ªã

## Epic 2: Profile Management

- **US-2.1:** As a user, I want upload avatar v√† c·∫≠p nh·∫≠t bio ƒë·ªÉ th·ªÉ hi·ªán b·∫£n th√¢n
- **US-2.2:** As a user, I want th√™m link m·∫°ng x√£ h·ªôi (GitHub, LinkedIn) v√†o profile
- **US-2.3:** As a user, I want xem profile ng∆∞·ªùi kh√°c v√† danh s√°ch b√†i vi·∫øt c·ªßa h·ªç

## Epic 3: Content Creation (Posts)

- **US-3.1:** As a user, I want t·∫°o b√†i vi·∫øt text + image + link ƒë·ªÉ chia s·∫ª
- **US-3.2:** As a user, I want th√™m tags cho b√†i vi·∫øt ƒë·ªÉ d·ªÖ t√¨m ki·∫øm
- **US-3.3:** As a user, I want s·ª≠a/x√≥a b√†i vi·∫øt c·ªßa m√¨nh

## Epic 4: Social Bookmarking

- **US-4.1:** As a user, I want l∆∞u b√†i vi·∫øt v√†o collection ƒë·ªÉ ƒë·ªçc sau
- **US-4.2:** As a user, I want t·∫°o nhi·ªÅu collections (VD: React, Database) ƒë·ªÉ t·ªï ch·ª©c
- **US-4.3:** As a user, I want xem danh s√°ch bookmarks v√† b·ªè l∆∞u

## Epic 5: News Feed

- **US-5.1:** As a user, I want xem feed b√†i vi·∫øt t·ª´ ng∆∞·ªùi m√¨nh follow, s·∫Øp x·∫øp theo ranking
- **US-5.2:** As a user, I want ph√¢n trang (cursor/pagination) khi scroll
- **US-5.3:** As a user, I want feed ∆∞u ti√™n n·ªôi dung hot (engagement + recency)

## Epic 6: Interactions (Like, Comment, Share)

- **US-6.1:** As a user, I want like/unlike b√†i vi·∫øt
- **US-6.2:** As a user, I want comment v√† reply nested
- **US-6.3:** As a user, I want share b√†i vi·∫øt (copy link ho·∫∑c repost)

## Epic 7: Search

- **US-7.1:** As a user, I want t√¨m ki·∫øm users, posts, tags
- **US-7.2:** As a user, I want autocomplete khi g√µ search
- **US-7.3:** As a user, I want filter theo type (users/posts/tags)

## Epic 8: Notifications

- **US-8.1:** As a user, I want nh·∫≠n th√¥ng b√°o realtime (SSE) khi c√≥ like, comment, follow
- **US-8.2:** As a user, I want ƒë√°nh d·∫•u ƒë√£ ƒë·ªçc v√† xem danh s√°ch notifications

## Epic 9: Moderation

- **US-9.1:** As a user, I want report b√†i vi·∫øt/comment vi ph·∫°m
- **US-9.2:** As admin, I want xem reports v√† x·ª≠ l√Ω (x√≥a, c·∫£nh c√°o)
- **US-9.3:** B√†i m·ªõi auto-approve, ch·ªâ review khi c√≥ report

## Epic 10: Privacy & Connections

- **US-10.1:** As a user, I want follow/unfollow ng∆∞·ªùi kh√°c
- **US-10.2:** As a user, I want block user
- **US-10.3:** As a user, I want c√†i ƒë·∫∑t visibility profile (public/followers only)

```

### life-1/01-vision/product-vision.md
```md
# Product Vision

> **M·ª•c ƒë√≠ch:** T·∫ßm nh√¨n s·∫£n ph·∫©m, USP, target market  
> **Tham chi·∫øu:** artkitacture.md, arhitacture-V2.md  
> **Name website** Steve Void
---

## T·∫ßm nh√¨n (Vision)

X√¢y d·ª±ng **Website M·∫°ng X√£ H·ªôi Chia S·∫ª Ki·∫øn Th·ª©c** ‚Äî n·ªÅn t·∫£ng content-centric cho c·ªông ƒë·ªìng developer, sinh vi√™n CNTT v√† tech learners t·∫°i Vi·ªát Nam. S·∫£n ph·∫©m t·∫≠p trung v√†o vi·ªác chia s·∫ª b√†i vi·∫øt, bookmark c√≥ t·ªï ch·ª©c (collections), v√† feed ƒë∆∞·ª£c ranking th√¥ng minh.

## Target Users (Ng∆∞·ªùi d√πng m·ª•c ti√™u)

1. **Developer** (junior/senior) ‚Äî chia s·∫ª kinh nghi·ªám, tutorials, tips
2. **Sinh vi√™n CNTT** ‚Äî h·ªçc h·ªèi, l∆∞u b√†i h·ªØu √≠ch, k·∫øt n·ªëi
3. **Tech learner / enthusiast** ‚Äî theo d√µi xu h∆∞·ªõng, ƒë·ªçc n·ªôi dung ch·∫•t l∆∞·ª£ng

## USP (Unique Selling Point)

- **Content-centric + Social Bookmarking**: T·∫≠p trung v√†o b√†i vi·∫øt ch·∫•t l∆∞·ª£ng v·ªõi Collections/Folders ƒë·ªÉ t·ªï ch·ª©c l∆∞u tr·ªØ
- **Ranking algorithm**: Feed hi·ªÉn th·ªã n·ªôi dung ph√π h·ª£p (engagement + time-decay), kh√¥ng ch·ªâ timeline thu·∫ßn
- **C·ªông ƒë·ªìng tech Vi·ªát**: N∆°i chia s·∫ª ki·∫øn th·ª©c tech ti·∫øng Vi·ªát, b·ªï sung cho c√°c n·ªÅn t·∫£ng qu·ªëc t·∫ø

## Ph·∫°m vi (Scope)

**MVP Scope:** Auth, Profile, Posts (text+image+link), News Feed (ranking), Interactions (like/comment/share), Bookmarking (collections), Search, Notifications (SSE), Moderation (report), Privacy & Connections.

**Out of scope (MVP):** Video, stories, messaging 1-1 (c√≥ th·ªÉ th√™m sau), monetization, mobile app native.

```

### life-1/01-vision/user-personas.md
```md
# User Personas

> **M·ª•c ƒë√≠ch:** 3‚Äì5 User Personas chi ti·∫øt  
> **Format:** Markdown + m√¥ t·∫£ demographics, goals, pain points  

---

## Persona 1: Developer (Minh)

### Demographics
- 25‚Äì35 tu·ªïi, l√†m dev 2‚Äì5 nƒÉm
- Stack: JavaScript/TypeScript, React, Node
- C·∫≠p nh·∫≠t c√¥ng ngh·ªá th∆∞·ªùng xuy√™n

### Goals
- Chia s·∫ª b√†i vi·∫øt k·ªπ thu·∫≠t, kinh nghi·ªám debug, best practices
- L∆∞u b√†i hay v√†o collections theo ch·ªß ƒë·ªÅ (React, Database, v.v.)
- K·∫øt n·ªëi v·ªõi dev kh√°c, h·ªçc h·ªèi t·ª´ c·ªông ƒë·ªìng

### Pain Points
- Facebook/LinkedIn qu√° nhi·ªÅu noise, kh√≥ t√¨m n·ªôi dung tech ch·∫•t l∆∞·ª£ng
- Viblo/Spiderum ch∆∞a c√≥ social bookmarking m·∫°nh v·ªõi collections
- C·∫ßn n∆°i vi·∫øt v√† ƒë·ªçc ti·∫øng Vi·ªát, d·ªÖ tra c·ª©u l·∫°i

---

## Persona 2: Student (Linh)

### Demographics
- 18‚Äì22 tu·ªïi, sinh vi√™n CNTT nƒÉm 2‚Äì4
- ƒêang h·ªçc web dev, data structure, algorithms
- C·∫ßn t√†i li·ªáu tham kh·∫£o cho ƒë·ªì √°n, √¥n thi

### Goals
- ƒê·ªçc b√†i h∆∞·ªõng d·∫´n t·ª´ dev c√≥ kinh nghi·ªám
- L∆∞u b√†i v√†o folders theo m√¥n h·ªçc (Frontend, Backend, v.v.)
- H·ªèi ƒë√°p, th·∫£o lu·∫≠n qua comments
- Theo d√µi ng∆∞·ªùi vi·∫øt hay ƒë·ªÉ c·∫≠p nh·∫≠t b√†i m·ªõi

### Pain Points
- T√†i li·ªáu r·∫£i r√°c, kh√≥ t·ªï ch·ª©c
- Stack Overflow ti·∫øng Anh ƒë√¥i khi kh√≥ hi·ªÉu
- C·∫ßn v√≠ d·ª• th·ª±c t·∫ø b·∫±ng ti·∫øng Vi·ªát

---

## Persona 3: Tech Learner (Tu·∫•n)

### Demographics
- 22‚Äì30 tu·ªïi, chuy·ªÉn ng√†nh ho·∫∑c t·ª± h·ªçc tech
- Quan t√¢m AI, cloud, DevOps
- H·ªçc part-time, ƒë·ªçc tr√™n mobile nhi·ªÅu

### Goals
- ƒê·ªçc b√†i t·ªïng h·ª£p, so s√°nh c√¥ng ngh·ªá (A vs B)
- Bookmark b√†i hay ƒë·ªÉ ƒë·ªçc l·∫°i khi r·∫£nh
- Theo d√µi trend, kh√¥ng b·ªè l·ª° b√†i viral

### Pain Points
- N·ªôi dung tech ti·∫øng Vi·ªát √≠t, ch·∫•t l∆∞·ª£ng kh√¥ng ƒë·ªìng ƒë·ªÅu
- C·∫ßn feed s·∫Øp x·∫øp theo ƒë·ªô hot/ relevance, kh√¥ng ch·ªâ m·ªõi nh·∫•t

```

### life-1/01-vision/FR/feature-map-and-priority.md
```md
# Map ch·ª©c nƒÉng theo b·∫≠c & Map ∆∞u ti√™n tri·ªÉn khai

> **V·ªã tr√≠ file:** `Docs/life-1/01-vision/FR/feature-map-and-priority.md`  
> **Ngu·ªìn:** B·∫£n ƒë·ªì ch·ª©c nƒÉng Content-centric SNS + `requirements-srs.md` + `arhitacture-V2.md`  
> **M·ª•c ƒë√≠ch:** Map ch·ª©c nƒÉng t·ª´ng b·∫≠c cho h·ªá th·ªëng; map ∆∞u ti√™n tri·ªÉn khai theo t·ª´ng b·∫≠c/sprint.

---

## 1. Map ch·ª©c nƒÉng theo t·ª´ng b·∫≠c

### B·∫≠c 0 ‚Äî H·ªá th·ªëng (System)

| Id   | T√™n                    | M√¥ t·∫£ ng·∫Øn |
|------|------------------------|------------|
| S0   | Content-centric SNS    | M·∫°ng x√£ h·ªôi chia s·∫ª ki·∫øn th·ª©c; tr·ªçng t√¢m Social Publishing + Social Bookmarking. |

---

### B·∫≠c 1 ‚Äî Module (6 nh√≥m ch·ª©c nƒÉng)

| Id   | Module                         | M√¥ t·∫£ ng·∫Øn | FR tham chi·∫øu |
|------|--------------------------------|------------|---------------|
| M1   | T√†i kho·∫£n & H·ªì s∆° (Auth & Profile) | Identity, ƒëƒÉng nh·∫≠p, profile | FR-1, FR-2 |
| M2   | N·ªôi dung (Content Engine)      | T·∫°o/qu·∫£n l√Ω b√†i vi·∫øt, rich text, tag | FR-3 |
| M3   | Kh√°m ph√° & Ph√¢n ph·ªëi (Discovery & Feed) | News feed, t√¨m ki·∫øm | FR-4, FR-7 |
| M4   | T∆∞∆°ng t√°c & C·ªông ƒë·ªìng (Engagement) | Like, comment, share, follow, block | FR-5, FR-10 |
| M5   | L∆∞u tr·ªØ ki·∫øn th·ª©c (Social Bookmarking) | Bookmark, collections | FR-6 |
| M6   | H·ªá th·ªëng & Th√¥ng b√°o (System & Notifications) | Realtime, ki·ªÉm duy·ªát | FR-8, FR-9 |

---

### B·∫≠c 2 ‚Äî Nh√≥m ch·ª©c nƒÉng (trong t·ª´ng Module)

| B·∫≠c 1 | Id (B·∫≠c 2) | Nh√≥m ch·ª©c nƒÉng           | M√¥ t·∫£ ng·∫Øn |
|-------|------------|--------------------------|------------|
| M1    | M1.1       | Authentication           | ƒêƒÉng k√Ω, ƒëƒÉng nh·∫≠p, OAuth, qu√™n/ƒë·ªïi m·∫≠t kh·∫©u |
| M1    | M1.2       | User Profile             | Avatar, b√¨a, bio, social links, dashboard c√° nh√¢n |
| M2    | M2.1       | Post Creation            | Rich text, ƒëa ph∆∞∆°ng ti·ªán, g·∫Øn th·∫ª (tag) |
| M2    | M2.2       | Post Management          | Ch·ªânh s·ª≠a, x√≥a, c√†i ƒë·∫∑t quy·ªÅn ri√™ng t∆∞ |
| M3    | M3.1       | News Feed                | Following feed, Trending/For You (ranking) |
| M3    | M3.2       | Search                   | Full-text (posts, authors, tags), autocomplete |
| M4    | M4.1       | T∆∞∆°ng t√°c c∆° b·∫£n         | Like/reaction, comment (nested), share |
| M4    | M4.2       | Connections              | Follow/unfollow, block |
| M5    | M5.1       | Bookmark                 | L∆∞u/b·ªè l∆∞u b√†i vi·∫øt |
| M5    | M5.2       | Collections              | T·∫°o th∆∞ m·ª•c, t·ªï ch·ª©c bookmark theo collection |
| M6    | M6.1       | Notifications            | Realtime (SSE), ƒë√°nh d·∫•u ƒë·ªçc, xem t·∫•t c·∫£ |
| M6    | M6.2       | Moderation               | B√°o c√°o, auto-approve, admin duy·ªát b√°o c√°o |

---

### B·∫≠c 3 ‚Äî Ch·ª©c nƒÉng chi ti·∫øt (map FR + Payload)

| B·∫≠c 2 | Id (B·∫≠c 3) | Ch·ª©c nƒÉng c·ª• th·ªÉ | FR | Collection / Ghi ch√∫ |
|-------|------------|-------------------|-----|----------------------|
| M1.1  | M1.1.1     | ƒêƒÉng nh·∫≠p Email/Password | FR-1 | Users (payload auth) |
| M1.1  | M1.1.2     | ƒêƒÉng nh·∫≠p Google (OAuth) | FR-1 | Users |
| M1.1  | M1.1.3     | Qu√™n m·∫≠t kh·∫©u / ƒê·ªïi m·∫≠t kh·∫©u | FR-1 | Users |
| M1.1  | M1.1.4     | Logout, refresh token | FR-1 | ‚Äî |
| M1.2  | M1.2.1     | ·∫¢nh ƒë·∫°i di·ªán & ·∫£nh b√¨a (Local Storage) | FR-2 | Users |
| M1.2  | M1.2.2     | Bio (ti·ªÉu s·ª≠) | FR-2 | Users |
| M1.2  | M1.2.3     | Li√™n k·∫øt x√£ h·ªôi (GitHub, LinkedIn, Portfolio) | FR-2 | Users |
| M1.2  | M1.2.4     | Dashboard c√° nh√¢n (danh s√°ch b√†i vi·∫øt, bookmark) | FR-2 | ‚Äî (query Posts, Bookmarks) |
| M1.2  | M1.2.5     | Xem profile public c·ªßa user kh√°c | FR-2 | Users (read) |
| M2.1  | M2.1.1     | Rich text (H1, H2, Bold, Italic, Code block) | FR-3 | Posts (content) |
| M2.1  | M2.1.2     | ƒêa ph∆∞∆°ng ti·ªán (·∫£nh, video, nh√∫ng link) | FR-3 | Posts |
| M2.1  | M2.1.3     | G·∫Øn th·∫ª (hashtag) | FR-3 | Posts (tags) |
| M2.2  | M2.2.1     | Ch·ªânh s·ª≠a / X√≥a b√†i vi·∫øt | FR-3 | Posts |
| M2.2  | M2.2.2     | Visibility: Public / Followers only | FR-3 | Posts (visibility) |
| M3.1  | M3.1.1     | Following Feed | FR-4 | Posts + Follows |
| M3.1  | M3.1.2     | Trending/For You Feed (time-decay + engagement) | FR-4 | Posts (rankingScore) |
| M3.1  | M3.1.3     | Pagination cursor-based | FR-4 | ‚Äî |
| M3.2  | M3.2.1     | Full-text search (posts, authors, tags) | FR-7 | MongoDB Atlas Search |
| M3.2  | M3.2.2     | Autocomplete | FR-7 | ‚Äî |
| M4.1  | M4.1.1     | Like/Unlike post | FR-5 | Posts (likesCount) / Likes |
| M4.1  | M4.1.2     | Comment, nested replies | FR-5 | Comments (parent_id) |
| M4.1  | M4.1.3     | Share (copy link / reshare) | FR-5 | ‚Äî |
| M4.2  | M4.2.1     | Follow/Unfollow | FR-10 | Follows |
| M4.2  | M4.2.2     | Block user | FR-10 | Blocks |
| M5.1  | M5.1.1     | L∆∞u b√†i vi·∫øt (Save/Unsave) | FR-6 | Bookmarks |
| M5.2  | M5.2.1     | T·∫°o/s·ª≠a/x√≥a collection (th∆∞ m·ª•c) | FR-6 | Bookmarks (collection_name) |
| M5.2  | M5.2.2     | List bookmarks theo collection | FR-6 | Bookmarks |
| M6.1  | M6.1.1     | Th√¥ng b√°o realtime (SSE): like, comment, follow | FR-8 | Notifications |
| M6.1  | M6.1.2     | ƒê√°nh d·∫•u ƒë√£ ƒë·ªçc / Xem t·∫•t c·∫£ | FR-8 | Notifications (is_read) |
| M6.2  | M6.2.1     | B√°o c√°o n·ªôi dung (report) | FR-9 | Reports (ho·∫∑c field trong Post/Comment) |
| M6.2  | M6.2.2     | Auto-approve n·ªôi dung m·ªõi | FR-9 | ‚Äî |
| M6.2  | M6.2.3     | Admin xem x√©t b√°o c√°o | FR-9 | ‚Äî |

---

## 2. Map ∆∞u ti√™n tri·ªÉn khai theo t·ª´ng b·∫≠c

### Nguy√™n t·∫Øc

- **B·∫≠c ∆∞u ti√™n** = Sprint (Sprint 1 ‚Üí Sprint 4).  
- Tri·ªÉn khai theo **ph·ª• thu·ªôc**: Auth & Profile tr∆∞·ªõc ‚Üí Content ‚Üí Discovery ‚Üí Engagement & Notifications.  
- M·ªói sprint g·∫Øn v·ªõi **Module (B·∫≠c 1)** v√† **nh√≥m ch·ª©c nƒÉng (B·∫≠c 2)** r√µ r√†ng.

---

### B·∫≠c ∆∞u ti√™n 1 ‚Äî Sprint 1 (N·ªÅn t·∫£ng)

| ∆Øu ti√™n | Module (B·∫≠c 1) | Nh√≥m (B·∫≠c 2) | Ch·ª©c nƒÉng ch√≠nh (B·∫≠c 3) | Collection Payload | Ghi ch√∫ |
|--------|----------------|--------------|--------------------------|---------------------|--------|
| P1     | M1             | M1.1, M1.2   | M1.1.1‚ÄìM1.1.4, M1.2.1‚ÄìM1.2.5 | Users               | Auth + Profile; Local storage setup. |

**Deliverable:** ƒêƒÉng k√Ω/ƒëƒÉng nh·∫≠p (email + OAuth Google), profile (avatar, bio, links), xem profile ng∆∞·ªùi kh√°c, dashboard c√° nh√¢n c∆° b·∫£n.

---

### B·∫≠c ∆∞u ti√™n 2 ‚Äî Sprint 2 (N·ªôi dung & t∆∞∆°ng t√°c c∆° b·∫£n)

| ∆Øu ti√™n | Module (B·∫≠c 1) | Nh√≥m (B·∫≠c 2) | Ch·ª©c nƒÉng ch√≠nh (B·∫≠c 3) | Collection Payload | Ghi ch√∫ |
|--------|----------------|--------------|--------------------------|---------------------|--------|
| P2a    | M2             | M2.1, M2.2   | M2.1.1‚ÄìM2.2.2            | Posts               | CRUD posts, rich text, tags, visibility. |
| P2b    | M4             | M4.1 (m·ªôt ph·∫ßn) | M4.1.1, M4.1.2, M4.1.3 | Comments (+ Posts)  | Like, comment (nested), share. |
| P2c    | M5             | M5.1, M5.2   | M5.1.1, M5.2.1, M5.2.2   | Bookmarks           | USP: Save + Collections. |

**Deliverable:** T·∫°o/s·ª≠a/x√≥a b√†i vi·∫øt (text + media + tag), like/comment/share, bookmark v√† collections.

---

### B·∫≠c ∆∞u ti√™n 3 ‚Äî Sprint 3 (Kh√°m ph√° & k·∫øt n·ªëi)

| ∆Øu ti√™n | Module (B·∫≠c 1) | Nh√≥m (B·∫≠c 2) | Ch·ª©c nƒÉng ch√≠nh (B·∫≠c 3) | Collection Payload | Ghi ch√∫ |
|--------|----------------|--------------|--------------------------|---------------------|--------|
| P3a    | M3             | M3.1         | M3.1.1, M3.1.2, M3.1.3   | Posts, Follows      | Following feed + Trending (ranking). |
| P3b    | M3             | M3.2         | M3.2.1, M3.2.2           | ‚Äî (Atlas Search)   | Full-text + autocomplete. |
| P3c    | M4             | M4.2         | M4.2.1, M4.2.2           | Follows, Blocks    | Follow/unfollow, block. |

**Deliverable:** News feed (following + for you), t√¨m ki·∫øm, follow/unfollow, block.

---

### B·∫≠c ∆∞u ti√™n 4 ‚Äî Sprint 4 (Realtime & ki·ªÉm duy·ªát)

| ∆Øu ti√™n | Module (B·∫≠c 1) | Nh√≥m (B·∫≠c 2) | Ch·ª©c nƒÉng ch√≠nh (B·∫≠c 3) | Collection Payload | Ghi ch√∫ |
|--------|----------------|--------------|--------------------------|---------------------|--------|
| P4a    | M6             | M6.1         | M6.1.1, M6.1.2           | Notifications       | SSE realtime, mark read. |
| P4b    | M6             | M6.2         | M6.2.1, M6.2.2, M6.2.3   | Reports / Admin     | Report, auto-approve, admin review. |

**Deliverable:** Th√¥ng b√°o realtime (SSE), ki·ªÉm duy·ªát (report + admin).

---

## 3. T√≥m t·∫Øt ph·ª• thu·ªôc gi·ªØa c√°c b·∫≠c ∆∞u ti√™n

```
Sprint 1 (P1)     ‚Üí Users, Auth, Profile
      ‚Üì
Sprint 2 (P2)     ‚Üí Posts, Comments, Bookmarks (c·∫ßn Users)
      ‚Üì
Sprint 3 (P3)     ‚Üí Follows, Blocks, Feed, Search (c·∫ßn Posts, Users)
      ‚Üì
Sprint 4 (P4)     ‚Üí Notifications (SSE), Moderation (c·∫ßn Comments, Posts, Users)
```

---

## 4. ƒê·ªëi chi·∫øu nhanh: Module ‚Üî FR ‚Üî Collection

| Module (B·∫≠c 1) | FR        | Collections ch√≠nh   |
|----------------|-----------|----------------------|
| M1 Auth & Profile | FR-1, FR-2 | Users                |
| M2 Content      | FR-3      | Posts                |
| M3 Discovery   | FR-4, FR-7 | Posts, Follows, (Search index) |
| M4 Engagement  | FR-5, FR-10 | Comments, Follows, Blocks |
| M5 Bookmarking | FR-6      | Bookmarks            |
| M6 System & Notifications | FR-8, FR-9 | Notifications, (Reports) |

---

*T√†i li·ªáu ƒë∆∞·ª£c t·∫°o t·ª´ context b·∫£n ƒë·ªì ch·ª©c nƒÉng Content-centric SNS v√† `Docs/life-1/01-vision/FR/requirements-srs.md`.*

```

### life-1/01-vision/FR/requirements-srs.md
```md
# Requirements (SRS)

> **M·ª•c ƒë√≠ch:** Functional Requirements (FR) + Non-functional Requirements (NFR)  
> **Format:** Markdown, c√≥ th·ªÉ tham chi·∫øu user-stories.md  

---

## Functional Requirements

### FR-1: Authentication
- Email/password ƒëƒÉng k√Ω, ƒëƒÉng nh·∫≠p
- payload auth, refresh token
- Logout

### FR-2: Profile
- Avatar upload (Local Storage)
- Bio, social links (GitHub, LinkedIn)
- Xem profile public c·ªßa user kh√°c
- Danh s√°ch posts c·ªßa user

### FR-3: Posts
- CRUD posts (text, rich text, images, links)
- Tags cho posts
- Visibility: public, followers only

### FR-4: News Feed
- Feed t·ª´ connections (follow)
- Ranking: time-decay + engagement
- Pagination (cursor-based)

### FR-5: Interactions
- Like/unlike post
- Comment, nested replies
- Share (copy link)

### FR-6: Bookmarking
- Save/unsave post
- Collections/Folders
- List bookmarks by collection

### FR-7: Search
- Full-text search: users, posts, tags
- MongoDB Atlas Search
- Autocomplete

### FR-8: Notifications
- SSE realtime
- Types: like, comment, follow
- Mark as read

### FR-9: Moderation
- Report post/comment
- Admin review reports
- Auto-approve new content

### FR-10: Privacy & Connections
- Follow/unfollow
- Block user
- Profile visibility settings

---

## Non-functional Requirements

### NFR-1: Performance
- Page load < 3s
- Search response < 500ms
- SSE latency < 1s

### NFR-2: Security
- Password hashing (bcrypt)
- JWT expiration, refresh flow
- RBAC v·ªõi Payload Access Control

### NFR-3: Scalability
- Cursor pagination cho feed
- Indexes cho queries ph·ªï bi·∫øn
- Vercel serverless scale

```

### life-1/02-decisions/technical-decisions.md
```md
# Technical Decisions

> **M·ª•c ƒë√≠ch:** T·ªïng h·ª£p c√°c quy·∫øt ƒë·ªãnh k·ªπ thu·∫≠t ƒë√£ x√°c ƒë·ªãnh  
> **Ngu·ªìn:** T·ª´ research (artkitacture.md, arhitacture-V2.md)  

---

## Tech Stack

| Layer    | Choice                | Notes                         |
|----------|-----------------------|-------------------------------|
| Frontend | Next.js 15/16 + React 19 | App Router, RSC              |
| Backend  | Payload CMS 3.x       | Headless, collections, auth   |
| Database | MongoDB Atlas         | Free tier 512MB               |
| Styling  | Tailwind + Shadcn UI  | Accessible components         |
| Storage  | Local Server Storage  | Disk storage (public/media)   |
| Realtime | SSE                   | Notifications                 |
| Search   | MongoDB Atlas Search  | Full-text, autocomplete       |
| Hosting  | Vercel                | Auto-deploy                   |
| CI/CD    | Vercel Auto-Deploy    | Push to main                  |
| Queue    | Kh√¥ng (ƒë·ªìng b·ªô)       | ƒê∆°n gi·∫£n h√≥a MVP              |

## Realtime

**Quy·∫øt ƒë·ªãnh: SSE (Server-Sent Events)**

- ƒê∆°n gi·∫£n h∆°n WebSocket cho one-way push (server ‚Üí client)
- Route Handler Next.js + ReadableStream
- Client: EventSource API
- ƒê·ªß cho notifications, live updates
- Fallback: Polling n·∫øu c·∫ßn

## Storage

**Quy·∫øt ƒë·ªãnh: Vercel Blob**

- T√≠ch h·ª£p s·∫µn v·ªõi Vercel
- Kh√¥ng c·∫ßn setup S3/Cloudinary
- ƒê·ªß cho MVP (avatars, post images)

## Search

**Quy·∫øt ƒë·ªãnh: MongoDB Atlas Search**

- Native v·ªõi MongoDB
- Full-text search, autocomplete
- Kh√¥ng c·∫ßn th√™m service (Meilisearch, Algolia)

## Queue System

**Quy·∫øt ƒë·ªãnh: Kh√¥ng d√πng queue trong MVP**

- X·ª≠ l√Ω ƒë·ªìng b·ªô (sync)
- Bull/BullMQ c√≥ th·ªÉ th√™m sau khi c·∫ßn background jobs (email, notifications batch)

```
