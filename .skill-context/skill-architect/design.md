# skill-architect â€” Architecture Design

> Generated by Skill Architect | Date: 2026-02-22
> Status: ğŸŸ¢ COMPLETE

---

## 1. Problem Statement

**Váº¥n Ä‘á»**: Skill `skill-architect` hiá»‡n táº¡i (v1) cÃ³ 4 Ä‘iá»ƒm yáº¿u cá»‘t lÃµi:
1. **Phases quÃ¡ cá»“ng ká»nh** â€” 3 mandatory gates ngay cáº£ vá»›i yÃªu cáº§u Ä‘Æ¡n giáº£n, lÃ m cháº­m toÃ n bá»™ workflow
2. **Guardrails khÃ´ng Ä‘á»§ máº¡nh** â€” AI cÃ³ thá»ƒ bá» qua interaction gates, tá»± suy Ä‘oÃ¡n thay vÃ¬ há»i user, skip design-checklist
3. **Zone Mapping (Â§3) khÃ´ng rÃµ rÃ ng** â€” thiáº¿u tÃªn file cá»¥ thá»ƒ, Planner/Builder váº«n pháº£i Ä‘oÃ¡n hoáº·c há»i thÃªm, vi pháº¡m "contract" Architectâ†’Planner
4. **Thiáº¿u cÆ¡ cháº¿ tá»± Ä‘Ã¡nh giÃ¡ trong quÃ¡ trÃ¬nh** â€” khÃ´ng cÃ³ feedback loop ná»™i táº¡i; chá»‰ cÃ³ checklist cuá»‘i, quÃ¡ muá»™n Ä‘á»ƒ phÃ¡t hiá»‡n lá»—i

**NgÆ°á»i dÃ¹ng**: Developer sá»­ dá»¥ng skill Ä‘á»ƒ thiáº¿t káº¿ Agent Skills má»›i trong dá»± Ã¡n Steve Void hoáº·c báº¥t ká»³ dá»± Ã¡n cÃ³ Agent Skill Framework. Downstream users: skill-planner (Ä‘á»c Â§3), skill-builder (Ä‘á»c Â§7 + Â§8).

**LÃ½ do cáº§n skill**: skill-architect lÃ  Ä‘iá»ƒm khá»Ÿi Ä‘áº§u cá»§a toÃ n bá»™ Skill Suite (Architect â†’ Planner â†’ Builder). Náº¿u design.md Ä‘áº§u ra khÃ´ng rÃµ rÃ ng, Planner vÃ  Builder sáº½ bá»‹ áº£nh hÆ°á»Ÿng dÃ¢y chuyá»n. Cáº§n v2 vá»›i: (1) adaptive workflow theo complexity, (2) guardrails cá»©ng hÆ¡n, (3) Zone Mapping contract chuáº©n hÃ³a, (4) self-scoring mechanism trong quÃ¡ trÃ¬nh thiáº¿t káº¿.

---

## 2. Capability Map

### 2.1 Tri thá»©c (Knowledge â€” Pillar 1)

| Tri thá»©c | File | Ghi chÃº |
|---------|------|---------|
| Framework 3 Pillars & 7 Zones | `knowledge/architect.md` | Giá»¯ nguyÃªn tá»« v1 |
| Chuáº©n sÆ¡ Ä‘á»“ Mermaid | `knowledge/visualization-guidelines.md` | Giá»¯ nguyÃªn tá»« v1 |
| **Complexity Detection Rules** | `knowledge/complexity-matrix.md` | Má»›i â€” auto-classify Simple/Medium/Complex |
| **Zone Mapping Contract Spec** | `knowledge/zone-contract-spec.md` | Má»›i â€” schema cá»©ng Â§3, regex validation, examples |
| **Self-Scoring Rubric** | `knowledge/scoring-rubric.md` | Má»›i â€” AI tá»± cho Ä‘iá»ƒm 1â€“5 tá»«ng section |

### 2.2 Quy trÃ¬nh (Process â€” Pillar 2)

**Adaptive workflow theo complexity** thay vÃ¬ 3 phases cá»©ng nháº¯c:

```
[DETECT] â†’ phÃ¢n loáº¡i tá»± Ä‘á»™ng (Simple / Medium / Complex)
    â”‚
    â”œâ”€ Simple  â†’ COLLECT (rÃºt gá»n) â†’ DESIGN (merge Analyze+Design)
    â”œâ”€ Medium  â†’ COLLECT â†’ ANALYZE â†’ DESIGN
    â””â”€ Complex â†’ COLLECT â†’ ANALYZE â†’ ARCH-REVIEW â†’ DESIGN
```

- **DETECT**: Ä‘á»c input, Ã¡p complexity-matrix.md, chá»n path â€” khÃ´ng há»i user
- **COLLECT**: há»i Ä‘Ãºng gap cÃ²n thiáº¿u (khÃ´ng há»i láº¡i nhá»¯ng gÃ¬ Ä‘Ã£ biáº¿t)
- **ANALYZE**: map 3 Pillars + Zone Mapping contract (Â§3 schema báº¯t buá»™c)
- **DESIGN**: táº¡o â‰¥3 Mermaid diagrams + self-score tá»«ng section trÆ°á»›c deliver
- **ARCH-REVIEW** (Complex only): kiá»ƒm tra dependency vá»›i skill-planner/builder pipeline

### 2.3 Kiá»ƒm soÃ¡t (Guardrails â€” Pillar 3)

| Váº¥n Ä‘á» v1 | Guardrail v2 |
|-----------|-------------|
| AI bá» qua interaction gates | Gate = BLOCKING â€” khÃ´ng cÃ³ output náº¿u user chÆ°a confirm |
| Skip design-checklist | Per-phase checklist tá»« `loop/phase-verify.md` nhÃºng vÃ o cuá»‘i má»—i phase |
| Â§3 Zone Mapping thiáº¿u tÃªn file cá»¥ thá»ƒ | Regex validation: tÃªn file pháº£i khá»›p `[a-z][a-z0-9_\-]+\.[a-z]+` |
| AI khÃ´ng biáº¿t mÃ¬nh Ä‘ang sai | Self-scoring rubric: score < 3/5 báº¥t ká»³ section â†’ trigger re-work |
| AI tá»± suy Ä‘oÃ¡n khi thiáº¿u thÃ´ng tin | Confidence rule: < 70% â†’ báº¯t buá»™c há»i trÆ°á»›c khi proceed |

---

## 3. Zone Mapping

> âš ï¸ Contract Section â€” Planner Ä‘á»c Â§3 Ä‘á»ƒ decompose thÃ nh Tasks.
> Má»i Zone PHáº¢I cÃ³ tÃªn file cá»¥ thá»ƒ (regex: `[a-z][a-z0-9_\-]+\.[a-z]+`). Zone khÃ´ng dÃ¹ng â†’ ghi "KhÃ´ng cáº§n".

| Zone | Files cáº§n táº¡o | Ná»™i dung | Báº¯t buá»™c? |
|------|--------------|----------|-----------|
| Core | `SKILL.md` | Persona v2, adaptive 4-phase workflow, guardrail hardening, self-scoring hook | âœ… |
| Knowledge | `knowledge/architect.md` | Framework 3 Pillars & 7 Zones (giá»¯ nguyÃªn, khÃ´ng sá»­a) | âœ… |
| Knowledge | `knowledge/visualization-guidelines.md` | Mermaid diagram standards (giá»¯ nguyÃªn) | âœ… |
| Knowledge | `knowledge/complexity-matrix.md` | Báº£ng phÃ¢n loáº¡i Simple/Medium/Complex + tie-breaker rule | âœ… |
| Knowledge | `knowledge/zone-contract-spec.md` | Schema báº¯t buá»™c Â§3: format, regex, 2 vÃ­ dá»¥ Ä‘áº§y Ä‘á»§ (Ä‘Ãºng/sai) | âœ… |
| Knowledge | `knowledge/scoring-rubric.md` | Rubric tá»± Ä‘Ã¡nh giÃ¡ 1â€“5 cho 10 sections, penalty examples | âœ… |
| Scripts | `scripts/init_context.py` | Khá»Ÿi táº¡o `.skill-context/{name}/` (giá»¯ nguyÃªn tá»« v1) | âœ… |
| Templates | `templates/design.md.template` | 10-section template cáº­p nháº­t: thÃªm self-score row, phase-tag | âœ… |
| Data | KhÃ´ng cáº§n | Config static khÃ´ng cáº§n riÃªng | âŒ |
| Loop | `loop/design-checklist.md` | Quality gate tá»•ng (cáº­p nháº­t: thÃªm per-phase check markers) | âœ… |
| Loop | `loop/phase-verify.md` | Checklist nhá» nhÃºng cuá»‘i má»—i phase; simulate Planner Ä‘á»c Â§3 | âœ… |
| Assets | KhÃ´ng cáº§n | N/A | âŒ |

---

## 4. Folder Structure

```mermaid
mindmap
  root((skill-architect v2))
    SKILL.md
      Persona v2
      Adaptive 4-Phase Workflow
      Guardrails v2
      Self-Score Hook
    knowledge
      architect.md
      visualization-guidelines.md
      complexity-matrix.md
      zone-contract-spec.md
      scoring-rubric.md
    scripts
      init_context.py
    templates
      design.md.template
    loop
      design-checklist.md
      phase-verify.md
```

---

## 5. Execution Flow

### D2 â€” Runtime Sequence

```mermaid
sequenceDiagram
    participant U as User
    participant S as skill-architect
    participant K as Knowledge Zone
    participant L as Loop Zone
    participant C as .skill-context/

    U->>S: Trigger + input
    S->>K: [Boot] Read architect.md + complexity-matrix.md
    S->>S: DETECT: auto-classify complexity
    S->>C: Kiá»ƒm tra .skill-context/{name}/ tá»“n táº¡i?
    alt ChÆ°a cÃ³
        S->>C: init_context.py â†’ táº¡o design.md, todo.md, build-log.md
    else ÄÃ£ cÃ³
        S->>C: Äá»c design.md â†’ tiáº¿p tá»¥c tá»« chá»— dá»Ÿ
    end
    Note over S,U: [IP-1] Confirm complexity classification
    S->>U: Há»i Ä‘Ãºng gap cÃ²n thiáº¿u (COLLECT)
    U->>S: Cung cáº¥p thÃ´ng tin
    Note over S,U: [IP-2 â€” Gate COLLECT] Summary â†’ chá» confirm
    S->>C: Ghi Â§1 + Â§10 vÃ o design.md
    S->>L: Phase-verify (phase-verify.md)
    S->>K: Read zone-contract-spec.md
    S->>S: ANALYZE: 3 Pillars + Zone Mapping
    Note over S,U: [IP-3 â€” Gate ANALYZE] TrÃ¬nh bÃ y Â§2+Â§3+Â§8 â†’ chá» confirm
    S->>C: Ghi Â§2 + Â§3 + Â§8 vÃ o design.md
    S->>L: Phase-verify
    S->>K: Read visualization-guidelines.md + scoring-rubric.md
    S->>S: DESIGN: Táº¡o D1+D2+D3+D4 diagrams
    S->>S: Self-score tá»«ng section (1â€“5)
    alt Score < 3 báº¥t ká»³ section
        S->>S: Re-work section â†’ re-score
    end
    S->>C: Ghi Â§4+Â§5+Â§6+Â§7+Â§9+Â§10 vÃ o design.md
    S->>L: Final verify (design-checklist.md)
    Note over S,U: [IP-4 â€” Gate DESIGN] Full design review â†’ chá» confirm
    S->>U: Deliver design.md âœ…
```

### D3 â€” Adaptive Workflow Phases

```mermaid
flowchart LR
    IN([User Input]) --> D[DETECT\nauto-classify]

    D -->|Simple| CS[COLLECT\nrÃºt gá»n]
    D -->|Medium| CM[COLLECT\nÄ‘áº§y Ä‘á»§]
    D -->|Complex| CC[COLLECT\nÄ‘áº§y Ä‘á»§]

    CS --> DS[DESIGN\nmerge Analyze+Design]
    CM --> AM[ANALYZE\n3 Pillars + Â§3]
    CC --> AC[ANALYZE\n3 Pillars + Â§3]

    AM --> DM[DESIGN\ndiagrams + self-score]
    AC --> AR[ARCH-REVIEW\ndependency check]
    AR --> DC[DESIGN\ndiagrams + self-score]

    DS --> G1{Gate IP-4}
    DM --> G2{Gate IP-4}
    DC --> G3{Gate IP-4}

    G1 -->|Pass| OUT([design.md âœ…])
    G2 -->|Pass| OUT
    G3 -->|Pass| OUT

    G1 -->|Fail score| DS
    G2 -->|Fail score| DM
    G3 -->|Fail score| DC
```

### D4 â€” Skill Suite Pipeline

```mermaid
flowchart TD
    U([User]) -->|trigger + input| SA[skill-architect]
    SA -->|design.md| SC[.skill-context/name/]
    SC -->|Â§2 Â§3 Â§7| SP[skill-planner]
    SP -->|todo.md + resources/| SB[skill-builder]
    SB -->|skill files| SF([Skill Files\nSKILL.md + all zones])

    SA -.->|Â§3 Zone Mapping contract| SP
    SA -.->|Â§7 PD Plan Tier 1/2| SB
    SA -.->|Â§8 Risks â†’ Guardrails| SB
```

---

## 6. Interaction Points

| # | Thá»i Ä‘iá»ƒm | LÃ½ do dá»«ng | HÃ nh Ä‘á»™ng cá»§a AI |
|---|-----------|-----------|-----------------|
| IP-1 | Ngay sau DETECT | XÃ¡c nháº­n complexity classification trÆ°á»›c khi COLLECT | "TÃ´i phÃ¢n loáº¡i Ä‘Ã¢y lÃ  [Simple/Medium/Complex] vÃ¬ [lÃ½ do]. ÄÃºng khÃ´ng?" |
| IP-2 | Cuá»‘i COLLECT | XÃ¡c nháº­n Ä‘Ã£ hiá»ƒu Ä‘Ãºng Pain Point + User + Output | TÃ³m táº¯t 3 items â†’ chá» confirm â†’ ghi Â§1+Â§10 |
| IP-3 | Cuá»‘i ANALYZE | XÃ¡c nháº­n Â§2+Â§3+Â§8 trÆ°á»›c khi bÆ°á»›c vÃ o DESIGN | TrÃ¬nh bÃ y báº£ng phÃ¢n tÃ­ch 3 Pillars + Zone Mapping â†’ chá» confirm â†’ ghi Â§2+Â§3+Â§8 |
| IP-4 | Cuá»‘i DESIGN | Final review toÃ n bá»™ design trÆ°á»›c khi deliver | TrÃ¬nh bÃ y design.md hoÃ n chá»‰nh â†’ chá» confirm â†’ deliver |
| IP-E | Báº¥t ká»³ lÃºc nÃ o | Confidence < 70% vá» báº¥t ká»³ thÃ´ng tin nÃ o | Dá»«ng ngay â†’ há»i cá»¥ thá»ƒ Ä‘iá»u chÆ°a rÃµ â€” khÃ´ng tiáº¿p tá»¥c khi chÆ°a cÃ³ cÃ¢u tráº£ lá»i |

---

## 7. Progressive Disclosure Plan

### Tier 1: Báº¯t buá»™c Ä‘á»c (Mandatory â€” má»—i láº§n trigger)

- `SKILL.md` â€” persona, adaptive phases, guardrails
- `knowledge/architect.md` â€” 3 Pillars & 7 Zones (ná»n táº£ng phÃ¢n tÃ­ch)
- `knowledge/complexity-matrix.md` â€” cáº§n ngay á»Ÿ DETECT phase Ä‘á»ƒ chá»n Ä‘Ãºng path

### Tier 2: Äá»c khi cáº§n (Conditional)

| File | Äá»c khi nÃ o |
|------|------------|
| `knowledge/visualization-guidelines.md` | Khi bÆ°á»›c vÃ o DESIGN phase, trÆ°á»›c khi váº½ diagrams |
| `knowledge/zone-contract-spec.md` | Khi viáº¿t Â§3 Zone Mapping â€” Ä‘á»ƒ validate format |
| `knowledge/scoring-rubric.md` | Khi self-score tá»«ng section trong DESIGN phase |
| `loop/phase-verify.md` | Cuá»‘i má»—i phase trÆ°á»›c khi má»Ÿ gate |
| `loop/design-checklist.md` | TrÆ°á»›c khi deliver â€” final quality gate |
| `templates/design.md.template` | Khi khá»Ÿi táº¡o design.md má»›i (sau init_context.py) |

---

## 8. Risks & Blind Spots

| # | Risk | Severity | Mitigation |
|---|------|----------|-----------|
| R1 | AI classify sai complexity â†’ chá»n wrong path (Simple khi thá»±c ra Complex) | P0 | Complexity Matrix tie-breaker: khi nghi ngá» â†’ upgrade lÃªn má»©c cao hÆ¡n |
| R2 | Zone Mapping (Â§3) váº«n thiáº¿u tÃªn file cá»¥ thá»ƒ dÃ¹ Ä‘Ã£ cÃ³ schema | P0 | Regex validation báº¯t buá»™c trÆ°á»›c khi pass Gate 2; khÃ´ng format Ä‘Ãºng = re-do |
| R3 | Self-scoring bá»‹ inflate (AI luÃ´n cho Ä‘iá»ƒm cao Ä‘á»ƒ pass) | P1 | Rubric cÃ³ penalty examples rÃµ rÃ ng; score < 3 báº¥t ká»³ section â†’ trigger re-work loop |
| R4 | Adaptive workflow phá»©c táº¡p â†’ AI bá»‹ confuse giá»¯a Simple/Medium/Complex paths | P1 | SKILL.md dÃ¹ng decision table (if/else) thay vÃ¬ text mÃ´ táº£; Simple path rÃºt gá»n rÃµ rÃ ng |
| R5 | Planner/Builder váº«n khÃ´ng parse Ä‘Æ°á»£c Â§3 contract dÃ¹ Ä‘Ã£ cáº£i thiá»‡n | P1 | `loop/phase-verify.md` cÃ³ test case: simulate Planner Ä‘á»c Â§3 vÃ  liá»‡t kÃª Ä‘Æ°á»£c tasks |

---

## 9. Open Questions

| # | CÃ¢u há»i | Nguá»“n (Phase) | Tráº¡ng thÃ¡i |
|---|---------|--------------|-----------|
| 1 | Complexity threshold cá»¥ thá»ƒ: bao nhiÃªu zones/files thÃ¬ lÃ  Medium vs Complex? | Phase 2 | âœ… Giao cho `knowledge/complexity-matrix.md` Ä‘á»‹nh nghÄ©a cá»¥ thá»ƒ |
| 2 | Self-scoring: AI report score cho user hay chá»‰ dÃ¹ng ná»™i bá»™? | Phase 3 | âœ… Report khi score tháº¥p (< 3); áº©n khi táº¥t cáº£ pass (khÃ´ng lÃ m phiá»n user) |
| 3 | ARCH-REVIEW phase (Complex): cáº§n giao tiáº¿p vá»›i skill-planner thá»±c sá»± hay chá»‰ simulate? | Phase 3 | âœ… Simulate â€” Ä‘á»c design.md cá»§a planner náº¿u cÃ³, khÃ´ng cáº§n runtime bridge |

---

## 10. Metadata

- **Skill Name**: skill-architect
- **Version**: v2 (redesign toÃ n bá»™)
- **Created**: 2026-02-22
- **Author**: Skill Architect (self-redesign via Phase-1 confirm)
- **Framework**: architect.md v2.0
- **Status**: ğŸŸ¢ COMPLETE â€” Phase 1 âœ… | Phase 2 âœ… | Phase 3 âœ…
- **Scope**: Redesign cáº£ SKILL.md + design.md template
- **Handoff Checklist**:
  - [x] design.md hoÃ n thiá»‡n (checklist pass)
  - [x] Â§3 Zone Mapping cÃ³ tÃªn file cá»¥ thá»ƒ (regex compliant)
  - [x] Â§7 phÃ¢n biá»‡t rÃµ Tier 1 vÃ  Tier 2
  - [x] Â§8 cÃ³ 5 risks kÃ¨m mitigation
  - [x] Â§9 Open Questions Ä‘Ã£ resolve
  - [x] Sáºµn sÃ ng cho skill-planner
