# schema-design-analyst ‚Äî Implementation Plan

> Generated by Skill Planner | Date: 2026-02-21
> Status: üü° READY FOR BUILDER

---

## 1. Pre-requisites

> T√†i li·ªáu v√† ki·∫øn th·ª©c c·∫ßn chu·∫©n b·ªã TR∆Ø·ªöC khi Builder b·∫Øt tay x√¢y d·ª±ng.

| # | T√†i li·ªáu / Ki·∫øn th·ª©c | Tier | M·ª•c ƒë√≠ch | Trace | Status |
|---|---------------------|------|---------|-------|--------|
| 1 | `resources/payload-mongodb-patterns-raw.md` | Domain | Ki·∫øn th·ª©c v·ªÅ PayloadCMS Local API, MongoDB Modeling Patterns (Polymorphic, Computed, Bucket, Embed vs Reference, 16MB Limit) | [T·ª™ DESIGN ¬ß2.1 & ¬ß3] | ‚úÖ |
| 2 | K·ªπ nƒÉng Python & Parsing | Technical | X√¢y d·ª±ng script `validate_schema.py` ch·ªëng r√°c/·∫£o gi√°c | [T·ª™ DESIGN ¬ß3] | ‚úÖ |
| 3 | M·∫´u Output (`schema-design.md`, `schema-design.yaml`) | Packaging | L√†m base ƒë·ªÉ d·ª±ng files template chu·∫©n ƒë·∫ßu ra | [T·ª™ DESIGN ¬ß3] | ‚úÖ |

---

## 2. Phase Breakdown

> K·∫ø ho·∫°ch chuy·ªÉn h√≥a 4 t·∫ßng tri th·ª©c (Process, Knowledge, Experience, Principles) v√†o c√°c Zone t∆∞∆°ng ·ª©ng.

### Phase 0: Resource Preparation (B·∫ÆT BU·ªòC)
- [x] T·∫≠p h·ª£p t√†i li·ªáu g·ªëc, so·∫°n th·∫£o `resources/payload-mongodb-patterns-raw.md` l√†m Source of Truth v·ªÅ PayloadCMS v√† MongoDB design. [T·ª™ AUDIT T√ÄI NGUY√äN]

### Phase 1: Foundation (Core Zone)
- [x] Kh·ªüi t·∫°o th∆∞ m·ª•c v√† t·∫°o `SKILL.md`. ƒê·ªãnh nghƒ©a Persona "Data Architect t√†n nh·∫´n". ƒê∆∞a v√†o c∆° ch·∫ø Input Mechanism (¬ß0), 4 Phase Execution (¬ß5), v√† Guardrails ch·∫∑n ·∫£o gi√°c (¬ß8). √Åp d·ª•ng **T·∫ßng Nguy√™n t·∫Øc (Execution Principles)**: B·∫Øt bu·ªôc tu√¢n th·ªß Zero Hallucination, Traceability tuy·ªát ƒë·ªëi t·ª´ h·ª£p ƒë·ªìng 2.5. [T·ª™ DESIGN ¬ß0, ¬ß3, ¬ß5, ¬ß7]

### Phase 2: Knowledge Zone (Chuy·ªÉn h√≥a 4 T·∫ßng Tri Th·ª©c)
- [x] Transform 100% n·ªôi dung t·ª´ `resources/payload-mongodb-patterns-raw.md` th√†nh `knowledge/payload-mongodb-patterns.md`. ƒê√≥ng g√≥i th√†nh c√°c kh·ªëi r√µ r√†ng:
  - **T·∫ßng Quy tr√¨nh (Process)**: Rule map type t·ª´ YAML g·ªëc ra c√∫ ph√°p PayloadCMS.
  - **T·∫ßng Ki·∫øn th·ª©c (Knowledge)**: H·ªá th·ªëng Payload Types, gi·ªõi h·∫°n c·ª©ng 16MB/document c·ªßa MongoDB.
  - **T·∫ßng Kinh nghi·ªám (Experience)**: Decision tree ch·ªçn Embedded (Array/Group) vs Referenced (Aggregate); d√πng Polymorphic, Computed, Bucket.
  - **T·∫ßng Nguy√™n t·∫Øc (Execution Principles)**: Nh·∫•n m·∫°nh b·∫£o v·ªá source of truth. [T·ª™ DESIGN ¬ß3]

### Phase 3: Scripts & Templates & Data (Automation Zone)
- [x] T·∫°o `data/module-map.yaml` qu·∫£n l√Ω route l·∫•y YAML contract c·ªßa t·ª´ng Module (M1, M2...). [T·ª™ DESIGN ¬ß3]
- [x] T·∫°o `templates/schema-design.md.template` cho Human Review. Ph·∫£i c√≥ slot gi·∫£i th√≠ch l√Ω do (Embed/Ref). [T·ª™ DESIGN ¬ß3]
- [x] T·∫°o `templates/schema-design.yaml.template` chu·∫©n h√≥a YAML ƒë·∫ßu ra cho AI th·∫ø h·ªá k·∫ø ti·∫øp (Code Generation). [T·ª™ DESIGN ¬ß3]
- [x] T·∫°o `scripts/validate_schema.py` m√≥c n·ªëi logic YAML vs Markdown ƒë·ªÉ qu·∫•t c√≤i (quƒÉng l·ªói) n·∫øu AI b·ªãa `field` l·∫°. [T·ª™ DESIGN ¬ß3 & ¬ß8]

### Phase 4: Loop Zone (Self-Validation)
- [x] T·∫°o `loop/schema-validation-checklist.md` cho AI t·ª± verify cu·ªëi lu·ªìng. C·ª• th·ªÉ h√≥a r·ªßi ro ·ªü ¬ß8: "Field t·ªìn t·∫°i trong contract ch∆∞a?", "Array c√≥ ƒëe d·ªça gi·ªõi h·∫°n 16MB kh√¥ng?", "ƒê√£ c√≥ indexes cho query fields?". [T·ª™ DESIGN ¬ß3, ¬ß6, ¬ß8]

### Phase 5: Quality Gate
- [x] Ch·∫°y `python .agent/scripts/validate_skill.py schema-design-analyst` ƒë·ªÉ audit c·∫•u tr√∫c. [G·ª¢I √ù B·ªî SUNG]
- [x] B√°o c√°o Validation Pass, review t·ªïng th·ªÉ Zone Mapping. [G·ª¢I √ù B·ªî SUNG]

---

## 3. Knowledge & Resources Needed

| # | T√†i li·ªáu | Tier | M·ª•c ƒë√≠ch | Tr·∫°ng th√°i |
|---|---------|----|---------|-----------|
| 1 | `resources/payload-mongodb-patterns-raw.md` | Domain | Source of truth n·∫Øn n√≥t Data Strategy cho Planner & Builder | ‚úÖ S·∫µn s√†ng |

---

## 4. Definition of Done

- [ ] C·∫•u tr√∫c chu·∫©n 6 Zone: `SKILL.md`, `knowledge/`, `scripts/`, `templates/`, `data/`, `loop/` ƒë√£ t·ªìn t·∫°i ho√†n ch·ªânh.
- [ ] Khung tri th·ª©c 4 t·∫ßng (Process, Knowledge, Exp, Principles) ƒë∆∞·ª£c l·ªìng gh√©p r√µ r√†ng v√†o `knowledge/payload-mongodb-patterns.md`.
- [ ] Validation framework (`validate_schema.py` + `schema-validation-checklist.md`) ƒëi v√†o ho·∫°t ƒë·ªông ƒë·ªÉ ch·∫∑n ·∫£o gi√°c (Zero Hallucination).
- [ ] `SKILL.md` t∆∞·ªùng minh v·ªÅ c√°c Gate t∆∞∆°ng t√°c v√† flow ch·∫°y.

---

## 5. Notes

- **[T·ª™ AUDIT T√ÄI NGUY√äN]**: Planner ƒë√£ th·∫©m ƒë·ªãnh file raw. Builder c·ª© b√°m ch·∫∑t v√†o Section 2, 3 c·ªßa raw ƒë·ªÉ build rule quy·∫øt ƒë·ªãnh Embedded vs Reference - ƒë√¢y l√† "√°t ch·ªß b√†i" c·ªßa Data Architect.
- **[C·∫¶N L√ÄM R√ï]**: Open Question ¬ß9 ·ªü th∆∞ m·ª•c Design -> Quy·∫øt ƒë·ªãnh ch·ªët: Builder c√†i ƒë·∫∑t `validate_schema.py` cho AI Agent t·ª± g·ªçi trong B∆∞·ªõc 4 c·ªßa workflow, ch∆∞a c·∫ßn thi·∫øt l·∫≠p Pipeline CI/CD h·ªá th·ªëng.
