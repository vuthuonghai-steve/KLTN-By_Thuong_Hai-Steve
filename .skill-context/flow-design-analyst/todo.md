# flow-design-analyst â€” Implementation Plan

> Generated by Skill Planner | Date: 2026-02-20
> Source: `.skill-context/flow-design-analyst/design.md` (ğŸŸ¢ DESIGN COMPLETE â€” v2026-02-20)
> Status: ğŸŸ¡ IN PROGRESS â€” Phase 1 âœ… DONE â†’ Sáºµn sÃ ng Phase 2


---

## 1. Pre-requisites

> Audit tÃ i nguyÃªn trong `resources/` â€” xÃ¡c Ä‘á»‹nh tráº¡ng thÃ¡i tá»«ng máº£ng kiáº¿n thá»©c trÆ°á»›c khi Build.
> Káº¿t quáº£: `resources/` TRá»NG HOÃ€N TOÃ€N â†’ 5 trong 8 pre-req Ä‘ang á»Ÿ tráº¡ng thÃ¡i â¬œ.

| # | TÃ i liá»‡u / Kiáº¿n thá»©c | Tier | Má»¥c Ä‘Ã­ch | Trace | Sáºµn sÃ ng? |
|---|---------------------|------|---------|-------|-----------|
| 1 | Mermaid `flowchart TD/LR` + `subgraph` swimlane syntax: táº¥t cáº£ node shapes, edge types, decision diamond, safe label rules (báº¯t buá»™c `""`, `<br/>`, khÃ´ng dÃ¹ng `\n`), vÃ­ dá»¥ 3-lane hoÃ n chá»‰nh | Technical | Builder transform â†’ `knowledge/mermaid-flowchart-guide.md` vÃ  `templates/swimlane-flow.mmd` | [Tá»ª DESIGN Â§2.1 K1] | âœ… **DONE** â€” `resources/mermaid-flowchart-reference.md` |
| 2 | Business Process Flow patterns: Happy Path, Alternative Path, Exception Path â€” Ä‘á»‹nh nghÄ©a, Ä‘áº·c Ä‘iá»ƒm, dáº¥u hiá»‡u trong spec/US, vÃ­ dá»¥ Mermaid Ä‘áº§y Ä‘á»§ | Domain | Builder transform â†’ `knowledge/business-flow-patterns.md` | [Tá»ª DESIGN Â§2.1 K2] | âœ… **DONE** â€” `resources/business-flow-patterns.md` |
| 3 | Actor Lane Taxonomy: Ä‘á»‹nh nghÄ©a User/System/DB lane, rules phÃ¢n chia trÃ¡ch nhiá»‡m, liÃªn káº¿t vá»›i kiáº¿n trÃºc Next.js/Backend API/MongoDB cá»§a dá»± Ã¡n, vÃ­ dá»¥ Ä‘Ãºng/sai | Domain | Builder transform â†’ `knowledge/actor-lane-taxonomy.md` | [Tá»ª DESIGN Â§2.1 K3] | âœ… **DONE** â€” `resources/actor-lane-taxonomy.md` |
| 4 | Spec Extraction Guide: cÃ¡ch Ä‘á»c `life-2/specs/*.md` vÃ  `life-1/user-stories.md`, trÃ­ch xuáº¥t Trigger / Actors / Steps / Conditions / Outcomes, vÃ­ dá»¥ vá»›i spec thá»±c táº¿ cá»§a KLTN | Domain | HÆ°á»›ng dáº«n Agent bÃ³c tÃ¡ch logic tá»« tÃ i liá»‡u dá»± Ã¡n | [Tá»ª DESIGN Â§2.1 K4] | âœ… **DONE** â€” `resources/spec-extraction-guide.md` |
| 5 | Resource Discovery Guide: phÃ¢n tÃ­ch intent mÆ¡ há»“, keyword extraction (action verb / domain noun / module hint), keyword-to-UC mapping table KLTN (tiáº¿ng Viá»‡t + Anh), Confidence Score Rubric (ngÆ°á»¡ng 70%), quy táº¯c phÃ¢n nhÃ¡nh, Discovery Report Template | Domain | Builder transform â†’ `knowledge/resource-discovery-guide.md`. Cá»‘t lÃµi cá»§a K7 + G6 "Discover Before Ask" | [Tá»ª DESIGN Â§2.1 K7, Â§2.3 G6] | âœ… **DONE** â€” `resources/resource-discovery-guide.md` |
| 6 | UC-ID Registry: Ä‘á»c `Docs/life-2/diagrams/UseCase/` (index.md + M1â€“M6) Ä‘á»ƒ tá»•ng há»£p danh sÃ¡ch UC-ID vá»›i keywords mapping | Domain | Builder táº¡o `data/uc-id-registry.yaml` | [Tá»ª DESIGN Â§3 - Data Zone, Â§9 Q1] | âœ… CÃ³ sáºµn â€” cáº§n Ä‘á»c vÃ  transform |
| 7 | `activity-diagram-design-analyst/knowledge/activity-uml-rules.md` â€” safe label convention, node naming rules | Domain | Äáº£m báº£o Ä‘á»“ng nháº¥t kÃ½ hiá»‡u vá»›i skills hiá»‡n cÃ³ (Q3 Â§9) | [Tá»ª DESIGN Â§9 Q3, Â§1.3] | âœ… CÃ³ sáºµn â€” tham chiáº¿u khi viáº¿t knowledge files |
| 8 | Skill Architect framework: 7-Zone structure, SKILL.md principles, Progressive Disclosure (Ä‘Ã£ cÃ³ trong `architect.md`) | Technical | Äáº£m báº£o packaging Ä‘Ãºng chuáº©n Master Skill Suite | [Gá»¢I Ã Bá»” SUNG] | âœ… CÃ³ sáºµn |

> âœ… **Resource Gate: PASSED** â€” Táº¥t cáº£ 5 pre-req MISSING Ä‘Ã£ Ä‘Æ°á»£c táº¡o trong `resources/` ngÃ y 2026-02-20.
> Builder cÃ³ thá»ƒ báº¯t Ä‘áº§u Phase 2.

---

## 2. Phase Breakdown

### Phase 1: Knowledge Preparation â€” Äiá»n Ä‘áº§y `resources/`

> **Má»¥c tiÃªu**: Soáº¡n tháº£o Ä‘áº§y Ä‘á»§ tÃ i liá»‡u domain vÃ o `resources/` Ä‘á»ƒ Builder cÃ³ dá»¯ liá»‡u chuyá»ƒn hoÃ¡.
> **Gate**: âœ… **PASSED** â€” Táº¥t cáº£ 5 files Ä‘Ã£ táº¡o ngÃ y 2026-02-20.
> **Æ¯u tiÃªn xá»­ lÃ½**: Task 1.1 vÃ  1.5 trÆ°á»›c â€” chÃºng blocking nhiá»u tasks nháº¥t.


- [x] **Task 1.1**: Soáº¡n tháº£o `resources/mermaid-flowchart-reference.md`
  - Ná»™i dung Báº®T BUá»˜C (pháº£i viáº¿t TOÃ€N Bá»˜, khÃ´ng tÃ³m táº¯t):
  - **âœ… ÄÃ£ kiá»ƒm chá»©ng tá»« mermaid.js.org**: Báº£ng Ä‘áº§y Ä‘á»§ node shapes:
    | Shape | Syntax | DÃ¹ng cho |
    |-------|--------|----------|
    | Rectangle (default) | `id["Text"]` | Action/Process step |
    | Rounded edges | `id("Text")` | Start event |
    | Stadium | `id(["Text"])` | Terminal (Start/End) |
    | Subroutine | `id[["Text"]]` | Sub-process |
    | Cylinder (DB) | `id[("Text")]` | Database |
    | Circle | `id(("Text"))` | Connector |
    | Rhombus (Decision) | `id{"Text"}` | Decision gate |
    | Hexagon | `id{{"Text"}}` | Preparation step |
    | Parallelogram | `id[/"Text"/]` | Input/Output |
    | Trapezoid | `id[/"Text"\]` | Manual operation |
  - **âœ… Edge Types Ä‘áº§y Ä‘á»§** (tá»« mermaid.js.org):
    - `A --> B` â€” Arrow (hÆ°á»›ng, phá»• biáº¿n nháº¥t)
    - `A --- B` â€” Open link (khÃ´ng mÅ©i tÃªn)
    - `A -- "text" --> B` â€” Arrow with label
    - `A -. "text" .-> B` â€” Dotted with label (dÃ¹ng cho conditional/async)
    - `A ==> B` â€” Thick arrow (dÃ¹ng cho happy path nháº¥n máº¡nh)
    - `A === "text" ==> B` â€” Thick with label
    - `A ---o B` â€” Circle ending (optional dependency)
    - `A ---x B` â€” Cross ending (blocked/forbidden path)
  - **âœ… Subgraph Swimlane syntax** (confirmed working):
    ```
    flowchart TD
      subgraph User ["ğŸ‘¤ User"]
        direction TB
        U1["Click Login"]
      end
      subgraph System ["âš™ï¸ System"]
        direction TB
        S1{"Validate credentials?"}
      end
    ```
    - **QUAN TRá»ŒNG**: subgraph label CÃ“ SPACE â†’ Báº®T BUá»˜C wrap trong `""`. KhÃ´ng wrap â†’ render lá»—i.
    - Keyword `end` á»Ÿ cuá»‘i subgraph â€” náº¿u dÃ¹ng `end` lÃ  tÃªn node â†’ PHáº¢I wrap: `id["end"]`.
    - DÃ¹ng `direction TB` bÃªn trong subgraph Ä‘á»ƒ control hÆ°á»›ng riÃªng tá»«ng lane.
  - **âœ… Safe Label Rules** (verified tá»« Mermaid docs + StackOverflow):
    - Báº¯t buá»™c `""` khi label cÃ³: `()`, `{}`, `[]`, `:`, `/`, `#`, `;`, whitespace
    - DÃ¹ng `<br/>` cho xuá»‘ng dÃ²ng trong label â€” KHÃ”NG dÃ¹ng `\n` (khÃ´ng render)
    - Node ID khÃ´ng Ä‘Æ°á»£c cÃ³: `()`, spaces, kÃ½ tá»± Ä‘áº·c biá»‡t â€” chá»‰ dÃ¹ng chá»¯, sá»‘, `_`
    - Escape kÃ½ tá»± Ä‘áº·c biá»‡t: dÃ¹ng HTML entity code (e.g., `#35;` cho `#`)
    - Cáº£nh bÃ¡o: chá»¯ `o` hoáº·c `x` Ä‘áº§u node connecting â†’ cÃ³ thá»ƒ parse thÃ nh arrow ending, thÃªm space hoáº·c quote
  - **âœ… Decision Node Rules**:
    - Má»i `{}` diamond PHáº¢I cÃ³ â‰¥ 2 nhÃ¡nh, má»—i nhÃ¡nh cÃ³ label: `-- "Yes" -->` hoáº·c `-- "No" -->`
    - Tuyá»‡t Ä‘á»‘i khÃ´ng Ä‘á»ƒ nhÃ¡nh há»Ÿ (chá»‰ 1 arrow ra khá»i diamond)
    - VÃ­ dá»¥ Ä‘Ãºng: `D{"Valid?"} -- "Yes" --> S1 \n D -- "No" --> E1`
    - VÃ­ dá»¥ sai: `D{"Valid?"} --> S1` â† thiáº¿u nhÃ¡nh No, thiáº¿u label
  - **Complete 3-lane Example**: Báº¯t buá»™c cÃ³ vÃ­ dá»¥ kiá»ƒm thá»­ render-verified vá»›i decision + 3 paths + UC-ID comment.
  - YÃªu cáº§u format: > 400 words, â‰¥ 3 Mermaid code block Ä‘Ã£ verified.
  - `[Tá»ª AUDIT TÃ€I NGUYÃŠN]` `[Tá»ª DESIGN Â§2.1 K1]`

- [x] **Task 1.2**: Soáº¡n tháº£o `resources/business-flow-patterns.md`
  - Ná»™i dung Báº®T BUá»˜C:
  - **âœ… Äá»‹nh nghÄ©a Ä‘Ã£ kiá»ƒm chá»©ng** (nguá»“n: modernanalyst.com, wikipedia.org, processmaker.com):
    - **Happy Path** (= "Golden Path" / "Main Scenario"): Luá»“ng lÃ½ tÆ°á»Ÿng, khÃ´ng cÃ³ lá»—i, Ä‘áº¡t má»¥c tiÃªu thÃ nh cÃ´ng theo Ä‘Æ°á»ng ngáº¯n nháº¥t. PhÃ¢n tÃ­ch BA luÃ´n báº¯t Ä‘áº§u tá»« Happy Path trÆ°á»›c. Nháº­n biáº¿t trong spec: "successfully", "returns", "is valid", "completes". Mermaid: dÃ¹ng solid arrow `-->`.
    - **Alternative Path** (= "Extension Path"): Luá»“ng há»£p lá»‡ nhÆ°ng lá»‡ch Happy Path do lá»±a chá»n user hoáº·c Ä‘iá»u kiá»‡n nghiá»‡p vá»¥ khÃ¡c nhau. VáºªN Ä‘áº¡t má»¥c tiÃªu (káº¿t thÃºc thÃ nh cÃ´ng). Má»™t process cÃ³ thá»ƒ cÃ³ nhiá»u Alternative Paths. VÃ­ dá»¥: login báº±ng email vs. login báº±ng Google. CÃ³ thá»ƒ há»™i tá»¥ vá» Ä‘iá»ƒm chung hoáº·c cÃ³ endpoint riÃªng.
    - **Exception Path** (= "Unhappy Path" / "Sad Path" / "Error Flow"): Xáº£y ra khi lá»—i, validation fail, timeout, hoáº·c Ä‘iá»u kiá»‡n ngoÃ i mong Ä‘á»£i. KHÃ”NG Ä‘áº¡t má»¥c tiÃªu ban Ä‘áº§u. Há»‡ thá»‘ng pháº£i xá»­ lÃ½ gracefully (thÃ´ng bÃ¡o lá»—i, retry, redirect). Nháº­n biáº¿t trong spec: "fails", "invalid", "error", "timeout", "not found". Mermaid: nÃªn dÃ¹ng dotted `-.->`  hoáº·c cÃ³ label "Error"/"Fail".
    - **Káº¿t há»£p 3 types trong 1 diagram**: vÃ­ dá»¥ flow Ä‘Äƒng kÃ½ tÃ i khoáº£n KLTN (UC-M1-01) â€” pháº£i cover cáº£ success, email-already-exists (Alt), vÃ  server-error (Exception).
  - YÃªu cáº§u format: > 350 words, 4 Mermaid snippets (1/pattern + 1 combined).
  - `[Tá»ª AUDIT TÃ€I NGUYÃŠN]` `[Tá»ª DESIGN Â§2.1 K2]`

- [x] **Task 1.3**: Soáº¡n tháº£o `resources/actor-lane-taxonomy.md`
  - Ná»™i dung Báº®T BUá»˜C:
  - **âœ… Äá»‹nh nghÄ©a Ä‘Ã£ kiá»ƒm chá»©ng** (nguá»“n: lucidchart.com, geeksforgeeks.org, wikipedia.org):
    - **User Lane**: HÃ nh Ä‘á»™ng con ngÆ°á»i thá»±c hiá»‡n trÃªn UI. "Actor" gá»‘c = Primary Actor khá»Ÿi phÃ¡t use case. Bao gá»“m: click, input, submit, navigate, drag, upload.
    - **System Lane**: Automated tasks cá»§a pháº§n má»m/backend. Business logic, validation, service call, API processing, authentication, notification dispatch. KHÃ”NG pháº£i DB. Database lane lÃ  riÃªng biá»‡t vÃ¬ muá»‘n hiá»ƒn thá»‹ rÃµ data layer.
    - **DB Lane**: Subset cá»§a System vá» máº·t ká»¹ thuáº­t, nhÆ°ng tÃ¡ch riÃªng Ä‘á»ƒ nháº¥n máº¡nh persistence operations. CRUD trÃªn MongoDB = DB Lane. **LÆ°u Ã½**: "DB Lane" khÃ´ng pháº£i chuáº©n BPMN chÃ­nh thá»©c mÃ  lÃ  convention cá»§a 3-tier architecture diagram â€” cáº§n ghi rÃµ Ä‘iá»u nÃ y trong tÃ i liá»‡u.
    - **KLTN Context Mapping**: Next.js/React UI interactions = User Lane; Express/NestJS API handlers, services, middleware = System Lane; MongoDB read/write operations = DB Lane.
    - **Edge cases Ä‘Ã£ xÃ¡c nháº­n**:
      - Gá»i third-party API (SendGrid, Firebase) â†’ **System Lane** (lÃ  System-to-System call)
      - JWT validate â†’ **System Lane** (middleware logic)
      - Cache read/write (Redis) â†’ **System Lane** (optional: tÃ¡ch Cache lane náº¿u cáº§n)
      - File upload to S3 â†’ **System Lane** (external service, khÃ´ng pháº£i DB)
      - Hiá»ƒn thá»‹ error message cho user â†’ **User Lane** (UI feedback)
  - **Decision Table** "Action â†’ Lane": tá»‘i thiá»ƒu 20 vÃ­ dá»¥ Ä‘iá»ƒn hÃ¬nh tá»« context KLTN.
  - **VÃ­ dá»¥ ÄÃºng/Sai**: 3 cáº·p vá»›i giáº£i thÃ­ch lÃ½ do.
  - YÃªu cáº§u format: > 400 words, cÃ³ báº£ng Markdown Ä‘áº§y Ä‘á»§.
  - `[Tá»ª AUDIT TÃ€I NGUYÃŠN]` `[Tá»ª DESIGN Â§2.1 K3]`

- [x] **Task 1.4**: Soáº¡n tháº£o `resources/spec-extraction-guide.md`
  - Ná»™i dung Báº®T BUá»˜C:
  - **âœ… Framework Ä‘Ã£ kiá»ƒm chá»©ng** (nguá»“n: fsu.edu, logrocket.com, neu.edu â€” Use Case Specification standard):
    - **6 yáº¿u tá»‘ Use Case Specification chuáº©n** (bá»• sung Preconditions so vá»›i káº¿ hoáº¡ch gá»‘c):
      1. **Trigger**: Sá»± kiá»‡n kÃ­ch hoáº¡t flow. LuÃ´n Ä‘á»©ng trÆ°á»›c step Ä‘áº§u tiÃªn. VÃ­ dá»¥: "Customer clicks 'Register'", "System receives API call".
      2. **Actors**: Primary Actor (ngÆ°á»i/system khá»Ÿi phÃ¡t) + Secondary Actors (systems tÆ°Æ¡ng tÃ¡c trong quÃ¡ trÃ¬nh).
      3. **Preconditions**: Äiá»u kiá»‡n PHáº¢I Ä‘Ãºng trÆ°á»›c khi flow báº¯t Ä‘áº§u. VÃ­ dá»¥: "User chÆ°a cÃ³ tÃ i khoáº£n", "Token há»£p lá»‡".
      4. **Steps (Flow of Events)**: Numbered list, focus vÃ o WHAT (khÃ´ng pháº£i HOW). Má»—i step = 1 tÆ°Æ¡ng tÃ¡c Actorâ†”System.
      5. **Conditions**: `if/else` trong narrative text. Nháº­n biáº¿t: "if", "when", "unless", "except", "provided that".
      6. **Outcomes (Postconditions)**: State sau khi flow hoÃ n thÃ nh. Pháº£i Ä‘Ãºng báº¥t ká»ƒ Alternative Path nÃ o Ä‘Æ°á»£c Ä‘i qua.
    - **CÃ¡ch Ä‘á»c spec file** `life-2/specs/{module}-spec.md`:
      - Trigger: thÆ°á»ng á»Ÿ pháº§n Ä‘áº§u Use Case, sau "Trigger:" hoáº·c "Initiating Event:"
      - Steps: numbered list vá»›i pattern "Actor + verb + object"
      - Conditions: cÃ¢u chá»©a tá»« khÃ³a "if", "when", "unless", "except"
      - Outcomes: pháº§n "Postconditions" hoáº·c "Success Criteria"
    - **CÃ¡ch Ä‘á»c User Story** `life-1/user-stories.md`:
      - Format: "As a [actor], I want [action], so that [outcome]"
      - Map: `actor` â†’ Actors, `action` â†’ Trigger/Steps, `outcome` â†’ Outcomes
      - Acceptance Criteria trong US â†’ Conditions
    - **Worked Example**: 1 Use Case KLTN thá»±c táº¿ (UC-M1-01: ÄÄƒng kÃ½) trÃ­ch xuáº¥t Ä‘á»§ 6 yáº¿u tá»‘ â†’ map ra Mermaid nodes.
    - **Fallback khi spec thiáº¿u**: cÃ¡ch xÃ¡c Ä‘á»‹nh pháº§n nÃ o thiáº¿u â†’ ghi vÃ o `## Assumptions`.
  - YÃªu cáº§u format: > 400 words, 1 worked example Ä‘áº§y Ä‘á»§.
  - `[Tá»ª AUDIT TÃ€I NGUYÃŠN]` `[Tá»ª DESIGN Â§2.1 K4]`

- [x] **Task 1.5**: Soáº¡n tháº£o `resources/resource-discovery-guide.md`
  - Ná»™i dung Báº®T BUá»˜C (Ä‘Ã¢y lÃ  tÃ i liá»‡u QUAN TRá»ŒNG NHáº¤T cho K7 + G6):
  - **âœ… Confidence Score design Ä‘Ã£ kiá»ƒm chá»©ng** (nguá»“n: genesys.com, mypurecloud.com, voiceflow.com â€” NLU best practices):
    - Confidence Score trong NLU há»‡ thá»‘ng: giÃ¡ trá»‹ 0.0â€“1.0 (hoáº·c 0â€“100%) Ä‘o má»©c Ä‘á»™ cháº¯c cháº¯n cá»§a classification.
    - **2 threshold levels** (confirmed best practice tá»« Genesys/Voiceflow):
      - **Confirmation threshold** (â‰¥ 70%): Agent Ä‘Æ°a Discovery Report + há»i Yes/No xÃ¡c nháº­n.
      - **Rejection threshold** (< 40%): Agent khÃ´ng thá»ƒ xÃ¡c Ä‘á»‹nh â†’ yÃªu cáº§u rephrase hoáº·c chá»n tá»« danh sÃ¡ch gá»£i Ã½.
      - **Gray zone** (40%â€“70%): Agent Ä‘Æ°a numbered options (2â€“3 candidates) â€” KHÃ”NG cÃ¢u má»Ÿ.
    - **Khi 2+ intents cÃ³ score gáº§n nhau** (vÃ­ dá»¥: 65% vs 60%): Ä‘Æ°a numbered options dÃ¹ score > 70%.
  - **Intent Parsing Framework** (3 loáº¡i keyword):
    - **(a) Action Verb**: "váº½", "táº¡o", "lÃ m", "show", "diagram", "draw", "sinh", "generate"
    - **(b) Domain Noun**: "Ä‘Äƒng nháº­p", "bÃ i Ä‘Äƒng", "bookmark", "thÃ´ng bÃ¡o", "login", "post", "notification", "feed", "comment", "follow"
    - **(c) Module Hint**: "M1", "auth", "M2", "content", "M3", "feed", "M4", "engagement", "M5", "bookmark", "M6", "notification"
  - **Confidence Score Rubric** (`tá»•ng Ä‘iá»ƒm / 100`):
    - Action Verb detected: **+20pt**
    - Domain Noun detected (match 1 keyword): **+30pt**
    - Module Hint explicit ("M1", "auth",...): **+30pt**
    - UC matched in `uc-id-registry.yaml`: **+20pt**
    - **NgÆ°á»¡ng**: â‰¥ 70pt â†’ confident; 40â€“69pt â†’ gray zone; < 40pt â†’ rejection
    - **Tie-break rule**: Náº¿u 2+ UC candidates cÃ³ score chÃªnh â‰¤ 10pt â†’ Ä‘Æ°a options dÃ¹ tá»•ng â‰¥ 70pt
  - **Quy táº¯c phÃ¢n nhÃ¡nh**:
    - Confident (â‰¥ 70pt, khÃ´ng tie): Discovery Report + Yes/No question.
    - Gray zone (40â€“69pt) hoáº·c tie: Numbered options (tá»‘i Ä‘a 3) â€” KHÃ”NG há»i cÃ¢u má»Ÿ.
    - Rejection (< 40pt): "TÃ´i chÆ°a xÃ¡c Ä‘á»‹nh Ä‘Æ°á»£c flow báº¡n muá»‘n váº½. Vui lÃ²ng chá»n: [1] ... [2] ... [3]..."
  - **Keyword-to-UC Mapping Table** Ä‘áº§y Ä‘á»§ KLTN (cáº£ VI + EN, M1â€“M6):

    | Keyword (VI) | Keyword (EN) | Module | UC-ID á»©ng viÃªn |
    |---|---|---|---|
    | Ä‘Äƒng kÃ½, táº¡o tÃ i khoáº£n | register, sign up, create account | M1 | UC-M1-01 |
    | Ä‘Äƒng nháº­p, xÃ¡c thá»±c | login, sign in, authenticate | M1 | UC-M1-02 |
    | Ä‘á»•i máº­t kháº©u | change password, reset password | M1 | UC-M1-03 |
    | cáº­p nháº­t há»“ sÆ¡ | update profile, edit profile | M1 | UC-M1-04 |
    | viáº¿t bÃ i, táº¡o bÃ i | create post, write post, new post | M2 | UC-M2-01 |
    | chá»‰nh sá»­a bÃ i | edit post, update post | M2 | UC-M2-02 |
    | xÃ³a bÃ i | delete post, remove post | M2 | UC-M2-03 |
    | tÃ¬m kiáº¿m | search, find, lookup | M3 | UC-M3-01 |
    | xem feed, báº£ng tin | view feed, news feed, home feed | M3 | UC-M3-02 |
    | thÃ­ch, like | like, react | M4 | UC-M4-01 |
    | bÃ¬nh luáº­n, comment | comment, reply | M4 | UC-M4-02 |
    | theo dÃµi, follow | follow, subscribe | M4 | UC-M4-03 |
    | lÆ°u, bookmark | bookmark, save post | M5 | UC-M5-01 |
    | xem bookmark | view bookmarks, saved posts | M5 | UC-M5-02 |
    | thÃ´ng bÃ¡o | notification, alert | M6 | UC-M6-01 |
    | kiá»ƒm duyá»‡t | moderation, report, flag | M6 | UC-M6-02 |

    > âš ï¸ Báº£ng trÃªn lÃ  KHUNG BAN Äáº¦U â€” Builder pháº£i Ä‘á»c `Docs/life-2/diagrams/UseCase/` Ä‘á»ƒ bá»• sung UC-ID chÃ­nh xÃ¡c cho tá»«ng dÃ²ng.
  - **Discovery Report Template** (3 máº«u Ä‘iá»n sáºµn).
  - **Worked End-to-End Example**: "flow bookmark" â†’ keyword detection â†’ mapping â†’ confidence â†’ Gate 1 output.
  - YÃªu cáº§u format: > 500 words, báº£ng mapping Ä‘áº§y Ä‘á»§, 3 máº«u report, 1 worked example.
  - `[Tá»ª AUDIT TÃ€I NGUYÃŠN]` `[Tá»ª DESIGN Â§2.1 K7, Â§2.3 G6]`

---

### Phase 2: Foundation â€” Táº¡o cáº¥u trÃºc thÆ° má»¥c & SKILL.md

> **Äiá»u kiá»‡n báº¯t Ä‘áº§u**: Phase 1 pháº£i hoÃ n thÃ nh 100% (5/5 files trong `resources/`).
> **Má»¥c tiÃªu**: Dá»±ng khung skill package, viáº¿t `SKILL.md` hoÃ n chá»‰nh theo 7-Zone.

- [ ] **Task 2.1**: Táº¡o cáº¥u trÃºc thÆ° má»¥c `.agent/skills/flow-design-analyst/` vá»›i Ä‘áº§y Ä‘á»§ 7 zones
  ```
  flow-design-analyst/
  â”œâ”€â”€ SKILL.md
  â”œâ”€â”€ knowledge/
  â”œâ”€â”€ templates/
  â”œâ”€â”€ data/
  â”œâ”€â”€ loop/
  â””â”€â”€ scripts/
  ```
  `[Tá»ª DESIGN Â§4]`

- [ ] **Task 2.2**: Viáº¿t `SKILL.md` â€” Persona & Boot Sequence
  - **Persona**: *"Act as a Senior Business Analyst specializing in Business Process Flow diagrams. Your mission is to produce high-fidelity Mermaid flowchart diagrams with 3-lane swimlane (User / System / DB) from project documentation (specs, user stories). Every Action Node must be traceable to a source document. Never invent business logic â€” use Assumption Mode instead."*
  - **Boot Sequence** (mandatory Ä‘á»c khi skill kÃ­ch hoáº¡t â€” 3 files):
    1. `knowledge/resource-discovery-guide.md` â€” PhÃ¢n tÃ­ch intent & tÃ¬m tÃ i nguyÃªn
    2. `knowledge/mermaid-flowchart-guide.md` â€” CÃº phÃ¡p Mermaid
    3. `loop/flow-checklist.md` â€” 6-point self-check trÆ°á»›c khi output
  - `[Tá»ª DESIGN Â§2.3, Â§7 Táº§ng 1]`

- [ ] **Task 2.3**: Viáº¿t `SKILL.md` â€” Workflow 6 Phases vá»›i 3 Interaction Gates
  - **Phase 0 DETECT**: Äá»c `knowledge/resource-discovery-guide.md`. TrÃ­ch xuáº¥t keyword (action verb + domain noun + module hint). TÃ­nh Confidence Score theo Rubric. Ghi nháº­n káº¿t quáº£ detection.
  - **Phase 1 DISCOVER**: Tra `data/uc-id-registry.yaml` â†’ tÃ¬m UC á»©ng viÃªn. Tra `Docs/life-2/specs/` â†’ tÃ¬m spec file khá»›p. Tra `Docs/life-1/user-stories.md` â†’ tÃ¬m US liÃªn quan. Tá»•ng há»£p Discovery Report.
    - â†’ **[Gate 1]**: Náº¿u confidence â‰¥ 70%: trÃ¬nh bÃ y Discovery Report + há»i Yes/No. Náº¿u < 70%: Ä‘Æ°a numbered options. TUYá»†T Äá»I khÃ´ng há»i cÃ¢u má»Ÿ.
  - **Phase 2 EXTRACT**: Äá»c spec/US Ä‘Ã£ xÃ¡c nháº­n. TrÃ­ch xuáº¥t: Trigger, Actors, Steps, Conditions, Outcomes. Náº¿u logic thiáº¿u:
    - â†’ **[Gate 2]**: Liá»‡t kÃª pháº§n thiáº¿u + Ä‘á» xuáº¥t Assumptions â†’ xin xÃ¡c nháº­n. KhÃ´ng tá»± bá»‹a.
  - **Phase 3 STRUCTURE**: Äá»c `knowledge/actor-lane-taxonomy.md`. PhÃ¢n chia tá»«ng step vÃ o Ä‘Ãºng lane (User/System/DB). XÃ¡c Ä‘á»‹nh Decision Points + Path types (Happy/Alternative/Exception). Äá»c `knowledge/business-flow-patterns.md` náº¿u cÃ³ > 2 nhÃ¡nh.
  - **Phase 4 GENERATE**: Náº¡p `templates/swimlane-flow.mmd` lÃ m khung. Sinh Mermaid `flowchart TD` 3-lane. Gáº¯n `%% UC-ID %%` comment vÃ o Action Nodes chÃ­nh. Äáº·t tÃªn file: `flow-{business-function}.md`.
  - **Phase 5 VALIDATE**: Tá»± kiá»ƒm tra theo `loop/flow-checklist.md` (6 Ä‘iá»ƒm báº¯t buá»™c). Náº¿u fail â†’ quay láº¡i Phase 3/4 tÆ°Æ¡ng á»©ng.
    - â†’ **[Gate 3]**: TrÃ¬nh bÃ y báº£n nhÃ¡p Mermaid code + danh sÃ¡ch Assumptions (náº¿u cÃ³). Nháº­n pháº£n há»“i â†’ ghi file vÃ o `Docs/life-2/diagrams/flow/` â†’ cáº­p nháº­t `index.md`.
  - `[Tá»ª DESIGN Â§2.2, Â§5, Â§6]`

- [ ] **Task 2.4**: Viáº¿t `SKILL.md` â€” Guardrails G1â€“G6 (dáº¡ng báº£ng cá»©ng)
  - **G1 No Blind Step**: Má»i Action Node PHáº¢I cÃ³ cÄƒn cá»© tá»« spec hoáº·c US. KhÃ´ng Ä‘Æ°á»£c tá»± thÃªm â†’ pháº£i ghi vÃ o Assumptions.
  - **G2 Decision Completeness**: Má»i `{}` diamond PHáº¢I cÃ³ Ä‘á»§ táº¥t cáº£ nhÃ¡nh output, cÃ³ nhÃ£n rÃµ rÃ ng. Tuyá»‡t Ä‘á»‘i khÃ´ng Ä‘á»ƒ nhÃ¡nh há»Ÿ (dangling).
  - **G3 Lane Discipline**: Business logic â†’ System lane. DB read/write â†’ DB lane. UI trigger â†’ User lane. KhÃ´ng Ä‘Æ°á»£c Ä‘áº·t sai lane.
  - **G4 Path Termination**: Má»i nhÃ¡nh PHáº¢I cÃ³ Ä‘iá»ƒm káº¿t thÃºc: `([End])` hoáº·c endpoint rÃµ rÃ ng.
  - **G5 Assumption Required**: Khi spec chÆ°a rÃµ logic, PHáº¢I khai bÃ¡o `## Assumptions` dÆ°á»›i sÆ¡ Ä‘á»“. Tuyá»‡t Ä‘á»‘i khÃ´ng suy Ä‘oÃ¡n ngáº§m.
  - **G6 Discover Before Ask**: Skill PHáº¢I hoÃ n thÃ nh Phase 0 DETECT + Phase 1 DISCOVER trÆ°á»›c Gate 1. Gate 1 PHáº¢I kÃ¨m Discovery Report â€” KHÃ”NG Ä‘Æ°á»£c há»i cÃ¢u má»Ÿ "Báº¡n muá»‘n váº½ gÃ¬?".
  - `[Tá»ª DESIGN Â§2.3]`

- [ ] **Task 2.5**: Viáº¿t `SKILL.md` â€” Output Naming Convention & Index Management
  - Pattern: `flow-{business-function}.md` táº¡i `Docs/life-2/diagrams/flow/`
  - VÃ­ dá»¥: `flow-user-registration.md`, `flow-post-creation.md`, `flow-news-feed-ranking.md`
  - Sau má»—i file táº¡o má»›i: cáº­p nháº­t `Docs/life-2/diagrams/flow/index.md` vá»›i module vÃ  UC-ID tÆ°Æ¡ng á»©ng.
  - Náº¿u thÆ° má»¥c `Docs/life-2/diagrams/flow/` chÆ°a tá»“n táº¡i â†’ táº¡o cÃ¹ng `index.md`.
  - `[Tá»ª DESIGN Â§9 Q2]`

---

### Phase 3: Knowledge Files â€” Transform resources/ thÃ nh knowledge/

> **NguyÃªn táº¯c báº¥t biáº¿n**: Transform 100% ná»™i dung tá»« `resources/` â€” KHÃ”NG tÃ³m táº¯t, KHÃ”NG bá» sÃ³t rule, KHÃ”NG bá» sÃ³t vÃ­ dá»¥.
> **Nguá»“n gá»‘c**: ToÃ n bá»™ tasks Phase 3 trace vá» Zone Mapping Â§3 cá»§a design.md.

- [ ] **Task 3.1**: Táº¡o `knowledge/mermaid-flowchart-guide.md`
  - Transform TOÃ€N Bá»˜ tá»« `resources/mermaid-flowchart-reference.md`.
  - Cáº¥u trÃºc 6 sections Báº®T BUá»˜C:
    1. `## 1. Node Shape Reference` â€” báº£ng Ä‘áº§y Ä‘á»§ táº¥t cáº£ shapes vá»›i syntax + vÃ­ dá»¥
    2. `## 2. Edge Types` â€” táº¥t cáº£ edge types vá»›i vÃ­ dá»¥
    3. `## 3. Swimlane (Subgraph) Syntax` â€” cÃ¡ch viáº¿t 3-lane, lá»“ng ghÃ©p, style
    4. `## 4. Safe Label Rules` â€” quote `""`, `<br/>` vs `\n`, escape chars, node ID constraints
    5. `## 5. Decision Node Rules` â€” mandatory 2+ branches, label requirements
    6. `## 6. Complete 3-Lane Example` â€” flowchart TD hoÃ n chá»‰nh vá»›i decision + 3 paths
  - Tham chiáº¿u `activity-uml-rules.md Â§6` Ä‘á»ƒ Ä‘á»“ng nháº¥t safe label convention (Q3 Â§9).
  - `[Tá»ª DESIGN Â§3 - knowledge/mermaid-flowchart-guide.md]`

- [ ] **Task 3.2**: Táº¡o `knowledge/business-flow-patterns.md`
  - Transform TOÃ€N Bá»˜ tá»« `resources/business-flow-patterns.md`.
  - 4 sections: Happy Path, Alternative Path, Exception Path, Combined Example.
  - Má»—i pattern: tÃªn, Ä‘á»‹nh nghÄ©a, khi nÃ o dÃ¹ng, dáº¥u hiá»‡u nháº­n biáº¿t trong spec/US, Mermaid snippet cÃ³ label rÃµ rÃ ng.
  - `[Tá»ª DESIGN Â§3 - knowledge/business-flow-patterns.md]`

- [ ] **Task 3.3**: Táº¡o `knowledge/actor-lane-taxonomy.md`
  - Transform TOÃ€N Bá»˜ tá»« `resources/actor-lane-taxonomy.md`.
  - 3 sections:
    1. Báº£ng Ä‘á»‹nh nghÄ©a 3 lanes vá»›i KLTN context
    2. Decision Table "Action â†’ Lane" (20+ vÃ­ dá»¥)
    3. VÃ­ dá»¥ Ä‘Ãºng/sai cÃ³ chÃº thÃ­ch (3 cáº·p)
  - `[Tá»ª DESIGN Â§3 - knowledge/actor-lane-taxonomy.md]`

- [ ] **Task 3.4**: Táº¡o `knowledge/resource-discovery-guide.md`
  - Transform TOÃ€N Bá»˜ tá»« `resources/resource-discovery-guide.md`.
  - 6 sections Báº®T BUá»˜C:
    1. Intent Parsing Framework (3 loáº¡i keyword)
    2. Keyword-to-UC Mapping Table (Ä‘áº§y Ä‘á»§ M1â€“M6, VI + EN)
    3. Confidence Score Rubric (thang Ä‘iá»ƒm + ngÆ°á»¡ng 70%)
    4. Quy táº¯c phÃ¢n nhÃ¡nh (confident vs. ambiguous)
    5. Discovery Report Template (3 máº«u: rÃµ/bÃ¡n mÆ¡/mÆ¡ há»“)
    6. Worked End-to-End Example
  - ÄÃ¢y lÃ  file cá»‘t lÃµi cho Phase 0 DETECT vÃ  G6 "Discover Before Ask" â€” KHÃ”NG Ä‘Æ°á»£c tÃ³m táº¯t.
  - `[Tá»ª DESIGN Â§2.1 K7, Â§2.3 G6, Â§3 - knowledge/resource-discovery-guide.md]`

---

### Phase 4: Templates & Data â€” Táº¡o máº«u vÃ  registry

- [ ] **Task 4.1**: Táº¡o `templates/swimlane-flow.mmd`
  - Khung flowchart TD 3-lane chuáº©n vá»›i placeholder rÃµ rÃ ng. Template PHáº¢I valid Mermaid syntax khi render (ngay cáº£ khi placeholder cÃ²n Ä‘Ã³):
  ```
  flowchart TD
    subgraph User ["ğŸ‘¤ User"]
      %%PLACEHOLDER_USER_ACTIONS%%
    end
    subgraph System ["âš™ï¸ System"]
      %%PLACEHOLDER_SYSTEM_LOGIC%%
    end
    subgraph DB ["ğŸ—„ï¸ Database"]
      %%PLACEHOLDER_DB_OPS%%
    end
    %% Business Function: %%BUSINESS_FUNCTION%%
    %% UC-ID: %%UC_ID%%
    %% Generated: %%DATE%%
  ```
  - KÃ¨m comment giáº£i thÃ­ch cÃ¡ch Ä‘iá»n placeholder.
  - `[Tá»ª DESIGN Â§3 - templates/swimlane-flow.mmd]`

- [ ] **Task 4.2**: Táº¡o `data/uc-id-registry.yaml`
  - Äá»c `Docs/life-2/diagrams/UseCase/index.md` trÆ°á»›c (tá»•ng há»£p nhanh), sau Ä‘Ã³ Ä‘á»c tá»«ng file M1â€“M6 Ä‘á»ƒ bá»• sung.
  - Cáº¥u trÃºc YAML: `module â†’ [{ id, name, actors, keywords[] }]`
  - QUAN TRá»ŒNG: Máº£ng `keywords` PHáº¢I cÃ³ tá»« khoÃ¡ tiáº¿ng Viá»‡t + tiáº¿ng Anh â€” dÃ¹ng cho Phase 0 DETECT keyword matching.
  - VÃ­ dá»¥ chuáº©n:
  ```yaml
  M1:
    - id: UC-M1-01
      name: ÄÄƒng kÃ½ tÃ i khoáº£n
      actors: [Guest]
      keywords: ["Ä‘Äƒng kÃ½", "register", "táº¡o tÃ i khoáº£n", "sign up", "táº¡o account"]
    - id: UC-M1-02
      name: ÄÄƒng nháº­p
      actors: [User]
      keywords: ["Ä‘Äƒng nháº­p", "login", "sign in", "xÃ¡c thá»±c", "authenticate"]
  ```
  - Pháº£i bao gá»“m Táº¤T Cáº¢ UC tá»« M1 Ä‘áº¿n M6.
  - `[Tá»ª DESIGN Â§3 - data/uc-id-registry.yaml]`

---

### Phase 5: Loop & Validation â€” CÆ¡ cháº¿ tá»± kiá»ƒm tra

- [ ] **Task 5.1**: Táº¡o `loop/flow-checklist.md`
  - 6 Ä‘iá»ƒm kiá»ƒm tra Báº®T BUá»˜C, dáº¡ng checkbox, kÃ¨m hÃ nh Ä‘á»™ng sá»­a khi fail:

  | # | Äiá»ƒm kiá»ƒm tra | HÃ nh Ä‘á»™ng khi Fail |
  |---|--------------|-------------------|
  | C1 | **Lane Discipline**: Má»i node Ä‘áº·t Ä‘Ãºng lane theo `actor-lane-taxonomy.md` | Xem láº¡i báº£ng Decision Table, di chuyá»ƒn node sang lane Ä‘Ãºng |
  | C2 | **Decision Completeness**: Má»i `{}` diamond cÃ³ â‰¥ 2 nhÃ¡nh output, má»—i nhÃ¡nh cÃ³ label rÃµ rÃ ng | ThÃªm nhÃ¡nh cÃ²n thiáº¿u, Ä‘áº·t nhÃ£n Ä‘áº§y Ä‘á»§ |
  | C3 | **Path Termination**: Má»i nhÃ¡nh káº¿t thÃºc báº±ng `([End])` hoáº·c endpoint cÃ³ tÃªn rÃµ rÃ ng | ThÃªm End node cho nhÃ¡nh thiáº¿u |
  | C4 | **Traceability**: Má»i Action Node chÃ­nh cÃ³ comment `%% UC-ID %%` hoáº·c ghi rÃµ nguá»“n | Má»Ÿ `data/uc-id-registry.yaml`, gáº¯n ID tÆ°Æ¡ng á»©ng |
  | C5 | **Assumptions**: Náº¿u cÃ³ logic tá»± suy luáº­n â†’ cÃ³ section `## Assumptions` dÆ°á»›i sÆ¡ Ä‘á»“, liá»‡t kÃª rÃµ tá»«ng giáº£ Ä‘á»‹nh | ThÃªm section Assumptions vá»›i Ä‘áº§y Ä‘á»§ ná»™i dung |
  | C6 | **Mermaid Syntax**: KhÃ´ng cÃ³ kÃ½ tá»± unsafe, label dÃ¹ng `""`, khÃ´ng dÃ¹ng `\n`, khÃ´ng cÃ³ dangling node | DÃ¹ng `scripts/flow_lint.py` hoáº·c kiá»ƒm tra thá»§ cÃ´ng theo `mermaid-flowchart-guide.md Â§4` |

  - `[Tá»ª DESIGN Â§3 - loop/flow-checklist.md, Â§2.3 G1â€“G5]`

- [ ] **Task 5.2** *(Optional)*: Táº¡o `scripts/flow_lint.py`
  - KÃ­ch hoáº¡t khi: diagram cÃ³ trÃªn 15 nodes (theo Â§7 Táº§ng 2 cá»§a design.md).
  - Chá»©c nÄƒng: Parse Mermaid code, phÃ¡t hiá»‡n:
    1. Node ID khai bÃ¡o nhÆ°ng khÃ´ng cÃ³ báº¥t ká»³ edge nÃ o (dangling node)
    2. Decision node `{}` chá»‰ cÃ³ 1 nhÃ¡nh output
    3. KÃ½ tá»± `\n` trong label string (thay vÃ¬ `<br/>`)
    4. Label cÃ³ kÃ½ tá»± Ä‘áº·c biá»‡t nhÆ°ng thiáº¿u dáº¥u `""`
  - Output: Danh sÃ¡ch warnings vá»›i sá»‘ dÃ²ng tÆ°Æ¡ng á»©ng, exit code 0 (pass) / 1 (fail).
  - `[Tá»ª DESIGN Â§3 - scripts/flow_lint.py, Â§8 R5]`

---

## 3. Knowledge & Resources Needed

| # | TÃ i liá»‡u | Má»¥c Ä‘Ã­ch | Tráº¡ng thÃ¡i |
|---|---------|---------|-----------|
| 1 | `Docs/life-2/diagrams/UseCase/index.md` | Nguá»“n tá»•ng há»£p UC-ID nhanh cho Task 4.2 | âœ… CÃ³ sáºµn |
| 2 | `Docs/life-2/diagrams/UseCase/use-case-m*.md` (M1â€“M6) | Chi tiáº¿t UC-ID + actors cho registry | âœ… CÃ³ sáºµn |
| 3 | `activity-diagram-design-analyst/knowledge/activity-uml-rules.md` | Safe label convention, Ä‘á»“ng nháº¥t vá»›i skills hiá»‡n cÃ³ | âœ… CÃ³ sáºµn |
| 4 | `Docs/life-2/specs/` (cÃ¡c file spec module M1â€“M6) | Tham chiáº¿u viáº¿t vÃ­ dá»¥ trong spec-extraction-guide.md + Task 4.2 | âœ… CÃ³ sáºµn |
| 5 | `Docs/life-1/user-stories.md` | Tham chiáº¿u viáº¿t vÃ­ dá»¥ trong spec-extraction-guide.md | âœ… CÃ³ sáºµn |
| 6 | Mermaid official docs (flowchart, subgraph) | CÃº phÃ¡p chuáº©n â€” tra cá»©u khi soáº¡n Task 1.1 | â“ Cáº§n tra cá»©u online khi soáº¡n resources/ |
| 7 | `sequence-design-analyst/SKILL.md` | Tham chiáº¿u cáº¥u trÃºc SKILL.md Ä‘á»ƒ Ä‘á»“ng nháº¥t phong cÃ¡ch | âœ… CÃ³ sáºµn |

---

## 4. Definition of Done

- [ ] `resources/` cÃ³ Ä‘á»§ 5 files: `mermaid-flowchart-reference.md`, `business-flow-patterns.md`, `actor-lane-taxonomy.md`, `spec-extraction-guide.md`, `resource-discovery-guide.md`
- [ ] Cáº¥u trÃºc thÆ° má»¥c Ä‘Ãºng 7-Zone: `knowledge/`, `templates/`, `data/`, `loop/`, `scripts/` (optional)
- [ ] `SKILL.md` cÃ³ Ä‘á»§: Persona, Boot Sequence (3 files), Workflow 6 Phases (Phase 0 DETECT â†’ Phase 5 VALIDATE), 3 Interaction Gates, Guardrails G1â€“G6 (bao gá»“m G6 Discover Before Ask), Output Naming Convention
- [ ] `knowledge/mermaid-flowchart-guide.md` â€” Ä‘á»§ 6 sections, cÃ³ vÃ­ dá»¥ 3-lane flowchart hoÃ n chá»‰nh
- [ ] `knowledge/business-flow-patterns.md` â€” Ä‘á»§ 3 path types vá»›i Mermaid snippet + combined example
- [ ] `knowledge/actor-lane-taxonomy.md` â€” cÃ³ Decision Table 20+ vÃ­ dá»¥, 3 cáº·p Ä‘Ãºng/sai
- [ ] `knowledge/resource-discovery-guide.md` â€” Ä‘á»§ 6 sections, cÃ³ Keyword-to-UC Mapping Table M1â€“M6, 3 Discovery Report máº«u, 1 worked example
- [ ] `templates/swimlane-flow.mmd` â€” khung 3-lane vá»›i placeholder chuáº©n, valid Mermaid syntax
- [ ] `data/uc-id-registry.yaml` â€” tá»•ng há»£p Ä‘á»§ M1â€“M6, má»—i UC cÃ³ máº£ng `keywords` (VI + EN)
- [ ] `loop/flow-checklist.md` â€” Ä‘á»§ 6 Ä‘iá»ƒm kiá»ƒm tra vá»›i hÃ nh Ä‘á»™ng sá»­a khi fail
- [ ] **Smoke test**: Skill váº½ Ä‘Æ°á»£c `flow-user-registration.md` cho UC-M1-01 (sá»­ dá»¥ng spec `m1-auth-profile-spec.md`) â€” pass táº¥t cáº£ 6 checklist points

---

## 5. Notes

### Æ¯u tiÃªn triá»ƒn khai cho Builder

1. **Báº¯t Ä‘áº§u ngay vá»›i Task 1.5** (`resource-discovery-guide.md`): ÄÃ¢y lÃ  tÃ i liá»‡u má»›i nháº¥t vÃ  phá»©c táº¡p nháº¥t â€” block cáº£ Phase 0 DETECT vÃ  G6 "Discover Before Ask". Soáº¡n **trÆ°á»›c** cÃ¡c tasks khÃ¡c.

2. **Task 1.1 Æ°u tiÃªn thá»© 2** (`mermaid-flowchart-reference.md`): Block Task 3.1, 4.1 vÃ  Task 2.3 (vÃ­ dá»¥ trong SKILL.md). Pháº£i cÃ³ vÃ­ dá»¥ swimlane 3-lane **Ä‘Ã£ test render** â€” khÃ´ng Ä‘Æ°á»£c dÃ¹ng untested code.

3. **Task 1.3 vÃ  1.4 cÃ³ thá»ƒ lÃ m song song** vÃ¬ khÃ´ng phá»¥ thuá»™c nhau.

4. **UC-ID Registry** (Task 4.2): Äá»c `UseCase/index.md` trÆ°á»›c â€” file nÃ y thÆ°á»ng Ä‘Ã£ cÃ³ tá»•ng há»£p, giÃºp tiáº¿t kiá»‡m effort Ä‘á»c M1â€“M6 riÃªng láº».

### Äiá»ƒm cáº§n chÃº Ã½ khi Build

| Váº¥n Ä‘á» | CÃ¡ch xá»­ lÃ½ |
|--------|-----------|
| Mermaid swimlane `subgraph` label pháº£i Ä‘Æ°á»£c quote | Äá»c ká»¹ Task 1.1 â€” safe label rules lÃ  critical |
| `resource-discovery-guide.md` pháº£i Ä‘á»§ chi tiáº¿t Ä‘á»ƒ Agent tá»± tÃ­nh Confidence Score | Keyword-to-UC table pháº£i cover Táº¤T Cáº¢ modules KLTN |
| Äá»“ng nháº¥t node naming vá»›i `activity-diagram-design-analyst` | Tham chiáº¿u `activity-uml-rules.md Â§6` khi viáº¿t Task 3.1 |
| Output directory `Docs/life-2/diagrams/flow/` chÆ°a tá»“n táº¡i | Skill pháº£i táº¡o thÆ° má»¥c + `index.md` khi ghi file Ä‘áº§u tiÃªn |
| Phase 0 DETECT pháº£i LUÃ”N cháº¡y trÆ°á»›c má»i tÆ°Æ¡ng tÃ¡c | G6 lÃ  guardrail cá»©ng â€” viáº¿t rÃµ trong SKILL.md |

### Open Questions cÃ²n láº¡i [Cáº¦N LÃ€M RÃ• cho Builder]

| # | CÃ¢u há»i | HÆ°á»›ng giáº£i quyáº¿t |
|---|--------|-----------------|
| Q3 | Äá»“ng nháº¥t naming node vá»›i `activity-diagram-design-analyst` á»Ÿ má»©c Ä‘á»™ nÃ o? | Builder Ä‘á»c `activity-uml-rules.md Â§6`, Ã¡p dá»¥ng safe label rules tÆ°Æ¡ng Ä‘Æ°Æ¡ng khi viáº¿t Task 3.1 [Tá»ª DESIGN Â§9 Q3] |

### Risks cáº§n phÃ²ng trÃ¡nh trong Build

| Risk | Dáº¥u hiá»‡u nháº­n biáº¿t | CÃ¡ch phÃ²ng |
|------|--------------------|-----------|
| Knowledge files tÃ³m táº¯t thay vÃ¬ transform Ä‘áº§y Ä‘á»§ | File < 200 words, thiáº¿u vÃ­ dá»¥ | Ãp dá»¥ng nguyÃªn táº¯c "Transform 100%, khÃ´ng tÃ³m táº¯t" cho Phase 3 |
| SKILL.md quÃ¡ dÃ i â†’ Agent khÃ³ parse | > 500 lines trong SKILL.md | DÃ¹ng Progressive Disclosure: chi tiáº¿t â†’ knowledge/, SKILL.md chá»‰ chá»©a workflow + guardrails |
| `resource-discovery-guide.md` thiáº¿u Keyword-to-UC Mapping Table | Agent khÃ´ng thá»ƒ DETECT intent â†’ há»i cÃ¢u má»Ÿ â†’ vi pháº¡m G6 | Viáº¿t báº£ng mapping Ä‘áº§y Ä‘á»§ trong Task 1.5 trÆ°á»›c khi proceed |
| Mermaid swimlane syntax sai â†’ render error | Subgraph label chÆ°a Ä‘Æ°á»£c quote, kÃ½ tá»± `\n` | Task 1.1 PHáº¢I include vÃ­ dá»¥ render-tested 3-lane |
